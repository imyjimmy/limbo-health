<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>LimboEditor</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function iw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zh={exports:{}},kl={};var Bb;function EC(){if(Bb)return kl;Bb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(r,i,o){var a=null;if(o!==void 0&&(a=""+o),i.key!==void 0&&(a=""+i.key),"key"in i){o={};for(var c in i)c!=="key"&&(o[c]=i[c])}else o=i;return i=o.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:o}}return kl.Fragment=t,kl.jsx=e,kl.jsxs=e,kl}var Lb;function CC(){return Lb||(Lb=1,Zh.exports=EC()),Zh.exports}var fe=CC(),Wh={exports:{}},wl={},tp={exports:{}},ep={};var Hb;function AC(){return Hb||(Hb=1,(function(n){function t($,F){var lt=$.length;$.push(F);t:for(;0<lt;){var Lt=lt-1>>>1,C=$[Lt];if(0<i(C,F))$[Lt]=F,$[lt]=C,lt=Lt;else break t}}function e($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var F=$[0],lt=$.pop();if(lt!==F){$[0]=lt;t:for(var Lt=0,C=$.length,P=C>>>1;Lt<P;){var X=2*(Lt+1)-1,Q=$[X],it=X+1,St=$[it];if(0>i(Q,lt))it<C&&0>i(St,Q)?($[Lt]=St,$[it]=lt,Lt=it):($[Lt]=Q,$[X]=lt,Lt=X);else if(it<C&&0>i(St,lt))$[Lt]=St,$[it]=lt,Lt=it;else break t}}return F}function i($,F){var lt=$.sortIndex-F.sortIndex;return lt!==0?lt:$.id-F.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var f=[],h=[],p=1,g=null,y=3,b=!1,k=!1,x=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function V($){for(var F=e(h);F!==null;){if(F.callback===null)r(h);else if(F.startTime<=$)r(h),F.sortIndex=F.expirationTime,t(f,F);else break;F=e(h)}}function L($){if(x=!1,V($),!k)if(e(f)!==null)k=!0,I||(I=!0,Ut());else{var F=e(h);F!==null&&ht(L,F.startTime-$)}}var I=!1,q=-1,Y=5,nt=-1;function Qt(){return S?!0:!(n.unstable_now()-nt<Y)}function de(){if(S=!1,I){var $=n.unstable_now();nt=$;var F=!0;try{t:{k=!1,x&&(x=!1,D(q),q=-1),b=!0;var lt=y;try{e:{for(V($),g=e(f);g!==null&&!(g.expirationTime>$&&Qt());){var Lt=g.callback;if(typeof Lt=="function"){g.callback=null,y=g.priorityLevel;var C=Lt(g.expirationTime<=$);if($=n.unstable_now(),typeof C=="function"){g.callback=C,V($),F=!0;break e}g===e(f)&&r(f),V($)}else r(f);g=e(f)}if(g!==null)F=!0;else{var P=e(h);P!==null&&ht(L,P.startTime-$),F=!1}}break t}finally{g=null,y=lt,b=!1}F=void 0}}finally{F?Ut():I=!1}}}var Ut;if(typeof H=="function")Ut=function(){H(de)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Ct=Pe.port2;Pe.port1.onmessage=de,Ut=function(){Ct.postMessage(null)}}else Ut=function(){T(de,0)};function ht($,F){q=T(function(){$(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return y},n.unstable_next=function($){switch(y){case 1:case 2:case 3:var F=3;break;default:F=y}var lt=y;y=F;try{return $()}finally{y=lt}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function($,F){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var lt=y;y=$;try{return F()}finally{y=lt}},n.unstable_scheduleCallback=function($,F,lt){var Lt=n.unstable_now();switch(typeof lt=="object"&&lt!==null?(lt=lt.delay,lt=typeof lt=="number"&&0<lt?Lt+lt:Lt):lt=Lt,$){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=lt+C,$={id:p++,callback:F,priorityLevel:$,startTime:lt,expirationTime:C,sortIndex:-1},lt>Lt?($.sortIndex=lt,t(h,$),e(f)===null&&$===e(h)&&(x?(D(q),q=-1):x=!0,ht(L,lt-Lt))):($.sortIndex=C,t(f,$),k||b||(k=!0,I||(I=!0,Ut()))),$},n.unstable_shouldYield=Qt,n.unstable_wrapCallback=function($){var F=y;return function(){var lt=y;y=F;try{return $.apply(this,arguments)}finally{y=lt}}}})(ep)),ep}var $b;function OC(){return $b||($b=1,tp.exports=AC()),tp.exports}var np={exports:{}},pt={};var jb;function RC(){if(jb)return pt;jb=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function y(C){return C===null||typeof C!="object"?null:(C=g&&C[g]||C["@@iterator"],typeof C=="function"?C:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,x={};function S(C,P,X){this.props=C,this.context=P,this.refs=x,this.updater=X||b}S.prototype.isReactComponent={},S.prototype.setState=function(C,P){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,P,"setState")},S.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function T(){}T.prototype=S.prototype;function D(C,P,X){this.props=C,this.context=P,this.refs=x,this.updater=X||b}var H=D.prototype=new T;H.constructor=D,k(H,S.prototype),H.isPureReactComponent=!0;var V=Array.isArray,L={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function q(C,P,X,Q,it,St){return X=St.ref,{$$typeof:n,type:C,key:P,ref:X!==void 0?X:null,props:St}}function Y(C,P){return q(C.type,P,void 0,void 0,void 0,C.props)}function nt(C){return typeof C=="object"&&C!==null&&C.$$typeof===n}function Qt(C){var P={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(X){return P[X]})}var de=/\/+/g;function Ut(C,P){return typeof C=="object"&&C!==null&&C.key!=null?Qt(""+C.key):P.toString(36)}function Pe(){}function Ct(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Pe,Pe):(C.status="pending",C.then(function(P){C.status==="pending"&&(C.status="fulfilled",C.value=P)},function(P){C.status==="pending"&&(C.status="rejected",C.reason=P)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function ht(C,P,X,Q,it){var St=typeof C;(St==="undefined"||St==="boolean")&&(C=null);var dt=!1;if(C===null)dt=!0;else switch(St){case"bigint":case"string":case"number":dt=!0;break;case"object":switch(C.$$typeof){case n:case t:dt=!0;break;case p:return dt=C._init,ht(dt(C._payload),P,X,Q,it)}}if(dt)return it=it(C),dt=Q===""?"."+Ut(C,0):Q,V(it)?(X="",dt!=null&&(X=dt.replace(de,"$&/")+"/"),ht(it,P,X,"",function(Tr){return Tr})):it!=null&&(nt(it)&&(it=Y(it,X+(it.key==null||C&&C.key===it.key?"":(""+it.key).replace(de,"$&/")+"/")+dt)),P.push(it)),1;dt=0;var en=Q===""?".":Q+":";if(V(C))for(var Pt=0;Pt<C.length;Pt++)Q=C[Pt],St=en+Ut(Q,Pt),dt+=ht(Q,P,X,St,it);else if(Pt=y(C),typeof Pt=="function")for(C=Pt.call(C),Pt=0;!(Q=C.next()).done;)Q=Q.value,St=en+Ut(Q,Pt++),dt+=ht(Q,P,X,St,it);else if(St==="object"){if(typeof C.then=="function")return ht(Ct(C),P,X,Q,it);throw P=String(C),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return dt}function $(C,P,X){if(C==null)return C;var Q=[],it=0;return ht(C,Q,"","",function(St){return P.call(X,St,it++)}),Q}function F(C){if(C._status===-1){var P=C._result;P=P(),P.then(function(X){(C._status===0||C._status===-1)&&(C._status=1,C._result=X)},function(X){(C._status===0||C._status===-1)&&(C._status=2,C._result=X)}),C._status===-1&&(C._status=0,C._result=P)}if(C._status===1)return C._result.default;throw C._result}var lt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Lt(){}return pt.Children={map:$,forEach:function(C,P,X){$(C,function(){P.apply(this,arguments)},X)},count:function(C){var P=0;return $(C,function(){P++}),P},toArray:function(C){return $(C,function(P){return P})||[]},only:function(C){if(!nt(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},pt.Component=S,pt.Fragment=e,pt.Profiler=i,pt.PureComponent=D,pt.StrictMode=r,pt.Suspense=f,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=L,pt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return L.H.useMemoCache(C)}},pt.cache=function(C){return function(){return C.apply(null,arguments)}},pt.cloneElement=function(C,P,X){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var Q=k({},C.props),it=C.key,St=void 0;if(P!=null)for(dt in P.ref!==void 0&&(St=void 0),P.key!==void 0&&(it=""+P.key),P)!I.call(P,dt)||dt==="key"||dt==="__self"||dt==="__source"||dt==="ref"&&P.ref===void 0||(Q[dt]=P[dt]);var dt=arguments.length-2;if(dt===1)Q.children=X;else if(1<dt){for(var en=Array(dt),Pt=0;Pt<dt;Pt++)en[Pt]=arguments[Pt+2];Q.children=en}return q(C.type,it,void 0,void 0,St,Q)},pt.createContext=function(C){return C={$$typeof:a,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:o,_context:C},C},pt.createElement=function(C,P,X){var Q,it={},St=null;if(P!=null)for(Q in P.key!==void 0&&(St=""+P.key),P)I.call(P,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(it[Q]=P[Q]);var dt=arguments.length-2;if(dt===1)it.children=X;else if(1<dt){for(var en=Array(dt),Pt=0;Pt<dt;Pt++)en[Pt]=arguments[Pt+2];it.children=en}if(C&&C.defaultProps)for(Q in dt=C.defaultProps,dt)it[Q]===void 0&&(it[Q]=dt[Q]);return q(C,St,void 0,void 0,null,it)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(C){return{$$typeof:c,render:C}},pt.isValidElement=nt,pt.lazy=function(C){return{$$typeof:p,_payload:{_status:-1,_result:C},_init:F}},pt.memo=function(C,P){return{$$typeof:h,type:C,compare:P===void 0?null:P}},pt.startTransition=function(C){var P=L.T,X={};L.T=X;try{var Q=C(),it=L.S;it!==null&&it(X,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(Lt,lt)}catch(St){lt(St)}finally{L.T=P}},pt.unstable_useCacheRefresh=function(){return L.H.useCacheRefresh()},pt.use=function(C){return L.H.use(C)},pt.useActionState=function(C,P,X){return L.H.useActionState(C,P,X)},pt.useCallback=function(C,P){return L.H.useCallback(C,P)},pt.useContext=function(C){return L.H.useContext(C)},pt.useDebugValue=function(){},pt.useDeferredValue=function(C,P){return L.H.useDeferredValue(C,P)},pt.useEffect=function(C,P,X){var Q=L.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(C,P)},pt.useId=function(){return L.H.useId()},pt.useImperativeHandle=function(C,P,X){return L.H.useImperativeHandle(C,P,X)},pt.useInsertionEffect=function(C,P){return L.H.useInsertionEffect(C,P)},pt.useLayoutEffect=function(C,P){return L.H.useLayoutEffect(C,P)},pt.useMemo=function(C,P){return L.H.useMemo(C,P)},pt.useOptimistic=function(C,P){return L.H.useOptimistic(C,P)},pt.useReducer=function(C,P,X){return L.H.useReducer(C,P,X)},pt.useRef=function(C){return L.H.useRef(C)},pt.useState=function(C){return L.H.useState(C)},pt.useSyncExternalStore=function(C,P,X){return L.H.useSyncExternalStore(C,P,X)},pt.useTransition=function(){return L.H.useTransition()},pt.version="19.1.0",pt}var Ib;function va(){return Ib||(Ib=1,np.exports=RC()),np.exports}var rp={exports:{}},Re={};var _b;function NC(){if(_b)return Re;_b=1;var n=va();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var r={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(f,h,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:f,containerInfo:h,implementation:p}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Re.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Re.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(f,h,null,p)},Re.flushSync=function(f){var h=a.T,p=r.p;try{if(a.T=null,r.p=2,f)return f()}finally{a.T=h,r.p=p,r.d.f()}},Re.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(f,h))},Re.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Re.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?r.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:y,fetchPriority:b}):p==="script"&&r.d.X(f,{crossOrigin:g,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Re.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);r.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(f)},Re.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,g=c(p,h.crossOrigin);r.d.L(f,p,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Re.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);r.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(f)},Re.requestFormReset=function(f){r.d.r(f)},Re.unstable_batchedUpdates=function(f,h){return f(h)},Re.useFormState=function(f,h,p){return a.H.useFormState(f,h,p)},Re.useFormStatus=function(){return a.H.useHostTransitionStatus()},Re.version="19.1.0",Re}var Ub;function sw(){if(Ub)return rp.exports;Ub=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),rp.exports=NC(),rp.exports}var qb;function zC(){if(qb)return wl;qb=1;var n=OC(),t=va(),e=sw();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)l+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var l=s,u=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(u=l.return),s=l.return;while(s)}return l.tag===3?u:null}function a(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(o(s)!==s)throw Error(r(188))}function f(s){var l=s.alternate;if(!l){if(l=o(s),l===null)throw Error(r(188));return l!==s?null:s}for(var u=s,d=l;;){var m=u.return;if(m===null)break;var v=m.alternate;if(v===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===u)return c(m),s;if(v===d)return c(m),l;v=v.sibling}throw Error(r(188))}if(u.return!==d.return)u=m,d=v;else{for(var w=!1,M=m.child;M;){if(M===u){w=!0,u=m,d=v;break}if(M===d){w=!0,d=m,u=v;break}M=M.sibling}if(!w){for(M=v.child;M;){if(M===u){w=!0,u=v,d=m;break}if(M===d){w=!0,d=v,u=m;break}M=M.sibling}if(!w)throw Error(r(189))}}if(u.alternate!==d)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),D=Symbol.for("react.consumer"),H=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),Qt=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function Ut(s){return s===null||typeof s!="object"?null:(s=de&&s[de]||s["@@iterator"],typeof s=="function"?s:null)}var Pe=Symbol.for("react.client.reference");function Ct(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===Pe?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case S:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case I:return"SuspenseList";case nt:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case H:return(s.displayName||"Context")+".Provider";case D:return(s._context.displayName||"Context")+".Consumer";case V:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case q:return l=s.displayName||null,l!==null?l:Ct(s.type)||"Memo";case Y:l=s._payload,s=s._init;try{return Ct(s(l))}catch{}}return null}var ht=Array.isArray,$=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,lt={pending:!1,data:null,method:null,action:null},Lt=[],C=-1;function P(s){return{current:s}}function X(s){0>C||(s.current=Lt[C],Lt[C]=null,C--)}function Q(s,l){C++,Lt[C]=s.current,s.current=l}var it=P(null),St=P(null),dt=P(null),en=P(null);function Pt(s,l){switch(Q(dt,l),Q(St,s),Q(it,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?ab(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=ab(l),s=cb(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}X(it),Q(it,s)}function Tr(){X(it),X(St),X(dt)}function $f(s){s.memoizedState!==null&&Q(en,s);var l=it.current,u=cb(l,s.type);l!==u&&(Q(St,s),Q(it,u))}function Ma(s){St.current===s&&(X(it),X(St)),en.current===s&&(X(en),ml._currentValue=lt)}var jf=Object.prototype.hasOwnProperty,If=n.unstable_scheduleCallback,_f=n.unstable_cancelCallback,iT=n.unstable_shouldYield,sT=n.unstable_requestPaint,Un=n.unstable_now,oT=n.unstable_getCurrentPriorityLevel,qg=n.unstable_ImmediatePriority,Vg=n.unstable_UserBlockingPriority,Ta=n.unstable_NormalPriority,lT=n.unstable_LowPriority,Pg=n.unstable_IdlePriority,aT=n.log,cT=n.unstable_setDisableYieldValue,So=null,nn=null;function Er(s){if(typeof aT=="function"&&cT(s),nn&&typeof nn.setStrictMode=="function")try{nn.setStrictMode(So,s)}catch{}}var rn=Math.clz32?Math.clz32:dT,uT=Math.log,fT=Math.LN2;function dT(s){return s>>>=0,s===0?32:31-(uT(s)/fT|0)|0}var Ea=256,Ca=4194304;function gi(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Aa(s,l,u){var d=s.pendingLanes;if(d===0)return 0;var m=0,v=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var M=d&134217727;return M!==0?(d=M&~v,d!==0?m=gi(d):(w&=M,w!==0?m=gi(w):u||(u=M&~s,u!==0&&(m=gi(u))))):(M=d&~v,M!==0?m=gi(M):w!==0?m=gi(w):u||(u=d&~s,u!==0&&(m=gi(u)))),m===0?0:l!==0&&l!==m&&(l&v)===0&&(v=m&-m,u=l&-l,v>=u||v===32&&(u&4194048)!==0)?l:m}function Mo(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function hT(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jg(){var s=Ea;return Ea<<=1,(Ea&4194048)===0&&(Ea=256),s}function Gg(){var s=Ca;return Ca<<=1,(Ca&62914560)===0&&(Ca=4194304),s}function Uf(s){for(var l=[],u=0;31>u;u++)l.push(s);return l}function To(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function pT(s,l,u,d,m,v){var w=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var M=s.entanglements,E=s.expirationTimes,N=s.hiddenUpdates;for(u=w&~u;0<u;){var j=31-rn(u),U=1<<j;M[j]=0,E[j]=-1;var z=N[j];if(z!==null)for(N[j]=null,j=0;j<z.length;j++){var B=z[j];B!==null&&(B.lane&=-536870913)}u&=~U}d!==0&&Kg(s,d,0),v!==0&&m===0&&s.tag!==0&&(s.suspendedLanes|=v&~(w&~l))}function Kg(s,l,u){s.pendingLanes|=l,s.suspendedLanes&=~l;var d=31-rn(l);s.entangledLanes|=l,s.entanglements[d]=s.entanglements[d]|1073741824|u&4194090}function Yg(s,l){var u=s.entangledLanes|=l;for(s=s.entanglements;u;){var d=31-rn(u),m=1<<d;m&l|s[d]&l&&(s[d]|=l),u&=~m}}function qf(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Vf(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Fg(){var s=F.p;return s!==0?s:(s=window.event,s===void 0?32:Ab(s.type))}function mT(s,l){var u=F.p;try{return F.p=s,l()}finally{F.p=u}}var Cr=Math.random().toString(36).slice(2),Ae="__reactFiber$"+Cr,Je="__reactProps$"+Cr,us="__reactContainer$"+Cr,Pf="__reactEvents$"+Cr,gT="__reactListeners$"+Cr,yT="__reactHandles$"+Cr,Qg="__reactResources$"+Cr,Eo="__reactMarker$"+Cr;function Jf(s){delete s[Ae],delete s[Je],delete s[Pf],delete s[gT],delete s[yT]}function fs(s){var l=s[Ae];if(l)return l;for(var u=s.parentNode;u;){if(l=u[us]||u[Ae]){if(u=l.alternate,l.child!==null||u!==null&&u.child!==null)for(s=hb(s);s!==null;){if(u=s[Ae])return u;s=hb(s)}return l}s=u,u=s.parentNode}return null}function ds(s){if(s=s[Ae]||s[us]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function Co(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function hs(s){var l=s[Qg];return l||(l=s[Qg]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function he(s){s[Eo]=!0}var Xg=new Set,Zg={};function yi(s,l){ps(s,l),ps(s+"Capture",l)}function ps(s,l){for(Zg[s]=l,s=0;s<l.length;s++)Xg.add(l[s])}var vT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wg={},ty={};function bT(s){return jf.call(ty,s)?!0:jf.call(Wg,s)?!1:vT.test(s)?ty[s]=!0:(Wg[s]=!0,!1)}function Oa(s,l,u){if(bT(l))if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var d=l.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+u)}}function Ra(s,l,u){if(u===null)s.removeAttribute(l);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+u)}}function Zn(s,l,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(l,u,""+d)}}var Gf,ey;function ms(s){if(Gf===void 0)try{throw Error()}catch(u){var l=u.stack.trim().match(/\n( *(at )?)/);Gf=l&&l[1]||"",ey=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gf+s+ey}var Kf=!1;function Yf(s,l){if(!s||Kf)return"";Kf=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(l){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(B){var z=B}Reflect.construct(s,[],U)}else{try{U.call()}catch(B){z=B}s.call(U.prototype)}}else{try{throw Error()}catch(B){z=B}(U=s())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(B){if(B&&z&&typeof B.stack=="string")return[B.stack,z.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=d.DetermineComponentFrameRoot(),w=v[0],M=v[1];if(w&&M){var E=w.split(`
`),N=M.split(`
`);for(m=d=0;d<E.length&&!E[d].includes("DetermineComponentFrameRoot");)d++;for(;m<N.length&&!N[m].includes("DetermineComponentFrameRoot");)m++;if(d===E.length||m===N.length)for(d=E.length-1,m=N.length-1;1<=d&&0<=m&&E[d]!==N[m];)m--;for(;1<=d&&0<=m;d--,m--)if(E[d]!==N[m]){if(d!==1||m!==1)do if(d--,m--,0>m||E[d]!==N[m]){var j=`
`+E[d].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=d&&0<=m);break}}}finally{Kf=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?ms(u):""}function kT(s){switch(s.tag){case 26:case 27:case 5:return ms(s.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 15:return Yf(s.type,!1);case 11:return Yf(s.type.render,!1);case 1:return Yf(s.type,!0);case 31:return ms("Activity");default:return""}}function ny(s){try{var l="";do l+=kT(s),s=s.return;while(s);return l}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}function hn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ry(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function wT(s){var l=ry(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),d=""+s[l];if(!s.hasOwnProperty(l)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return m.call(this)},set:function(w){d=""+w,v.call(this,w)}}),Object.defineProperty(s,l,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(w){d=""+w},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function Na(s){s._valueTracker||(s._valueTracker=wT(s))}function iy(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var u=l.getValue(),d="";return s&&(d=ry(s)?s.checked?"true":"false":s.value),s=d,s!==u?(l.setValue(s),!0):!1}function za(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var xT=/[\n"\\]/g;function pn(s){return s.replace(xT,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ff(s,l,u,d,m,v,w,M){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),l!=null?w==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+hn(l)):s.value!==""+hn(l)&&(s.value=""+hn(l)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),l!=null?Qf(s,w,hn(l)):u!=null?Qf(s,w,hn(u)):d!=null&&s.removeAttribute("value"),m==null&&v!=null&&(s.defaultChecked=!!v),m!=null&&(s.checked=m&&typeof m!="function"&&typeof m!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.name=""+hn(M):s.removeAttribute("name")}function sy(s,l,u,d,m,v,w,M){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),l!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||l!=null))return;u=u!=null?""+hn(u):"",l=l!=null?""+hn(l):u,M||l===s.value||(s.value=l),s.defaultValue=l}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=M?s.checked:!!d,s.defaultChecked=!!d,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w)}function Qf(s,l,u){l==="number"&&za(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function gs(s,l,u,d){if(s=s.options,l){l={};for(var m=0;m<u.length;m++)l["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=l.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&d&&(s[u].defaultSelected=!0)}else{for(u=""+hn(u),l=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}l!==null||s[m].disabled||(l=s[m])}l!==null&&(l.selected=!0)}}function oy(s,l,u){if(l!=null&&(l=""+hn(l),l!==s.value&&(s.value=l),u==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=u!=null?""+hn(u):""}function ly(s,l,u,d){if(l==null){if(d!=null){if(u!=null)throw Error(r(92));if(ht(d)){if(1<d.length)throw Error(r(93));d=d[0]}u=d}u==null&&(u=""),l=u}u=hn(l),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d)}function ys(s,l){if(l){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=l;return}}s.textContent=l}var ST=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ay(s,l,u){var d=l.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":d?s.setProperty(l,u):typeof u!="number"||u===0||ST.has(l)?l==="float"?s.cssFloat=u:s[l]=(""+u).trim():s[l]=u+"px"}function cy(s,l,u){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||l!=null&&l.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var m in l)d=l[m],l.hasOwnProperty(m)&&u[m]!==d&&ay(s,m,d)}else for(var v in l)l.hasOwnProperty(v)&&ay(s,v,l[v])}function Xf(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),TT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Da(s){return TT.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Zf=null;function Wf(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var vs=null,bs=null;function uy(s){var l=ds(s);if(l&&(s=l.stateNode)){var u=s[Je]||null;t:switch(s=l.stateNode,l.type){case"input":if(Ff(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),l=u.name,u.type==="radio"&&l!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+pn(""+l)+'"][type="radio"]'),l=0;l<u.length;l++){var d=u[l];if(d!==s&&d.form===s.form){var m=d[Je]||null;if(!m)throw Error(r(90));Ff(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(l=0;l<u.length;l++)d=u[l],d.form===s.form&&iy(d)}break t;case"textarea":oy(s,u.value,u.defaultValue);break t;case"select":l=u.value,l!=null&&gs(s,!!u.multiple,l,!1)}}}var td=!1;function fy(s,l,u){if(td)return s(l,u);td=!0;try{var d=s(l);return d}finally{if(td=!1,(vs!==null||bs!==null)&&(vc(),vs&&(l=vs,s=bs,bs=vs=null,uy(l),s)))for(l=0;l<s.length;l++)uy(s[l])}}function Ao(s,l){var u=s.stateNode;if(u===null)return null;var d=u[Je]||null;if(d===null)return null;u=d[l];t:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break t;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(r(231,l,typeof u));return u}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=!1;if(Wn)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){ed=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{ed=!1}var Ar=null,nd=null,Ba=null;function dy(){if(Ba)return Ba;var s,l=nd,u=l.length,d,m="value"in Ar?Ar.value:Ar.textContent,v=m.length;for(s=0;s<u&&l[s]===m[s];s++);var w=u-s;for(d=1;d<=w&&l[u-d]===m[v-d];d++);return Ba=m.slice(s,1<d?1-d:void 0)}function La(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ha(){return!0}function hy(){return!1}function Ge(s){function l(u,d,m,v,w){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var M in s)s.hasOwnProperty(M)&&(u=s[M],this[M]=u?u(v):v[M]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ha:hy,this.isPropagationStopped=hy,this}return p(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ha)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ha)},persist:function(){},isPersistent:Ha}),l}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$a=Ge(vi),Ro=p({},vi,{view:0,detail:0}),ET=Ge(Ro),rd,id,No,ja=p({},Ro,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:od,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==No&&(No&&s.type==="mousemove"?(rd=s.screenX-No.screenX,id=s.screenY-No.screenY):id=rd=0,No=s),rd)},movementY:function(s){return"movementY"in s?s.movementY:id}}),py=Ge(ja),CT=p({},ja,{dataTransfer:0}),AT=Ge(CT),OT=p({},Ro,{relatedTarget:0}),sd=Ge(OT),RT=p({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),NT=Ge(RT),zT=p({},vi,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),DT=Ge(zT),BT=p({},vi,{data:0}),my=Ge(BT),LT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$T={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jT(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=$T[s])?!!l[s]:!1}function od(){return jT}var IT=p({},Ro,{key:function(s){if(s.key){var l=LT[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=La(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?HT[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:od,charCode:function(s){return s.type==="keypress"?La(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?La(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),_T=Ge(IT),UT=p({},ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gy=Ge(UT),qT=p({},Ro,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:od}),VT=Ge(qT),PT=p({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),JT=Ge(PT),GT=p({},ja,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),KT=Ge(GT),YT=p({},vi,{newState:0,oldState:0}),FT=Ge(YT),QT=[9,13,27,32],ld=Wn&&"CompositionEvent"in window,zo=null;Wn&&"documentMode"in document&&(zo=document.documentMode);var XT=Wn&&"TextEvent"in window&&!zo,yy=Wn&&(!ld||zo&&8<zo&&11>=zo),vy=" ",by=!1;function ky(s,l){switch(s){case"keyup":return QT.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wy(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ks=!1;function ZT(s,l){switch(s){case"compositionend":return wy(l);case"keypress":return l.which!==32?null:(by=!0,vy);case"textInput":return s=l.data,s===vy&&by?null:s;default:return null}}function WT(s,l){if(ks)return s==="compositionend"||!ld&&ky(s,l)?(s=dy(),Ba=nd=Ar=null,ks=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return yy&&l.locale!=="ko"?null:l.data;default:return null}}var tE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!tE[s.type]:l==="textarea"}function Sy(s,l,u,d){vs?bs?bs.push(d):bs=[d]:vs=d,l=Mc(l,"onChange"),0<l.length&&(u=new $a("onChange","change",null,u,d),s.push({event:u,listeners:l}))}var Do=null,Bo=null;function eE(s){rb(s,0)}function Ia(s){var l=Co(s);if(iy(l))return s}function My(s,l){if(s==="change")return l}var Ty=!1;if(Wn){var ad;if(Wn){var cd="oninput"in document;if(!cd){var Ey=document.createElement("div");Ey.setAttribute("oninput","return;"),cd=typeof Ey.oninput=="function"}ad=cd}else ad=!1;Ty=ad&&(!document.documentMode||9<document.documentMode)}function Cy(){Do&&(Do.detachEvent("onpropertychange",Ay),Bo=Do=null)}function Ay(s){if(s.propertyName==="value"&&Ia(Bo)){var l=[];Sy(l,Bo,s,Wf(s)),fy(eE,l)}}function nE(s,l,u){s==="focusin"?(Cy(),Do=l,Bo=u,Do.attachEvent("onpropertychange",Ay)):s==="focusout"&&Cy()}function rE(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ia(Bo)}function iE(s,l){if(s==="click")return Ia(l)}function sE(s,l){if(s==="input"||s==="change")return Ia(l)}function oE(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var sn=typeof Object.is=="function"?Object.is:oE;function Lo(s,l){if(sn(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var u=Object.keys(s),d=Object.keys(l);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!jf.call(l,m)||!sn(s[m],l[m]))return!1}return!0}function Oy(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Ry(s,l){var u=Oy(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=l&&d>=l)return{node:u,offset:l-s};s=d}t:{for(;u;){if(u.nextSibling){u=u.nextSibling;break t}u=u.parentNode}u=void 0}u=Oy(u)}}function Ny(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?Ny(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function zy(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=za(s.document);l instanceof s.HTMLIFrameElement;){try{var u=typeof l.contentWindow.location.href=="string"}catch{u=!1}if(u)s=l.contentWindow;else break;l=za(s.document)}return l}function ud(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var lE=Wn&&"documentMode"in document&&11>=document.documentMode,ws=null,fd=null,Ho=null,dd=!1;function Dy(s,l,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;dd||ws==null||ws!==za(d)||(d=ws,"selectionStart"in d&&ud(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ho&&Lo(Ho,d)||(Ho=d,d=Mc(fd,"onSelect"),0<d.length&&(l=new $a("onSelect","select",null,l,u),s.push({event:l,listeners:d}),l.target=ws)))}function bi(s,l){var u={};return u[s.toLowerCase()]=l.toLowerCase(),u["Webkit"+s]="webkit"+l,u["Moz"+s]="moz"+l,u}var xs={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},hd={},By={};Wn&&(By=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function ki(s){if(hd[s])return hd[s];if(!xs[s])return s;var l=xs[s],u;for(u in l)if(l.hasOwnProperty(u)&&u in By)return hd[s]=l[u];return s}var Ly=ki("animationend"),Hy=ki("animationiteration"),$y=ki("animationstart"),aE=ki("transitionrun"),cE=ki("transitionstart"),uE=ki("transitioncancel"),jy=ki("transitionend"),Iy=new Map,pd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pd.push("scrollEnd");function On(s,l){Iy.set(s,l),yi(l,[s])}var _y=new WeakMap;function mn(s,l){if(typeof s=="object"&&s!==null){var u=_y.get(s);return u!==void 0?u:(l={value:s,source:l,stack:ny(l)},_y.set(s,l),l)}return{value:s,source:l,stack:ny(l)}}var gn=[],Ss=0,md=0;function _a(){for(var s=Ss,l=md=Ss=0;l<s;){var u=gn[l];gn[l++]=null;var d=gn[l];gn[l++]=null;var m=gn[l];gn[l++]=null;var v=gn[l];if(gn[l++]=null,d!==null&&m!==null){var w=d.pending;w===null?m.next=m:(m.next=w.next,w.next=m),d.pending=m}v!==0&&Uy(u,m,v)}}function Ua(s,l,u,d){gn[Ss++]=s,gn[Ss++]=l,gn[Ss++]=u,gn[Ss++]=d,md|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function gd(s,l,u,d){return Ua(s,l,u,d),qa(s)}function Ms(s,l){return Ua(s,null,null,l),qa(s)}function Uy(s,l,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var m=!1,v=s.return;v!==null;)v.childLanes|=u,d=v.alternate,d!==null&&(d.childLanes|=u),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(m=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,m&&l!==null&&(m=31-rn(u),s=v.hiddenUpdates,d=s[m],d===null?s[m]=[l]:d.push(l),l.lane=u|536870912),v):null}function qa(s){if(50<ll)throw ll=0,xh=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var Ts={};function fE(s,l,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(s,l,u,d){return new fE(s,l,u,d)}function yd(s){return s=s.prototype,!(!s||!s.isReactComponent)}function tr(s,l){var u=s.alternate;return u===null?(u=on(s.tag,l,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=l,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,l=s.dependencies,u.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function qy(s,l){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,l=u.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Va(s,l,u,d,m,v){var w=0;if(d=s,typeof s=="function")yd(s)&&(w=1);else if(typeof s=="string")w=hC(s,u,it.current)?26:s==="html"||s==="head"||s==="body"?27:5;else t:switch(s){case nt:return s=on(31,u,l,m),s.elementType=nt,s.lanes=v,s;case k:return wi(u.children,m,v,l);case x:w=8,m|=24;break;case S:return s=on(12,u,l,m|2),s.elementType=S,s.lanes=v,s;case L:return s=on(13,u,l,m),s.elementType=L,s.lanes=v,s;case I:return s=on(19,u,l,m),s.elementType=I,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case T:case H:w=10;break t;case D:w=9;break t;case V:w=11;break t;case q:w=14;break t;case Y:w=16,d=null;break t}w=29,u=Error(r(130,s===null?"null":typeof s,"")),d=null}return l=on(w,u,l,m),l.elementType=s,l.type=d,l.lanes=v,l}function wi(s,l,u,d){return s=on(7,s,d,l),s.lanes=u,s}function vd(s,l,u){return s=on(6,s,null,l),s.lanes=u,s}function bd(s,l,u){return l=on(4,s.children!==null?s.children:[],s.key,l),l.lanes=u,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var Es=[],Cs=0,Pa=null,Ja=0,yn=[],vn=0,xi=null,er=1,nr="";function Si(s,l){Es[Cs++]=Ja,Es[Cs++]=Pa,Pa=s,Ja=l}function Vy(s,l,u){yn[vn++]=er,yn[vn++]=nr,yn[vn++]=xi,xi=s;var d=er;s=nr;var m=32-rn(d)-1;d&=~(1<<m),u+=1;var v=32-rn(l)+m;if(30<v){var w=m-m%5;v=(d&(1<<w)-1).toString(32),d>>=w,m-=w,er=1<<32-rn(l)+m|u<<m|d,nr=v+s}else er=1<<v|u<<m|d,nr=s}function kd(s){s.return!==null&&(Si(s,1),Vy(s,1,0))}function wd(s){for(;s===Pa;)Pa=Es[--Cs],Es[Cs]=null,Ja=Es[--Cs],Es[Cs]=null;for(;s===xi;)xi=yn[--vn],yn[vn]=null,nr=yn[--vn],yn[vn]=null,er=yn[--vn],yn[vn]=null}var $e=null,Xt=null,Tt=!1,Mi=null,qn=!1,xd=Error(r(519));function Ti(s){var l=Error(r(418,""));throw Io(mn(l,s)),xd}function Py(s){var l=s.stateNode,u=s.type,d=s.memoizedProps;switch(l[Ae]=s,l[Je]=d,u){case"dialog":kt("cancel",l),kt("close",l);break;case"iframe":case"object":case"embed":kt("load",l);break;case"video":case"audio":for(u=0;u<cl.length;u++)kt(cl[u],l);break;case"source":kt("error",l);break;case"img":case"image":case"link":kt("error",l),kt("load",l);break;case"details":kt("toggle",l);break;case"input":kt("invalid",l),sy(l,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0),Na(l);break;case"select":kt("invalid",l);break;case"textarea":kt("invalid",l),ly(l,d.value,d.defaultValue,d.children),Na(l)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||l.textContent===""+u||d.suppressHydrationWarning===!0||lb(l.textContent,u)?(d.popover!=null&&(kt("beforetoggle",l),kt("toggle",l)),d.onScroll!=null&&kt("scroll",l),d.onScrollEnd!=null&&kt("scrollend",l),d.onClick!=null&&(l.onclick=Tc),l=!0):l=!1,l||Ti(s)}function Jy(s){for($e=s.return;$e;)switch($e.tag){case 5:case 13:qn=!1;return;case 27:case 3:qn=!0;return;default:$e=$e.return}}function $o(s){if(s!==$e)return!1;if(!Tt)return Jy(s),Tt=!0,!1;var l=s.tag,u;if((u=l!==3&&l!==27)&&((u=l===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||jh(s.type,s.memoizedProps)),u=!u),u&&Xt&&Ti(s),Jy(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));t:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(u=s.data,u==="/$"){if(l===0){Xt=Nn(s.nextSibling);break t}l--}else u!=="$"&&u!=="$!"&&u!=="$?"||l++;s=s.nextSibling}Xt=null}}else l===27?(l=Xt,Pr(s.type)?(s=qh,qh=null,Xt=s):Xt=l):Xt=$e?Nn(s.stateNode.nextSibling):null;return!0}function jo(){Xt=$e=null,Tt=!1}function Gy(){var s=Mi;return s!==null&&(Fe===null?Fe=s:Fe.push.apply(Fe,s),Mi=null),s}function Io(s){Mi===null?Mi=[s]:Mi.push(s)}var Sd=P(null),Ei=null,rr=null;function Or(s,l,u){Q(Sd,l._currentValue),l._currentValue=u}function ir(s){s._currentValue=Sd.current,X(Sd)}function Md(s,l,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,d!==null&&(d.childLanes|=l)):d!==null&&(d.childLanes&l)!==l&&(d.childLanes|=l),s===u)break;s=s.return}}function Td(s,l,u,d){var m=s.child;for(m!==null&&(m.return=s);m!==null;){var v=m.dependencies;if(v!==null){var w=m.child;v=v.firstContext;t:for(;v!==null;){var M=v;v=m;for(var E=0;E<l.length;E++)if(M.context===l[E]){v.lanes|=u,M=v.alternate,M!==null&&(M.lanes|=u),Md(v.return,u,s),d||(w=null);break t}v=M.next}}else if(m.tag===18){if(w=m.return,w===null)throw Error(r(341));w.lanes|=u,v=w.alternate,v!==null&&(v.lanes|=u),Md(w,u,s),w=null}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===s){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}}function _o(s,l,u,d){s=null;for(var m=l,v=!1;m!==null;){if(!v){if((m.flags&524288)!==0)v=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var w=m.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var M=m.type;sn(m.pendingProps.value,w.value)||(s!==null?s.push(M):s=[M])}}else if(m===en.current){if(w=m.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(s!==null?s.push(ml):s=[ml])}m=m.return}s!==null&&Td(l,s,u,d),l.flags|=262144}function Ga(s){for(s=s.firstContext;s!==null;){if(!sn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Ci(s){Ei=s,rr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function Oe(s){return Ky(Ei,s)}function Ka(s,l){return Ei===null&&Ci(s),Ky(s,l)}function Ky(s,l){var u=l._currentValue;if(l={context:l,memoizedValue:u,next:null},rr===null){if(s===null)throw Error(r(308));rr=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else rr=rr.next=l;return u}var dE=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){l.aborted=!0,s.forEach(function(u){return u()})}},hE=n.unstable_scheduleCallback,pE=n.unstable_NormalPriority,ce={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ed(){return{controller:new dE,data:new Map,refCount:0}}function Uo(s){s.refCount--,s.refCount===0&&hE(pE,function(){s.controller.abort()})}var qo=null,Cd=0,As=0,Os=null;function mE(s,l){if(qo===null){var u=qo=[];Cd=0,As=Oh(),Os={status:"pending",value:void 0,then:function(d){u.push(d)}}}return Cd++,l.then(Yy,Yy),l}function Yy(){if(--Cd===0&&qo!==null){Os!==null&&(Os.status="fulfilled");var s=qo;qo=null,As=0,Os=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function gE(s,l){var u=[],d={status:"pending",value:null,reason:null,then:function(m){u.push(m)}};return s.then(function(){d.status="fulfilled",d.value=l;for(var m=0;m<u.length;m++)(0,u[m])(l)},function(m){for(d.status="rejected",d.reason=m,m=0;m<u.length;m++)(0,u[m])(void 0)}),d}var Fy=$.S;$.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&mE(s,l),Fy!==null&&Fy(s,l)};var Ai=P(null);function Ad(){var s=Ai.current;return s!==null?s:qt.pooledCache}function Ya(s,l){l===null?Q(Ai,Ai.current):Q(Ai,l.pool)}function Qy(){var s=Ad();return s===null?null:{parent:ce._currentValue,pool:s}}var Vo=Error(r(460)),Xy=Error(r(474)),Fa=Error(r(542)),Od={then:function(){}};function Zy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Qa(){}function Wy(s,l,u){switch(u=s[u],u===void 0?s.push(l):u!==l&&(l.then(Qa,Qa),l=u),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,e0(s),s;default:if(typeof l.status=="string")l.then(Qa,Qa);else{if(s=qt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(d){if(l.status==="pending"){var m=l;m.status="fulfilled",m.value=d}},function(d){if(l.status==="pending"){var m=l;m.status="rejected",m.reason=d}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,e0(s),s}throw Po=l,Vo}}var Po=null;function t0(){if(Po===null)throw Error(r(459));var s=Po;return Po=null,s}function e0(s){if(s===Vo||s===Fa)throw Error(r(483))}var Rr=!1;function Rd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Nd(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Nr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function zr(s,l,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(At&2)!==0){var m=d.pending;return m===null?l.next=l:(l.next=m.next,m.next=l),d.pending=l,l=qa(s),Uy(s,null,u),l}return Ua(s,d,l,u),qa(s)}function Jo(s,l,u){if(l=l.updateQueue,l!==null&&(l=l.shared,(u&4194048)!==0)){var d=l.lanes;d&=s.pendingLanes,u|=d,l.lanes=u,Yg(s,u)}}function zd(s,l){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var w={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?m=v=w:v=v.next=w,u=u.next}while(u!==null);v===null?m=v=l:v=v.next=l}else m=v=l;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=l}var Dd=!1;function Go(){if(Dd){var s=Os;if(s!==null)throw s}}function Ko(s,l,u,d){Dd=!1;var m=s.updateQueue;Rr=!1;var v=m.firstBaseUpdate,w=m.lastBaseUpdate,M=m.shared.pending;if(M!==null){m.shared.pending=null;var E=M,N=E.next;E.next=null,w===null?v=N:w.next=N,w=E;var j=s.alternate;j!==null&&(j=j.updateQueue,M=j.lastBaseUpdate,M!==w&&(M===null?j.firstBaseUpdate=N:M.next=N,j.lastBaseUpdate=E))}if(v!==null){var U=m.baseState;w=0,j=N=E=null,M=v;do{var z=M.lane&-536870913,B=z!==M.lane;if(B?(wt&z)===z:(d&z)===z){z!==0&&z===As&&(Dd=!0),j!==null&&(j=j.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var at=s,st=M;z=l;var Bt=u;switch(st.tag){case 1:if(at=st.payload,typeof at=="function"){U=at.call(Bt,U,z);break t}U=at;break t;case 3:at.flags=at.flags&-65537|128;case 0:if(at=st.payload,z=typeof at=="function"?at.call(Bt,U,z):at,z==null)break t;U=p({},U,z);break t;case 2:Rr=!0}}z=M.callback,z!==null&&(s.flags|=64,B&&(s.flags|=8192),B=m.callbacks,B===null?m.callbacks=[z]:B.push(z))}else B={lane:z,tag:M.tag,payload:M.payload,callback:M.callback,next:null},j===null?(N=j=B,E=U):j=j.next=B,w|=z;if(M=M.next,M===null){if(M=m.shared.pending,M===null)break;B=M,M=B.next,B.next=null,m.lastBaseUpdate=B,m.shared.pending=null}}while(!0);j===null&&(E=U),m.baseState=E,m.firstBaseUpdate=N,m.lastBaseUpdate=j,v===null&&(m.shared.lanes=0),_r|=w,s.lanes=w,s.memoizedState=U}}function n0(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function r0(s,l){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)n0(u[s],l)}var Rs=P(null),Xa=P(0);function i0(s,l){s=fr,Q(Xa,s),Q(Rs,l),fr=s|l.baseLanes}function Bd(){Q(Xa,fr),Q(Rs,Rs.current)}function Ld(){fr=Xa.current,X(Rs),X(Xa)}var Dr=0,yt=null,zt=null,se=null,Za=!1,Ns=!1,Oi=!1,Wa=0,Yo=0,zs=null,yE=0;function ne(){throw Error(r(321))}function Hd(s,l){if(l===null)return!1;for(var u=0;u<l.length&&u<s.length;u++)if(!sn(s[u],l[u]))return!1;return!0}function $d(s,l,u,d,m,v){return Dr=v,yt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,$.H=s===null||s.memoizedState===null?U0:q0,Oi=!1,v=u(d,m),Oi=!1,Ns&&(v=o0(l,u,d,m)),s0(s),v}function s0(s){$.H=sc;var l=zt!==null&&zt.next!==null;if(Dr=0,se=zt=yt=null,Za=!1,Yo=0,zs=null,l)throw Error(r(300));s===null||pe||(s=s.dependencies,s!==null&&Ga(s)&&(pe=!0))}function o0(s,l,u,d){yt=s;var m=0;do{if(Ns&&(zs=null),Yo=0,Ns=!1,25<=m)throw Error(r(301));if(m+=1,se=zt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}$.H=ME,v=l(u,d)}while(Ns);return v}function vE(){var s=$.H,l=s.useState()[0];return l=typeof l.then=="function"?Fo(l):l,s=s.useState()[0],(zt!==null?zt.memoizedState:null)!==s&&(yt.flags|=1024),l}function jd(){var s=Wa!==0;return Wa=0,s}function Id(s,l,u){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~u}function _d(s){if(Za){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Za=!1}Dr=0,se=zt=yt=null,Ns=!1,Yo=Wa=0,zs=null}function Ke(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?yt.memoizedState=se=s:se=se.next=s,se}function oe(){if(zt===null){var s=yt.alternate;s=s!==null?s.memoizedState:null}else s=zt.next;var l=se===null?yt.memoizedState:se.next;if(l!==null)se=l,zt=s;else{if(s===null)throw yt.alternate===null?Error(r(467)):Error(r(310));zt=s,s={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},se===null?yt.memoizedState=se=s:se=se.next=s}return se}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fo(s){var l=Yo;return Yo+=1,zs===null&&(zs=[]),s=Wy(zs,s,l),l=yt,(se===null?l.memoizedState:se.next)===null&&(l=l.alternate,$.H=l===null||l.memoizedState===null?U0:q0),s}function tc(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Fo(s);if(s.$$typeof===H)return Oe(s)}throw Error(r(438,String(s)))}function qd(s){var l=null,u=yt.updateQueue;if(u!==null&&(l=u.memoCache),l==null){var d=yt.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(l={data:d.data.map(function(m){return m.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),u===null&&(u=Ud(),yt.updateQueue=u),u.memoCache=l,u=l.data[l.index],u===void 0)for(u=l.data[l.index]=Array(s),d=0;d<s;d++)u[d]=Qt;return l.index++,u}function sr(s,l){return typeof l=="function"?l(s):l}function ec(s){var l=oe();return Vd(l,zt,s)}function Vd(s,l,u){var d=s.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=u;var m=s.baseQueue,v=d.pending;if(v!==null){if(m!==null){var w=m.next;m.next=v.next,v.next=w}l.baseQueue=m=v,d.pending=null}if(v=s.baseState,m===null)s.memoizedState=v;else{l=m.next;var M=w=null,E=null,N=l,j=!1;do{var U=N.lane&-536870913;if(U!==N.lane?(wt&U)===U:(Dr&U)===U){var z=N.revertLane;if(z===0)E!==null&&(E=E.next={lane:0,revertLane:0,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null}),U===As&&(j=!0);else if((Dr&z)===z){N=N.next,z===As&&(j=!0);continue}else U={lane:0,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},E===null?(M=E=U,w=v):E=E.next=U,yt.lanes|=z,_r|=z;U=N.action,Oi&&u(v,U),v=N.hasEagerState?N.eagerState:u(v,U)}else z={lane:U,revertLane:N.revertLane,action:N.action,hasEagerState:N.hasEagerState,eagerState:N.eagerState,next:null},E===null?(M=E=z,w=v):E=E.next=z,yt.lanes|=U,_r|=U;N=N.next}while(N!==null&&N!==l);if(E===null?w=v:E.next=M,!sn(v,s.memoizedState)&&(pe=!0,j&&(u=Os,u!==null)))throw u;s.memoizedState=v,s.baseState=w,s.baseQueue=E,d.lastRenderedState=v}return m===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Pd(s){var l=oe(),u=l.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var d=u.dispatch,m=u.pending,v=l.memoizedState;if(m!==null){u.pending=null;var w=m=m.next;do v=s(v,w.action),w=w.next;while(w!==m);sn(v,l.memoizedState)||(pe=!0),l.memoizedState=v,l.baseQueue===null&&(l.baseState=v),u.lastRenderedState=v}return[v,d]}function l0(s,l,u){var d=yt,m=oe(),v=Tt;if(v){if(u===void 0)throw Error(r(407));u=u()}else u=l();var w=!sn((zt||m).memoizedState,u);w&&(m.memoizedState=u,pe=!0),m=m.queue;var M=u0.bind(null,d,m,s);if(Qo(2048,8,M,[s]),m.getSnapshot!==l||w||se!==null&&se.memoizedState.tag&1){if(d.flags|=2048,Ds(9,nc(),c0.bind(null,d,m,u,l),null),qt===null)throw Error(r(349));v||(Dr&124)!==0||a0(d,l,u)}return u}function a0(s,l,u){s.flags|=16384,s={getSnapshot:l,value:u},l=yt.updateQueue,l===null?(l=Ud(),yt.updateQueue=l,l.stores=[s]):(u=l.stores,u===null?l.stores=[s]:u.push(s))}function c0(s,l,u,d){l.value=u,l.getSnapshot=d,f0(l)&&d0(s)}function u0(s,l,u){return u(function(){f0(l)&&d0(s)})}function f0(s){var l=s.getSnapshot;s=s.value;try{var u=l();return!sn(s,u)}catch{return!0}}function d0(s){var l=Ms(s,2);l!==null&&fn(l,s,2)}function Jd(s){var l=Ke();if(typeof s=="function"){var u=s;if(s=u(),Oi){Er(!0);try{u()}finally{Er(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:s},l}function h0(s,l,u,d){return s.baseState=u,Vd(s,zt,typeof d=="function"?d:sr)}function bE(s,l,u,d,m){if(ic(s))throw Error(r(485));if(s=l.action,s!==null){var v={payload:m,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){v.listeners.push(w)}};$.T!==null?u(!0):v.isTransition=!1,d(v),u=l.pending,u===null?(v.next=l.pending=v,p0(l,v)):(v.next=u.next,l.pending=u.next=v)}}function p0(s,l){var u=l.action,d=l.payload,m=s.state;if(l.isTransition){var v=$.T,w={};$.T=w;try{var M=u(m,d),E=$.S;E!==null&&E(w,M),m0(s,l,M)}catch(N){Gd(s,l,N)}finally{$.T=v}}else try{v=u(m,d),m0(s,l,v)}catch(N){Gd(s,l,N)}}function m0(s,l,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){g0(s,l,d)},function(d){return Gd(s,l,d)}):g0(s,l,u)}function g0(s,l,u){l.status="fulfilled",l.value=u,y0(l),s.state=u,l=s.pending,l!==null&&(u=l.next,u===l?s.pending=null:(u=u.next,l.next=u,p0(s,u)))}function Gd(s,l,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do l.status="rejected",l.reason=u,y0(l),l=l.next;while(l!==d)}s.action=null}function y0(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function v0(s,l){return l}function b0(s,l){if(Tt){var u=qt.formState;if(u!==null){t:{var d=yt;if(Tt){if(Xt){e:{for(var m=Xt,v=qn;m.nodeType!==8;){if(!v){m=null;break e}if(m=Nn(m.nextSibling),m===null){m=null;break e}}v=m.data,m=v==="F!"||v==="F"?m:null}if(m){Xt=Nn(m.nextSibling),d=m.data==="F!";break t}}Ti(d)}d=!1}d&&(l=u[0])}}return u=Ke(),u.memoizedState=u.baseState=l,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:v0,lastRenderedState:l},u.queue=d,u=j0.bind(null,yt,d),d.dispatch=u,d=Jd(!1),v=Xd.bind(null,yt,!1,d.queue),d=Ke(),m={state:l,dispatch:null,action:s,pending:null},d.queue=m,u=bE.bind(null,yt,m,v,u),m.dispatch=u,d.memoizedState=s,[l,u,!1]}function k0(s){var l=oe();return w0(l,zt,s)}function w0(s,l,u){if(l=Vd(s,l,v0)[0],s=ec(sr)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var d=Fo(l)}catch(w){throw w===Vo?Fa:w}else d=l;l=oe();var m=l.queue,v=m.dispatch;return u!==l.memoizedState&&(yt.flags|=2048,Ds(9,nc(),kE.bind(null,m,u),null)),[d,v,s]}function kE(s,l){s.action=l}function x0(s){var l=oe(),u=zt;if(u!==null)return w0(l,u,s);oe(),l=l.memoizedState,u=oe();var d=u.queue.dispatch;return u.memoizedState=s,[l,d,!1]}function Ds(s,l,u,d){return s={tag:s,create:u,deps:d,inst:l,next:null},l=yt.updateQueue,l===null&&(l=Ud(),yt.updateQueue=l),u=l.lastEffect,u===null?l.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,l.lastEffect=s),s}function nc(){return{destroy:void 0,resource:void 0}}function S0(){return oe().memoizedState}function rc(s,l,u,d){var m=Ke();d=d===void 0?null:d,yt.flags|=s,m.memoizedState=Ds(1|l,nc(),u,d)}function Qo(s,l,u,d){var m=oe();d=d===void 0?null:d;var v=m.memoizedState.inst;zt!==null&&d!==null&&Hd(d,zt.memoizedState.deps)?m.memoizedState=Ds(l,v,u,d):(yt.flags|=s,m.memoizedState=Ds(1|l,v,u,d))}function M0(s,l){rc(8390656,8,s,l)}function T0(s,l){Qo(2048,8,s,l)}function E0(s,l){return Qo(4,2,s,l)}function C0(s,l){return Qo(4,4,s,l)}function A0(s,l){if(typeof l=="function"){s=s();var u=l(s);return function(){typeof u=="function"?u():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function O0(s,l,u){u=u!=null?u.concat([s]):null,Qo(4,4,A0.bind(null,l,s),u)}function Kd(){}function R0(s,l){var u=oe();l=l===void 0?null:l;var d=u.memoizedState;return l!==null&&Hd(l,d[1])?d[0]:(u.memoizedState=[s,l],s)}function N0(s,l){var u=oe();l=l===void 0?null:l;var d=u.memoizedState;if(l!==null&&Hd(l,d[1]))return d[0];if(d=s(),Oi){Er(!0);try{s()}finally{Er(!1)}}return u.memoizedState=[d,l],d}function Yd(s,l,u){return u===void 0||(Dr&1073741824)!==0?s.memoizedState=l:(s.memoizedState=u,s=Bv(),yt.lanes|=s,_r|=s,u)}function z0(s,l,u,d){return sn(u,l)?u:Rs.current!==null?(s=Yd(s,u,d),sn(s,l)||(pe=!0),s):(Dr&42)===0?(pe=!0,s.memoizedState=u):(s=Bv(),yt.lanes|=s,_r|=s,l)}function D0(s,l,u,d,m){var v=F.p;F.p=v!==0&&8>v?v:8;var w=$.T,M={};$.T=M,Xd(s,!1,l,u);try{var E=m(),N=$.S;if(N!==null&&N(M,E),E!==null&&typeof E=="object"&&typeof E.then=="function"){var j=gE(E,d);Xo(s,l,j,un(s))}else Xo(s,l,d,un(s))}catch(U){Xo(s,l,{then:function(){},status:"rejected",reason:U},un())}finally{F.p=v,$.T=w}}function wE(){}function Fd(s,l,u,d){if(s.tag!==5)throw Error(r(476));var m=B0(s).queue;D0(s,m,l,lt,u===null?wE:function(){return L0(s),u(d)})}function B0(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:lt,baseState:lt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:lt},next:null};var u={};return l.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:u},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function L0(s){var l=B0(s).next.queue;Xo(s,l,{},un())}function Qd(){return Oe(ml)}function H0(){return oe().memoizedState}function $0(){return oe().memoizedState}function xE(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var u=un();s=Nr(u);var d=zr(l,s,u);d!==null&&(fn(d,l,u),Jo(d,l,u)),l={cache:Ed()},s.payload=l;return}l=l.return}}function SE(s,l,u){var d=un();u={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null},ic(s)?I0(l,u):(u=gd(s,l,u,d),u!==null&&(fn(u,s,d),_0(u,l,d)))}function j0(s,l,u){var d=un();Xo(s,l,u,d)}function Xo(s,l,u,d){var m={lane:d,revertLane:0,action:u,hasEagerState:!1,eagerState:null,next:null};if(ic(s))I0(l,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=l.lastRenderedReducer,v!==null))try{var w=l.lastRenderedState,M=v(w,u);if(m.hasEagerState=!0,m.eagerState=M,sn(M,w))return Ua(s,l,m,0),qt===null&&_a(),!1}catch{}if(u=gd(s,l,m,d),u!==null)return fn(u,s,d),_0(u,l,d),!0}return!1}function Xd(s,l,u,d){if(d={lane:2,revertLane:Oh(),action:d,hasEagerState:!1,eagerState:null,next:null},ic(s)){if(l)throw Error(r(479))}else l=gd(s,u,d,2),l!==null&&fn(l,s,2)}function ic(s){var l=s.alternate;return s===yt||l!==null&&l===yt}function I0(s,l){Ns=Za=!0;var u=s.pending;u===null?l.next=l:(l.next=u.next,u.next=l),s.pending=l}function _0(s,l,u){if((u&4194048)!==0){var d=l.lanes;d&=s.pendingLanes,u|=d,l.lanes=u,Yg(s,u)}}var sc={readContext:Oe,use:tc,useCallback:ne,useContext:ne,useEffect:ne,useImperativeHandle:ne,useLayoutEffect:ne,useInsertionEffect:ne,useMemo:ne,useReducer:ne,useRef:ne,useState:ne,useDebugValue:ne,useDeferredValue:ne,useTransition:ne,useSyncExternalStore:ne,useId:ne,useHostTransitionStatus:ne,useFormState:ne,useActionState:ne,useOptimistic:ne,useMemoCache:ne,useCacheRefresh:ne},U0={readContext:Oe,use:tc,useCallback:function(s,l){return Ke().memoizedState=[s,l===void 0?null:l],s},useContext:Oe,useEffect:M0,useImperativeHandle:function(s,l,u){u=u!=null?u.concat([s]):null,rc(4194308,4,A0.bind(null,l,s),u)},useLayoutEffect:function(s,l){return rc(4194308,4,s,l)},useInsertionEffect:function(s,l){rc(4,2,s,l)},useMemo:function(s,l){var u=Ke();l=l===void 0?null:l;var d=s();if(Oi){Er(!0);try{s()}finally{Er(!1)}}return u.memoizedState=[d,l],d},useReducer:function(s,l,u){var d=Ke();if(u!==void 0){var m=u(l);if(Oi){Er(!0);try{u(l)}finally{Er(!1)}}}else m=l;return d.memoizedState=d.baseState=m,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:m},d.queue=s,s=s.dispatch=SE.bind(null,yt,s),[d.memoizedState,s]},useRef:function(s){var l=Ke();return s={current:s},l.memoizedState=s},useState:function(s){s=Jd(s);var l=s.queue,u=j0.bind(null,yt,l);return l.dispatch=u,[s.memoizedState,u]},useDebugValue:Kd,useDeferredValue:function(s,l){var u=Ke();return Yd(u,s,l)},useTransition:function(){var s=Jd(!1);return s=D0.bind(null,yt,s.queue,!0,!1),Ke().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,u){var d=yt,m=Ke();if(Tt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=l(),qt===null)throw Error(r(349));(wt&124)!==0||a0(d,l,u)}m.memoizedState=u;var v={value:u,getSnapshot:l};return m.queue=v,M0(u0.bind(null,d,v,s),[s]),d.flags|=2048,Ds(9,nc(),c0.bind(null,d,v,u,l),null),u},useId:function(){var s=Ke(),l=qt.identifierPrefix;if(Tt){var u=nr,d=er;u=(d&~(1<<32-rn(d)-1)).toString(32)+u,l=""+l+"R"+u,u=Wa++,0<u&&(l+="H"+u.toString(32)),l+=""}else u=yE++,l=""+l+"r"+u.toString(32)+"";return s.memoizedState=l},useHostTransitionStatus:Qd,useFormState:b0,useActionState:b0,useOptimistic:function(s){var l=Ke();l.memoizedState=l.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=u,l=Xd.bind(null,yt,!0,u),u.dispatch=l,[s,l]},useMemoCache:qd,useCacheRefresh:function(){return Ke().memoizedState=xE.bind(null,yt)}},q0={readContext:Oe,use:tc,useCallback:R0,useContext:Oe,useEffect:T0,useImperativeHandle:O0,useInsertionEffect:E0,useLayoutEffect:C0,useMemo:N0,useReducer:ec,useRef:S0,useState:function(){return ec(sr)},useDebugValue:Kd,useDeferredValue:function(s,l){var u=oe();return z0(u,zt.memoizedState,s,l)},useTransition:function(){var s=ec(sr)[0],l=oe().memoizedState;return[typeof s=="boolean"?s:Fo(s),l]},useSyncExternalStore:l0,useId:H0,useHostTransitionStatus:Qd,useFormState:k0,useActionState:k0,useOptimistic:function(s,l){var u=oe();return h0(u,zt,s,l)},useMemoCache:qd,useCacheRefresh:$0},ME={readContext:Oe,use:tc,useCallback:R0,useContext:Oe,useEffect:T0,useImperativeHandle:O0,useInsertionEffect:E0,useLayoutEffect:C0,useMemo:N0,useReducer:Pd,useRef:S0,useState:function(){return Pd(sr)},useDebugValue:Kd,useDeferredValue:function(s,l){var u=oe();return zt===null?Yd(u,s,l):z0(u,zt.memoizedState,s,l)},useTransition:function(){var s=Pd(sr)[0],l=oe().memoizedState;return[typeof s=="boolean"?s:Fo(s),l]},useSyncExternalStore:l0,useId:H0,useHostTransitionStatus:Qd,useFormState:x0,useActionState:x0,useOptimistic:function(s,l){var u=oe();return zt!==null?h0(u,zt,s,l):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:qd,useCacheRefresh:$0},Bs=null,Zo=0;function oc(s){var l=Zo;return Zo+=1,Bs===null&&(Bs=[]),Wy(Bs,s,l)}function Wo(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function lc(s,l){throw l.$$typeof===g?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function V0(s){var l=s._init;return l(s._payload)}function P0(s){function l(O,A){if(s){var R=O.deletions;R===null?(O.deletions=[A],O.flags|=16):R.push(A)}}function u(O,A){if(!s)return null;for(;A!==null;)l(O,A),A=A.sibling;return null}function d(O){for(var A=new Map;O!==null;)O.key!==null?A.set(O.key,O):A.set(O.index,O),O=O.sibling;return A}function m(O,A){return O=tr(O,A),O.index=0,O.sibling=null,O}function v(O,A,R){return O.index=R,s?(R=O.alternate,R!==null?(R=R.index,R<A?(O.flags|=67108866,A):R):(O.flags|=67108866,A)):(O.flags|=1048576,A)}function w(O){return s&&O.alternate===null&&(O.flags|=67108866),O}function M(O,A,R,_){return A===null||A.tag!==6?(A=vd(R,O.mode,_),A.return=O,A):(A=m(A,R),A.return=O,A)}function E(O,A,R,_){var Z=R.type;return Z===k?j(O,A,R.props.children,_,R.key):A!==null&&(A.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Y&&V0(Z)===A.type)?(A=m(A,R.props),Wo(A,R),A.return=O,A):(A=Va(R.type,R.key,R.props,null,O.mode,_),Wo(A,R),A.return=O,A)}function N(O,A,R,_){return A===null||A.tag!==4||A.stateNode.containerInfo!==R.containerInfo||A.stateNode.implementation!==R.implementation?(A=bd(R,O.mode,_),A.return=O,A):(A=m(A,R.children||[]),A.return=O,A)}function j(O,A,R,_,Z){return A===null||A.tag!==7?(A=wi(R,O.mode,_,Z),A.return=O,A):(A=m(A,R),A.return=O,A)}function U(O,A,R){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return A=vd(""+A,O.mode,R),A.return=O,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case y:return R=Va(A.type,A.key,A.props,null,O.mode,R),Wo(R,A),R.return=O,R;case b:return A=bd(A,O.mode,R),A.return=O,A;case Y:var _=A._init;return A=_(A._payload),U(O,A,R)}if(ht(A)||Ut(A))return A=wi(A,O.mode,R,null),A.return=O,A;if(typeof A.then=="function")return U(O,oc(A),R);if(A.$$typeof===H)return U(O,Ka(O,A),R);lc(O,A)}return null}function z(O,A,R,_){var Z=A!==null?A.key:null;if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return Z!==null?null:M(O,A,""+R,_);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case y:return R.key===Z?E(O,A,R,_):null;case b:return R.key===Z?N(O,A,R,_):null;case Y:return Z=R._init,R=Z(R._payload),z(O,A,R,_)}if(ht(R)||Ut(R))return Z!==null?null:j(O,A,R,_,null);if(typeof R.then=="function")return z(O,A,oc(R),_);if(R.$$typeof===H)return z(O,A,Ka(O,R),_);lc(O,R)}return null}function B(O,A,R,_,Z){if(typeof _=="string"&&_!==""||typeof _=="number"||typeof _=="bigint")return O=O.get(R)||null,M(A,O,""+_,Z);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case y:return O=O.get(_.key===null?R:_.key)||null,E(A,O,_,Z);case b:return O=O.get(_.key===null?R:_.key)||null,N(A,O,_,Z);case Y:var vt=_._init;return _=vt(_._payload),B(O,A,R,_,Z)}if(ht(_)||Ut(_))return O=O.get(R)||null,j(A,O,_,Z,null);if(typeof _.then=="function")return B(O,A,R,oc(_),Z);if(_.$$typeof===H)return B(O,A,R,Ka(A,_),Z);lc(A,_)}return null}function at(O,A,R,_){for(var Z=null,vt=null,et=A,ot=A=0,ge=null;et!==null&&ot<R.length;ot++){et.index>ot?(ge=et,et=null):ge=et.sibling;var Mt=z(O,et,R[ot],_);if(Mt===null){et===null&&(et=ge);break}s&&et&&Mt.alternate===null&&l(O,et),A=v(Mt,A,ot),vt===null?Z=Mt:vt.sibling=Mt,vt=Mt,et=ge}if(ot===R.length)return u(O,et),Tt&&Si(O,ot),Z;if(et===null){for(;ot<R.length;ot++)et=U(O,R[ot],_),et!==null&&(A=v(et,A,ot),vt===null?Z=et:vt.sibling=et,vt=et);return Tt&&Si(O,ot),Z}for(et=d(et);ot<R.length;ot++)ge=B(et,O,ot,R[ot],_),ge!==null&&(s&&ge.alternate!==null&&et.delete(ge.key===null?ot:ge.key),A=v(ge,A,ot),vt===null?Z=ge:vt.sibling=ge,vt=ge);return s&&et.forEach(function(Fr){return l(O,Fr)}),Tt&&Si(O,ot),Z}function st(O,A,R,_){if(R==null)throw Error(r(151));for(var Z=null,vt=null,et=A,ot=A=0,ge=null,Mt=R.next();et!==null&&!Mt.done;ot++,Mt=R.next()){et.index>ot?(ge=et,et=null):ge=et.sibling;var Fr=z(O,et,Mt.value,_);if(Fr===null){et===null&&(et=ge);break}s&&et&&Fr.alternate===null&&l(O,et),A=v(Fr,A,ot),vt===null?Z=Fr:vt.sibling=Fr,vt=Fr,et=ge}if(Mt.done)return u(O,et),Tt&&Si(O,ot),Z;if(et===null){for(;!Mt.done;ot++,Mt=R.next())Mt=U(O,Mt.value,_),Mt!==null&&(A=v(Mt,A,ot),vt===null?Z=Mt:vt.sibling=Mt,vt=Mt);return Tt&&Si(O,ot),Z}for(et=d(et);!Mt.done;ot++,Mt=R.next())Mt=B(et,O,ot,Mt.value,_),Mt!==null&&(s&&Mt.alternate!==null&&et.delete(Mt.key===null?ot:Mt.key),A=v(Mt,A,ot),vt===null?Z=Mt:vt.sibling=Mt,vt=Mt);return s&&et.forEach(function(TC){return l(O,TC)}),Tt&&Si(O,ot),Z}function Bt(O,A,R,_){if(typeof R=="object"&&R!==null&&R.type===k&&R.key===null&&(R=R.props.children),typeof R=="object"&&R!==null){switch(R.$$typeof){case y:t:{for(var Z=R.key;A!==null;){if(A.key===Z){if(Z=R.type,Z===k){if(A.tag===7){u(O,A.sibling),_=m(A,R.props.children),_.return=O,O=_;break t}}else if(A.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Y&&V0(Z)===A.type){u(O,A.sibling),_=m(A,R.props),Wo(_,R),_.return=O,O=_;break t}u(O,A);break}else l(O,A);A=A.sibling}R.type===k?(_=wi(R.props.children,O.mode,_,R.key),_.return=O,O=_):(_=Va(R.type,R.key,R.props,null,O.mode,_),Wo(_,R),_.return=O,O=_)}return w(O);case b:t:{for(Z=R.key;A!==null;){if(A.key===Z)if(A.tag===4&&A.stateNode.containerInfo===R.containerInfo&&A.stateNode.implementation===R.implementation){u(O,A.sibling),_=m(A,R.children||[]),_.return=O,O=_;break t}else{u(O,A);break}else l(O,A);A=A.sibling}_=bd(R,O.mode,_),_.return=O,O=_}return w(O);case Y:return Z=R._init,R=Z(R._payload),Bt(O,A,R,_)}if(ht(R))return at(O,A,R,_);if(Ut(R)){if(Z=Ut(R),typeof Z!="function")throw Error(r(150));return R=Z.call(R),st(O,A,R,_)}if(typeof R.then=="function")return Bt(O,A,oc(R),_);if(R.$$typeof===H)return Bt(O,A,Ka(O,R),_);lc(O,R)}return typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint"?(R=""+R,A!==null&&A.tag===6?(u(O,A.sibling),_=m(A,R),_.return=O,O=_):(u(O,A),_=vd(R,O.mode,_),_.return=O,O=_),w(O)):u(O,A)}return function(O,A,R,_){try{Zo=0;var Z=Bt(O,A,R,_);return Bs=null,Z}catch(et){if(et===Vo||et===Fa)throw et;var vt=on(29,et,null,O.mode);return vt.lanes=_,vt.return=O,vt}}}var Ls=P0(!0),J0=P0(!1),bn=P(null),Vn=null;function Br(s){var l=s.alternate;Q(ue,ue.current&1),Q(bn,s),Vn===null&&(l===null||Rs.current!==null||l.memoizedState!==null)&&(Vn=s)}function G0(s){if(s.tag===22){if(Q(ue,ue.current),Q(bn,s),Vn===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Vn=s)}}else Lr()}function Lr(){Q(ue,ue.current),Q(bn,bn.current)}function or(s){X(bn),Vn===s&&(Vn=null),X(ue)}var ue=P(0);function ac(s){for(var l=s;l!==null;){if(l.tag===13){var u=l.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||Uh(u)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Zd(s,l,u,d){l=s.memoizedState,u=u(d,l),u=u==null?l:p({},l,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Wd={enqueueSetState:function(s,l,u){s=s._reactInternals;var d=un(),m=Nr(d);m.payload=l,u!=null&&(m.callback=u),l=zr(s,m,d),l!==null&&(fn(l,s,d),Jo(l,s,d))},enqueueReplaceState:function(s,l,u){s=s._reactInternals;var d=un(),m=Nr(d);m.tag=1,m.payload=l,u!=null&&(m.callback=u),l=zr(s,m,d),l!==null&&(fn(l,s,d),Jo(l,s,d))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var u=un(),d=Nr(u);d.tag=2,l!=null&&(d.callback=l),l=zr(s,d,u),l!==null&&(fn(l,s,u),Jo(l,s,u))}};function K0(s,l,u,d,m,v,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,w):l.prototype&&l.prototype.isPureReactComponent?!Lo(u,d)||!Lo(m,v):!0}function Y0(s,l,u,d){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(u,d),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(u,d),l.state!==s&&Wd.enqueueReplaceState(l,l.state,null)}function Ri(s,l){var u=l;if("ref"in l){u={};for(var d in l)d!=="ref"&&(u[d]=l[d])}if(s=s.defaultProps){u===l&&(u=p({},u));for(var m in s)u[m]===void 0&&(u[m]=s[m])}return u}var cc=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function F0(s){cc(s)}function Q0(s){console.error(s)}function X0(s){cc(s)}function uc(s,l){try{var u=s.onUncaughtError;u(l.value,{componentStack:l.stack})}catch(d){setTimeout(function(){throw d})}}function Z0(s,l,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function th(s,l,u){return u=Nr(u),u.tag=3,u.payload={element:null},u.callback=function(){uc(s,l)},u}function W0(s){return s=Nr(s),s.tag=3,s}function tv(s,l,u,d){var m=u.type.getDerivedStateFromError;if(typeof m=="function"){var v=d.value;s.payload=function(){return m(v)},s.callback=function(){Z0(l,u,d)}}var w=u.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){Z0(l,u,d),typeof m!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var M=d.stack;this.componentDidCatch(d.value,{componentStack:M!==null?M:""})})}function TE(s,l,u,d,m){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(l=u.alternate,l!==null&&_o(l,u,m,!0),u=bn.current,u!==null){switch(u.tag){case 13:return Vn===null?Mh():u.alternate===null&&Zt===0&&(Zt=3),u.flags&=-257,u.flags|=65536,u.lanes=m,d===Od?u.flags|=16384:(l=u.updateQueue,l===null?u.updateQueue=new Set([d]):l.add(d),Eh(s,d,m)),!1;case 22:return u.flags|=65536,d===Od?u.flags|=16384:(l=u.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=l):(u=l.retryQueue,u===null?l.retryQueue=new Set([d]):u.add(d)),Eh(s,d,m)),!1}throw Error(r(435,u.tag))}return Eh(s,d,m),Mh(),!1}if(Tt)return l=bn.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=m,d!==xd&&(s=Error(r(422),{cause:d}),Io(mn(s,u)))):(d!==xd&&(l=Error(r(423),{cause:d}),Io(mn(l,u))),s=s.current.alternate,s.flags|=65536,m&=-m,s.lanes|=m,d=mn(d,u),m=th(s.stateNode,d,m),zd(s,m),Zt!==4&&(Zt=2)),!1;var v=Error(r(520),{cause:d});if(v=mn(v,u),ol===null?ol=[v]:ol.push(v),Zt!==4&&(Zt=2),l===null)return!0;d=mn(d,u),u=l;do{switch(u.tag){case 3:return u.flags|=65536,s=m&-m,u.lanes|=s,s=th(u.stateNode,d,s),zd(u,s),!1;case 1:if(l=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ur===null||!Ur.has(v))))return u.flags|=65536,m&=-m,u.lanes|=m,m=W0(m),tv(m,s,u,d),zd(u,m),!1}u=u.return}while(u!==null);return!1}var ev=Error(r(461)),pe=!1;function we(s,l,u,d){l.child=s===null?J0(l,null,u,d):Ls(l,s.child,u,d)}function nv(s,l,u,d,m){u=u.render;var v=l.ref;if("ref"in d){var w={};for(var M in d)M!=="ref"&&(w[M]=d[M])}else w=d;return Ci(l),d=$d(s,l,u,w,v,m),M=jd(),s!==null&&!pe?(Id(s,l,m),lr(s,l,m)):(Tt&&M&&kd(l),l.flags|=1,we(s,l,d,m),l.child)}function rv(s,l,u,d,m){if(s===null){var v=u.type;return typeof v=="function"&&!yd(v)&&v.defaultProps===void 0&&u.compare===null?(l.tag=15,l.type=v,iv(s,l,v,d,m)):(s=Va(u.type,null,d,l,l.mode,m),s.ref=l.ref,s.return=l,l.child=s)}if(v=s.child,!ah(s,m)){var w=v.memoizedProps;if(u=u.compare,u=u!==null?u:Lo,u(w,d)&&s.ref===l.ref)return lr(s,l,m)}return l.flags|=1,s=tr(v,d),s.ref=l.ref,s.return=l,l.child=s}function iv(s,l,u,d,m){if(s!==null){var v=s.memoizedProps;if(Lo(v,d)&&s.ref===l.ref)if(pe=!1,l.pendingProps=d=v,ah(s,m))(s.flags&131072)!==0&&(pe=!0);else return l.lanes=s.lanes,lr(s,l,m)}return eh(s,l,u,d,m)}function sv(s,l,u){var d=l.pendingProps,m=d.children,v=s!==null?s.memoizedState:null;if(d.mode==="hidden"){if((l.flags&128)!==0){if(d=v!==null?v.baseLanes|u:u,s!==null){for(m=l.child=s.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;l.childLanes=v&~d}else l.childLanes=0,l.child=null;return ov(s,l,d,u)}if((u&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ya(l,v!==null?v.cachePool:null),v!==null?i0(l,v):Bd(),G0(l);else return l.lanes=l.childLanes=536870912,ov(s,l,v!==null?v.baseLanes|u:u,u)}else v!==null?(Ya(l,v.cachePool),i0(l,v),Lr(),l.memoizedState=null):(s!==null&&Ya(l,null),Bd(),Lr());return we(s,l,m,u),l.child}function ov(s,l,u,d){var m=Ad();return m=m===null?null:{parent:ce._currentValue,pool:m},l.memoizedState={baseLanes:u,cachePool:m},s!==null&&Ya(l,null),Bd(),G0(l),s!==null&&_o(s,l,d,!0),null}function fc(s,l){var u=l.ref;if(u===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(s===null||s.ref!==u)&&(l.flags|=4194816)}}function eh(s,l,u,d,m){return Ci(l),u=$d(s,l,u,d,void 0,m),d=jd(),s!==null&&!pe?(Id(s,l,m),lr(s,l,m)):(Tt&&d&&kd(l),l.flags|=1,we(s,l,u,m),l.child)}function lv(s,l,u,d,m,v){return Ci(l),l.updateQueue=null,u=o0(l,d,u,m),s0(s),d=jd(),s!==null&&!pe?(Id(s,l,v),lr(s,l,v)):(Tt&&d&&kd(l),l.flags|=1,we(s,l,u,v),l.child)}function av(s,l,u,d,m){if(Ci(l),l.stateNode===null){var v=Ts,w=u.contextType;typeof w=="object"&&w!==null&&(v=Oe(w)),v=new u(d,v),l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Wd,l.stateNode=v,v._reactInternals=l,v=l.stateNode,v.props=d,v.state=l.memoizedState,v.refs={},Rd(l),w=u.contextType,v.context=typeof w=="object"&&w!==null?Oe(w):Ts,v.state=l.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Zd(l,u,w,d),v.state=l.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(w=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),w!==v.state&&Wd.enqueueReplaceState(v,v.state,null),Ko(l,d,v,m),Go(),v.state=l.memoizedState),typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!0}else if(s===null){v=l.stateNode;var M=l.memoizedProps,E=Ri(u,M);v.props=E;var N=v.context,j=u.contextType;w=Ts,typeof j=="object"&&j!==null&&(w=Oe(j));var U=u.getDerivedStateFromProps;j=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function",M=l.pendingProps!==M,j||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(M||N!==w)&&Y0(l,v,d,w),Rr=!1;var z=l.memoizedState;v.state=z,Ko(l,d,v,m),Go(),N=l.memoizedState,M||z!==N||Rr?(typeof U=="function"&&(Zd(l,u,U,d),N=l.memoizedState),(E=Rr||K0(l,u,E,d,z,N,w))?(j||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(l.flags|=4194308)):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=d,l.memoizedState=N),v.props=d,v.state=N,v.context=w,d=E):(typeof v.componentDidMount=="function"&&(l.flags|=4194308),d=!1)}else{v=l.stateNode,Nd(s,l),w=l.memoizedProps,j=Ri(u,w),v.props=j,U=l.pendingProps,z=v.context,N=u.contextType,E=Ts,typeof N=="object"&&N!==null&&(E=Oe(N)),M=u.getDerivedStateFromProps,(N=typeof M=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==U||z!==E)&&Y0(l,v,d,E),Rr=!1,z=l.memoizedState,v.state=z,Ko(l,d,v,m),Go();var B=l.memoizedState;w!==U||z!==B||Rr||s!==null&&s.dependencies!==null&&Ga(s.dependencies)?(typeof M=="function"&&(Zd(l,u,M,d),B=l.memoizedState),(j=Rr||K0(l,u,j,d,z,B,E)||s!==null&&s.dependencies!==null&&Ga(s.dependencies))?(N||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(d,B,E),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(d,B,E)),typeof v.componentDidUpdate=="function"&&(l.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===s.memoizedProps&&z===s.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&z===s.memoizedState||(l.flags|=1024),l.memoizedProps=d,l.memoizedState=B),v.props=d,v.state=B,v.context=E,d=j):(typeof v.componentDidUpdate!="function"||w===s.memoizedProps&&z===s.memoizedState||(l.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&z===s.memoizedState||(l.flags|=1024),d=!1)}return v=d,fc(s,l),d=(l.flags&128)!==0,v||d?(v=l.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:v.render(),l.flags|=1,s!==null&&d?(l.child=Ls(l,s.child,null,m),l.child=Ls(l,null,u,m)):we(s,l,u,m),l.memoizedState=v.state,s=l.child):s=lr(s,l,m),s}function cv(s,l,u,d){return jo(),l.flags|=256,we(s,l,u,d),l.child}var nh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rh(s){return{baseLanes:s,cachePool:Qy()}}function ih(s,l,u){return s=s!==null?s.childLanes&~u:0,l&&(s|=kn),s}function uv(s,l,u){var d=l.pendingProps,m=!1,v=(l.flags&128)!==0,w;if((w=v)||(w=s!==null&&s.memoizedState===null?!1:(ue.current&2)!==0),w&&(m=!0,l.flags&=-129),w=(l.flags&32)!==0,l.flags&=-33,s===null){if(Tt){if(m?Br(l):Lr(),Tt){var M=Xt,E;if(E=M){t:{for(E=M,M=qn;E.nodeType!==8;){if(!M){M=null;break t}if(E=Nn(E.nextSibling),E===null){M=null;break t}}M=E}M!==null?(l.memoizedState={dehydrated:M,treeContext:xi!==null?{id:er,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},E=on(18,null,null,0),E.stateNode=M,E.return=l,l.child=E,$e=l,Xt=null,E=!0):E=!1}E||Ti(l)}if(M=l.memoizedState,M!==null&&(M=M.dehydrated,M!==null))return Uh(M)?l.lanes=32:l.lanes=536870912,null;or(l)}return M=d.children,d=d.fallback,m?(Lr(),m=l.mode,M=dc({mode:"hidden",children:M},m),d=wi(d,m,u,null),M.return=l,d.return=l,M.sibling=d,l.child=M,m=l.child,m.memoizedState=rh(u),m.childLanes=ih(s,w,u),l.memoizedState=nh,d):(Br(l),sh(l,M))}if(E=s.memoizedState,E!==null&&(M=E.dehydrated,M!==null)){if(v)l.flags&256?(Br(l),l.flags&=-257,l=oh(s,l,u)):l.memoizedState!==null?(Lr(),l.child=s.child,l.flags|=128,l=null):(Lr(),m=d.fallback,M=l.mode,d=dc({mode:"visible",children:d.children},M),m=wi(m,M,u,null),m.flags|=2,d.return=l,m.return=l,d.sibling=m,l.child=d,Ls(l,s.child,null,u),d=l.child,d.memoizedState=rh(u),d.childLanes=ih(s,w,u),l.memoizedState=nh,l=m);else if(Br(l),Uh(M)){if(w=M.nextSibling&&M.nextSibling.dataset,w)var N=w.dgst;w=N,d=Error(r(419)),d.stack="",d.digest=w,Io({value:d,source:null,stack:null}),l=oh(s,l,u)}else if(pe||_o(s,l,u,!1),w=(u&s.childLanes)!==0,pe||w){if(w=qt,w!==null&&(d=u&-u,d=(d&42)!==0?1:qf(d),d=(d&(w.suspendedLanes|u))!==0?0:d,d!==0&&d!==E.retryLane))throw E.retryLane=d,Ms(s,d),fn(w,s,d),ev;M.data==="$?"||Mh(),l=oh(s,l,u)}else M.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=E.treeContext,Xt=Nn(M.nextSibling),$e=l,Tt=!0,Mi=null,qn=!1,s!==null&&(yn[vn++]=er,yn[vn++]=nr,yn[vn++]=xi,er=s.id,nr=s.overflow,xi=l),l=sh(l,d.children),l.flags|=4096);return l}return m?(Lr(),m=d.fallback,M=l.mode,E=s.child,N=E.sibling,d=tr(E,{mode:"hidden",children:d.children}),d.subtreeFlags=E.subtreeFlags&65011712,N!==null?m=tr(N,m):(m=wi(m,M,u,null),m.flags|=2),m.return=l,d.return=l,d.sibling=m,l.child=d,d=m,m=l.child,M=s.child.memoizedState,M===null?M=rh(u):(E=M.cachePool,E!==null?(N=ce._currentValue,E=E.parent!==N?{parent:N,pool:N}:E):E=Qy(),M={baseLanes:M.baseLanes|u,cachePool:E}),m.memoizedState=M,m.childLanes=ih(s,w,u),l.memoizedState=nh,d):(Br(l),u=s.child,s=u.sibling,u=tr(u,{mode:"visible",children:d.children}),u.return=l,u.sibling=null,s!==null&&(w=l.deletions,w===null?(l.deletions=[s],l.flags|=16):w.push(s)),l.child=u,l.memoizedState=null,u)}function sh(s,l){return l=dc({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function dc(s,l){return s=on(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function oh(s,l,u){return Ls(l,s.child,null,u),s=sh(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function fv(s,l,u){s.lanes|=l;var d=s.alternate;d!==null&&(d.lanes|=l),Md(s.return,l,u)}function lh(s,l,u,d,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(v.isBackwards=l,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=u,v.tailMode=m)}function dv(s,l,u){var d=l.pendingProps,m=d.revealOrder,v=d.tail;if(we(s,l,d.children,u),d=ue.current,(d&2)!==0)d=d&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)t:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&fv(s,u,l);else if(s.tag===19)fv(s,u,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break t;for(;s.sibling===null;){if(s.return===null||s.return===l)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}switch(Q(ue,d),m){case"forwards":for(u=l.child,m=null;u!==null;)s=u.alternate,s!==null&&ac(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=l.child,l.child=null):(m=u.sibling,u.sibling=null),lh(l,!1,m,u,v);break;case"backwards":for(u=null,m=l.child,l.child=null;m!==null;){if(s=m.alternate,s!==null&&ac(s)===null){l.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}lh(l,!0,u,null,v);break;case"together":lh(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function lr(s,l,u){if(s!==null&&(l.dependencies=s.dependencies),_r|=l.lanes,(u&l.childLanes)===0)if(s!==null){if(_o(s,l,u,!1),(u&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,u=tr(s,s.pendingProps),l.child=u,u.return=l;s.sibling!==null;)s=s.sibling,u=u.sibling=tr(s,s.pendingProps),u.return=l;u.sibling=null}return l.child}function ah(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Ga(s)))}function EE(s,l,u){switch(l.tag){case 3:Pt(l,l.stateNode.containerInfo),Or(l,ce,s.memoizedState.cache),jo();break;case 27:case 5:$f(l);break;case 4:Pt(l,l.stateNode.containerInfo);break;case 10:Or(l,l.type,l.memoizedProps.value);break;case 13:var d=l.memoizedState;if(d!==null)return d.dehydrated!==null?(Br(l),l.flags|=128,null):(u&l.child.childLanes)!==0?uv(s,l,u):(Br(l),s=lr(s,l,u),s!==null?s.sibling:null);Br(l);break;case 19:var m=(s.flags&128)!==0;if(d=(u&l.childLanes)!==0,d||(_o(s,l,u,!1),d=(u&l.childLanes)!==0),m){if(d)return dv(s,l,u);l.flags|=128}if(m=l.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Q(ue,ue.current),d)break;return null;case 22:case 23:return l.lanes=0,sv(s,l,u);case 24:Or(l,ce,s.memoizedState.cache)}return lr(s,l,u)}function hv(s,l,u){if(s!==null)if(s.memoizedProps!==l.pendingProps)pe=!0;else{if(!ah(s,u)&&(l.flags&128)===0)return pe=!1,EE(s,l,u);pe=(s.flags&131072)!==0}else pe=!1,Tt&&(l.flags&1048576)!==0&&Vy(l,Ja,l.index);switch(l.lanes=0,l.tag){case 16:t:{s=l.pendingProps;var d=l.elementType,m=d._init;if(d=m(d._payload),l.type=d,typeof d=="function")yd(d)?(s=Ri(d,s),l.tag=1,l=av(null,l,d,s,u)):(l.tag=0,l=eh(null,l,d,s,u));else{if(d!=null){if(m=d.$$typeof,m===V){l.tag=11,l=nv(null,l,d,s,u);break t}else if(m===q){l.tag=14,l=rv(null,l,d,s,u);break t}}throw l=Ct(d)||d,Error(r(306,l,""))}}return l;case 0:return eh(s,l,l.type,l.pendingProps,u);case 1:return d=l.type,m=Ri(d,l.pendingProps),av(s,l,d,m,u);case 3:t:{if(Pt(l,l.stateNode.containerInfo),s===null)throw Error(r(387));d=l.pendingProps;var v=l.memoizedState;m=v.element,Nd(s,l),Ko(l,d,null,u);var w=l.memoizedState;if(d=w.cache,Or(l,ce,d),d!==v.cache&&Td(l,[ce],u,!0),Go(),d=w.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:w.cache},l.updateQueue.baseState=v,l.memoizedState=v,l.flags&256){l=cv(s,l,d,u);break t}else if(d!==m){m=mn(Error(r(424)),l),Io(m),l=cv(s,l,d,u);break t}else for(s=l.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,Xt=Nn(s.firstChild),$e=l,Tt=!0,Mi=null,qn=!0,u=J0(l,null,d,u),l.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(jo(),d===m){l=lr(s,l,u);break t}we(s,l,d,u)}l=l.child}return l;case 26:return fc(s,l),s===null?(u=yb(l.type,null,l.pendingProps,null))?l.memoizedState=u:Tt||(u=l.type,s=l.pendingProps,d=Ec(dt.current).createElement(u),d[Ae]=l,d[Je]=s,Se(d,u,s),he(d),l.stateNode=d):l.memoizedState=yb(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return $f(l),s===null&&Tt&&(d=l.stateNode=pb(l.type,l.pendingProps,dt.current),$e=l,qn=!0,m=Xt,Pr(l.type)?(qh=m,Xt=Nn(d.firstChild)):Xt=m),we(s,l,l.pendingProps.children,u),fc(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Tt&&((m=d=Xt)&&(d=tC(d,l.type,l.pendingProps,qn),d!==null?(l.stateNode=d,$e=l,Xt=Nn(d.firstChild),qn=!1,m=!0):m=!1),m||Ti(l)),$f(l),m=l.type,v=l.pendingProps,w=s!==null?s.memoizedProps:null,d=v.children,jh(m,v)?d=null:w!==null&&jh(m,w)&&(l.flags|=32),l.memoizedState!==null&&(m=$d(s,l,vE,null,null,u),ml._currentValue=m),fc(s,l),we(s,l,d,u),l.child;case 6:return s===null&&Tt&&((s=u=Xt)&&(u=eC(u,l.pendingProps,qn),u!==null?(l.stateNode=u,$e=l,Xt=null,s=!0):s=!1),s||Ti(l)),null;case 13:return uv(s,l,u);case 4:return Pt(l,l.stateNode.containerInfo),d=l.pendingProps,s===null?l.child=Ls(l,null,d,u):we(s,l,d,u),l.child;case 11:return nv(s,l,l.type,l.pendingProps,u);case 7:return we(s,l,l.pendingProps,u),l.child;case 8:return we(s,l,l.pendingProps.children,u),l.child;case 12:return we(s,l,l.pendingProps.children,u),l.child;case 10:return d=l.pendingProps,Or(l,l.type,d.value),we(s,l,d.children,u),l.child;case 9:return m=l.type._context,d=l.pendingProps.children,Ci(l),m=Oe(m),d=d(m),l.flags|=1,we(s,l,d,u),l.child;case 14:return rv(s,l,l.type,l.pendingProps,u);case 15:return iv(s,l,l.type,l.pendingProps,u);case 19:return dv(s,l,u);case 31:return d=l.pendingProps,u=l.mode,d={mode:d.mode,children:d.children},s===null?(u=dc(d,u),u.ref=l.ref,l.child=u,u.return=l,l=u):(u=tr(s.child,d),u.ref=l.ref,l.child=u,u.return=l,l=u),l;case 22:return sv(s,l,u);case 24:return Ci(l),d=Oe(ce),s===null?(m=Ad(),m===null&&(m=qt,v=Ed(),m.pooledCache=v,v.refCount++,v!==null&&(m.pooledCacheLanes|=u),m=v),l.memoizedState={parent:d,cache:m},Rd(l),Or(l,ce,m)):((s.lanes&u)!==0&&(Nd(s,l),Ko(l,null,null,u),Go()),m=s.memoizedState,v=l.memoizedState,m.parent!==d?(m={parent:d,cache:d},l.memoizedState=m,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=m),Or(l,ce,d)):(d=v.cache,Or(l,ce,d),d!==m.cache&&Td(l,[ce],u,!0))),we(s,l,l.pendingProps.children,u),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function ar(s){s.flags|=4}function pv(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!xb(l)){if(l=bn.current,l!==null&&((wt&4194048)===wt?Vn!==null:(wt&62914560)!==wt&&(wt&536870912)===0||l!==Vn))throw Po=Od,Xy;s.flags|=8192}}function hc(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?Gg():536870912,s.lanes|=l,Is|=l)}function tl(s,l){if(!Tt)switch(s.tailMode){case"hidden":l=s.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Yt(s){var l=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(l)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=u,l}function CE(s,l,u){var d=l.pendingProps;switch(wd(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(l),null;case 1:return Yt(l),null;case 3:return u=l.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ir(ce),Tr(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&($o(l)?ar(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Gy())),Yt(l),null;case 26:return u=l.memoizedState,s===null?(ar(l),u!==null?(Yt(l),pv(l,u)):(Yt(l),l.flags&=-16777217)):u?u!==s.memoizedState?(ar(l),Yt(l),pv(l,u)):(Yt(l),l.flags&=-16777217):(s.memoizedProps!==d&&ar(l),Yt(l),l.flags&=-16777217),null;case 27:Ma(l),u=dt.current;var m=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==d&&ar(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Yt(l),null}s=it.current,$o(l)?Py(l):(s=pb(m,d,u),l.stateNode=s,ar(l))}return Yt(l),null;case 5:if(Ma(l),u=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==d&&ar(l);else{if(!d){if(l.stateNode===null)throw Error(r(166));return Yt(l),null}if(s=it.current,$o(l))Py(l);else{switch(m=Ec(dt.current),s){case 1:s=m.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:s=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":s=m.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":s=m.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":s=m.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof d.is=="string"?m.createElement("select",{is:d.is}):m.createElement("select"),d.multiple?s.multiple=!0:d.size&&(s.size=d.size);break;default:s=typeof d.is=="string"?m.createElement(u,{is:d.is}):m.createElement(u)}}s[Ae]=l,s[Je]=d;t:for(m=l.child;m!==null;){if(m.tag===5||m.tag===6)s.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===l)break t;for(;m.sibling===null;){if(m.return===null||m.return===l)break t;m=m.return}m.sibling.return=m.return,m=m.sibling}l.stateNode=s;t:switch(Se(s,u,d),u){case"button":case"input":case"select":case"textarea":s=!!d.autoFocus;break t;case"img":s=!0;break t;default:s=!1}s&&ar(l)}}return Yt(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==d&&ar(l);else{if(typeof d!="string"&&l.stateNode===null)throw Error(r(166));if(s=dt.current,$o(l)){if(s=l.stateNode,u=l.memoizedProps,d=null,m=$e,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}s[Ae]=l,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||lb(s.nodeValue,u)),s||Ti(l)}else s=Ec(s).createTextNode(d),s[Ae]=l,l.stateNode=s}return Yt(l),null;case 13:if(d=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(m=$o(l),d!==null&&d.dehydrated!==null){if(s===null){if(!m)throw Error(r(318));if(m=l.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Ae]=l}else jo(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Yt(l),m=!1}else m=Gy(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=m),m=!0;if(!m)return l.flags&256?(or(l),l):(or(l),null)}if(or(l),(l.flags&128)!==0)return l.lanes=u,l;if(u=d!==null,s=s!==null&&s.memoizedState!==null,u){d=l.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool);var v=null;d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(v=d.memoizedState.cachePool.pool),v!==m&&(d.flags|=2048)}return u!==s&&u&&(l.child.flags|=8192),hc(l,l.updateQueue),Yt(l),null;case 4:return Tr(),s===null&&Dh(l.stateNode.containerInfo),Yt(l),null;case 10:return ir(l.type),Yt(l),null;case 19:if(X(ue),m=l.memoizedState,m===null)return Yt(l),null;if(d=(l.flags&128)!==0,v=m.rendering,v===null)if(d)tl(m,!1);else{if(Zt!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(v=ac(s),v!==null){for(l.flags|=128,tl(m,!1),s=v.updateQueue,l.updateQueue=s,hc(l,s),l.subtreeFlags=0,s=u,u=l.child;u!==null;)qy(u,s),u=u.sibling;return Q(ue,ue.current&1|2),l.child}s=s.sibling}m.tail!==null&&Un()>gc&&(l.flags|=128,d=!0,tl(m,!1),l.lanes=4194304)}else{if(!d)if(s=ac(v),s!==null){if(l.flags|=128,d=!0,s=s.updateQueue,l.updateQueue=s,hc(l,s),tl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!Tt)return Yt(l),null}else 2*Un()-m.renderingStartTime>gc&&u!==536870912&&(l.flags|=128,d=!0,tl(m,!1),l.lanes=4194304);m.isBackwards?(v.sibling=l.child,l.child=v):(s=m.last,s!==null?s.sibling=v:l.child=v,m.last=v)}return m.tail!==null?(l=m.tail,m.rendering=l,m.tail=l.sibling,m.renderingStartTime=Un(),l.sibling=null,s=ue.current,Q(ue,d?s&1|2:s&1),l):(Yt(l),null);case 22:case 23:return or(l),Ld(),d=l.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(l.flags|=8192):d&&(l.flags|=8192),d?(u&536870912)!==0&&(l.flags&128)===0&&(Yt(l),l.subtreeFlags&6&&(l.flags|=8192)):Yt(l),u=l.updateQueue,u!==null&&hc(l,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==u&&(l.flags|=2048),s!==null&&X(Ai),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),l.memoizedState.cache!==u&&(l.flags|=2048),ir(ce),Yt(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function AE(s,l){switch(wd(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ir(ce),Tr(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return Ma(l),null;case 13:if(or(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));jo()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return X(ue),null;case 4:return Tr(),null;case 10:return ir(l.type),null;case 22:case 23:return or(l),Ld(),s!==null&&X(Ai),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ir(ce),null;case 25:return null;default:return null}}function mv(s,l){switch(wd(l),l.tag){case 3:ir(ce),Tr();break;case 26:case 27:case 5:Ma(l);break;case 4:Tr();break;case 13:or(l);break;case 19:X(ue);break;case 10:ir(l.type);break;case 22:case 23:or(l),Ld(),s!==null&&X(Ai);break;case 24:ir(ce)}}function el(s,l){try{var u=l.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var m=d.next;u=m;do{if((u.tag&s)===s){d=void 0;var v=u.create,w=u.inst;d=v(),w.destroy=d}u=u.next}while(u!==m)}}catch(M){Ht(l,l.return,M)}}function Hr(s,l,u){try{var d=l.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&s)===s){var w=d.inst,M=w.destroy;if(M!==void 0){w.destroy=void 0,m=l;var E=u,N=M;try{N()}catch(j){Ht(m,E,j)}}}d=d.next}while(d!==v)}}catch(j){Ht(l,l.return,j)}}function gv(s){var l=s.updateQueue;if(l!==null){var u=s.stateNode;try{r0(l,u)}catch(d){Ht(s,s.return,d)}}}function yv(s,l,u){u.props=Ri(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){Ht(s,l,d)}}function nl(s,l){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(m){Ht(s,l,m)}}function Pn(s,l){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(m){Ht(s,l,m)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(m){Ht(s,l,m)}else u.current=null}function vv(s){var l=s.type,u=s.memoizedProps,d=s.stateNode;try{t:switch(l){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break t;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(m){Ht(s,s.return,m)}}function ch(s,l,u){try{var d=s.stateNode;FE(d,s.type,u,l),d[Je]=l}catch(m){Ht(s,s.return,m)}}function bv(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Pr(s.type)||s.tag===4}function uh(s){t:for(;;){for(;s.sibling===null;){if(s.return===null||bv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Pr(s.type)||s.flags&2||s.child===null||s.tag===4)continue t;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function fh(s,l,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,l):(l=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,l.appendChild(s),u=u._reactRootContainer,u!=null||l.onclick!==null||(l.onclick=Tc));else if(d!==4&&(d===27&&Pr(s.type)&&(u=s.stateNode,l=null),s=s.child,s!==null))for(fh(s,l,u),s=s.sibling;s!==null;)fh(s,l,u),s=s.sibling}function pc(s,l,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,l?u.insertBefore(s,l):u.appendChild(s);else if(d!==4&&(d===27&&Pr(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(pc(s,l,u),s=s.sibling;s!==null;)pc(s,l,u),s=s.sibling}function kv(s){var l=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,m=l.attributes;m.length;)l.removeAttributeNode(m[0]);Se(l,d,u),l[Ae]=s,l[Je]=u}catch(v){Ht(s,s.return,v)}}var cr=!1,re=!1,dh=!1,wv=typeof WeakSet=="function"?WeakSet:Set,me=null;function OE(s,l){if(s=s.containerInfo,Hh=zc,s=zy(s),ud(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break t}var w=0,M=-1,E=-1,N=0,j=0,U=s,z=null;e:for(;;){for(var B;U!==u||m!==0&&U.nodeType!==3||(M=w+m),U!==v||d!==0&&U.nodeType!==3||(E=w+d),U.nodeType===3&&(w+=U.nodeValue.length),(B=U.firstChild)!==null;)z=U,U=B;for(;;){if(U===s)break e;if(z===u&&++N===m&&(M=w),z===v&&++j===d&&(E=w),(B=U.nextSibling)!==null)break;U=z,z=U.parentNode}U=B}u=M===-1||E===-1?null:{start:M,end:E}}else u=null}u=u||{start:0,end:0}}else u=null;for($h={focusedElem:s,selectionRange:u},zc=!1,me=l;me!==null;)if(l=me,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,me=s;else for(;me!==null;){switch(l=me,v=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,u=l,m=v.memoizedProps,v=v.memoizedState,d=u.stateNode;try{var at=Ri(u.type,m,u.elementType===u.type);s=d.getSnapshotBeforeUpdate(at,v),d.__reactInternalSnapshotBeforeUpdate=s}catch(st){Ht(u,u.return,st)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,u=s.nodeType,u===9)_h(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":_h(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,me=s;break}me=l.return}}function xv(s,l,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:$r(s,u),d&4&&el(5,u);break;case 1:if($r(s,u),d&4)if(s=u.stateNode,l===null)try{s.componentDidMount()}catch(w){Ht(u,u.return,w)}else{var m=Ri(u.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(m,l,s.__reactInternalSnapshotBeforeUpdate)}catch(w){Ht(u,u.return,w)}}d&64&&gv(u),d&512&&nl(u,u.return);break;case 3:if($r(s,u),d&64&&(s=u.updateQueue,s!==null)){if(l=null,u.child!==null)switch(u.child.tag){case 27:case 5:l=u.child.stateNode;break;case 1:l=u.child.stateNode}try{r0(s,l)}catch(w){Ht(u,u.return,w)}}break;case 27:l===null&&d&4&&kv(u);case 26:case 5:$r(s,u),l===null&&d&4&&vv(u),d&512&&nl(u,u.return);break;case 12:$r(s,u);break;case 13:$r(s,u),d&4&&Tv(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=jE.bind(null,u),nC(s,u))));break;case 22:if(d=u.memoizedState!==null||cr,!d){l=l!==null&&l.memoizedState!==null||re,m=cr;var v=re;cr=d,(re=l)&&!v?jr(s,u,(u.subtreeFlags&8772)!==0):$r(s,u),cr=m,re=v}break;case 30:break;default:$r(s,u)}}function Sv(s){var l=s.alternate;l!==null&&(s.alternate=null,Sv(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&Jf(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Jt=null,Ye=!1;function ur(s,l,u){for(u=u.child;u!==null;)Mv(s,l,u),u=u.sibling}function Mv(s,l,u){if(nn&&typeof nn.onCommitFiberUnmount=="function")try{nn.onCommitFiberUnmount(So,u)}catch{}switch(u.tag){case 26:re||Pn(u,l),ur(s,l,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:re||Pn(u,l);var d=Jt,m=Ye;Pr(u.type)&&(Jt=u.stateNode,Ye=!1),ur(s,l,u),fl(u.stateNode),Jt=d,Ye=m;break;case 5:re||Pn(u,l);case 6:if(d=Jt,m=Ye,Jt=null,ur(s,l,u),Jt=d,Ye=m,Jt!==null)if(Ye)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(u.stateNode)}catch(v){Ht(u,l,v)}else try{Jt.removeChild(u.stateNode)}catch(v){Ht(u,l,v)}break;case 18:Jt!==null&&(Ye?(s=Jt,db(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),bl(s)):db(Jt,u.stateNode));break;case 4:d=Jt,m=Ye,Jt=u.stateNode.containerInfo,Ye=!0,ur(s,l,u),Jt=d,Ye=m;break;case 0:case 11:case 14:case 15:re||Hr(2,u,l),re||Hr(4,u,l),ur(s,l,u);break;case 1:re||(Pn(u,l),d=u.stateNode,typeof d.componentWillUnmount=="function"&&yv(u,l,d)),ur(s,l,u);break;case 21:ur(s,l,u);break;case 22:re=(d=re)||u.memoizedState!==null,ur(s,l,u),re=d;break;default:ur(s,l,u)}}function Tv(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{bl(s)}catch(u){Ht(l,l.return,u)}}function RE(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new wv),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new wv),l;default:throw Error(r(435,s.tag))}}function hh(s,l){var u=RE(s);l.forEach(function(d){var m=IE.bind(null,s,d);u.has(d)||(u.add(d),d.then(m,m))})}function ln(s,l){var u=l.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d],v=s,w=l,M=w;t:for(;M!==null;){switch(M.tag){case 27:if(Pr(M.type)){Jt=M.stateNode,Ye=!1;break t}break;case 5:Jt=M.stateNode,Ye=!1;break t;case 3:case 4:Jt=M.stateNode.containerInfo,Ye=!0;break t}M=M.return}if(Jt===null)throw Error(r(160));Mv(v,w,m),Jt=null,Ye=!1,v=m.alternate,v!==null&&(v.return=null),m.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)Ev(l,s),l=l.sibling}var Rn=null;function Ev(s,l){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:ln(l,s),an(s),d&4&&(Hr(3,s,s.return),el(3,s),Hr(5,s,s.return));break;case 1:ln(l,s),an(s),d&512&&(re||u===null||Pn(u,u.return)),d&64&&cr&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var m=Rn;if(ln(l,s),an(s),d&512&&(re||u===null||Pn(u,u.return)),d&4){var v=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){t:{d=s.type,u=s.memoizedProps,m=m.ownerDocument||m;e:switch(d){case"title":v=m.getElementsByTagName("title")[0],(!v||v[Eo]||v[Ae]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=m.createElement(d),m.head.insertBefore(v,m.querySelector("head > title"))),Se(v,d,u),v[Ae]=s,he(v),d=v;break t;case"link":var w=kb("link","href",m).get(d+(u.href||""));if(w){for(var M=0;M<w.length;M++)if(v=w[M],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){w.splice(M,1);break e}}v=m.createElement(d),Se(v,d,u),m.head.appendChild(v);break;case"meta":if(w=kb("meta","content",m).get(d+(u.content||""))){for(M=0;M<w.length;M++)if(v=w[M],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){w.splice(M,1);break e}}v=m.createElement(d),Se(v,d,u),m.head.appendChild(v);break;default:throw Error(r(468,d))}v[Ae]=s,he(v),d=v}s.stateNode=d}else wb(m,s.type,s.stateNode);else s.stateNode=bb(m,d,s.memoizedProps);else v!==d?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,d===null?wb(m,s.type,s.stateNode):bb(m,d,s.memoizedProps)):d===null&&s.stateNode!==null&&ch(s,s.memoizedProps,u.memoizedProps)}break;case 27:ln(l,s),an(s),d&512&&(re||u===null||Pn(u,u.return)),u!==null&&d&4&&ch(s,s.memoizedProps,u.memoizedProps);break;case 5:if(ln(l,s),an(s),d&512&&(re||u===null||Pn(u,u.return)),s.flags&32){m=s.stateNode;try{ys(m,"")}catch(B){Ht(s,s.return,B)}}d&4&&s.stateNode!=null&&(m=s.memoizedProps,ch(s,m,u!==null?u.memoizedProps:m)),d&1024&&(dh=!0);break;case 6:if(ln(l,s),an(s),d&4){if(s.stateNode===null)throw Error(r(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(B){Ht(s,s.return,B)}}break;case 3:if(Oc=null,m=Rn,Rn=Cc(l.containerInfo),ln(l,s),Rn=m,an(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{bl(l.containerInfo)}catch(B){Ht(s,s.return,B)}dh&&(dh=!1,Cv(s));break;case 4:d=Rn,Rn=Cc(s.stateNode.containerInfo),ln(l,s),an(s),Rn=d;break;case 12:ln(l,s),an(s);break;case 13:ln(l,s),an(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(bh=Un()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,hh(s,d)));break;case 22:m=s.memoizedState!==null;var E=u!==null&&u.memoizedState!==null,N=cr,j=re;if(cr=N||m,re=j||E,ln(l,s),re=j,cr=N,an(s),d&8192)t:for(l=s.stateNode,l._visibility=m?l._visibility&-2:l._visibility|1,m&&(u===null||E||cr||re||Ni(s)),u=null,l=s;;){if(l.tag===5||l.tag===26){if(u===null){E=u=l;try{if(v=E.stateNode,m)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{M=E.stateNode;var U=E.memoizedProps.style,z=U!=null&&U.hasOwnProperty("display")?U.display:null;M.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(B){Ht(E,E.return,B)}}}else if(l.tag===6){if(u===null){E=l;try{E.stateNode.nodeValue=m?"":E.memoizedProps}catch(B){Ht(E,E.return,B)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break t;for(;l.sibling===null;){if(l.return===null||l.return===s)break t;u===l&&(u=null),l=l.return}u===l&&(u=null),l.sibling.return=l.return,l=l.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,hh(s,u))));break;case 19:ln(l,s),an(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,hh(s,d)));break;case 30:break;case 21:break;default:ln(l,s),an(s)}}function an(s){var l=s.flags;if(l&2){try{for(var u,d=s.return;d!==null;){if(bv(d)){u=d;break}d=d.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var m=u.stateNode,v=uh(s);pc(s,v,m);break;case 5:var w=u.stateNode;u.flags&32&&(ys(w,""),u.flags&=-33);var M=uh(s);pc(s,M,w);break;case 3:case 4:var E=u.stateNode.containerInfo,N=uh(s);fh(s,N,E);break;default:throw Error(r(161))}}catch(j){Ht(s,s.return,j)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function Cv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;Cv(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function $r(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)xv(s,l.alternate,l),l=l.sibling}function Ni(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:Hr(4,l,l.return),Ni(l);break;case 1:Pn(l,l.return);var u=l.stateNode;typeof u.componentWillUnmount=="function"&&yv(l,l.return,u),Ni(l);break;case 27:fl(l.stateNode);case 26:case 5:Pn(l,l.return),Ni(l);break;case 22:l.memoizedState===null&&Ni(l);break;case 30:Ni(l);break;default:Ni(l)}s=s.sibling}}function jr(s,l,u){for(u=u&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var d=l.alternate,m=s,v=l,w=v.flags;switch(v.tag){case 0:case 11:case 15:jr(m,v,u),el(4,v);break;case 1:if(jr(m,v,u),d=v,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(N){Ht(d,d.return,N)}if(d=v,m=d.updateQueue,m!==null){var M=d.stateNode;try{var E=m.shared.hiddenCallbacks;if(E!==null)for(m.shared.hiddenCallbacks=null,m=0;m<E.length;m++)n0(E[m],M)}catch(N){Ht(d,d.return,N)}}u&&w&64&&gv(v),nl(v,v.return);break;case 27:kv(v);case 26:case 5:jr(m,v,u),u&&d===null&&w&4&&vv(v),nl(v,v.return);break;case 12:jr(m,v,u);break;case 13:jr(m,v,u),u&&w&4&&Tv(m,v);break;case 22:v.memoizedState===null&&jr(m,v,u),nl(v,v.return);break;case 30:break;default:jr(m,v,u)}l=l.sibling}}function ph(s,l){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Uo(u))}function mh(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Uo(s))}function Jn(s,l,u,d){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Av(s,l,u,d),l=l.sibling}function Av(s,l,u,d){var m=l.flags;switch(l.tag){case 0:case 11:case 15:Jn(s,l,u,d),m&2048&&el(9,l);break;case 1:Jn(s,l,u,d);break;case 3:Jn(s,l,u,d),m&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&Uo(s)));break;case 12:if(m&2048){Jn(s,l,u,d),s=l.stateNode;try{var v=l.memoizedProps,w=v.id,M=v.onPostCommit;typeof M=="function"&&M(w,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(E){Ht(l,l.return,E)}}else Jn(s,l,u,d);break;case 13:Jn(s,l,u,d);break;case 23:break;case 22:v=l.stateNode,w=l.alternate,l.memoizedState!==null?v._visibility&2?Jn(s,l,u,d):rl(s,l):v._visibility&2?Jn(s,l,u,d):(v._visibility|=2,Hs(s,l,u,d,(l.subtreeFlags&10256)!==0)),m&2048&&ph(w,l);break;case 24:Jn(s,l,u,d),m&2048&&mh(l.alternate,l);break;default:Jn(s,l,u,d)}}function Hs(s,l,u,d,m){for(m=m&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var v=s,w=l,M=u,E=d,N=w.flags;switch(w.tag){case 0:case 11:case 15:Hs(v,w,M,E,m),el(8,w);break;case 23:break;case 22:var j=w.stateNode;w.memoizedState!==null?j._visibility&2?Hs(v,w,M,E,m):rl(v,w):(j._visibility|=2,Hs(v,w,M,E,m)),m&&N&2048&&ph(w.alternate,w);break;case 24:Hs(v,w,M,E,m),m&&N&2048&&mh(w.alternate,w);break;default:Hs(v,w,M,E,m)}l=l.sibling}}function rl(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var u=s,d=l,m=d.flags;switch(d.tag){case 22:rl(u,d),m&2048&&ph(d.alternate,d);break;case 24:rl(u,d),m&2048&&mh(d.alternate,d);break;default:rl(u,d)}l=l.sibling}}var il=8192;function $s(s){if(s.subtreeFlags&il)for(s=s.child;s!==null;)Ov(s),s=s.sibling}function Ov(s){switch(s.tag){case 26:$s(s),s.flags&il&&s.memoizedState!==null&&mC(Rn,s.memoizedState,s.memoizedProps);break;case 5:$s(s);break;case 3:case 4:var l=Rn;Rn=Cc(s.stateNode.containerInfo),$s(s),Rn=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=il,il=16777216,$s(s),il=l):$s(s));break;default:$s(s)}}function Rv(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function sl(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];me=d,zv(d,s)}Rv(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Nv(s),s=s.sibling}function Nv(s){switch(s.tag){case 0:case 11:case 15:sl(s),s.flags&2048&&Hr(9,s,s.return);break;case 3:sl(s);break;case 12:sl(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,mc(s)):sl(s);break;default:sl(s)}}function mc(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var u=0;u<l.length;u++){var d=l[u];me=d,zv(d,s)}Rv(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:Hr(8,l,l.return),mc(l);break;case 22:u=l.stateNode,u._visibility&2&&(u._visibility&=-3,mc(l));break;default:mc(l)}s=s.sibling}}function zv(s,l){for(;me!==null;){var u=me;switch(u.tag){case 0:case 11:case 15:Hr(8,u,l);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Uo(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,me=d;else t:for(u=s;me!==null;){d=me;var m=d.sibling,v=d.return;if(Sv(d),d===u){me=null;break t}if(m!==null){m.return=v,me=m;break t}me=v}}}var NE={getCacheForType:function(s){var l=Oe(ce),u=l.data.get(s);return u===void 0&&(u=s(),l.data.set(s,u)),u}},zE=typeof WeakMap=="function"?WeakMap:Map,At=0,qt=null,bt=null,wt=0,Ot=0,cn=null,Ir=!1,js=!1,gh=!1,fr=0,Zt=0,_r=0,zi=0,yh=0,kn=0,Is=0,ol=null,Fe=null,vh=!1,bh=0,gc=1/0,yc=null,Ur=null,xe=0,qr=null,_s=null,Us=0,kh=0,wh=null,Dv=null,ll=0,xh=null;function un(){if((At&2)!==0&&wt!==0)return wt&-wt;if($.T!==null){var s=As;return s!==0?s:Oh()}return Fg()}function Bv(){kn===0&&(kn=(wt&536870912)===0||Tt?Jg():536870912);var s=bn.current;return s!==null&&(s.flags|=32),kn}function fn(s,l,u){(s===qt&&(Ot===2||Ot===9)||s.cancelPendingCommit!==null)&&(qs(s,0),Vr(s,wt,kn,!1)),To(s,u),((At&2)===0||s!==qt)&&(s===qt&&((At&2)===0&&(zi|=u),Zt===4&&Vr(s,wt,kn,!1)),Gn(s))}function Lv(s,l,u){if((At&6)!==0)throw Error(r(327));var d=!u&&(l&124)===0&&(l&s.expiredLanes)===0||Mo(s,l),m=d?LE(s,l):Th(s,l,!0),v=d;do{if(m===0){js&&!d&&Vr(s,l,0,!1);break}else{if(u=s.current.alternate,v&&!DE(u)){m=Th(s,l,!1),v=!1;continue}if(m===2){if(v=l,s.errorRecoveryDisabledLanes&v)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){l=w;t:{var M=s;m=ol;var E=M.current.memoizedState.isDehydrated;if(E&&(qs(M,w).flags|=256),w=Th(M,w,!1),w!==2){if(gh&&!E){M.errorRecoveryDisabledLanes|=v,zi|=v,m=4;break t}v=Fe,Fe=m,v!==null&&(Fe===null?Fe=v:Fe.push.apply(Fe,v))}m=w}if(v=!1,m!==2)continue}}if(m===1){qs(s,0),Vr(s,l,0,!0);break}t:{switch(d=s,v=m,v){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Vr(d,l,kn,!Ir);break t;case 2:Fe=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(m=bh+300-Un(),10<m)){if(Vr(d,l,kn,!Ir),Aa(d,0,!0)!==0)break t;d.timeoutHandle=ub(Hv.bind(null,d,u,Fe,yc,vh,l,kn,zi,Is,Ir,v,2,-0,0),m);break t}Hv(d,u,Fe,yc,vh,l,kn,zi,Is,Ir,v,0,-0,0)}}break}while(!0);Gn(s)}function Hv(s,l,u,d,m,v,w,M,E,N,j,U,z,B){if(s.timeoutHandle=-1,U=l.subtreeFlags,(U&8192||(U&16785408)===16785408)&&(pl={stylesheets:null,count:0,unsuspend:pC},Ov(l),U=gC(),U!==null)){s.cancelPendingCommit=U(Vv.bind(null,s,l,v,u,d,m,w,M,E,j,1,z,B)),Vr(s,v,w,!N);return}Vv(s,l,v,u,d,m,w,M,E)}function DE(s){for(var l=s;;){var u=l.tag;if((u===0||u===11||u===15)&&l.flags&16384&&(u=l.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var m=u[d],v=m.getSnapshot;m=m.value;try{if(!sn(v(),m))return!1}catch{return!1}}if(u=l.child,l.subtreeFlags&16384&&u!==null)u.return=l,l=u;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Vr(s,l,u,d){l&=~yh,l&=~zi,s.suspendedLanes|=l,s.pingedLanes&=~l,d&&(s.warmLanes|=l),d=s.expirationTimes;for(var m=l;0<m;){var v=31-rn(m),w=1<<v;d[v]=-1,m&=~w}u!==0&&Kg(s,u,l)}function vc(){return(At&6)===0?(al(0),!1):!0}function Sh(){if(bt!==null){if(Ot===0)var s=bt.return;else s=bt,rr=Ei=null,_d(s),Bs=null,Zo=0,s=bt;for(;s!==null;)mv(s.alternate,s),s=s.return;bt=null}}function qs(s,l){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,XE(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Sh(),qt=s,bt=u=tr(s.current,null),wt=l,Ot=0,cn=null,Ir=!1,js=Mo(s,l),gh=!1,Is=kn=yh=zi=_r=Zt=0,Fe=ol=null,vh=!1,(l&8)!==0&&(l|=l&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=l;0<d;){var m=31-rn(d),v=1<<m;l|=s[m],d&=~v}return fr=l,_a(),u}function $v(s,l){yt=null,$.H=sc,l===Vo||l===Fa?(l=t0(),Ot=3):l===Xy?(l=t0(),Ot=4):Ot=l===ev?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,cn=l,bt===null&&(Zt=1,uc(s,mn(l,s.current)))}function jv(){var s=$.H;return $.H=sc,s===null?sc:s}function Iv(){var s=$.A;return $.A=NE,s}function Mh(){Zt=4,Ir||(wt&4194048)!==wt&&bn.current!==null||(js=!0),(_r&134217727)===0&&(zi&134217727)===0||qt===null||Vr(qt,wt,kn,!1)}function Th(s,l,u){var d=At;At|=2;var m=jv(),v=Iv();(qt!==s||wt!==l)&&(yc=null,qs(s,l)),l=!1;var w=Zt;t:do try{if(Ot!==0&&bt!==null){var M=bt,E=cn;switch(Ot){case 8:Sh(),w=6;break t;case 3:case 2:case 9:case 6:bn.current===null&&(l=!0);var N=Ot;if(Ot=0,cn=null,Vs(s,M,E,N),u&&js){w=0;break t}break;default:N=Ot,Ot=0,cn=null,Vs(s,M,E,N)}}BE(),w=Zt;break}catch(j){$v(s,j)}while(!0);return l&&s.shellSuspendCounter++,rr=Ei=null,At=d,$.H=m,$.A=v,bt===null&&(qt=null,wt=0,_a()),w}function BE(){for(;bt!==null;)_v(bt)}function LE(s,l){var u=At;At|=2;var d=jv(),m=Iv();qt!==s||wt!==l?(yc=null,gc=Un()+500,qs(s,l)):js=Mo(s,l);t:do try{if(Ot!==0&&bt!==null){l=bt;var v=cn;e:switch(Ot){case 1:Ot=0,cn=null,Vs(s,l,v,1);break;case 2:case 9:if(Zy(v)){Ot=0,cn=null,Uv(l);break}l=function(){Ot!==2&&Ot!==9||qt!==s||(Ot=7),Gn(s)},v.then(l,l);break t;case 3:Ot=7;break t;case 4:Ot=5;break t;case 7:Zy(v)?(Ot=0,cn=null,Uv(l)):(Ot=0,cn=null,Vs(s,l,v,7));break;case 5:var w=null;switch(bt.tag){case 26:w=bt.memoizedState;case 5:case 27:var M=bt;if(!w||xb(w)){Ot=0,cn=null;var E=M.sibling;if(E!==null)bt=E;else{var N=M.return;N!==null?(bt=N,bc(N)):bt=null}break e}}Ot=0,cn=null,Vs(s,l,v,5);break;case 6:Ot=0,cn=null,Vs(s,l,v,6);break;case 8:Sh(),Zt=6;break t;default:throw Error(r(462))}}HE();break}catch(j){$v(s,j)}while(!0);return rr=Ei=null,$.H=d,$.A=m,At=u,bt!==null?0:(qt=null,wt=0,_a(),Zt)}function HE(){for(;bt!==null&&!iT();)_v(bt)}function _v(s){var l=hv(s.alternate,s,fr);s.memoizedProps=s.pendingProps,l===null?bc(s):bt=l}function Uv(s){var l=s,u=l.alternate;switch(l.tag){case 15:case 0:l=lv(u,l,l.pendingProps,l.type,void 0,wt);break;case 11:l=lv(u,l,l.pendingProps,l.type.render,l.ref,wt);break;case 5:_d(l);default:mv(u,l),l=bt=qy(l,fr),l=hv(u,l,fr)}s.memoizedProps=s.pendingProps,l===null?bc(s):bt=l}function Vs(s,l,u,d){rr=Ei=null,_d(l),Bs=null,Zo=0;var m=l.return;try{if(TE(s,m,l,u,wt)){Zt=1,uc(s,mn(u,s.current)),bt=null;return}}catch(v){if(m!==null)throw bt=m,v;Zt=1,uc(s,mn(u,s.current)),bt=null;return}l.flags&32768?(Tt||d===1?s=!0:js||(wt&536870912)!==0?s=!1:(Ir=s=!0,(d===2||d===9||d===3||d===6)&&(d=bn.current,d!==null&&d.tag===13&&(d.flags|=16384))),qv(l,s)):bc(l)}function bc(s){var l=s;do{if((l.flags&32768)!==0){qv(l,Ir);return}s=l.return;var u=CE(l.alternate,l,fr);if(u!==null){bt=u;return}if(l=l.sibling,l!==null){bt=l;return}bt=l=s}while(l!==null);Zt===0&&(Zt=5)}function qv(s,l){do{var u=AE(s.alternate,s);if(u!==null){u.flags&=32767,bt=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!l&&(s=s.sibling,s!==null)){bt=s;return}bt=s=u}while(s!==null);Zt=6,bt=null}function Vv(s,l,u,d,m,v,w,M,E){s.cancelPendingCommit=null;do kc();while(xe!==0);if((At&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(v=l.lanes|l.childLanes,v|=md,pT(s,u,v,w,M,E),s===qt&&(bt=qt=null,wt=0),_s=l,qr=s,Us=u,kh=v,wh=m,Dv=d,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,_E(Ta,function(){return Yv(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||d){d=$.T,$.T=null,m=F.p,F.p=2,w=At,At|=4;try{OE(s,l,u)}finally{At=w,F.p=m,$.T=d}}xe=1,Pv(),Jv(),Gv()}}function Pv(){if(xe===1){xe=0;var s=qr,l=_s,u=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||u){u=$.T,$.T=null;var d=F.p;F.p=2;var m=At;At|=4;try{Ev(l,s);var v=$h,w=zy(s.containerInfo),M=v.focusedElem,E=v.selectionRange;if(w!==M&&M&&M.ownerDocument&&Ny(M.ownerDocument.documentElement,M)){if(E!==null&&ud(M)){var N=E.start,j=E.end;if(j===void 0&&(j=N),"selectionStart"in M)M.selectionStart=N,M.selectionEnd=Math.min(j,M.value.length);else{var U=M.ownerDocument||document,z=U&&U.defaultView||window;if(z.getSelection){var B=z.getSelection(),at=M.textContent.length,st=Math.min(E.start,at),Bt=E.end===void 0?st:Math.min(E.end,at);!B.extend&&st>Bt&&(w=Bt,Bt=st,st=w);var O=Ry(M,st),A=Ry(M,Bt);if(O&&A&&(B.rangeCount!==1||B.anchorNode!==O.node||B.anchorOffset!==O.offset||B.focusNode!==A.node||B.focusOffset!==A.offset)){var R=U.createRange();R.setStart(O.node,O.offset),B.removeAllRanges(),st>Bt?(B.addRange(R),B.extend(A.node,A.offset)):(R.setEnd(A.node,A.offset),B.addRange(R))}}}}for(U=[],B=M;B=B.parentNode;)B.nodeType===1&&U.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<U.length;M++){var _=U[M];_.element.scrollLeft=_.left,_.element.scrollTop=_.top}}zc=!!Hh,$h=Hh=null}finally{At=m,F.p=d,$.T=u}}s.current=l,xe=2}}function Jv(){if(xe===2){xe=0;var s=qr,l=_s,u=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||u){u=$.T,$.T=null;var d=F.p;F.p=2;var m=At;At|=4;try{xv(s,l.alternate,l)}finally{At=m,F.p=d,$.T=u}}xe=3}}function Gv(){if(xe===4||xe===3){xe=0,sT();var s=qr,l=_s,u=Us,d=Dv;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?xe=5:(xe=0,_s=qr=null,Kv(s,s.pendingLanes));var m=s.pendingLanes;if(m===0&&(Ur=null),Vf(u),l=l.stateNode,nn&&typeof nn.onCommitFiberRoot=="function")try{nn.onCommitFiberRoot(So,l,void 0,(l.current.flags&128)===128)}catch{}if(d!==null){l=$.T,m=F.p,F.p=2,$.T=null;try{for(var v=s.onRecoverableError,w=0;w<d.length;w++){var M=d[w];v(M.value,{componentStack:M.stack})}}finally{$.T=l,F.p=m}}(Us&3)!==0&&kc(),Gn(s),m=s.pendingLanes,(u&4194090)!==0&&(m&42)!==0?s===xh?ll++:(ll=0,xh=s):ll=0,al(0)}}function Kv(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,Uo(l)))}function kc(s){return Pv(),Jv(),Gv(),Yv()}function Yv(){if(xe!==5)return!1;var s=qr,l=kh;kh=0;var u=Vf(Us),d=$.T,m=F.p;try{F.p=32>u?32:u,$.T=null,u=wh,wh=null;var v=qr,w=Us;if(xe=0,_s=qr=null,Us=0,(At&6)!==0)throw Error(r(331));var M=At;if(At|=4,Nv(v.current),Av(v,v.current,w,u),At=M,al(0,!1),nn&&typeof nn.onPostCommitFiberRoot=="function")try{nn.onPostCommitFiberRoot(So,v)}catch{}return!0}finally{F.p=m,$.T=d,Kv(s,l)}}function Fv(s,l,u){l=mn(u,l),l=th(s.stateNode,l,2),s=zr(s,l,2),s!==null&&(To(s,2),Gn(s))}function Ht(s,l,u){if(s.tag===3)Fv(s,s,u);else for(;l!==null;){if(l.tag===3){Fv(l,s,u);break}else if(l.tag===1){var d=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ur===null||!Ur.has(d))){s=mn(u,s),u=W0(2),d=zr(l,u,2),d!==null&&(tv(u,d,l,s),To(d,2),Gn(d));break}}l=l.return}}function Eh(s,l,u){var d=s.pingCache;if(d===null){d=s.pingCache=new zE;var m=new Set;d.set(l,m)}else m=d.get(l),m===void 0&&(m=new Set,d.set(l,m));m.has(u)||(gh=!0,m.add(u),s=$E.bind(null,s,l,u),l.then(s,s))}function $E(s,l,u){var d=s.pingCache;d!==null&&d.delete(l),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,qt===s&&(wt&u)===u&&(Zt===4||Zt===3&&(wt&62914560)===wt&&300>Un()-bh?(At&2)===0&&qs(s,0):yh|=u,Is===wt&&(Is=0)),Gn(s)}function Qv(s,l){l===0&&(l=Gg()),s=Ms(s,l),s!==null&&(To(s,l),Gn(s))}function jE(s){var l=s.memoizedState,u=0;l!==null&&(u=l.retryLane),Qv(s,u)}function IE(s,l){var u=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(r(314))}d!==null&&d.delete(l),Qv(s,u)}function _E(s,l){return If(s,l)}var wc=null,Ps=null,Ch=!1,xc=!1,Ah=!1,Di=0;function Gn(s){s!==Ps&&s.next===null&&(Ps===null?wc=Ps=s:Ps=Ps.next=s),xc=!0,Ch||(Ch=!0,qE())}function al(s,l){if(!Ah&&xc){Ah=!0;do for(var u=!1,d=wc;d!==null;){if(s!==0){var m=d.pendingLanes;if(m===0)var v=0;else{var w=d.suspendedLanes,M=d.pingedLanes;v=(1<<31-rn(42|s)+1)-1,v&=m&~(w&~M),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,tb(d,v))}else v=wt,v=Aa(d,d===qt?v:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(v&3)===0||Mo(d,v)||(u=!0,tb(d,v));d=d.next}while(u);Ah=!1}}function UE(){Xv()}function Xv(){xc=Ch=!1;var s=0;Di!==0&&(QE()&&(s=Di),Di=0);for(var l=Un(),u=null,d=wc;d!==null;){var m=d.next,v=Zv(d,l);v===0?(d.next=null,u===null?wc=m:u.next=m,m===null&&(Ps=u)):(u=d,(s!==0||(v&3)!==0)&&(xc=!0)),d=m}al(s)}function Zv(s,l){for(var u=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var w=31-rn(v),M=1<<w,E=m[w];E===-1?((M&u)===0||(M&d)!==0)&&(m[w]=hT(M,l)):E<=l&&(s.expiredLanes|=M),v&=~M}if(l=qt,u=wt,u=Aa(s,s===l?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===l&&(Ot===2||Ot===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&_f(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Mo(s,u)){if(l=u&-u,l===s.callbackPriority)return l;switch(d!==null&&_f(d),Vf(u)){case 2:case 8:u=Vg;break;case 32:u=Ta;break;case 268435456:u=Pg;break;default:u=Ta}return d=Wv.bind(null,s),u=If(u,d),s.callbackPriority=l,s.callbackNode=u,l}return d!==null&&d!==null&&_f(d),s.callbackPriority=2,s.callbackNode=null,2}function Wv(s,l){if(xe!==0&&xe!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(kc()&&s.callbackNode!==u)return null;var d=wt;return d=Aa(s,s===qt?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(Lv(s,d,l),Zv(s,Un()),s.callbackNode!=null&&s.callbackNode===u?Wv.bind(null,s):null)}function tb(s,l){if(kc())return null;Lv(s,l,!0)}function qE(){ZE(function(){(At&6)!==0?If(qg,UE):Xv()})}function Oh(){return Di===0&&(Di=Jg()),Di}function eb(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Da(""+s)}function nb(s,l){var u=l.ownerDocument.createElement("input");return u.name=l.name,u.value=l.value,s.id&&u.setAttribute("form",s.id),l.parentNode.insertBefore(u,l),s=new FormData(s),u.parentNode.removeChild(u),s}function VE(s,l,u,d,m){if(l==="submit"&&u&&u.stateNode===m){var v=eb((m[Je]||null).action),w=d.submitter;w&&(l=(l=w[Je]||null)?eb(l.formAction):w.getAttribute("formAction"),l!==null&&(v=l,w=null));var M=new $a("action","action",null,d,m);s.push({event:M,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Di!==0){var E=w?nb(m,w):new FormData(m);Fd(u,{pending:!0,data:E,method:m.method,action:v},null,E)}}else typeof v=="function"&&(M.preventDefault(),E=w?nb(m,w):new FormData(m),Fd(u,{pending:!0,data:E,method:m.method,action:v},v,E))},currentTarget:m}]})}}for(var Rh=0;Rh<pd.length;Rh++){var Nh=pd[Rh],PE=Nh.toLowerCase(),JE=Nh[0].toUpperCase()+Nh.slice(1);On(PE,"on"+JE)}On(Ly,"onAnimationEnd"),On(Hy,"onAnimationIteration"),On($y,"onAnimationStart"),On("dblclick","onDoubleClick"),On("focusin","onFocus"),On("focusout","onBlur"),On(aE,"onTransitionRun"),On(cE,"onTransitionStart"),On(uE,"onTransitionCancel"),On(jy,"onTransitionEnd"),ps("onMouseEnter",["mouseout","mouseover"]),ps("onMouseLeave",["mouseout","mouseover"]),ps("onPointerEnter",["pointerout","pointerover"]),ps("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cl));function rb(s,l){l=(l&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],m=d.event;d=d.listeners;t:{var v=void 0;if(l)for(var w=d.length-1;0<=w;w--){var M=d[w],E=M.instance,N=M.currentTarget;if(M=M.listener,E!==v&&m.isPropagationStopped())break t;v=M,m.currentTarget=N;try{v(m)}catch(j){cc(j)}m.currentTarget=null,v=E}else for(w=0;w<d.length;w++){if(M=d[w],E=M.instance,N=M.currentTarget,M=M.listener,E!==v&&m.isPropagationStopped())break t;v=M,m.currentTarget=N;try{v(m)}catch(j){cc(j)}m.currentTarget=null,v=E}}}}function kt(s,l){var u=l[Pf];u===void 0&&(u=l[Pf]=new Set);var d=s+"__bubble";u.has(d)||(ib(l,s,2,!1),u.add(d))}function zh(s,l,u){var d=0;l&&(d|=4),ib(u,s,d,l)}var Sc="_reactListening"+Math.random().toString(36).slice(2);function Dh(s){if(!s[Sc]){s[Sc]=!0,Xg.forEach(function(u){u!=="selectionchange"&&(GE.has(u)||zh(u,!1,s),zh(u,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[Sc]||(l[Sc]=!0,zh("selectionchange",!1,l))}}function ib(s,l,u,d){switch(Ab(l)){case 2:var m=bC;break;case 8:m=kC;break;default:m=Kh}u=m.bind(null,l,u,s),m=void 0,!ed||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(l,u,{capture:!0,passive:m}):s.addEventListener(l,u,!0):m!==void 0?s.addEventListener(l,u,{passive:m}):s.addEventListener(l,u,!1)}function Bh(s,l,u,d,m){var v=d;if((l&1)===0&&(l&2)===0&&d!==null)t:for(;;){if(d===null)return;var w=d.tag;if(w===3||w===4){var M=d.stateNode.containerInfo;if(M===m)break;if(w===4)for(w=d.return;w!==null;){var E=w.tag;if((E===3||E===4)&&w.stateNode.containerInfo===m)return;w=w.return}for(;M!==null;){if(w=fs(M),w===null)return;if(E=w.tag,E===5||E===6||E===26||E===27){d=v=w;continue t}M=M.parentNode}}d=d.return}fy(function(){var N=v,j=Wf(u),U=[];t:{var z=Iy.get(s);if(z!==void 0){var B=$a,at=s;switch(s){case"keypress":if(La(u)===0)break t;case"keydown":case"keyup":B=_T;break;case"focusin":at="focus",B=sd;break;case"focusout":at="blur",B=sd;break;case"beforeblur":case"afterblur":B=sd;break;case"click":if(u.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=AT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=VT;break;case Ly:case Hy:case $y:B=NT;break;case jy:B=JT;break;case"scroll":case"scrollend":B=ET;break;case"wheel":B=KT;break;case"copy":case"cut":case"paste":B=DT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=gy;break;case"toggle":case"beforetoggle":B=FT}var st=(l&4)!==0,Bt=!st&&(s==="scroll"||s==="scrollend"),O=st?z!==null?z+"Capture":null:z;st=[];for(var A=N,R;A!==null;){var _=A;if(R=_.stateNode,_=_.tag,_!==5&&_!==26&&_!==27||R===null||O===null||(_=Ao(A,O),_!=null&&st.push(ul(A,_,R))),Bt)break;A=A.return}0<st.length&&(z=new B(z,at,null,u,j),U.push({event:z,listeners:st}))}}if((l&7)===0){t:{if(z=s==="mouseover"||s==="pointerover",B=s==="mouseout"||s==="pointerout",z&&u!==Zf&&(at=u.relatedTarget||u.fromElement)&&(fs(at)||at[us]))break t;if((B||z)&&(z=j.window===j?j:(z=j.ownerDocument)?z.defaultView||z.parentWindow:window,B?(at=u.relatedTarget||u.toElement,B=N,at=at?fs(at):null,at!==null&&(Bt=o(at),st=at.tag,at!==Bt||st!==5&&st!==27&&st!==6)&&(at=null)):(B=null,at=N),B!==at)){if(st=py,_="onMouseLeave",O="onMouseEnter",A="mouse",(s==="pointerout"||s==="pointerover")&&(st=gy,_="onPointerLeave",O="onPointerEnter",A="pointer"),Bt=B==null?z:Co(B),R=at==null?z:Co(at),z=new st(_,A+"leave",B,u,j),z.target=Bt,z.relatedTarget=R,_=null,fs(j)===N&&(st=new st(O,A+"enter",at,u,j),st.target=R,st.relatedTarget=Bt,_=st),Bt=_,B&&at)e:{for(st=B,O=at,A=0,R=st;R;R=Js(R))A++;for(R=0,_=O;_;_=Js(_))R++;for(;0<A-R;)st=Js(st),A--;for(;0<R-A;)O=Js(O),R--;for(;A--;){if(st===O||O!==null&&st===O.alternate)break e;st=Js(st),O=Js(O)}st=null}else st=null;B!==null&&sb(U,z,B,st,!1),at!==null&&Bt!==null&&sb(U,Bt,at,st,!0)}}t:{if(z=N?Co(N):window,B=z.nodeName&&z.nodeName.toLowerCase(),B==="select"||B==="input"&&z.type==="file")var Z=My;else if(xy(z))if(Ty)Z=sE;else{Z=rE;var vt=nE}else B=z.nodeName,!B||B.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?N&&Xf(N.elementType)&&(Z=My):Z=iE;if(Z&&(Z=Z(s,N))){Sy(U,Z,u,j);break t}vt&&vt(s,z,N),s==="focusout"&&N&&z.type==="number"&&N.memoizedProps.value!=null&&Qf(z,"number",z.value)}switch(vt=N?Co(N):window,s){case"focusin":(xy(vt)||vt.contentEditable==="true")&&(ws=vt,fd=N,Ho=null);break;case"focusout":Ho=fd=ws=null;break;case"mousedown":dd=!0;break;case"contextmenu":case"mouseup":case"dragend":dd=!1,Dy(U,u,j);break;case"selectionchange":if(lE)break;case"keydown":case"keyup":Dy(U,u,j)}var et;if(ld)t:{switch(s){case"compositionstart":var ot="onCompositionStart";break t;case"compositionend":ot="onCompositionEnd";break t;case"compositionupdate":ot="onCompositionUpdate";break t}ot=void 0}else ks?ky(s,u)&&(ot="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(ot="onCompositionStart");ot&&(yy&&u.locale!=="ko"&&(ks||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&ks&&(et=dy()):(Ar=j,nd="value"in Ar?Ar.value:Ar.textContent,ks=!0)),vt=Mc(N,ot),0<vt.length&&(ot=new my(ot,s,null,u,j),U.push({event:ot,listeners:vt}),et?ot.data=et:(et=wy(u),et!==null&&(ot.data=et)))),(et=XT?ZT(s,u):WT(s,u))&&(ot=Mc(N,"onBeforeInput"),0<ot.length&&(vt=new my("onBeforeInput","beforeinput",null,u,j),U.push({event:vt,listeners:ot}),vt.data=et)),VE(U,s,N,u,j)}rb(U,l)})}function ul(s,l,u){return{instance:s,listener:l,currentTarget:u}}function Mc(s,l){for(var u=l+"Capture",d=[];s!==null;){var m=s,v=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||v===null||(m=Ao(s,u),m!=null&&d.unshift(ul(s,m,v)),m=Ao(s,l),m!=null&&d.push(ul(s,m,v))),s.tag===3)return d;s=s.return}return[]}function Js(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function sb(s,l,u,d,m){for(var v=l._reactName,w=[];u!==null&&u!==d;){var M=u,E=M.alternate,N=M.stateNode;if(M=M.tag,E!==null&&E===d)break;M!==5&&M!==26&&M!==27||N===null||(E=N,m?(N=Ao(u,v),N!=null&&w.unshift(ul(u,N,E))):m||(N=Ao(u,v),N!=null&&w.push(ul(u,N,E)))),u=u.return}w.length!==0&&s.push({event:l,listeners:w})}var KE=/\r\n?/g,YE=/\u0000|\uFFFD/g;function ob(s){return(typeof s=="string"?s:""+s).replace(KE,`
`).replace(YE,"")}function lb(s,l){return l=ob(l),ob(s)===l}function Tc(){}function Dt(s,l,u,d,m,v){switch(u){case"children":typeof d=="string"?l==="body"||l==="textarea"&&d===""||ys(s,d):(typeof d=="number"||typeof d=="bigint")&&l!=="body"&&ys(s,""+d);break;case"className":Ra(s,"class",d);break;case"tabIndex":Ra(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ra(s,u,d);break;case"style":cy(s,d,v);break;case"data":if(l!=="object"){Ra(s,"data",d);break}case"src":case"href":if(d===""&&(l!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=Da(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(l!=="input"&&Dt(s,l,"name",m.name,m,null),Dt(s,l,"formEncType",m.formEncType,m,null),Dt(s,l,"formMethod",m.formMethod,m,null),Dt(s,l,"formTarget",m.formTarget,m,null)):(Dt(s,l,"encType",m.encType,m,null),Dt(s,l,"method",m.method,m,null),Dt(s,l,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=Da(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=Tc);break;case"onScroll":d!=null&&kt("scroll",s);break;case"onScrollEnd":d!=null&&kt("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=Da(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":kt("beforetoggle",s),kt("toggle",s),Oa(s,"popover",d);break;case"xlinkActuate":Zn(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Zn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Zn(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Zn(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Zn(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Zn(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Zn(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Zn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Zn(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Oa(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=MT.get(u)||u,Oa(s,u,d))}}function Lh(s,l,u,d,m,v){switch(u){case"style":cy(s,d,v);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(r(61));if(u=d.__html,u!=null){if(m.children!=null)throw Error(r(60));s.innerHTML=u}}break;case"children":typeof d=="string"?ys(s,d):(typeof d=="number"||typeof d=="bigint")&&ys(s,""+d);break;case"onScroll":d!=null&&kt("scroll",s);break;case"onScrollEnd":d!=null&&kt("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Tc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zg.hasOwnProperty(u))t:{if(u[0]==="o"&&u[1]==="n"&&(m=u.endsWith("Capture"),l=u.slice(2,m?u.length-7:void 0),v=s[Je]||null,v=v!=null?v[u]:null,typeof v=="function"&&s.removeEventListener(l,v,m),typeof d=="function")){typeof v!="function"&&v!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(l,d,m);break t}u in s?s[u]=d:d===!0?s.setAttribute(u,""):Oa(s,u,d)}}}function Se(s,l,u){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",s),kt("load",s);var d=!1,m=!1,v;for(v in u)if(u.hasOwnProperty(v)){var w=u[v];if(w!=null)switch(v){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(s,l,v,w,u,null)}}m&&Dt(s,l,"srcSet",u.srcSet,u,null),d&&Dt(s,l,"src",u.src,u,null);return;case"input":kt("invalid",s);var M=v=w=m=null,E=null,N=null;for(d in u)if(u.hasOwnProperty(d)){var j=u[d];if(j!=null)switch(d){case"name":m=j;break;case"type":w=j;break;case"checked":E=j;break;case"defaultChecked":N=j;break;case"value":v=j;break;case"defaultValue":M=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(137,l));break;default:Dt(s,l,d,j,u,null)}}sy(s,v,M,E,N,w,m,!1),Na(s);return;case"select":kt("invalid",s),d=w=v=null;for(m in u)if(u.hasOwnProperty(m)&&(M=u[m],M!=null))switch(m){case"value":v=M;break;case"defaultValue":w=M;break;case"multiple":d=M;default:Dt(s,l,m,M,u,null)}l=v,u=w,s.multiple=!!d,l!=null?gs(s,!!d,l,!1):u!=null&&gs(s,!!d,u,!0);return;case"textarea":kt("invalid",s),v=m=d=null;for(w in u)if(u.hasOwnProperty(w)&&(M=u[w],M!=null))switch(w){case"value":d=M;break;case"defaultValue":m=M;break;case"children":v=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:Dt(s,l,w,M,u,null)}ly(s,d,m,v),Na(s);return;case"option":for(E in u)u.hasOwnProperty(E)&&(d=u[E],d!=null)&&(E==="selected"?s.selected=d&&typeof d!="function"&&typeof d!="symbol":Dt(s,l,E,d,u,null));return;case"dialog":kt("beforetoggle",s),kt("toggle",s),kt("cancel",s),kt("close",s);break;case"iframe":case"object":kt("load",s);break;case"video":case"audio":for(d=0;d<cl.length;d++)kt(cl[d],s);break;case"image":kt("error",s),kt("load",s);break;case"details":kt("toggle",s);break;case"embed":case"source":case"link":kt("error",s),kt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(N in u)if(u.hasOwnProperty(N)&&(d=u[N],d!=null))switch(N){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Dt(s,l,N,d,u,null)}return;default:if(Xf(l)){for(j in u)u.hasOwnProperty(j)&&(d=u[j],d!==void 0&&Lh(s,l,j,d,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(d=u[M],d!=null&&Dt(s,l,M,d,u,null))}function FE(s,l,u,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,v=null,w=null,M=null,E=null,N=null,j=null;for(B in u){var U=u[B];if(u.hasOwnProperty(B)&&U!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":E=U;default:d.hasOwnProperty(B)||Dt(s,l,B,null,d,U)}}for(var z in d){var B=d[z];if(U=u[z],d.hasOwnProperty(z)&&(B!=null||U!=null))switch(z){case"type":v=B;break;case"name":m=B;break;case"checked":N=B;break;case"defaultChecked":j=B;break;case"value":w=B;break;case"defaultValue":M=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(r(137,l));break;default:B!==U&&Dt(s,l,z,B,d,U)}}Ff(s,w,M,E,N,j,v,m);return;case"select":B=w=M=z=null;for(v in u)if(E=u[v],u.hasOwnProperty(v)&&E!=null)switch(v){case"value":break;case"multiple":B=E;default:d.hasOwnProperty(v)||Dt(s,l,v,null,d,E)}for(m in d)if(v=d[m],E=u[m],d.hasOwnProperty(m)&&(v!=null||E!=null))switch(m){case"value":z=v;break;case"defaultValue":M=v;break;case"multiple":w=v;default:v!==E&&Dt(s,l,m,v,d,E)}l=M,u=w,d=B,z!=null?gs(s,!!u,z,!1):!!d!=!!u&&(l!=null?gs(s,!!u,l,!0):gs(s,!!u,u?[]:"",!1));return;case"textarea":B=z=null;for(M in u)if(m=u[M],u.hasOwnProperty(M)&&m!=null&&!d.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Dt(s,l,M,null,d,m)}for(w in d)if(m=d[w],v=u[w],d.hasOwnProperty(w)&&(m!=null||v!=null))switch(w){case"value":z=m;break;case"defaultValue":B=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==v&&Dt(s,l,w,m,d,v)}oy(s,z,B);return;case"option":for(var at in u)z=u[at],u.hasOwnProperty(at)&&z!=null&&!d.hasOwnProperty(at)&&(at==="selected"?s.selected=!1:Dt(s,l,at,null,d,z));for(E in d)z=d[E],B=u[E],d.hasOwnProperty(E)&&z!==B&&(z!=null||B!=null)&&(E==="selected"?s.selected=z&&typeof z!="function"&&typeof z!="symbol":Dt(s,l,E,z,d,B));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var st in u)z=u[st],u.hasOwnProperty(st)&&z!=null&&!d.hasOwnProperty(st)&&Dt(s,l,st,null,d,z);for(N in d)if(z=d[N],B=u[N],d.hasOwnProperty(N)&&z!==B&&(z!=null||B!=null))switch(N){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,l));break;default:Dt(s,l,N,z,d,B)}return;default:if(Xf(l)){for(var Bt in u)z=u[Bt],u.hasOwnProperty(Bt)&&z!==void 0&&!d.hasOwnProperty(Bt)&&Lh(s,l,Bt,void 0,d,z);for(j in d)z=d[j],B=u[j],!d.hasOwnProperty(j)||z===B||z===void 0&&B===void 0||Lh(s,l,j,z,d,B);return}}for(var O in u)z=u[O],u.hasOwnProperty(O)&&z!=null&&!d.hasOwnProperty(O)&&Dt(s,l,O,null,d,z);for(U in d)z=d[U],B=u[U],!d.hasOwnProperty(U)||z===B||z==null&&B==null||Dt(s,l,U,z,d,B)}var Hh=null,$h=null;function Ec(s){return s.nodeType===9?s:s.ownerDocument}function ab(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cb(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function jh(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ih=null;function QE(){var s=window.event;return s&&s.type==="popstate"?s===Ih?!1:(Ih=s,!0):(Ih=null,!1)}var ub=typeof setTimeout=="function"?setTimeout:void 0,XE=typeof clearTimeout=="function"?clearTimeout:void 0,fb=typeof Promise=="function"?Promise:void 0,ZE=typeof queueMicrotask=="function"?queueMicrotask:typeof fb<"u"?function(s){return fb.resolve(null).then(s).catch(WE)}:ub;function WE(s){setTimeout(function(){throw s})}function Pr(s){return s==="head"}function db(s,l){var u=l,d=0,m=0;do{var v=u.nextSibling;if(s.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"){if(0<d&&8>d){u=d;var w=s.ownerDocument;if(u&1&&fl(w.documentElement),u&2&&fl(w.body),u&4)for(u=w.head,fl(u),w=u.firstChild;w;){var M=w.nextSibling,E=w.nodeName;w[Eo]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&w.rel.toLowerCase()==="stylesheet"||u.removeChild(w),w=M}}if(m===0){s.removeChild(v),bl(l);return}m--}else u==="$"||u==="$?"||u==="$!"?m++:d=u.charCodeAt(0)-48;else d=0;u=v}while(u);bl(l)}function _h(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var u=l;switch(l=l.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":_h(u),Jf(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function tC(s,l,u,d){for(;s.nodeType===1;){var m=u;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Eo])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==m.rel||s.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||s.getAttribute("title")!==(m.title==null?null:m.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(m.src==null?null:m.src)||s.getAttribute("type")!==(m.type==null?null:m.type)||s.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var v=m.name==null?null:""+m.name;if(m.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=Nn(s.nextSibling),s===null)break}return null}function eC(s,l,u){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=Nn(s.nextSibling),s===null))return null;return s}function Uh(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function nC(s,l){var u=s.ownerDocument;if(s.data!=="$?"||u.readyState==="complete")l();else{var d=function(){l(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function Nn(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var qh=null;function hb(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(l===0)return s;l--}else u==="/$"&&l++}s=s.previousSibling}return null}function pb(s,l,u){switch(l=Ec(u),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function fl(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);Jf(s)}var wn=new Map,mb=new Set;function Cc(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var dr=F.d;F.d={f:rC,r:iC,D:sC,C:oC,L:lC,m:aC,X:uC,S:cC,M:fC};function rC(){var s=dr.f(),l=vc();return s||l}function iC(s){var l=ds(s);l!==null&&l.tag===5&&l.type==="form"?L0(l):dr.r(s)}var Gs=typeof document>"u"?null:document;function gb(s,l,u){var d=Gs;if(d&&typeof l=="string"&&l){var m=pn(l);m='link[rel="'+s+'"][href="'+m+'"]',typeof u=="string"&&(m+='[crossorigin="'+u+'"]'),mb.has(m)||(mb.add(m),s={rel:s,crossOrigin:u,href:l},d.querySelector(m)===null&&(l=d.createElement("link"),Se(l,"link",s),he(l),d.head.appendChild(l)))}}function sC(s){dr.D(s),gb("dns-prefetch",s,null)}function oC(s,l){dr.C(s,l),gb("preconnect",s,l)}function lC(s,l,u){dr.L(s,l,u);var d=Gs;if(d&&s&&l){var m='link[rel="preload"][as="'+pn(l)+'"]';l==="image"&&u&&u.imageSrcSet?(m+='[imagesrcset="'+pn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(m+='[imagesizes="'+pn(u.imageSizes)+'"]')):m+='[href="'+pn(s)+'"]';var v=m;switch(l){case"style":v=Ks(s);break;case"script":v=Ys(s)}wn.has(v)||(s=p({rel:"preload",href:l==="image"&&u&&u.imageSrcSet?void 0:s,as:l},u),wn.set(v,s),d.querySelector(m)!==null||l==="style"&&d.querySelector(dl(v))||l==="script"&&d.querySelector(hl(v))||(l=d.createElement("link"),Se(l,"link",s),he(l),d.head.appendChild(l)))}}function aC(s,l){dr.m(s,l);var u=Gs;if(u&&s){var d=l&&typeof l.as=="string"?l.as:"script",m='link[rel="modulepreload"][as="'+pn(d)+'"][href="'+pn(s)+'"]',v=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Ys(s)}if(!wn.has(v)&&(s=p({rel:"modulepreload",href:s},l),wn.set(v,s),u.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(hl(v)))return}d=u.createElement("link"),Se(d,"link",s),he(d),u.head.appendChild(d)}}}function cC(s,l,u){dr.S(s,l,u);var d=Gs;if(d&&s){var m=hs(d).hoistableStyles,v=Ks(s);l=l||"default";var w=m.get(v);if(!w){var M={loading:0,preload:null};if(w=d.querySelector(dl(v)))M.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":l},u),(u=wn.get(v))&&Vh(s,u);var E=w=d.createElement("link");he(E),Se(E,"link",s),E._p=new Promise(function(N,j){E.onload=N,E.onerror=j}),E.addEventListener("load",function(){M.loading|=1}),E.addEventListener("error",function(){M.loading|=2}),M.loading|=4,Ac(w,l,d)}w={type:"stylesheet",instance:w,count:1,state:M},m.set(v,w)}}}function uC(s,l){dr.X(s,l);var u=Gs;if(u&&s){var d=hs(u).hoistableScripts,m=Ys(s),v=d.get(m);v||(v=u.querySelector(hl(m)),v||(s=p({src:s,async:!0},l),(l=wn.get(m))&&Ph(s,l),v=u.createElement("script"),he(v),Se(v,"link",s),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(m,v))}}function fC(s,l){dr.M(s,l);var u=Gs;if(u&&s){var d=hs(u).hoistableScripts,m=Ys(s),v=d.get(m);v||(v=u.querySelector(hl(m)),v||(s=p({src:s,async:!0,type:"module"},l),(l=wn.get(m))&&Ph(s,l),v=u.createElement("script"),he(v),Se(v,"link",s),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},d.set(m,v))}}function yb(s,l,u,d){var m=(m=dt.current)?Cc(m):null;if(!m)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(l=Ks(u.href),u=hs(m).hoistableStyles,d=u.get(l),d||(d={type:"style",instance:null,count:0,state:null},u.set(l,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=Ks(u.href);var v=hs(m).hoistableStyles,w=v.get(s);if(w||(m=m.ownerDocument||m,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,w),(v=m.querySelector(dl(s)))&&!v._p&&(w.instance=v,w.state.loading=5),wn.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},wn.set(s,u),v||dC(m,s,u,w.state))),l&&d===null)throw Error(r(528,""));return w}if(l&&d!==null)throw Error(r(529,""));return null;case"script":return l=u.async,u=u.src,typeof u=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Ys(u),u=hs(m).hoistableScripts,d=u.get(l),d||(d={type:"script",instance:null,count:0,state:null},u.set(l,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Ks(s){return'href="'+pn(s)+'"'}function dl(s){return'link[rel="stylesheet"]['+s+"]"}function vb(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function dC(s,l,u,d){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?d.loading=1:(l=s.createElement("link"),d.preload=l,l.addEventListener("load",function(){return d.loading|=1}),l.addEventListener("error",function(){return d.loading|=2}),Se(l,"link",u),he(l),s.head.appendChild(l))}function Ys(s){return'[src="'+pn(s)+'"]'}function hl(s){return"script[async]"+s}function bb(s,l,u){if(l.count++,l.instance===null)switch(l.type){case"style":var d=s.querySelector('style[data-href~="'+pn(u.href)+'"]');if(d)return l.instance=d,he(d),d;var m=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),he(d),Se(d,"style",m),Ac(d,u.precedence,s),l.instance=d;case"stylesheet":m=Ks(u.href);var v=s.querySelector(dl(m));if(v)return l.state.loading|=4,l.instance=v,he(v),v;d=vb(u),(m=wn.get(m))&&Vh(d,m),v=(s.ownerDocument||s).createElement("link"),he(v);var w=v;return w._p=new Promise(function(M,E){w.onload=M,w.onerror=E}),Se(v,"link",d),l.state.loading|=4,Ac(v,u.precedence,s),l.instance=v;case"script":return v=Ys(u.src),(m=s.querySelector(hl(v)))?(l.instance=m,he(m),m):(d=u,(m=wn.get(v))&&(d=p({},u),Ph(d,m)),s=s.ownerDocument||s,m=s.createElement("script"),he(m),Se(m,"link",d),s.head.appendChild(m),l.instance=m);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(d=l.instance,l.state.loading|=4,Ac(d,u.precedence,s));return l.instance}function Ac(s,l,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,v=m,w=0;w<d.length;w++){var M=d[w];if(M.dataset.precedence===l)v=M;else if(v!==m)break}v?v.parentNode.insertBefore(s,v.nextSibling):(l=u.nodeType===9?u.head:u,l.insertBefore(s,l.firstChild))}function Vh(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function Ph(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var Oc=null;function kb(s,l,u){if(Oc===null){var d=new Map,m=Oc=new Map;m.set(u,d)}else m=Oc,d=m.get(u),d||(d=new Map,m.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),m=0;m<u.length;m++){var v=u[m];if(!(v[Eo]||v[Ae]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var w=v.getAttribute(l)||"";w=s+w;var M=d.get(w);M?M.push(v):d.set(w,[v])}}return d}function wb(s,l,u){s=s.ownerDocument||s,s.head.insertBefore(u,l==="title"?s.querySelector("head > title"):null)}function hC(s,l,u){if(u===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;return l.rel==="stylesheet"?(s=l.disabled,typeof l.precedence=="string"&&s==null):!0;case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function xb(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var pl=null;function pC(){}function mC(s,l,u){if(pl===null)throw Error(r(475));var d=pl;if(l.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=Ks(u.href),v=s.querySelector(dl(m));if(v){s=v._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(d.count++,d=Rc.bind(d),s.then(d,d)),l.state.loading|=4,l.instance=v,he(v);return}v=s.ownerDocument||s,u=vb(u),(m=wn.get(m))&&Vh(u,m),v=v.createElement("link"),he(v);var w=v;w._p=new Promise(function(M,E){w.onload=M,w.onerror=E}),Se(v,"link",u),l.instance=v}d.stylesheets===null&&(d.stylesheets=new Map),d.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(d.count++,l=Rc.bind(d),s.addEventListener("load",l),s.addEventListener("error",l))}}function gC(){if(pl===null)throw Error(r(475));var s=pl;return s.stylesheets&&s.count===0&&Jh(s,s.stylesheets),0<s.count?function(l){var u=setTimeout(function(){if(s.stylesheets&&Jh(s,s.stylesheets),s.unsuspend){var d=s.unsuspend;s.unsuspend=null,d()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(u)}}:null}function Rc(){if(this.count--,this.count===0){if(this.stylesheets)Jh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Nc=null;function Jh(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Nc=new Map,l.forEach(yC,s),Nc=null,Rc.call(s))}function yC(s,l){if(!(l.state.loading&4)){var u=Nc.get(s);if(u)var d=u.get(null);else{u=new Map,Nc.set(s,u);for(var m=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<m.length;v++){var w=m[v];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(u.set(w.dataset.precedence,w),d=w)}d&&u.set(null,d)}m=l.instance,w=m.getAttribute("data-precedence"),v=u.get(w)||d,v===d&&u.set(null,m),u.set(w,m),this.count++,d=Rc.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),v?v.parentNode.insertBefore(m,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(m,s.firstChild)),l.state.loading|=4}}var ml={$$typeof:H,Provider:null,Consumer:null,_currentValue:lt,_currentValue2:lt,_threadCount:0};function vC(s,l,u,d,m,v,w,M){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Uf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uf(0),this.hiddenUpdates=Uf(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=v,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Sb(s,l,u,d,m,v,w,M,E,N,j,U){return s=new vC(s,l,u,w,M,E,N,U),l=1,v===!0&&(l|=24),v=on(3,null,null,l),s.current=v,v.stateNode=s,l=Ed(),l.refCount++,s.pooledCache=l,l.refCount++,v.memoizedState={element:d,isDehydrated:u,cache:l},Rd(v),s}function Mb(s){return s?(s=Ts,s):Ts}function Tb(s,l,u,d,m,v){m=Mb(m),d.context===null?d.context=m:d.pendingContext=m,d=Nr(l),d.payload={element:u},v=v===void 0?null:v,v!==null&&(d.callback=v),u=zr(s,d,l),u!==null&&(fn(u,s,l),Jo(u,s,l))}function Eb(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<l?u:l}}function Gh(s,l){Eb(s,l),(s=s.alternate)&&Eb(s,l)}function Cb(s){if(s.tag===13){var l=Ms(s,67108864);l!==null&&fn(l,s,67108864),Gh(s,67108864)}}var zc=!0;function bC(s,l,u,d){var m=$.T;$.T=null;var v=F.p;try{F.p=2,Kh(s,l,u,d)}finally{F.p=v,$.T=m}}function kC(s,l,u,d){var m=$.T;$.T=null;var v=F.p;try{F.p=8,Kh(s,l,u,d)}finally{F.p=v,$.T=m}}function Kh(s,l,u,d){if(zc){var m=Yh(d);if(m===null)Bh(s,l,d,Dc,u),Ob(s,d);else if(xC(m,s,l,u,d))d.stopPropagation();else if(Ob(s,d),l&4&&-1<wC.indexOf(s)){for(;m!==null;){var v=ds(m);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var w=gi(v.pendingLanes);if(w!==0){var M=v;for(M.pendingLanes|=2,M.entangledLanes|=2;w;){var E=1<<31-rn(w);M.entanglements[1]|=E,w&=~E}Gn(v),(At&6)===0&&(gc=Un()+500,al(0))}}break;case 13:M=Ms(v,2),M!==null&&fn(M,v,2),vc(),Gh(v,2)}if(v=Yh(d),v===null&&Bh(s,l,d,Dc,u),v===m)break;m=v}m!==null&&d.stopPropagation()}else Bh(s,l,d,null,u)}}function Yh(s){return s=Wf(s),Fh(s)}var Dc=null;function Fh(s){if(Dc=null,s=fs(s),s!==null){var l=o(s);if(l===null)s=null;else{var u=l.tag;if(u===13){if(s=a(l),s!==null)return s;s=null}else if(u===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return Dc=s,null}function Ab(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oT()){case qg:return 2;case Vg:return 8;case Ta:case lT:return 32;case Pg:return 268435456;default:return 32}default:return 32}}var Qh=!1,Jr=null,Gr=null,Kr=null,gl=new Map,yl=new Map,Yr=[],wC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ob(s,l){switch(s){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":gl.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":yl.delete(l.pointerId)}}function vl(s,l,u,d,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:l,domEventName:u,eventSystemFlags:d,nativeEvent:v,targetContainers:[m]},l!==null&&(l=ds(l),l!==null&&Cb(l)),s):(s.eventSystemFlags|=d,l=s.targetContainers,m!==null&&l.indexOf(m)===-1&&l.push(m),s)}function xC(s,l,u,d,m){switch(l){case"focusin":return Jr=vl(Jr,s,l,u,d,m),!0;case"dragenter":return Gr=vl(Gr,s,l,u,d,m),!0;case"mouseover":return Kr=vl(Kr,s,l,u,d,m),!0;case"pointerover":var v=m.pointerId;return gl.set(v,vl(gl.get(v)||null,s,l,u,d,m)),!0;case"gotpointercapture":return v=m.pointerId,yl.set(v,vl(yl.get(v)||null,s,l,u,d,m)),!0}return!1}function Rb(s){var l=fs(s.target);if(l!==null){var u=o(l);if(u!==null){if(l=u.tag,l===13){if(l=a(u),l!==null){s.blockedOn=l,mT(s.priority,function(){if(u.tag===13){var d=un();d=qf(d);var m=Ms(u,d);m!==null&&fn(m,u,d),Gh(u,d)}});return}}else if(l===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Bc(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var u=Yh(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);Zf=d,u.target.dispatchEvent(d),Zf=null}else return l=ds(u),l!==null&&Cb(l),s.blockedOn=u,!1;l.shift()}return!0}function Nb(s,l,u){Bc(s)&&u.delete(l)}function SC(){Qh=!1,Jr!==null&&Bc(Jr)&&(Jr=null),Gr!==null&&Bc(Gr)&&(Gr=null),Kr!==null&&Bc(Kr)&&(Kr=null),gl.forEach(Nb),yl.forEach(Nb)}function Lc(s,l){s.blockedOn===l&&(s.blockedOn=null,Qh||(Qh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,SC)))}var Hc=null;function zb(s){Hc!==s&&(Hc=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Hc===s&&(Hc=null);for(var l=0;l<s.length;l+=3){var u=s[l],d=s[l+1],m=s[l+2];if(typeof d!="function"){if(Fh(d||u)===null)continue;break}var v=ds(u);v!==null&&(s.splice(l,3),l-=3,Fd(v,{pending:!0,data:m,method:u.method,action:d},d,m))}}))}function bl(s){function l(E){return Lc(E,s)}Jr!==null&&Lc(Jr,s),Gr!==null&&Lc(Gr,s),Kr!==null&&Lc(Kr,s),gl.forEach(l),yl.forEach(l);for(var u=0;u<Yr.length;u++){var d=Yr[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Yr.length&&(u=Yr[0],u.blockedOn===null);)Rb(u),u.blockedOn===null&&Yr.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var m=u[d],v=u[d+1],w=m[Je]||null;if(typeof v=="function")w||zb(u);else if(w){var M=null;if(v&&v.hasAttribute("formAction")){if(m=v,w=v[Je]||null)M=w.formAction;else if(Fh(m)!==null)continue}else M=w.action;typeof M=="function"?u[d+1]=M:(u.splice(d,3),d-=3),zb(u)}}}function Xh(s){this._internalRoot=s}$c.prototype.render=Xh.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var u=l.current,d=un();Tb(u,d,s,l,null,null)},$c.prototype.unmount=Xh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Tb(s.current,2,null,s,null,null),vc(),l[us]=null}};function $c(s){this._internalRoot=s}$c.prototype.unstable_scheduleHydration=function(s){if(s){var l=Fg();s={blockedOn:null,target:s,priority:l};for(var u=0;u<Yr.length&&l!==0&&l<Yr[u].priority;u++);Yr.splice(u,0,s),u===0&&Rb(s)}};var Db=t.version;if(Db!=="19.1.0")throw Error(r(527,Db,"19.1.0"));F.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=f(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var MC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jc.isDisabled&&jc.supportsFiber)try{So=jc.inject(MC),nn=jc}catch{}}return wl.createRoot=function(s,l){if(!i(s))throw Error(r(299));var u=!1,d="",m=F0,v=Q0,w=X0,M=null;return l!=null&&(l.unstable_strictMode===!0&&(u=!0),l.identifierPrefix!==void 0&&(d=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(v=l.onCaughtError),l.onRecoverableError!==void 0&&(w=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(M=l.unstable_transitionCallbacks)),l=Sb(s,1,!1,null,null,u,d,m,v,w,M,null),s[us]=l.current,Dh(s),new Xh(l)},wl.hydrateRoot=function(s,l,u){if(!i(s))throw Error(r(299));var d=!1,m="",v=F0,w=Q0,M=X0,E=null,N=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(E=u.unstable_transitionCallbacks),u.formState!==void 0&&(N=u.formState)),l=Sb(s,1,!0,l,u??null,d,m,v,w,M,E,N),l.context=Mb(null),u=l.current,d=un(),d=qf(d),m=Nr(d),m.callback=null,zr(u,m,d),u=d,l.current.lanes=u,To(l,u),Gn(l),s[us]=l.current,Dh(s),new $c(l)},wl.version="19.1.0",wl}var Vb;function DC(){if(Vb)return Wh.exports;Vb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Wh.exports=zC(),Wh.exports}var BC=DC(),Gt=va();const De=iw(Gt);var LC=sw();const ow=iw(LC);var ip={exports:{}},sp={};var Pb;function HC(){if(Pb)return sp;Pb=1;var n=va();function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var e=typeof Object.is=="function"?Object.is:t,r=n.useState,i=n.useEffect,o=n.useLayoutEffect,a=n.useDebugValue;function c(g,y){var b=y(),k=r({inst:{value:b,getSnapshot:y}}),x=k[0].inst,S=k[1];return o(function(){x.value=b,x.getSnapshot=y,f(x)&&S({inst:x})},[g,b,y]),i(function(){return f(x)&&S({inst:x}),g(function(){f(x)&&S({inst:x})})},[g]),a(b),b}function f(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!e(g,b)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return sp.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,sp}var Jb;function lw(){return Jb||(Jb=1,ip.exports=HC()),ip.exports}var $C=lw();function Me(n){this.content=n}Me.prototype={constructor:Me,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var r=e&&e!=n?this.remove(e):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(e||n,t):(o[i+1]=t,e&&(o[i]=e)),new Me(o)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new Me(e)},addToStart:function(n,t){return new Me([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new Me(e)},addBefore:function(n,t,e){var r=this.remove(t),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,t,e),new Me(i)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=Me.from(n),n.size?new Me(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Me.from(n),n.size?new Me(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=Me.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};Me.from=function(n){if(n instanceof Me)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new Me(t)};function aw(n,t,e){for(let r=0;;r++){if(r==n.childCount||r==t.childCount)return n.childCount==t.childCount?null:e;let i=n.child(r),o=t.child(r);if(i==o){e+=i.nodeSize;continue}if(!i.sameMarkup(o))return e;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)e++;return e}if(i.content.size||o.content.size){let a=aw(i.content,o.content,e+1);if(a!=null)return a}e+=i.nodeSize}}function cw(n,t,e,r){for(let i=n.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:e,b:r};let a=n.child(--i),c=t.child(--o),f=a.nodeSize;if(a==c){e-=f,r-=f;continue}if(!a.sameMarkup(c))return{a:e,b:r};if(a.isText&&a.text!=c.text){let h=0,p=Math.min(a.text.length,c.text.length);for(;h<p&&a.text[a.text.length-h-1]==c.text[c.text.length-h-1];)h++,e--,r--;return{a:e,b:r}}if(a.content.size||c.content.size){let h=cw(a.content,c.content,e-1,r-1);if(h)return h}e-=f,r-=f}}class G{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,e,r,i=0,o){for(let a=0,c=0;c<e;a++){let f=this.content[a],h=c+f.nodeSize;if(h>t&&r(f,i+c,o||null,a)!==!1&&f.content.size){let p=c+1;f.nodesBetween(Math.max(0,t-p),Math.min(f.content.size,e-p),r,i+p)}c=h}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,r,i){let o="",a=!0;return this.nodesBetween(t,e,(c,f)=>{let h=c.isText?c.text.slice(Math.max(t,f)-f,e-f):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&h||c.isTextblock)&&r&&(a?a=!1:o+=r),o+=h},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(r)&&(i[i.length-1]=e.withText(e.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new G(i,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let r=[],i=0;if(e>t)for(let o=0,a=0;a<e;o++){let c=this.content[o],f=a+c.nodeSize;f>t&&((a<t||f>e)&&(c.isText?c=c.cut(Math.max(0,t-a),Math.min(c.text.length,e-a)):c=c.cut(Math.max(0,t-a-1),Math.min(c.content.size,e-a-1))),r.push(c),i+=c.nodeSize),a=f}return new G(r,i)}cutByIndex(t,e){return t==e?G.empty:t==0&&e==this.content.length?this:new G(this.content.slice(t,e))}replaceChild(t,e){let r=this.content[t];if(r==e)return this;let i=this.content.slice(),o=this.size+e.nodeSize-r.nodeSize;return i[t]=e,new G(i,o)}addToStart(t){return new G([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new G(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,r=0;e<this.content.length;e++){let i=this.content[e];t(i,r,e),r+=i.nodeSize}}findDiffStart(t,e=0){return aw(this,t,e)}findDiffEnd(t,e=this.size,r=t.size){return cw(this,t,e,r)}findIndex(t){if(t==0)return Ic(0,t);if(t==this.size)return Ic(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let e=0,r=0;;e++){let i=this.child(e),o=r+i.nodeSize;if(o>=t)return o==t?Ic(e+1,o):Ic(e,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return G.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new G(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return G.empty;let e,r=0;for(let i=0;i<t.length;i++){let o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(e||(e=t.slice(0,i)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new G(e||t,r)}static from(t){if(!t)return G.empty;if(t instanceof G)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new G([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}G.empty=new G([],0);const op={index:0,offset:0};function Ic(n,t){return op.index=n,op.offset=t,op}function hu(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(!hu(n[r],t[r]))return!1}else{for(let r in n)if(!(r in t)||!hu(n[r],t[r]))return!1;for(let r in t)if(!(r in n))return!1}return!0}class $t{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,r=!1;for(let i=0;i<t.length;i++){let o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,i)),e.push(this),r=!0),e&&e.push(o)}}return e||(e=t.slice()),r||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&hu(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[e.type];if(!r)throw new RangeError(`There is no mark type ${e.type} in this schema`);let i=r.create(e.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(e[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return $t.none;if(t instanceof $t)return[t];let e=t.slice();return e.sort((r,i)=>r.type.rank-i.type.rank),e}}$t.none=[];class pu extends Error{}class tt{constructor(t,e,r){this.content=t,this.openStart=e,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let r=fw(this.content,t+this.openStart,e);return r&&new tt(r,this.openStart,this.openEnd)}removeBetween(t,e){return new tt(uw(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return tt.empty;let r=e.openStart||0,i=e.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new tt(G.fromJSON(t,e.content),r,i)}static maxOpen(t,e=!0){let r=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)i++;return new tt(t,r,i)}}tt.empty=new tt(G.empty,0,0);function uw(n,t,e){let{index:r,offset:i}=n.findIndex(t),o=n.maybeChild(r),{index:a,offset:c}=n.findIndex(e);if(i==t||o.isText){if(c!=e&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(uw(o.content,t-i-1,e-i-1)))}function fw(n,t,e,r){let{index:i,offset:o}=n.findIndex(t),a=n.maybeChild(i);if(o==t||a.isText)return r&&!r.canReplace(i,i,e)?null:n.cut(0,t).append(e).append(n.cut(t));let c=fw(a.content,t-o-1,e,a);return c&&n.replaceChild(i,a.copy(c))}function jC(n,t,e){if(e.openStart>n.depth)throw new pu("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new pu("Inconsistent open depths");return dw(n,t,e,0)}function dw(n,t,e,r){let i=n.index(r),o=n.node(r);if(i==t.index(r)&&r<n.depth-e.openStart){let a=dw(n,t,e,r+1);return o.copy(o.content.replaceChild(i,a))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==r&&t.depth==r){let a=n.parent,c=a.content;return Pi(a,c.cut(0,n.parentOffset).append(e.content).append(c.cut(t.parentOffset)))}else{let{start:a,end:c}=IC(e,n);return Pi(o,pw(n,a,c,t,r))}else return Pi(o,mu(n,t,r))}function hw(n,t){if(!t.type.compatibleContent(n.type))throw new pu("Cannot join "+t.type.name+" onto "+n.type.name)}function Jp(n,t,e){let r=n.node(e);return hw(r,t.node(e)),r}function Vi(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function Vl(n,t,e,r){let i=(t||n).node(e),o=0,a=t?t.index(e):i.childCount;n&&(o=n.index(e),n.depth>e?o++:n.textOffset&&(Vi(n.nodeAfter,r),o++));for(let c=o;c<a;c++)Vi(i.child(c),r);t&&t.depth==e&&t.textOffset&&Vi(t.nodeBefore,r)}function Pi(n,t){return n.type.checkContent(t),n.copy(t)}function pw(n,t,e,r,i){let o=n.depth>i&&Jp(n,t,i+1),a=r.depth>i&&Jp(e,r,i+1),c=[];return Vl(null,n,i,c),o&&a&&t.index(i)==e.index(i)?(hw(o,a),Vi(Pi(o,pw(n,t,e,r,i+1)),c)):(o&&Vi(Pi(o,mu(n,t,i+1)),c),Vl(t,e,i,c),a&&Vi(Pi(a,mu(e,r,i+1)),c)),Vl(r,null,i,c),new G(c)}function mu(n,t,e){let r=[];if(Vl(null,n,e,r),n.depth>e){let i=Jp(n,t,e+1);Vi(Pi(i,mu(n,t,e+1)),r)}return Vl(t,null,e,r),new G(r)}function IC(n,t){let e=t.depth-n.openStart,i=t.node(e).copy(n.content);for(let o=e-1;o>=0;o--)i=t.node(o).copy(G.from(i));return{start:i.resolveNoCache(n.openStart+e),end:i.resolveNoCache(i.content.size-n.openEnd-e)}}class ra{constructor(t,e,r){this.pos=t,this.path=e,this.parentOffset=r,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(e);return r?t.child(e).cut(r):i}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let r=this.path[e*3],i=e==0?0:this.path[e*3-1]+1;for(let o=0;o<t;o++)i+=r.child(o).nodeSize;return i}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return $t.none;if(this.textOffset)return t.child(e).marks;let r=t.maybeChild(e-1),i=t.maybeChild(e);if(!r){let c=r;r=i,i=c}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let r=e.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!e||e(this.node(r))))return new gu(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let r=[],i=0,o=e;for(let a=t;;){let{index:c,offset:f}=a.content.findIndex(o),h=o-f;if(r.push(a,c,i+f),!h||(a=a.child(c),a.isText))break;o=h-1,i+=f+1}return new ra(e,r,o)}static resolveCached(t,e){let r=Gb.get(t);if(r)for(let o=0;o<r.elts.length;o++){let a=r.elts[o];if(a.pos==e)return a}else Gb.set(t,r=new _C);let i=r.elts[r.i]=ra.resolve(t,e);return r.i=(r.i+1)%UC,i}}class _C{constructor(){this.elts=[],this.i=0}}const UC=12,Gb=new WeakMap;class gu{constructor(t,e,r){this.$from=t,this.$to=e,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const qC=Object.create(null);class Fn{constructor(t,e,r,i=$t.none){this.type=t,this.attrs=e,this.marks=i,this.content=r||G.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,r,i=0){this.content.nodesBetween(t,e,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,r,i){return this.content.textBetween(t,e,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,r){return this.type==t&&hu(this.attrs,e||t.defaultAttrs||qC)&&$t.sameSet(this.marks,r||$t.none)}copy(t=null){return t==this.content?this:new Fn(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Fn(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,r=!1){if(t==e)return tt.empty;let i=this.resolve(t),o=this.resolve(e),a=r?0:i.sharedDepth(e),c=i.start(a),h=i.node(a).content.cut(i.pos-c,o.pos-c);return new tt(h,i.depth-a,o.depth-a)}replace(t,e,r){return jC(this.resolve(t),this.resolve(e),r)}nodeAt(t){for(let e=this;;){let{index:r,offset:i}=e.content.findIndex(t);if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}}childAfter(t){let{index:e,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(e),index:e,offset:r};let i=this.content.child(e-1);return{node:i,index:e-1,offset:r-i.nodeSize}}resolve(t){return ra.resolveCached(this,t)}resolveNoCache(t){return ra.resolve(this,t)}rangeHasMark(t,e,r){let i=!1;return e>t&&this.nodesBetween(t,e,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),mw(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,r=G.empty,i=0,o=r.childCount){let a=this.contentMatchAt(t).matchFragment(r,i,o),c=a&&a.matchFragment(this.content,e);if(!c||!c.validEnd)return!1;for(let f=i;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(t,e,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(r),a=o&&o.matchFragment(this.content,e);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=$t.none;for(let e=0;e<this.marks.length;e++){let r=this.marks[e];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!$t.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let r;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,r)}let i=G.fromJSON(t,e.content),o=t.nodeType(e.type).create(e.attrs,i,r);return o.type.checkAttrs(o.attrs),o}}Fn.prototype.text=void 0;class yu extends Fn{constructor(t,e,r,i){if(super(t,e,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):mw(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new yu(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new yu(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function mw(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class Xi{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let r=new VC(t,e);if(r.next==null)return Xi.empty;let i=gw(r);r.next&&r.err("Unexpected trailing text");let o=QC(FC(i));return XC(o,r),o}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,r=t.childCount){let i=this;for(let o=e;i&&o<r;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let r=0;r<t.next.length;r++)if(this.next[e].type==t.next[r].type)return!0;return!1}fillBefore(t,e=!1,r=0){let i=[this];function o(a,c){let f=a.matchFragment(t,r);if(f&&(!e||f.validEnd))return G.from(c.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:p,next:g}=a.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let y=o(g,c.concat(p));if(y)return y}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(t)){let a=[];for(let c=i;c.type;c=c.via)a.push(c.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:c,next:f}=o.next[a];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in e)&&(!i.type||f.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),e[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&e(r.next[i].next)}return e(this),t.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+t.indexOf(r.next[a].next);return o}).join(`
`)}}Xi.empty=new Xi(!0);class VC{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function gw(n){let t=[];do t.push(PC(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function PC(n){let t=[];do t.push(JC(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function JC(n){let t=YC(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=GC(n,t);else break;return t}function Kb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function GC(n,t){let e=Kb(n),r=e;return n.eat(",")&&(n.next!="}"?r=Kb(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:r,expr:t}}function KC(n,t){let e=n.nodeTypes,r=e[t];if(r)return[r];let i=[];for(let o in e){let a=e[o];a.isInGroup(t)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+t+"' found"),i}function YC(n){if(n.eat("(")){let t=gw(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=KC(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function FC(n){let t=[[]];return i(o(n,0),e()),t;function e(){return t.push([])-1}function r(a,c,f){let h={term:f,to:c};return t[a].push(h),h}function i(a,c){a.forEach(f=>f.to=c)}function o(a,c){if(a.type=="choice")return a.exprs.reduce((f,h)=>f.concat(o(h,c)),[]);if(a.type=="seq")for(let f=0;;f++){let h=o(a.exprs[f],c);if(f==a.exprs.length-1)return h;i(h,c=e())}else if(a.type=="star"){let f=e();return r(c,f),i(o(a.expr,f),f),[r(f)]}else if(a.type=="plus"){let f=e();return i(o(a.expr,c),f),i(o(a.expr,f),f),[r(f)]}else{if(a.type=="opt")return[r(c)].concat(o(a.expr,c));if(a.type=="range"){let f=c;for(let h=0;h<a.min;h++){let p=e();i(o(a.expr,f),p),f=p}if(a.max==-1)i(o(a.expr,f),f);else for(let h=a.min;h<a.max;h++){let p=e();r(f,p),i(o(a.expr,f),p),f=p}return[r(f)]}else{if(a.type=="name")return[r(c,void 0,a.value)];throw new Error("Unknown expr type")}}}}function yw(n,t){return t-n}function Yb(n,t){let e=[];return r(t),e.sort(yw);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);e.push(i);for(let a=0;a<o.length;a++){let{term:c,to:f}=o[a];!c&&e.indexOf(f)==-1&&r(f)}}}function QC(n){let t=Object.create(null);return e(Yb(n,0));function e(r){let i=[];r.forEach(a=>{n[a].forEach(({term:c,to:f})=>{if(!c)return;let h;for(let p=0;p<i.length;p++)i[p][0]==c&&(h=i[p][1]);Yb(n,f).forEach(p=>{h||i.push([c,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=t[r.join(",")]=new Xi(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let c=i[a][1].sort(yw);o.next.push({type:i[a][0],next:t[c.join(",")]||e(c)})}return o}}function XC(n,t){for(let e=0,r=[n];e<r.length;e++){let i=r[e],o=!i.validEnd,a=[];for(let c=0;c<i.next.length;c++){let{type:f,next:h}=i.next[c];a.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function vw(n){let t=Object.create(null);for(let e in n){let r=n[e];if(!r.hasDefault)return null;t[e]=r.default}return t}function bw(n,t){let e=Object.create(null);for(let r in n){let i=t&&t[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}e[r]=i}return e}function kw(n,t,e,r){for(let i in t)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${e} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(t[i])}}function ww(n,t){let e=Object.create(null);if(t)for(let r in t)e[r]=new WC(n,r,t[r]);return e}class vu{constructor(t,e,r){this.name=t,this.schema=e,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ww(t,r.attrs),this.defaultAttrs=vw(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Xi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:bw(this.attrs,t)}create(t=null,e,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Fn(this,this.computeAttrs(t),G.from(e),$t.setFrom(r))}createChecked(t=null,e,r){return e=G.from(e),this.checkContent(e),new Fn(this,this.computeAttrs(t),e,$t.setFrom(r))}createAndFill(t=null,e,r){if(t=this.computeAttrs(t),e=G.from(e),e.size){let a=this.contentMatch.fillBefore(e);if(!a)return null;e=a.append(e)}let i=this.contentMatch.matchFragment(e),o=i&&i.fillBefore(G.empty,!0);return o?new Fn(this,t,e.append(o),$t.setFrom(r)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){kw(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?e&&e.push(t[r]):e||(e=t.slice(0,r));return e?e.length?e:$t.none:t}static compile(t,e){let r=Object.create(null);t.forEach((o,a)=>r[o]=new vu(o,e,a));let i=e.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}}function ZC(n,t,e){let r=e.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${n}, got ${o}`)}}class WC{constructor(t,e,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ZC(t,e,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class pf{constructor(t,e,r,i){this.name=t,this.rank=e,this.schema=r,this.spec=i,this.attrs=ww(t,i.attrs),this.excluded=null;let o=vw(this.attrs);this.instance=o?new $t(this,o):null}create(t=null){return!t&&this.instance?this.instance:new $t(this,bw(this.attrs,t))}static compile(t,e){let r=Object.create(null),i=0;return t.forEach((o,a)=>r[o]=new pf(o,i++,e,a)),r}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){kw(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class xw{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let i in t)e[i]=t[i];e.nodes=Me.from(t.nodes),e.marks=Me.from(t.marks||{}),this.nodes=vu.compile(this.spec.nodes,this),this.marks=pf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=r[a]||(r[a]=Xi.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?Fb(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:Fb(this,a.split(" "))}this.nodeFromJSON=i=>Fn.fromJSON(this,i),this.markFromJSON=i=>$t.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof vu){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,r,i)}text(t,e){let r=this.nodes.text;return new yu(r,r.defaultAttrs,t,$t.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function Fb(n,t){let e=[];for(let r=0;r<t.length;r++){let i=t[r],o=n.marks[i],a=o;if(o)e.push(o);else for(let c in n.marks){let f=n.marks[c];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&e.push(a=f)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return e}function tA(n){return n.tag!=null}function eA(n){return n.style!=null}class Ji{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let r=this.matchedStyles=[];e.forEach(i=>{if(tA(i))this.tags.push(i);else if(eA(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=t.nodes[i.node];return o.contentMatch.matchType(o)})}parse(t,e={}){let r=new Xb(this,e,!1);return r.addAll(t,$t.none,e.from,e.to),r.finish()}parseSlice(t,e={}){let r=new Xb(this,e,!0);return r.addAll(t,$t.none,e.from,e.to),tt.maxOpen(r.finish())}matchTag(t,e,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(iA(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(t);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(t,e,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],c=a.style;if(!(c.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||c.length>t.length&&(c.charCodeAt(t.length)!=61||c.slice(t.length+1)!=e))){if(a.getAttrs){let f=a.getAttrs(e);if(f===!1)continue;a.attrs=f||void 0}return a}}}static schemaRules(t){let e=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<e.length;a++){let c=e[a];if((c.priority==null?50:c.priority)<o)break}e.splice(a,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=Zb(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=Zb(a)),a.node||a.ignore||a.mark||(a.node=i)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Ji(t,Ji.schemaRules(t)))}}const Sw={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nA={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Mw={ol:!0,ul:!0},ia=1,Gp=2,Pl=4;function Qb(n,t,e){return t!=null?(t?ia:0)|(t==="full"?Gp:0):n&&n.whitespace=="pre"?ia|Gp:e&~Pl}class _c{constructor(t,e,r,i,o,a){this.type=t,this.attrs=e,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=$t.none,this.match=o||(a&Pl?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(G.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&ia)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let e=G.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(G.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Sw.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class Xb{constructor(t,e,r){this.parser=t,this.options=e,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=e.topNode,o,a=Qb(null,e.preserveWhitespace,0)|(r?Pl:0);i?o=new _c(i.type,i.attrs,$t.none,!0,e.topMatch||i.type.contentMatch,a):r?o=new _c(null,null,$t.none,!0,null,a):o=new _c(t.schema.topNodeType,null,$t.none,!0,null,a),this.nodes=[o],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){t.nodeType==3?this.addTextNode(t,e):t.nodeType==1&&this.addElement(t,e)}addTextNode(t,e){let r=t.nodeValue,i=this.top,o=i.options&Gp?"full":this.localPreserveWS||(i.options&ia)>0,{schema:a}=this.parser;if(o==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let f=0;f<c.length;f++)f&&this.insertNode(a.linebreakReplacement.create(),e,!0),c[f]&&this.insertNode(a.text(c[f]),e,!/\S/.test(c[f]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],f=t.previousSibling;(!c||f&&f.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),e,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,e,r){let i=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let a=t.nodeName.toLowerCase(),c;Mw.hasOwnProperty(a)&&this.parser.normalizeLists&&rA(t);let f=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(c=this.parser.matchTag(t,this,r));t:if(f?f.ignore:nA.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,e);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(t=f.skip);let h,p=this.needsBlock;if(Sw.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);break t}let g=f&&f.skip?e:this.readStyles(t,e);g&&this.addAll(t,g),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(t,e);h&&this.addElementByRule(t,f,h,f.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(t,e){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),e)}ignoreFallback(t,e){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e,!0)}readStyles(t,e){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],a=r.getPropertyValue(o);if(a)for(let c=void 0;;){let f=this.parser.matchStyle(o,a,this,c);if(!f)break;if(f.ignore)return null;if(f.clearMark?e=e.filter(h=>!f.clearMark(h)):e=e.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)c=f;else break}}return e}addElementByRule(t,e,r,i){let o,a;if(e.node)if(a=this.parser.schema.nodes[e.node],a.isLeaf)this.insertNode(a.create(e.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let f=this.enter(a,e.attrs||null,r,e.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[e.mark];r=r.concat(f.create(e.attrs))}let c=this.top;if(a&&a.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=t;typeof e.contentElement=="string"?f=t.querySelector(e.contentElement):typeof e.contentElement=="function"?f=e.contentElement(t):e.contentElement&&(f=e.contentElement),this.findAround(t,f,!0),this.addAll(f,r),this.findAround(t,f,!1)}o&&this.sync(c)&&this.open--}addAll(t,e,r,i){let o=r||0;for(let a=r?t.childNodes[r]:t.firstChild,c=i==null?null:t.childNodes[i];a!=c;a=a.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(a,e);this.findAtPoint(t,o)}findPlace(t,e,r){let i,o;for(let a=this.open,c=0;a>=0;a--){let f=this.nodes[a],h=f.findWrapping(t);if(h&&(!i||i.length>h.length+c)&&(i=h,o=f,!h.length))break;if(f.solid){if(r)break;c+=2}}if(!i)return null;this.sync(o);for(let a=0;a<i.length;a++)e=this.enterInner(i[a],null,e,!1);return e}insertNode(t,e,r){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(e=this.enterInner(o,null,e))}let i=this.findPlace(t,e,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let a=$t.none;for(let c of i.concat(t.marks))(o.type?o.type.allowsMarkType(c.type):Wb(c.type,t.type))&&(a=c.addToSet(a));return o.content.push(t.mark(a)),!0}return!1}enter(t,e,r,i){let o=this.findPlace(t.create(e),r,!1);return o&&(o=this.enterInner(t,e,r,!0,i)),o}enterInner(t,e,r,i=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let c=Qb(t,o,a.options);a.options&Pl&&a.content.length==0&&(c|=Pl);let f=$t.none;return r=r.filter(h=>(a.type?a.type.allowsMarkType(h.type):Wb(h.type,t))?(f=h.addToSet(f),!1):!0),this.nodes.push(new _c(t,e,f,i,null,c)),this.open++,r}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let e=this.open;e>=0;e--){if(this.nodes[e]==t)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=ia)}return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let r=this.nodes[e].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==e&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,r){if(t!=e&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&e.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(c,f)=>{for(;c>=0;c--){let h=e[c];if(h==""){if(c==e.length-1||c==0)continue;for(;f>=o;f--)if(a(c-1,f))return!0;return!1}else{let p=f>0||f==0&&i?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return a(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let e in this.parser.schema.nodes){let r=this.parser.schema.nodes[e];if(r.isTextblock&&r.defaultAttrs)return r}}}function rA(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&Mw.hasOwnProperty(r)&&e?(e.appendChild(t),t=e):r=="li"?e=t:r&&(e=null)}}function iA(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function Zb(n){let t={};for(let e in n)t[e]=n[e];return t}function Wb(n,t){let e=t.schema.nodes;for(let r in e){let i=e[r];if(!i.allowsMarkType(n))continue;let o=[],a=c=>{o.push(c);for(let f=0;f<c.edgeCount;f++){let{type:h,next:p}=c.edge(f);if(h==t||o.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}const Tw=65535,Ew=Math.pow(2,16);function sA(n,t){return n+t*Ew}function t1(n){return n&Tw}function oA(n){return(n-(n&Tw))/Ew}const Cw=1,Aw=2,iu=4,Ow=8;class Kp{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(this.delInfo&Ow)>0}get deletedBefore(){return(this.delInfo&(Cw|iu))>0}get deletedAfter(){return(this.delInfo&(Aw|iu))>0}get deletedAcross(){return(this.delInfo&iu)>0}}class dn{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&dn.empty)return dn.empty}recover(t){let e=0,r=t1(t);if(!this.inverted)for(let i=0;i<r;i++)e+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+e+oA(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?i:0);if(f>t)break;let h=this.ranges[c+o],p=this.ranges[c+a],g=f+h;if(t<=g){let y=h?t==f?-1:t==g?1:e:e,b=f+i+(y<0?0:p);if(r)return b;let k=t==(e<0?f:g)?null:sA(c/3,t-f),x=t==f?Aw:t==g?Cw:iu;return(e<0?t!=f:t!=g)&&(x|=Ow),new Kp(b,x,k)}i+=p-h}return r?t+i:new Kp(t+i,0,null)}touches(t,e){let r=0,i=t1(e),o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?r:0);if(f>t)break;let h=this.ranges[c+o],p=f+h;if(t<=p&&c==i*3)return!0;r+=this.ranges[c+a]-h}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],c=a-(this.inverted?o:0),f=a+(this.inverted?0:o),h=this.ranges[i+e],p=this.ranges[i+r];t(c,c+h,f,f+p),o+=p-h}}invert(){return new dn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?dn.empty:new dn(t<0?[0,-t,0]:[0,0,t])}}dn.empty=new dn([]);class bu{constructor(t,e,r=0,i=t?t.length:0){this.mirror=e,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||e)}get maps(){return this._maps}slice(t=0,e=this.maps.length){return new bu(this._maps,this.mirror,t,e)}appendMap(t,e){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),e!=null&&this.setMirror(this._maps.length-1,e)}appendMapping(t){for(let e=0,r=this._maps.length;e<t._maps.length;e++){let i=t.getMirror(e);this.appendMap(t._maps[e],i!=null&&i<e?r+i:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,r=this._maps.length+t._maps.length;e>=0;e--){let i=t.getMirror(e);this.appendMap(t._maps[e].invert(),i!=null&&i>e?r-i-1:void 0)}}invert(){let t=new bu;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],c=a.mapResult(t,e);if(c.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,t=this._maps[f].recover(c.recover);continue}}i|=c.delInfo,t=c.pos}return r?t:new Kp(t,i,null)}}const lp=Object.create(null);class Le{getMap(){return dn.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=lp[e.stepType];if(!r)throw new RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in lp)throw new RangeError("Duplicate use of step JSON ID "+t);return lp[t]=e,e.prototype.jsonID=t,e}}class le{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new le(t,null)}static fail(t){return new le(null,t)}static fromReplace(t,e,r,i){try{return le.ok(t.replace(e,r,i))}catch(o){if(o instanceof pu)return le.fail(o.message);throw o}}}function Rm(n,t,e){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Rm(o.content,t,o))),o.isInline&&(o=t(o,e,i)),r.push(o)}return G.fromArray(r)}class si extends Le{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new tt(Rm(e.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),e.openStart,e.openEnd);return le.fromReplace(t,this.from,this.to,o)}invert(){return new Ln(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new si(e.pos,r.pos,this.mark)}merge(t){return t instanceof si&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new si(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new si(e.from,e.to,t.markFromJSON(e.mark))}}Le.jsonID("addMark",si);class Ln extends Le{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new tt(Rm(e.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),e.openStart,e.openEnd);return le.fromReplace(t,this.from,this.to,r)}invert(){return new si(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new Ln(e.pos,r.pos,this.mark)}merge(t){return t instanceof Ln&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ln(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ln(e.from,e.to,t.markFromJSON(e.mark))}}Le.jsonID("removeMark",Ln);class oi extends Le{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return le.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return le.fromReplace(t,this.pos,this.pos+1,new tt(G.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(let i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(r))return new oi(this.pos,e.marks[i]);return new oi(this.pos,this.mark)}}return new Zi(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new oi(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new oi(e.pos,t.markFromJSON(e.mark))}}Le.jsonID("addNodeMark",oi);class Zi extends Le{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return le.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return le.fromReplace(t,this.pos,this.pos+1,new tt(G.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new oi(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Zi(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Zi(e.pos,t.markFromJSON(e.mark))}}Le.jsonID("removeNodeMark",Zi);class ye extends Le{constructor(t,e,r,i=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=i}apply(t){return this.structure&&Yp(t,this.from,this.to)?le.fail("Structure replace would overwrite content"):le.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new dn([this.from,this.to-this.from,this.slice.size])}invert(t){return new ye(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new ye(e.pos,Math.max(e.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof ye)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?tt.empty:new tt(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new ye(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?tt.empty:new tt(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new ye(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ye(e.from,e.to,tt.fromJSON(t,e.slice),!!e.structure)}}Le.jsonID("replace",ye);class ve extends Le{constructor(t,e,r,i,o,a,c=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=c}apply(t){if(this.structure&&(Yp(t,this.from,this.gapFrom)||Yp(t,this.gapTo,this.to)))return le.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return le.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?le.fromReplace(t,this.from,this.to,r):le.fail("Content does not fit in gap")}getMap(){return new dn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new ve(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||i<e.pos||o>r.pos?null:new ve(e.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ve(e.from,e.to,e.gapFrom,e.gapTo,tt.fromJSON(t,e.slice),e.insert,!!e.structure)}}Le.jsonID("replaceAround",ve);function Yp(n,t,e){let r=n.resolve(t),i=e-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function lA(n,t,e,r){let i=[],o=[],a,c;n.doc.nodesBetween(t,e,(f,h,p)=>{if(!f.isInline)return;let g=f.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let y=Math.max(h,t),b=Math.min(h+f.nodeSize,e),k=r.addToSet(g);for(let x=0;x<g.length;x++)g[x].isInSet(k)||(a&&a.to==y&&a.mark.eq(g[x])?a.to=b:i.push(a=new Ln(y,b,g[x])));c&&c.to==y?c.to=b:o.push(c=new si(y,b,r))}}),i.forEach(f=>n.step(f)),o.forEach(f=>n.step(f))}function aA(n,t,e,r){let i=[],o=0;n.doc.nodesBetween(t,e,(a,c)=>{if(!a.isInline)return;o++;let f=null;if(r instanceof pf){let h=a.marks,p;for(;p=r.isInSet(h);)(f||(f=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(a.marks)&&(f=[r]):f=a.marks;if(f&&f.length){let h=Math.min(c+a.nodeSize,e);for(let p=0;p<f.length;p++){let g=f[p],y;for(let b=0;b<i.length;b++){let k=i[b];k.step==o-1&&g.eq(i[b].style)&&(y=k)}y?(y.to=h,y.step=o):i.push({style:g,from:Math.max(c,t),to:h,step:o})}}}),i.forEach(a=>n.step(new Ln(a.from,a.to,a.style)))}function Nm(n,t,e,r=e.contentMatch,i=!0){let o=n.doc.nodeAt(t),a=[],c=t+1;for(let f=0;f<o.childCount;f++){let h=o.child(f),p=c+h.nodeSize,g=r.matchType(h.type);if(!g)a.push(new ye(c,p,tt.empty));else{r=g;for(let y=0;y<h.marks.length;y++)e.allowsMarkType(h.marks[y].type)||n.step(new Ln(c,p,h.marks[y]));if(i&&h.isText&&e.whitespace!="pre"){let y,b=/\r?\n|\r/g,k;for(;y=b.exec(h.text);)k||(k=new tt(G.from(e.schema.text(" ",e.allowedMarks(h.marks))),0,0)),a.push(new ye(c+y.index,c+y.index+y[0].length,k))}}c=p}if(!r.validEnd){let f=r.fillBefore(G.empty,!0);n.replace(c,c,new tt(f,0,0))}for(let f=a.length-1;f>=0;f--)n.step(a[f])}function cA(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function wo(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth,i=0,o=0;;--r){let a=n.$from.node(r),c=n.$from.index(r)+i,f=n.$to.indexAfter(r)-o;if(r<n.depth&&a.canReplace(c,f,e))return r;if(r==0||a.type.spec.isolating||!cA(a,c,f))break;c&&(i=1),f<a.childCount&&(o=1)}return null}function uA(n,t,e){let{$from:r,$to:i,depth:o}=t,a=r.before(o+1),c=i.after(o+1),f=a,h=c,p=G.empty,g=0;for(let k=o,x=!1;k>e;k--)x||r.index(k)>0?(x=!0,p=G.from(r.node(k).copy(p)),g++):f--;let y=G.empty,b=0;for(let k=o,x=!1;k>e;k--)x||i.after(k+1)<i.end(k)?(x=!0,y=G.from(i.node(k).copy(y)),b++):h++;n.step(new ve(f,h,a,c,new tt(p.append(y),g,b),p.size-g,!0))}function Rw(n,t,e=null,r=n){let i=fA(n,t),o=i&&dA(r,t);return o?i.map(e1).concat({type:t,attrs:e}).concat(o.map(e1)):null}function e1(n){return{type:n,attrs:null}}function fA(n,t){let{parent:e,startIndex:r,endIndex:i}=n,o=e.contentMatchAt(r).findWrapping(t);if(!o)return null;let a=o.length?o[0]:t;return e.canReplaceWith(r,i,a)?o:null}function dA(n,t){let{parent:e,startIndex:r,endIndex:i}=n,o=e.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;let f=(a.length?a[a.length-1]:t).contentMatch;for(let h=r;f&&h<i;h++)f=f.matchType(e.child(h).type);return!f||!f.validEnd?null:a}function hA(n,t,e){let r=G.empty;for(let a=e.length-1;a>=0;a--){if(r.size){let c=e[a].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=G.from(e[a].type.create(e[a].attrs,r))}let i=t.start,o=t.end;n.step(new ve(i,o,i,o,new tt(r,0,0),e.length,!0))}function pA(n,t,e,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(t,e,(a,c)=>{let f=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,f)&&mA(n.doc,n.mapping.slice(o).map(c),r)){let h=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!k?h=!1:!b&&k&&(h=!0)}h===!1&&zw(n,a,c,o),Nm(n,n.mapping.slice(o).map(c,1),r,void 0,h===null);let p=n.mapping.slice(o),g=p.map(c,1),y=p.map(c+a.nodeSize,1);return n.step(new ve(g,y,g+1,y-1,new tt(G.from(r.create(f,null,a.marks)),0,0),1,!0)),h===!0&&Nw(n,a,c,o),!1}})}function Nw(n,t,e,r){t.forEach((i,o)=>{if(i.isText){let a,c=/\r?\n|\r/g;for(;a=c.exec(i.text);){let f=n.mapping.slice(r).map(e+1+o+a.index);n.replaceWith(f,f+1,t.type.schema.linebreakReplacement.create())}}})}function zw(n,t,e,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(e+1+o);n.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function mA(n,t,e){let r=n.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,e)}function gA(n,t,e,r,i){let o=n.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);let a=e.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(t,t+o.nodeSize,a);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new ve(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new tt(G.from(a),0,0),1,!0))}function kr(n,t,e=1,r){let i=n.resolve(t),o=i.depth-e,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=e-2;h>o;h--,p--){let g=i.node(h),y=i.index(h);if(g.type.spec.isolating)return!1;let b=g.content.cutByIndex(y,g.childCount),k=r&&r[p+1];k&&(b=b.replaceChild(0,k.type.create(k.attrs)));let x=r&&r[p]||g;if(!g.canReplace(y+1,g.childCount)||!x.type.validContent(b))return!1}let c=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(c,c,f?f.type:i.node(o+1).type)}function yA(n,t,e=1,r){let i=n.doc.resolve(t),o=G.empty,a=G.empty;for(let c=i.depth,f=i.depth-e,h=e-1;c>f;c--,h--){o=G.from(i.node(c).copy(o));let p=r&&r[h];a=G.from(p?p.type.create(p.attrs,a):i.node(c).copy(a))}n.step(new ye(t,t,new tt(o.append(a),e,e),!0))}function ls(n,t){let e=n.resolve(t),r=e.index();return Dw(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(r,r+1)}function vA(n,t){t.content.size||n.type.compatibleContent(t.type);let e=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),a=o.type==r?n.type.schema.nodes.text:o.type;if(e=e.matchType(a),!e||!n.type.allowsMarks(o.marks))return!1}return e.validEnd}function Dw(n,t){return!!(n&&t&&!n.isLeaf&&vA(n,t))}function mf(n,t,e=-1){let r=n.resolve(t);for(let i=r.depth;;i--){let o,a,c=r.index(i);if(i==r.depth?(o=r.nodeBefore,a=r.nodeAfter):e>0?(o=r.node(i+1),c++,a=r.node(i).maybeChild(c)):(o=r.node(i).maybeChild(c-1),a=r.node(i+1)),o&&!o.isTextblock&&Dw(o,a)&&r.node(i).canReplace(c,c+1))return t;if(i==0)break;t=e<0?r.before(i):r.after(i)}}function bA(n,t,e){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(t-e),a=o.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let c=n.steps.length;if(r===!1){let p=n.doc.resolve(t+e);zw(n,p.node(),p.before(),c)}a.inlineContent&&Nm(n,t+e-1,a,o.node().contentMatchAt(o.index()),r==null);let f=n.mapping.slice(c),h=f.map(t-e);if(n.step(new ye(h,f.map(t+e,-1),tt.empty,!0)),r===!0){let p=n.doc.resolve(h);Nw(n,p.node(),p.before(),n.steps.length)}return n}function kA(n,t,e){let r=n.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),e))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,e))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,e))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function gf(n,t,e=t,r=tt.empty){if(t==e&&!r.size)return null;let i=n.resolve(t),o=n.resolve(e);return Bw(i,o,r)?new ye(t,e,r):new wA(i,o,r).fit()}function Bw(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}class wA{constructor(t,e,r){this.$from=t,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=G.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=G.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let o=this.placed,a=r.depth,c=i.depth;for(;a&&c&&o.childCount==1;)o=o.firstChild.content,a--,c--;let f=new tt(o,a,c);return t>-1?new ve(r.pos,t,this.$to.pos,this.$to.end(),f,e):f.size||r.pos!=this.$to.pos?new ye(r.pos,i.pos,f):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let o=e.firstChild;if(e.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){t=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=e==1?t:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=ap(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:f,match:h}=this.frontier[c],p,g=null;if(e==1&&(a?h.matchType(a.type)||(g=h.fillBefore(G.from(a),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:g};if(e==2&&a&&(p=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:t,openStart:e,openEnd:r}=this.unplaced,i=ap(t,e);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new tt(t,e+1,Math.max(r,i.size+e>=t.size-r?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:r}=this.unplaced,i=ap(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new tt(Al(t,e-1,1),e-1,o?e-1:r)}else this.unplaced=new tt(Al(t,e,1),e,r)}placeNodes({sliceDepth:t,frontierDepth:e,parent:r,inject:i,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let x=0;x<o.length;x++)this.openFrontierNode(o[x]);let a=this.unplaced,c=r?r.content:a.content,f=a.openStart-t,h=0,p=[],{match:g,type:y}=this.frontier[e];if(i){for(let x=0;x<i.childCount;x++)p.push(i.child(x));g=g.matchFragment(i)}let b=c.size+t-(a.content.size-a.openEnd);for(;h<c.childCount;){let x=c.child(h),S=g.matchType(x.type);if(!S)break;h++,(h>1||f==0||x.content.size)&&(g=S,p.push(Lw(x.mark(y.allowedMarks(x.marks)),h==1?f:0,h==c.childCount?b:-1)))}let k=h==c.childCount;k||(b=-1),this.placed=Ol(this.placed,e,G.from(p)),this.frontier[e].match=g,k&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,S=c;x<b;x++){let T=S.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),S=T.content}this.unplaced=k?t==0?tt.empty:new tt(Al(a.content,t-1,1),t-1,b<0?a.openEnd:t-1):new tt(Al(a.content,t,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!cp(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:r,type:i}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=cp(t,e,i,r,o);if(a){for(let c=e-1;c>=0;c--){let{match:f,type:h}=this.frontier[c],p=cp(t,c,h,f,!0);if(!p||p.childCount)continue t}return{depth:e,fit:a,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Ol(this.placed,e.depth,e.fit)),t=e.move;for(let r=e.depth+1;r<=t.depth;r++){let i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,e=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Ol(this.placed,this.depth,G.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(G.empty,!0);e.childCount&&(this.placed=Ol(this.placed,this.frontier.length,e))}}function Al(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(Al(n.firstChild.content,t-1,e)))}function Ol(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(Ol(n.lastChild.content,t-1,e)))}function ap(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function Lw(n,t,e){if(t<=0)return n;let r=n.content;return t>1&&(r=r.replaceChild(0,Lw(r.firstChild,t-1,r.childCount==1?e-1:0))),t>0&&(r=n.type.contentMatch.fillBefore(r).append(r),e<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(G.empty,!0)))),n.copy(r)}function cp(n,t,e,r,i){let o=n.node(t),a=i?n.indexAfter(t):n.index(t);if(a==o.childCount&&!e.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,a);return c&&!xA(e,o.content,a)?c:null}function xA(n,t,e){for(let r=e;r<t.childCount;r++)if(!n.allowsMarks(t.child(r).marks))return!0;return!1}function SA(n){return n.spec.defining||n.spec.definingForContent}function MA(n,t,e,r){if(!r.size)return n.deleteRange(t,e);let i=n.doc.resolve(t),o=n.doc.resolve(e);if(Bw(i,o,r))return n.step(new ye(t,e,r));let a=$w(i,o);a[a.length-1]==0&&a.pop();let c=-(i.depth+1);a.unshift(c);for(let y=i.depth,b=i.pos-1;y>0;y--,b--){let k=i.node(y).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;a.indexOf(y)>-1?c=y:i.before(y)==b&&a.splice(1,0,-y)}let f=a.indexOf(c),h=[],p=r.openStart;for(let y=r.content,b=0;;b++){let k=y.firstChild;if(h.push(k),b==r.openStart)break;y=k.content}for(let y=p-1;y>=0;y--){let b=h[y],k=SA(b.type);if(k&&!b.sameMarkup(i.node(Math.abs(c)-1)))p=y;else if(k||!b.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let b=(y+p+1)%(r.openStart+1),k=h[b];if(k)for(let x=0;x<a.length;x++){let S=a[(x+f)%a.length],T=!0;S<0&&(T=!1,S=-S);let D=i.node(S-1),H=i.index(S-1);if(D.canReplaceWith(H,H,k.type,k.marks))return n.replace(i.before(S),T?o.after(S):e,new tt(Hw(r.content,0,r.openStart,b),b,r.openEnd))}}let g=n.steps.length;for(let y=a.length-1;y>=0&&(n.replace(t,e,r),!(n.steps.length>g));y--){let b=a[y];b<0||(t=i.before(b),e=o.after(b))}}function Hw(n,t,e,r,i){if(t<e){let o=n.firstChild;n=n.replaceChild(0,o.copy(Hw(o.content,t+1,e,r,o)))}if(t>r){let o=i.contentMatchAt(0),a=o.fillBefore(n).append(n);n=a.append(o.matchFragment(a).fillBefore(G.empty,!0))}return n}function TA(n,t,e,r){if(!r.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let i=kA(n.doc,t,r.type);i!=null&&(t=e=i)}n.replaceRange(t,e,new tt(G.from(r),0,0))}function EA(n,t,e){let r=n.doc.resolve(t),i=n.doc.resolve(e),o=$w(r,i);for(let a=0;a<o.length;a++){let c=o[a],f=a==o.length-1;if(f&&c==0||r.node(c).type.contentMatch.validEnd)return n.delete(r.start(c),i.end(c));if(c>0&&(f||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return n.delete(r.before(c),i.after(c))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&e>r.end(a)&&i.end(a)-e!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),e);n.delete(t,e)}function $w(n,t){let e=[],r=Math.min(n.depth,t.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||t.end(i)>t.pos+(t.depth-i)||n.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==n.depth&&i==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&e.push(i)}return e}class lo extends Le{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return le.fail("No node at attribute step's position");let r=Object.create(null);for(let o in e.attrs)r[o]=e.attrs[o];r[this.attr]=this.value;let i=e.type.create(r,null,e.marks);return le.fromReplace(t,this.pos,this.pos+1,new tt(G.from(i),0,e.isLeaf?0:1))}getMap(){return dn.empty}invert(t){return new lo(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new lo(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new lo(e.pos,e.attr,e.value)}}Le.jsonID("attr",lo);class sa extends Le{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let i in t.attrs)e[i]=t.attrs[i];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return le.ok(r)}getMap(){return dn.empty}invert(t){return new sa(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new sa(e.attr,e.value)}}Le.jsonID("docAttr",sa);let ho=class extends Error{};ho=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};ho.prototype=Object.create(Error.prototype);ho.prototype.constructor=ho;ho.prototype.name="TransformError";class CA{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new bu}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new ho(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}changedRange(){let t=1e9,e=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(t=i.map(t,1),e=i.map(e,-1)),i.forEach((o,a,c,f)=>{t=Math.min(t,c),e=Math.max(e,f)})}return t==1e9?null:{from:t,to:e}}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,r=tt.empty){let i=gf(this.doc,t,e,r);return i&&this.step(i),this}replaceWith(t,e,r){return this.replace(t,e,new tt(G.from(r),0,0))}delete(t,e){return this.replace(t,e,tt.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,r){return MA(this,t,e,r),this}replaceRangeWith(t,e,r){return TA(this,t,e,r),this}deleteRange(t,e){return EA(this,t,e),this}lift(t,e){return uA(this,t,e),this}join(t,e=1){return bA(this,t,e),this}wrap(t,e){return hA(this,t,e),this}setBlockType(t,e=t,r,i=null){return pA(this,t,e,r,i),this}setNodeMarkup(t,e,r=null,i){return gA(this,t,e,r,i),this}setNodeAttribute(t,e,r){return this.step(new lo(t,e,r)),this}setDocAttribute(t,e){return this.step(new sa(t,e)),this}addNodeMark(t,e){return this.step(new oi(t,e)),this}removeNodeMark(t,e){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(e instanceof $t)e.isInSet(r.marks)&&this.step(new Zi(t,e));else{let i=r.marks,o,a=[];for(;o=e.isInSet(i);)a.push(new Zi(t,o)),i=o.removeFromSet(i);for(let c=a.length-1;c>=0;c--)this.step(a[c])}return this}split(t,e=1,r){return yA(this,t,e,r),this}addMark(t,e,r){return lA(this,t,e,r),this}removeMark(t,e,r){return aA(this,t,e,r),this}clearIncompatible(t,e,r){return Nm(this,t,e,r),this}}const up=Object.create(null);class ee{constructor(t,e,r){this.$anchor=t,this.$head=e,this.ranges=r||[new AA(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=tt.empty){let r=e.content.lastChild,i=null;for(let c=0;c<e.openEnd;c++)i=r,r=r.lastChild;let o=t.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:f,$to:h}=a[c],p=t.mapping.slice(o);t.replaceRange(p.map(f.pos),p.map(h.pos),c?tt.empty:e),c==0&&i1(t,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let r=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:c}=i[o],f=t.mapping.slice(r),h=f.map(a.pos),p=f.map(c.pos);o?t.deleteRange(h,p):(t.replaceRangeWith(h,p,e),i1(t,r,e.isInline?-1:1))}}static findFrom(t,e,r=!1){let i=t.parent.inlineContent?new Xe(t):Xs(t.node(0),t.parent,t.pos,t.index(),e,r);if(i)return i;for(let o=t.depth-1;o>=0;o--){let a=e<0?Xs(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):Xs(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(a)return a}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new $n(t.node(0))}static atStart(t){return Xs(t,t,0,0,1)||new $n(t)}static atEnd(t){return Xs(t,t,t.content.size,t.childCount,-1)||new $n(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=up[e.type];if(!r)throw new RangeError(`No selection type ${e.type} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in up)throw new RangeError("Duplicate use of selection JSON ID "+t);return up[t]=e,e.prototype.jsonID=t,e}getBookmark(){return Xe.between(this.$anchor,this.$head).getBookmark()}}ee.prototype.visible=!0;class AA{constructor(t,e){this.$from=t,this.$to=e}}let n1=!1;function r1(n){!n1&&!n.parent.inlineContent&&(n1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Xe extends ee{constructor(t,e=t){r1(t),r1(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return ee.near(r);let i=t.resolve(e.map(this.anchor));return new Xe(i.parent.inlineContent?i:r,r)}replace(t,e=tt.empty){if(super.replace(t,e),e==tt.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Xe&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new yf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Xe(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,r=e){let i=t.resolve(e);return new this(i,r==e?i:t.resolve(r))}static between(t,e,r){let i=t.pos-e.pos;if((!r||i)&&(r=i>=0?1:-1),!e.parent.inlineContent){let o=ee.findFrom(e,r,!0)||ee.findFrom(e,-r,!0);if(o)e=o.$head;else return ee.near(e,r)}return t.parent.inlineContent||(i==0?t=e:(t=(ee.findFrom(t,-r,!0)||ee.findFrom(t,r,!0)).$anchor,t.pos<e.pos!=i<0&&(t=e))),new Xe(t,e)}}ee.jsonID("text",Xe);class yf{constructor(t,e){this.anchor=t,this.head=e}map(t){return new yf(t.map(this.anchor),t.map(this.head))}resolve(t){return Xe.between(t.resolve(this.anchor),t.resolve(this.head))}}class Kt extends ee{constructor(t){let e=t.nodeAfter,r=t.node(0).resolve(t.pos+e.nodeSize);super(t,r),this.node=e}map(t,e){let{deleted:r,pos:i}=e.mapResult(this.anchor),o=t.resolve(i);return r?ee.near(o):new Kt(o)}content(){return new tt(G.from(this.node),0,0)}eq(t){return t instanceof Kt&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new zm(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Kt(t.resolve(e.anchor))}static create(t,e){return new Kt(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Kt.prototype.visible=!1;ee.jsonID("node",Kt);class zm{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:r}=t.mapResult(this.anchor);return e?new yf(r,r):new zm(r)}resolve(t){let e=t.resolve(this.anchor),r=e.nodeAfter;return r&&Kt.isSelectable(r)?new Kt(e):ee.near(e)}}class $n extends ee{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=tt.empty){if(e==tt.empty){t.delete(0,t.doc.content.size);let r=ee.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new $n(t)}map(t){return new $n(t)}eq(t){return t instanceof $n}getBookmark(){return OA}}ee.jsonID("all",$n);const OA={map(){return this},resolve(n){return new $n(n)}};function Xs(n,t,e,r,i,o=!1){if(t.inlineContent)return Xe.create(n,e);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let c=t.child(a);if(c.isAtom){if(!o&&Kt.isSelectable(c))return Kt.create(n,e-(i<0?c.nodeSize:0))}else{let f=Xs(n,c,e+i,i<0?c.childCount:0,i,o);if(f)return f}e+=c.nodeSize*i}return null}function i1(n,t,e){let r=n.steps.length-1;if(r<t)return;let i=n.steps[r];if(!(i instanceof ye||i instanceof ve))return;let o=n.mapping.maps[r],a;o.forEach((c,f,h,p)=>{a==null&&(a=p)}),n.setSelection(ee.near(n.doc.resolve(a),e))}function s1(n,t){return!t||!n?n:n.bind(t)}class Uc{constructor(t,e,r){this.name=t,this.init=s1(e.init,r),this.apply=s1(e.apply,r)}}new Uc("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new Uc("selection",{init(n,t){return n.selection||ee.atStart(t.doc)},apply(n){return n.selection}}),new Uc("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,r){return r.selection.$cursor?n.storedMarks:null}}),new Uc("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}});const Dm=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function jw(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("backward",n):e.parentOffset>0)?null:e}const Iw=(n,t,e)=>{let r=jw(n,e);if(!r)return!1;let i=Bm(r);if(!i){let a=r.blockRange(),c=a&&wo(a);return c==null?!1:(t&&t(n.tr.lift(a,c).scrollIntoView()),!0)}let o=i.nodeBefore;if(Yw(n,i,t,-1))return!0;if(r.parent.content.size==0&&(po(o,"end")||Kt.isSelectable(o)))for(let a=r.depth;;a--){let c=gf(n.doc,r.before(a),r.after(a),tt.empty);if(c&&c.slice.size<c.to-c.from){if(t){let f=n.tr.step(c);f.setSelection(po(o,"end")?ee.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):Kt.create(f.doc,i.pos-o.nodeSize)),t(f.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(t&&t(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},RA=(n,t,e)=>{let r=jw(n,e);if(!r)return!1;let i=Bm(r);return i?_w(n,i,t):!1},NA=(n,t,e)=>{let r=qw(n,e);if(!r)return!1;let i=Lm(r);return i?_w(n,i,t):!1};function _w(n,t,e){let r=t.nodeBefore,i=r,o=t.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=t.nodeAfter,c=a,f=t.pos+1;for(;!c.isTextblock;f++){if(c.type.spec.isolating)return!1;let p=c.firstChild;if(!p)return!1;c=p}let h=gf(n.doc,o,f,tt.empty);if(!h||h.from!=o||h instanceof ye&&h.slice.size>=f-o)return!1;if(e){let p=n.tr.step(h);p.setSelection(Xe.create(p.doc,o)),e(p.scrollIntoView())}return!0}function po(n,t,e=!1){for(let r=n;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(e&&r.childCount!=1)return!1}return!1}const Uw=(n,t,e)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):r.parentOffset>0)return!1;o=Bm(r)}let a=o&&o.nodeBefore;return!a||!Kt.isSelectable(a)?!1:(t&&t(n.tr.setSelection(Kt.create(n.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function Bm(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function qw(n,t){let{$cursor:e}=n.selection;return!e||(t?!t.endOfTextblock("forward",n):e.parentOffset<e.parent.content.size)?null:e}const Vw=(n,t,e)=>{let r=qw(n,e);if(!r)return!1;let i=Lm(r);if(!i)return!1;let o=i.nodeAfter;if(Yw(n,i,t,1))return!0;if(r.parent.content.size==0&&(po(o,"start")||Kt.isSelectable(o))){let a=gf(n.doc,r.before(),r.after(),tt.empty);if(a&&a.slice.size<a.to-a.from){if(t){let c=n.tr.step(a);c.setSelection(po(o,"start")?ee.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):Kt.create(c.doc,c.mapping.map(i.pos))),t(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(t&&t(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},Pw=(n,t,e)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;o=Lm(r)}let a=o&&o.nodeAfter;return!a||!Kt.isSelectable(a)?!1:(t&&t(n.tr.setSelection(Kt.create(n.doc,o.pos)).scrollIntoView()),!0)};function Lm(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const zA=(n,t)=>{let e=n.selection,r=e instanceof Kt,i;if(r){if(e.node.isTextblock||!ls(n.doc,e.from))return!1;i=e.from}else if(i=mf(n.doc,e.from,-1),i==null)return!1;if(t){let o=n.tr.join(i);r&&o.setSelection(Kt.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},DA=(n,t)=>{let e=n.selection,r;if(e instanceof Kt){if(e.node.isTextblock||!ls(n.doc,e.to))return!1;r=e.to}else if(r=mf(n.doc,e.to,1),r==null)return!1;return t&&t(n.tr.join(r).scrollIntoView()),!0},BA=(n,t)=>{let{$from:e,$to:r}=n.selection,i=e.blockRange(r),o=i&&wo(i);return o==null?!1:(t&&t(n.tr.lift(i,o).scrollIntoView()),!0)},Jw=(n,t)=>{let{$head:e,$anchor:r}=n.selection;return!e.parent.type.spec.code||!e.sameParent(r)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function Hm(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const LA=(n,t)=>{let{$head:e,$anchor:r}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(r))return!1;let i=e.node(-1),o=e.indexAfter(-1),a=Hm(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(t){let c=e.after(),f=n.tr.replaceWith(c,c,a.createAndFill());f.setSelection(ee.near(f.doc.resolve(c),1)),t(f.scrollIntoView())}return!0},Gw=(n,t)=>{let e=n.selection,{$from:r,$to:i}=e;if(e instanceof $n||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Hm(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=n.tr.insert(a,o.createAndFill());c.setSelection(Xe.create(c.doc,a+1)),t(c.scrollIntoView())}return!0},Kw=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let o=e.before();if(kr(n.doc,o))return t&&t(n.tr.split(o).scrollIntoView()),!0}let r=e.blockRange(),i=r&&wo(r);return i==null?!1:(t&&t(n.tr.lift(r,i).scrollIntoView()),!0)};function HA(n){return(t,e)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Kt&&t.selection.node.isBlock)return!r.parentOffset||!kr(t.doc,r.pos)?!1:(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],a,c,f=!1,h=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){f=r.end(b)==r.pos+(r.depth-b),h=r.start(b)==r.pos-(r.depth-b),c=Hm(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),o.unshift(f&&c?{type:c}:null),a=b;break}else{if(b==1)return!1;o.unshift(null)}let p=t.tr;(t.selection instanceof Xe||t.selection instanceof $n)&&p.deleteSelection();let g=p.mapping.map(r.pos),y=kr(p.doc,g,o.length,o);if(y||(o[0]=c?{type:c}:null,y=kr(p.doc,g,o.length,o)),!y)return!1;if(p.split(g,o.length,o),!f&&h&&r.node(a).type!=c){let b=p.mapping.map(r.before(a)),k=p.doc.resolve(b);c&&r.node(a-1).canReplaceWith(k.index(),k.index()+1,c)&&p.setNodeMarkup(p.mapping.map(r.before(a)),c)}return e&&e(p.scrollIntoView()),!0}}const $A=HA(),jA=(n,t)=>{let{$from:e,to:r}=n.selection,i,o=e.sharedDepth(r);return o==0?!1:(i=e.before(o),t&&t(n.tr.setSelection(Kt.create(n.doc,i))),!0)};function IA(n,t,e){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(e&&e(n.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||ls(n.doc,t.pos))?!1:(e&&e(n.tr.join(t.pos).scrollIntoView()),!0)}function Yw(n,t,e,r){let i=t.nodeBefore,o=t.nodeAfter,a,c,f=i.type.spec.isolating||o.type.spec.isolating;if(!f&&IA(n,t,e))return!0;let h=!f&&t.parent.canReplace(t.index(),t.index()+1);if(h&&(a=(c=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&c.matchType(a[0]||o.type).validEnd){if(e){let b=t.pos+o.nodeSize,k=G.empty;for(let T=a.length-1;T>=0;T--)k=G.from(a[T].create(null,k));k=G.from(i.copy(k));let x=n.tr.step(new ve(t.pos-1,b,t.pos,b,new tt(k,1,0),a.length,!0)),S=x.doc.resolve(b+2*a.length);S.nodeAfter&&S.nodeAfter.type==i.type&&ls(x.doc,S.pos)&&x.join(S.pos),e(x.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&f?null:ee.findFrom(t,1),g=p&&p.$from.blockRange(p.$to),y=g&&wo(g);if(y!=null&&y>=t.depth)return e&&e(n.tr.lift(g,y).scrollIntoView()),!0;if(h&&po(o,"start",!0)&&po(i,"end")){let b=i,k=[];for(;k.push(b),!b.isTextblock;)b=b.lastChild;let x=o,S=1;for(;!x.isTextblock;x=x.firstChild)S++;if(b.canReplace(b.childCount,b.childCount,x.content)){if(e){let T=G.empty;for(let H=k.length-1;H>=0;H--)T=G.from(k[H].copy(T));let D=n.tr.step(new ve(t.pos-k.length,t.pos+o.nodeSize,t.pos+S,t.pos+o.nodeSize-S,new tt(T,k.length,0),0,!0));e(D.scrollIntoView())}return!0}}return!1}function Fw(n){return function(t,e){let r=t.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(e&&e(t.tr.setSelection(Xe.create(t.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const _A=Fw(-1),UA=Fw(1);function qA(n,t=null){return function(e,r){let{$from:i,$to:o}=e.selection,a=i.blockRange(o),c=a&&Rw(a,n,t);return c?(r&&r(e.tr.wrap(a,c).scrollIntoView()),!0):!1}}function o1(n,t=null){return function(e,r){let i=!1;for(let o=0;o<e.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:c}}=e.selection.ranges[o];e.doc.nodesBetween(a,c,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(n,t)))if(f.type==n)i=!0;else{let p=e.doc.resolve(h),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let o=e.tr;for(let a=0;a<e.selection.ranges.length;a++){let{$from:{pos:c},$to:{pos:f}}=e.selection.ranges[a];o.setBlockType(c,f,n,t)}r(o.scrollIntoView())}return!0}}function $m(...n){return function(t,e,r){for(let i=0;i<n.length;i++)if(n[i](t,e,r))return!0;return!1}}$m(Dm,Iw,Uw);$m(Dm,Vw,Pw);$m(Jw,Gw,Kw,$A);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";var VA=Object.defineProperty,PA=(n,t,e)=>t in n?VA(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,JA=(n,t,e)=>(PA(n,t+"",e),e),qc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function GA(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var Xw=GA,KA=typeof qc=="object"&&qc&&qc.Object===Object&&qc,YA=KA,FA=YA,QA=typeof self=="object"&&self&&self.Object===Object&&self,XA=FA||QA||Function("return this")(),Zw=XA,ZA=Zw,WA=function(){return ZA.Date.now()},tO=WA,eO=/\s/;function nO(n){for(var t=n.length;t--&&eO.test(n.charAt(t)););return t}var rO=nO,iO=rO,sO=/^\s+/;function oO(n){return n&&n.slice(0,iO(n)+1).replace(sO,"")}var lO=oO,aO=Zw,cO=aO.Symbol,Ww=cO,l1=Ww,tx=Object.prototype,uO=tx.hasOwnProperty,fO=tx.toString,xl=l1?l1.toStringTag:void 0;function dO(n){var t=uO.call(n,xl),e=n[xl];try{n[xl]=void 0;var r=!0}catch{}var i=fO.call(n);return r&&(t?n[xl]=e:delete n[xl]),i}var hO=dO,pO=Object.prototype,mO=pO.toString;function gO(n){return mO.call(n)}var yO=gO,a1=Ww,vO=hO,bO=yO,kO="[object Null]",wO="[object Undefined]",c1=a1?a1.toStringTag:void 0;function xO(n){return n==null?n===void 0?wO:kO:c1&&c1 in Object(n)?vO(n):bO(n)}var SO=xO;function MO(n){return n!=null&&typeof n=="object"}var TO=MO,EO=SO,CO=TO,AO="[object Symbol]";function OO(n){return typeof n=="symbol"||CO(n)&&EO(n)==AO}var RO=OO,NO=lO,u1=Xw,zO=RO,f1=NaN,DO=/^[-+]0x[0-9a-f]+$/i,BO=/^0b[01]+$/i,LO=/^0o[0-7]+$/i,HO=parseInt;function $O(n){if(typeof n=="number")return n;if(zO(n))return f1;if(u1(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=u1(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=NO(n);var e=BO.test(n);return e||LO.test(n)?HO(n.slice(2),e?2:8):DO.test(n)?f1:+n}var jO=$O,IO=Xw,fp=tO,d1=jO,_O="Expected a function",UO=Math.max,qO=Math.min;function VO(n,t,e){var r,i,o,a,c,f,h=0,p=!1,g=!1,y=!0;if(typeof n!="function")throw new TypeError(_O);t=d1(t)||0,IO(e)&&(p=!!e.leading,g="maxWait"in e,o=g?UO(d1(e.maxWait)||0,t):o,y="trailing"in e?!!e.trailing:y);function b(I){var q=r,Y=i;return r=i=void 0,h=I,a=n.apply(Y,q),a}function k(I){return h=I,c=setTimeout(T,t),p?b(I):a}function x(I){var q=I-f,Y=I-h,nt=t-q;return g?qO(nt,o-Y):nt}function S(I){var q=I-f,Y=I-h;return f===void 0||q>=t||q<0||g&&Y>=o}function T(){var I=fp();if(S(I))return D(I);c=setTimeout(T,x(I))}function D(I){return c=void 0,y&&r?b(I):(r=i=void 0,a)}function H(){c!==void 0&&clearTimeout(c),h=0,r=f=i=c=void 0}function V(){return c===void 0?a:D(fp())}function L(){var I=fp(),q=S(I);if(r=arguments,i=this,f=I,q){if(c===void 0)return k(f);if(g)return clearTimeout(c),c=setTimeout(T,t),b(f)}return c===void 0&&(c=setTimeout(T,t)),a}return L.cancel=H,L.flush=V,L}var PO=VO;const JO=Qw(PO);var ex={exports:{}},dp={};var h1;function GO(){if(h1)return dp;h1=1;var n=De;function t(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var e=typeof Object.is=="function"?Object.is:t,r=n.useState,i=n.useEffect,o=n.useLayoutEffect,a=n.useDebugValue;function c(g,y){var b=y(),k=r({inst:{value:b,getSnapshot:y}}),x=k[0].inst,S=k[1];return o(function(){x.value=b,x.getSnapshot=y,f(x)&&S({inst:x})},[g,b,y]),i(function(){return f(x)&&S({inst:x}),g(function(){f(x)&&S({inst:x})})},[g]),a(b),b}function f(g){var y=g.getSnapshot;g=g.value;try{var b=y();return!e(g,b)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return dp.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:p,dp}ex.exports=GO();var jm=ex.exports;function Te(n){this.content=n}Te.prototype={constructor:Te,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return t==-1?void 0:this.content[t+1]},update:function(n,t,e){var r=e&&e!=n?this.remove(e):this,i=r.find(n),o=r.content.slice();return i==-1?o.push(e||n,t):(o[i+1]=t,e&&(o[i]=e)),new Te(o)},remove:function(n){var t=this.find(n);if(t==-1)return this;var e=this.content.slice();return e.splice(t,2),new Te(e)},addToStart:function(n,t){return new Te([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new Te(e)},addBefore:function(n,t,e){var r=this.remove(t),i=r.content.slice(),o=r.find(n);return i.splice(o==-1?i.length:o,0,t,e),new Te(i)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return n=Te.from(n),n.size?new Te(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Te.from(n),n.size?new Te(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=Te.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},toObject:function(){var n={};return this.forEach(function(t,e){n[t]=e}),n},get size(){return this.content.length>>1}};Te.from=function(n){if(n instanceof Te)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new Te(t)};function nx(n,t,e){for(let r=0;;r++){if(r==n.childCount||r==t.childCount)return n.childCount==t.childCount?null:e;let i=n.child(r),o=t.child(r);if(i==o){e+=i.nodeSize;continue}if(!i.sameMarkup(o))return e;if(i.isText&&i.text!=o.text){for(let a=0;i.text[a]==o.text[a];a++)e++;return e}if(i.content.size||o.content.size){let a=nx(i.content,o.content,e+1);if(a!=null)return a}e+=i.nodeSize}}function rx(n,t,e,r){for(let i=n.childCount,o=t.childCount;;){if(i==0||o==0)return i==o?null:{a:e,b:r};let a=n.child(--i),c=t.child(--o),f=a.nodeSize;if(a==c){e-=f,r-=f;continue}if(!a.sameMarkup(c))return{a:e,b:r};if(a.isText&&a.text!=c.text){let h=0,p=Math.min(a.text.length,c.text.length);for(;h<p&&a.text[a.text.length-h-1]==c.text[c.text.length-h-1];)h++,e--,r--;return{a:e,b:r}}if(a.content.size||c.content.size){let h=rx(a.content,c.content,e-1,r-1);if(h)return h}e-=f,r-=f}}let K=class je{constructor(t,e){if(this.content=t,this.size=e||0,e==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,e,r,i=0,o){for(let a=0,c=0;c<e;a++){let f=this.content[a],h=c+f.nodeSize;if(h>t&&r(f,i+c,o||null,a)!==!1&&f.content.size){let p=c+1;f.nodesBetween(Math.max(0,t-p),Math.min(f.content.size,e-p),r,i+p)}c=h}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,r,i){let o="",a=!0;return this.nodesBetween(t,e,(c,f)=>{let h=c.isText?c.text.slice(Math.max(t,f)-f,e-f):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&h||c.isTextblock)&&r&&(a?a=!1:o+=r),o+=h},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,r=t.firstChild,i=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(r)&&(i[i.length-1]=e.withText(e.text+r.text),o=1);o<t.content.length;o++)i.push(t.content[o]);return new je(i,this.size+t.size)}cut(t,e=this.size){if(t==0&&e==this.size)return this;let r=[],i=0;if(e>t)for(let o=0,a=0;a<e;o++){let c=this.content[o],f=a+c.nodeSize;f>t&&((a<t||f>e)&&(c.isText?c=c.cut(Math.max(0,t-a),Math.min(c.text.length,e-a)):c=c.cut(Math.max(0,t-a-1),Math.min(c.content.size,e-a-1))),r.push(c),i+=c.nodeSize),a=f}return new je(r,i)}cutByIndex(t,e){return t==e?je.empty:t==0&&e==this.content.length?this:new je(this.content.slice(t,e))}replaceChild(t,e){let r=this.content[t];if(r==e)return this;let i=this.content.slice(),o=this.size+e.nodeSize-r.nodeSize;return i[t]=e,new je(i,o)}addToStart(t){return new je([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new je(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,r=0;e<this.content.length;e++){let i=this.content[e];t(i,r,e),r+=i.nodeSize}}findDiffStart(t,e=0){return nx(this,t,e)}findDiffEnd(t,e=this.size,r=t.size){return rx(this,t,e,r)}findIndex(t){if(t==0)return Vc(0,t);if(t==this.size)return Vc(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let e=0,r=0;;e++){let i=this.child(e),o=r+i.nodeSize;if(o>=t)return o==t?Vc(e+1,o):Vc(e,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return je.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new je(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return je.empty;let e,r=0;for(let i=0;i<t.length;i++){let o=t[i];r+=o.nodeSize,i&&o.isText&&t[i-1].sameMarkup(o)?(e||(e=t.slice(0,i)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new je(e||t,r)}static from(t){if(!t)return je.empty;if(t instanceof je)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new je([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};K.empty=new K([],0);const hp={index:0,offset:0};function Vc(n,t){return hp.index=n,hp.offset=t,hp}function ku(n,t){if(n===t)return!0;if(!(n&&typeof n=="object")||!(t&&typeof t=="object"))return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(!ku(n[r],t[r]))return!1}else{for(let r in n)if(!(r in t)||!ku(n[r],t[r]))return!1;for(let r in t)if(!(r in n))return!1}return!0}let jt=class Fp{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,r=!1;for(let i=0;i<t.length;i++){let o=t[i];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,i));else{if(o.type.excludes(this.type))return t;!r&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,i)),e.push(this),r=!0),e&&e.push(o)}}return e||(e=t.slice()),r||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&ku(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[e.type];if(!r)throw new RangeError(`There is no mark type ${e.type} in this schema`);let i=r.create(e.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(e[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return Fp.none;if(t instanceof Fp)return[t];let e=t.slice();return e.sort((r,i)=>r.type.rank-i.type.rank),e}};jt.none=[];class wu extends Error{}let W=class Zs{constructor(t,e,r){this.content=t,this.openStart=e,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let r=sx(this.content,t+this.openStart,e);return r&&new Zs(r,this.openStart,this.openEnd)}removeBetween(t,e){return new Zs(ix(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return Zs.empty;let r=e.openStart||0,i=e.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Zs(K.fromJSON(t,e.content),r,i)}static maxOpen(t,e=!0){let r=0,i=0;for(let o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)i++;return new Zs(t,r,i)}};W.empty=new W(K.empty,0,0);function ix(n,t,e){let{index:r,offset:i}=n.findIndex(t),o=n.maybeChild(r),{index:a,offset:c}=n.findIndex(e);if(i==t||o.isText){if(c!=e&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(r!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(r,o.copy(ix(o.content,t-i-1,e-i-1)))}function sx(n,t,e,r){let{index:i,offset:o}=n.findIndex(t),a=n.maybeChild(i);if(o==t||a.isText)return r&&!r.canReplace(i,i,e)?null:n.cut(0,t).append(e).append(n.cut(t));let c=sx(a.content,t-o-1,e,a);return c&&n.replaceChild(i,a.copy(c))}function KO(n,t,e){if(e.openStart>n.depth)throw new wu("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new wu("Inconsistent open depths");return ox(n,t,e,0)}function ox(n,t,e,r){let i=n.index(r),o=n.node(r);if(i==t.index(r)&&r<n.depth-e.openStart){let a=ox(n,t,e,r+1);return o.copy(o.content.replaceChild(i,a))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&n.depth==r&&t.depth==r){let a=n.parent,c=a.content;return Ki(a,c.cut(0,n.parentOffset).append(e.content).append(c.cut(t.parentOffset)))}else{let{start:a,end:c}=YO(e,n);return Ki(o,ax(n,a,c,t,r))}else return Ki(o,xu(n,t,r))}function lx(n,t){if(!t.type.compatibleContent(n.type))throw new wu("Cannot join "+t.type.name+" onto "+n.type.name)}function Qp(n,t,e){let r=n.node(e);return lx(r,t.node(e)),r}function Gi(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function Jl(n,t,e,r){let i=(t||n).node(e),o=0,a=t?t.index(e):i.childCount;n&&(o=n.index(e),n.depth>e?o++:n.textOffset&&(Gi(n.nodeAfter,r),o++));for(let c=o;c<a;c++)Gi(i.child(c),r);t&&t.depth==e&&t.textOffset&&Gi(t.nodeBefore,r)}function Ki(n,t){return n.type.checkContent(t),n.copy(t)}function ax(n,t,e,r,i){let o=n.depth>i&&Qp(n,t,i+1),a=r.depth>i&&Qp(e,r,i+1),c=[];return Jl(null,n,i,c),o&&a&&t.index(i)==e.index(i)?(lx(o,a),Gi(Ki(o,ax(n,t,e,r,i+1)),c)):(o&&Gi(Ki(o,xu(n,t,i+1)),c),Jl(t,e,i,c),a&&Gi(Ki(a,xu(e,r,i+1)),c)),Jl(r,null,i,c),new K(c)}function xu(n,t,e){let r=[];if(Jl(null,n,e,r),n.depth>e){let i=Qp(n,t,e+1);Gi(Ki(i,xu(n,t,e+1)),r)}return Jl(t,null,e,r),new K(r)}function YO(n,t){let e=t.depth-n.openStart,r=t.node(e).copy(n.content);for(let i=e-1;i>=0;i--)r=t.node(i).copy(K.from(r));return{start:r.resolveNoCache(n.openStart+e),end:r.resolveNoCache(r.content.size-n.openEnd-e)}}class oa{constructor(t,e,r){this.pos=t,this.path=e,this.parentOffset=r,this.depth=e.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(e);return r?t.child(e).cut(r):i}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):t==0?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let r=this.path[e*3],i=e==0?0:this.path[e*3-1]+1;for(let o=0;o<t;o++)i+=r.child(o).nodeSize;return i}marks(){let t=this.parent,e=this.index();if(t.content.size==0)return jt.none;if(this.textOffset)return t.child(e).marks;let r=t.maybeChild(e-1),i=t.maybeChild(e);if(!r){let c=r;r=i,i=c}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!i||!o[a].isInSet(i.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let r=e.marks,i=t.parent.maybeChild(t.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!i||!r[o].isInSet(i.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!e||e(this.node(r))))return new Su(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let r=[],i=0,o=e;for(let a=t;;){let{index:c,offset:f}=a.content.findIndex(o),h=o-f;if(r.push(a,c,i+f),!h||(a=a.child(c),a.isText))break;o=h-1,i+=f+1}return new oa(e,r,o)}static resolveCached(t,e){let r=p1.get(t);if(r)for(let o=0;o<r.elts.length;o++){let a=r.elts[o];if(a.pos==e)return a}else p1.set(t,r=new FO);let i=r.elts[r.i]=oa.resolve(t,e);return r.i=(r.i+1)%QO,i}}class FO{constructor(){this.elts=[],this.i=0}}const QO=12,p1=new WeakMap;class Su{constructor(t,e,r){this.$from=t,this.$to=e,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const XO=Object.create(null);let ai=class Xp{constructor(t,e,r,i=jt.none){this.type=t,this.attrs=e,this.marks=i,this.content=r||K.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,r,i=0){this.content.nodesBetween(t,e,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,r,i){return this.content.textBetween(t,e,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,r){return this.type==t&&ku(this.attrs,e||t.defaultAttrs||XO)&&jt.sameSet(this.marks,r||jt.none)}copy(t=null){return t==this.content?this:new Xp(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new Xp(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return t==0&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,r=!1){if(t==e)return W.empty;let i=this.resolve(t),o=this.resolve(e),a=r?0:i.sharedDepth(e),c=i.start(a),f=i.node(a).content.cut(i.pos-c,o.pos-c);return new W(f,i.depth-a,o.depth-a)}replace(t,e,r){return KO(this.resolve(t),this.resolve(e),r)}nodeAt(t){for(let e=this;;){let{index:r,offset:i}=e.content.findIndex(t);if(e=e.maybeChild(r),!e)return null;if(i==t||e.isText)return e;t-=i+1}}childAfter(t){let{index:e,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:e,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(e),index:e,offset:r};let i=this.content.child(e-1);return{node:i,index:e-1,offset:r-i.nodeSize}}resolve(t){return oa.resolveCached(this,t)}resolveNoCache(t){return oa.resolve(this,t)}rangeHasMark(t,e,r){let i=!1;return e>t&&this.nodesBetween(t,e,o=>(r.isInSet(o.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),cx(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,r=K.empty,i=0,o=r.childCount){let a=this.contentMatchAt(t).matchFragment(r,i,o),c=a&&a.matchFragment(this.content,e);if(!c||!c.validEnd)return!1;for(let f=i;f<o;f++)if(!this.type.allowsMarks(r.child(f).marks))return!1;return!0}canReplaceWith(t,e,r,i){if(i&&!this.type.allowsMarks(i))return!1;let o=this.contentMatchAt(t).matchType(r),a=o&&o.matchFragment(this.content,e);return a?a.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=jt.none;for(let e=0;e<this.marks.length;e++){let r=this.marks[e];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!jt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let r;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=e.marks.map(t.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(e.text,r)}let i=K.fromJSON(t,e.content),o=t.nodeType(e.type).create(e.attrs,i,r);return o.type.checkAttrs(o.attrs),o}};ai.prototype.text=void 0;class Mu extends ai{constructor(t,e,r,i){if(super(t,e,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):cx(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Mu(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Mu(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return t==0&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function cx(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class Wi{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let r=new ZO(t,e);if(r.next==null)return Wi.empty;let i=ux(r);r.next&&r.err("Unexpected trailing text");let o=sR(iR(i));return oR(o,r),o}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,r=t.childCount){let i=this;for(let o=e;i&&o<r;o++)i=i.matchType(t.child(o).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let r=0;r<t.next.length;r++)if(this.next[e].type==t.next[r].type)return!0;return!1}fillBefore(t,e=!1,r=0){let i=[this];function o(a,c){let f=a.matchFragment(t,r);if(f&&(!e||f.validEnd))return K.from(c.map(h=>h.createAndFill()));for(let h=0;h<a.next.length;h++){let{type:p,next:g}=a.next[h];if(!(p.isText||p.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let y=o(g,c.concat(p));if(y)return y}}return null}return o(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),o=i.match;if(o.matchType(t)){let a=[];for(let c=i;c.type;c=c.via)a.push(c.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:c,next:f}=o.next[a];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in e)&&(!i.type||f.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),e[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function e(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&e(r.next[i].next)}return e(this),t.map((r,i)=>{let o=i+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+t.indexOf(r.next[a].next);return o}).join(`
`)}}Wi.empty=new Wi(!0);class ZO{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function ux(n){let t=[];do t.push(WO(n));while(n.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function WO(n){let t=[];do t.push(tR(n));while(n.next&&n.next!=")"&&n.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function tR(n){let t=rR(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else if(n.eat("{"))t=eR(n,t);else break;return t}function m1(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function eR(n,t){let e=m1(n),r=e;return n.eat(",")&&(n.next!="}"?r=m1(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:r,expr:t}}function nR(n,t){let e=n.nodeTypes,r=e[t];if(r)return[r];let i=[];for(let o in e){let a=e[o];a.isInGroup(t)&&i.push(a)}return i.length==0&&n.err("No node type or group '"+t+"' found"),i}function rR(n){if(n.eat("(")){let t=ux(n);return n.eat(")")||n.err("Missing closing paren"),t}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let t=nR(n,n.next).map(e=>(n.inline==null?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function iR(n){let t=[[]];return i(o(n,0),e()),t;function e(){return t.push([])-1}function r(a,c,f){let h={term:f,to:c};return t[a].push(h),h}function i(a,c){a.forEach(f=>f.to=c)}function o(a,c){if(a.type=="choice")return a.exprs.reduce((f,h)=>f.concat(o(h,c)),[]);if(a.type=="seq")for(let f=0;;f++){let h=o(a.exprs[f],c);if(f==a.exprs.length-1)return h;i(h,c=e())}else if(a.type=="star"){let f=e();return r(c,f),i(o(a.expr,f),f),[r(f)]}else if(a.type=="plus"){let f=e();return i(o(a.expr,c),f),i(o(a.expr,f),f),[r(f)]}else{if(a.type=="opt")return[r(c)].concat(o(a.expr,c));if(a.type=="range"){let f=c;for(let h=0;h<a.min;h++){let p=e();i(o(a.expr,f),p),f=p}if(a.max==-1)i(o(a.expr,f),f);else for(let h=a.min;h<a.max;h++){let p=e();r(f,p),i(o(a.expr,f),p),f=p}return[r(f)]}else{if(a.type=="name")return[r(c,void 0,a.value)];throw new Error("Unknown expr type")}}}}function fx(n,t){return t-n}function g1(n,t){let e=[];return r(t),e.sort(fx);function r(i){let o=n[i];if(o.length==1&&!o[0].term)return r(o[0].to);e.push(i);for(let a=0;a<o.length;a++){let{term:c,to:f}=o[a];!c&&e.indexOf(f)==-1&&r(f)}}}function sR(n){let t=Object.create(null);return e(g1(n,0));function e(r){let i=[];r.forEach(a=>{n[a].forEach(({term:c,to:f})=>{if(!c)return;let h;for(let p=0;p<i.length;p++)i[p][0]==c&&(h=i[p][1]);g1(n,f).forEach(p=>{h||i.push([c,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let o=t[r.join(",")]=new Wi(r.indexOf(n.length-1)>-1);for(let a=0;a<i.length;a++){let c=i[a][1].sort(fx);o.next.push({type:i[a][0],next:t[c.join(",")]||e(c)})}return o}}function oR(n,t){for(let e=0,r=[n];e<r.length;e++){let i=r[e],o=!i.validEnd,a=[];for(let c=0;c<i.next.length;c++){let{type:f,next:h}=i.next[c];a.push(f.name),o&&!(f.isText||f.hasRequiredAttrs())&&(o=!1),r.indexOf(h)==-1&&r.push(h)}o&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function dx(n){let t=Object.create(null);for(let e in n){let r=n[e];if(!r.hasDefault)return null;t[e]=r.default}return t}function hx(n,t){let e=Object.create(null);for(let r in n){let i=t&&t[r];if(i===void 0){let o=n[r];if(o.hasDefault)i=o.default;else throw new RangeError("No value supplied for attribute "+r)}e[r]=i}return e}function px(n,t,e,r){for(let i in t)if(!(i in n))throw new RangeError(`Unsupported attribute ${i} for ${e} of type ${i}`);for(let i in n){let o=n[i];o.validate&&o.validate(t[i])}}function mx(n,t){let e=Object.create(null);if(t)for(let r in t)e[r]=new aR(n,r,t[r]);return e}let y1=class gx{constructor(t,e,r){this.name=t,this.schema=e,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=mx(t,r.attrs),this.defaultAttrs=dx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Wi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:hx(this.attrs,t)}create(t=null,e,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ai(this,this.computeAttrs(t),K.from(e),jt.setFrom(r))}createChecked(t=null,e,r){return e=K.from(e),this.checkContent(e),new ai(this,this.computeAttrs(t),e,jt.setFrom(r))}createAndFill(t=null,e,r){if(t=this.computeAttrs(t),e=K.from(e),e.size){let a=this.contentMatch.fillBefore(e);if(!a)return null;e=a.append(e)}let i=this.contentMatch.matchFragment(e),o=i&&i.fillBefore(K.empty,!0);return o?new ai(this,t,e.append(o),jt.setFrom(r)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){px(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let e;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?e&&e.push(t[r]):e||(e=t.slice(0,r));return e?e.length?e:jt.none:t}static compile(t,e){let r=Object.create(null);t.forEach((o,a)=>r[o]=new gx(o,e,a));let i=e.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function lR(n,t,e){let r=e.split("|");return i=>{let o=i===null?"null":typeof i;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${n}, got ${o}`)}}class aR{constructor(t,e,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?lR(t,e,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class vf{constructor(t,e,r,i){this.name=t,this.rank=e,this.schema=r,this.spec=i,this.attrs=mx(t,i.attrs),this.excluded=null;let o=dx(this.attrs);this.instance=o?new jt(this,o):null}create(t=null){return!t&&this.instance?this.instance:new jt(this,hx(this.attrs,t))}static compile(t,e){let r=Object.create(null),i=0;return t.forEach((o,a)=>r[o]=new vf(o,i++,e,a)),r}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){px(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class yx{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let i in t)e[i]=t[i];e.nodes=Te.from(t.nodes),e.marks=Te.from(t.marks||{}),this.nodes=y1.compile(this.spec.nodes,this),this.marks=vf.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let o=this.nodes[i],a=o.spec.content||"",c=o.spec.marks;if(o.contentMatch=r[a]||(r[a]=Wi.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=c=="_"?null:c?v1(this,c.split(" ")):c==""||!o.inlineContent?[]:null}for(let i in this.marks){let o=this.marks[i],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:v1(this,a.split(" "))}this.nodeFromJSON=i=>ai.fromJSON(this,i),this.markFromJSON=i=>jt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof y1){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(e,r,i)}text(t,e){let r=this.nodes.text;return new Mu(r,r.defaultAttrs,t,jt.setFrom(e))}mark(t,e){return typeof t=="string"&&(t=this.marks[t]),t.create(e)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function v1(n,t){let e=[];for(let r=0;r<t.length;r++){let i=t[r],o=n.marks[i],a=o;if(o)e.push(o);else for(let c in n.marks){let f=n.marks[c];(i=="_"||f.spec.group&&f.spec.group.split(" ").indexOf(i)>-1)&&e.push(a=f)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return e}function cR(n){return n.tag!=null}function uR(n){return n.style!=null}let Gl=class Zp{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let r=this.matchedStyles=[];e.forEach(i=>{if(cR(i))this.tags.push(i);else if(uR(i)){let o=/[^=]*/.exec(i.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let o=t.nodes[i.node];return o.contentMatch.matchType(o)})}parse(t,e={}){let r=new k1(this,e,!1);return r.addAll(t,jt.none,e.from,e.to),r.finish()}parseSlice(t,e={}){let r=new k1(this,e,!0);return r.addAll(t,jt.none,e.from,e.to),W.maxOpen(r.finish())}matchTag(t,e,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let o=this.tags[i];if(hR(t,o.tag)&&(o.namespace===void 0||t.namespaceURI==o.namespace)&&(!o.context||e.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(t);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(t,e,r,i){for(let o=i?this.styles.indexOf(i)+1:0;o<this.styles.length;o++){let a=this.styles[o],c=a.style;if(!(c.indexOf(t)!=0||a.context&&!r.matchesContext(a.context)||c.length>t.length&&(c.charCodeAt(t.length)!=61||c.slice(t.length+1)!=e))){if(a.getAttrs){let f=a.getAttrs(e);if(f===!1)continue;a.attrs=f||void 0}return a}}}static schemaRules(t){let e=[];function r(i){let o=i.priority==null?50:i.priority,a=0;for(;a<e.length;a++){let c=e[a];if((c.priority==null?50:c.priority)<o)break}e.splice(a,0,i)}for(let i in t.marks){let o=t.marks[i].spec.parseDOM;o&&o.forEach(a=>{r(a=w1(a)),a.mark||a.ignore||a.clearMark||(a.mark=i)})}for(let i in t.nodes){let o=t.nodes[i].spec.parseDOM;o&&o.forEach(a=>{r(a=w1(a)),a.node||a.ignore||a.mark||(a.node=i)})}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Zp(t,Zp.schemaRules(t)))}};const vx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},fR={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bx={ol:!0,ul:!0},la=1,Wp=2,Kl=4;function b1(n,t,e){return t!=null?(t?la:0)|(t==="full"?Wp:0):n&&n.whitespace=="pre"?la|Wp:e&~Kl}class Pc{constructor(t,e,r,i,o,a){this.type=t,this.attrs=e,this.marks=r,this.solid=i,this.options=a,this.content=[],this.activeMarks=jt.none,this.match=o||(a&Kl?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(K.from(t));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&la)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-i[0].length))}}let e=K.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(K.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!vx.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class k1{constructor(t,e,r){this.parser=t,this.options=e,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=e.topNode,o,a=b1(null,e.preserveWhitespace,0)|(r?Kl:0);i?o=new Pc(i.type,i.attrs,jt.none,!0,e.topMatch||i.type.contentMatch,a):r?o=new Pc(null,null,jt.none,!0,null,a):o=new Pc(t.schema.topNodeType,null,jt.none,!0,null,a),this.nodes=[o],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,e){t.nodeType==3?this.addTextNode(t,e):t.nodeType==1&&this.addElement(t,e)}addTextNode(t,e){let r=t.nodeValue,i=this.top,o=i.options&Wp?"full":this.localPreserveWS||(i.options&la)>0,{schema:a}=this.parser;if(o==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let f=0;f<c.length;f++)f&&this.insertNode(a.linebreakReplacement.create(),e,!0),c[f]&&this.insertNode(a.text(c[f]),e,!/\S/.test(c[f]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],f=t.previousSibling;(!c||f&&f.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),e,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,e,r){let i=this.localPreserveWS,o=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let a=t.nodeName.toLowerCase(),c;bx.hasOwnProperty(a)&&this.parser.normalizeLists&&dR(t);let f=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(c=this.parser.matchTag(t,this,r));t:if(f?f.ignore:fR.hasOwnProperty(a))this.findInside(t),this.ignoreFallback(t,e);else if(!f||f.skip||f.closeParent){f&&f.closeParent?this.open=Math.max(0,this.open-1):f&&f.skip.nodeType&&(t=f.skip);let h,p=this.needsBlock;if(vx.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),h=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,e);break t}let g=f&&f.skip?e:this.readStyles(t,e);g&&this.addAll(t,g),h&&this.sync(o),this.needsBlock=p}else{let h=this.readStyles(t,e);h&&this.addElementByRule(t,f,h,f.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(t,e){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),e)}ignoreFallback(t,e){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e,!0)}readStyles(t,e){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let o=this.parser.matchedStyles[i],a=r.getPropertyValue(o);if(a)for(let c=void 0;;){let f=this.parser.matchStyle(o,a,this,c);if(!f)break;if(f.ignore)return null;if(f.clearMark?e=e.filter(h=>!f.clearMark(h)):e=e.concat(this.parser.schema.marks[f.mark].create(f.attrs)),f.consuming===!1)c=f;else break}}return e}addElementByRule(t,e,r,i){let o,a;if(e.node)if(a=this.parser.schema.nodes[e.node],a.isLeaf)this.insertNode(a.create(e.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let f=this.enter(a,e.attrs||null,r,e.preserveWhitespace);f&&(o=!0,r=f)}else{let f=this.parser.schema.marks[e.mark];r=r.concat(f.create(e.attrs))}let c=this.top;if(a&&a.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(f=>this.insertNode(f,r,!1));else{let f=t;typeof e.contentElement=="string"?f=t.querySelector(e.contentElement):typeof e.contentElement=="function"?f=e.contentElement(t):e.contentElement&&(f=e.contentElement),this.findAround(t,f,!0),this.addAll(f,r),this.findAround(t,f,!1)}o&&this.sync(c)&&this.open--}addAll(t,e,r,i){let o=r||0;for(let a=r?t.childNodes[r]:t.firstChild,c=i==null?null:t.childNodes[i];a!=c;a=a.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(a,e);this.findAtPoint(t,o)}findPlace(t,e,r){let i,o;for(let a=this.open,c=0;a>=0;a--){let f=this.nodes[a],h=f.findWrapping(t);if(h&&(!i||i.length>h.length+c)&&(i=h,o=f,!h.length))break;if(f.solid){if(r)break;c+=2}}if(!i)return null;this.sync(o);for(let a=0;a<i.length;a++)e=this.enterInner(i[a],null,e,!1);return e}insertNode(t,e,r){if(t.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(e=this.enterInner(o,null,e))}let i=this.findPlace(t,e,r);if(i){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(t.type));let a=jt.none;for(let c of i.concat(t.marks))(o.type?o.type.allowsMarkType(c.type):x1(c.type,t.type))&&(a=c.addToSet(a));return o.content.push(t.mark(a)),!0}return!1}enter(t,e,r,i){let o=this.findPlace(t.create(e),r,!1);return o&&(o=this.enterInner(t,e,r,!0,i)),o}enterInner(t,e,r,i=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(t);let c=b1(t,o,a.options);a.options&Kl&&a.content.length==0&&(c|=Kl);let f=jt.none;return r=r.filter(h=>(a.type?a.type.allowsMarkType(h.type):x1(h.type,t))?(f=h.addToSet(f),!1):!0),this.nodes.push(new Pc(t,e,f,i,null,c)),this.open++,r}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let e=this.open;e>=0;e--){if(this.nodes[e]==t)return this.open=e,!0;this.localPreserveWS&&(this.nodes[e].options|=la)}return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let r=this.nodes[e].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==e&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&t.nodeType==1&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,r){if(t!=e&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&e.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),a=(c,f)=>{for(;c>=0;c--){let h=e[c];if(h==""){if(c==e.length-1||c==0)continue;for(;f>=o;f--)if(a(c-1,f))return!0;return!1}else{let p=f>0||f==0&&i?this.nodes[f].type:r&&f>=o?r.node(f-o).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;f--}}return!0};return a(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let e in this.parser.schema.nodes){let r=this.parser.schema.nodes[e];if(r.isTextblock&&r.defaultAttrs)return r}}}function dR(n){for(let t=n.firstChild,e=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&bx.hasOwnProperty(r)&&e?(e.appendChild(t),t=e):r=="li"?e=t:r&&(e=null)}}function hR(n,t){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,t)}function w1(n){let t={};for(let e in n)t[e]=n[e];return t}function x1(n,t){let e=t.schema.nodes;for(let r in e){let i=e[r];if(!i.allowsMarkType(n))continue;let o=[],a=c=>{o.push(c);for(let f=0;f<c.edgeCount;f++){let{type:h,next:p}=c.edge(f);if(h==t||o.indexOf(p)<0&&a(p))return!0}};if(a(i.contentMatch))return!0}}class as{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},r){r||(r=pp(e).createDocumentFragment());let i=r,o=[];return t.forEach(a=>{if(o.length||a.marks.length){let c=0,f=0;for(;c<o.length&&f<a.marks.length;){let h=a.marks[f];if(!this.marks[h.type.name]){f++;continue}if(!h.eq(o[c][0])||h.type.spec.spanning===!1)break;c++,f++}for(;c<o.length;)i=o.pop()[1];for(;f<a.marks.length;){let h=a.marks[f++],p=this.serializeMark(h,a.isInline,e);p&&(o.push([h,i]),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(this.serializeNodeInner(a,e))}),r}serializeNodeInner(t,e){let{dom:r,contentDOM:i}=su(pp(e),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,i)}return r}serializeNode(t,e={}){let r=this.serializeNodeInner(t,e);for(let i=t.marks.length-1;i>=0;i--){let o=this.serializeMark(t.marks[i],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(t,e,r={}){let i=this.marks[t.type.name];return i&&su(pp(r),i(t,e),null,t.attrs)}static renderSpec(t,e,r=null,i){return su(t,e,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new as(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=S1(t.nodes);return e.text||(e.text=r=>r.text),e}static marksFromSchema(t){return S1(t.marks)}}function S1(n){let t={};for(let e in n){let r=n[e].spec.toDOM;r&&(t[e]=r)}return t}function pp(n){return n.document||window.document}const M1=new WeakMap;function pR(n){let t=M1.get(n);return t===void 0&&M1.set(n,t=mR(n)),t}function mR(n){let t=null;function e(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)e(r[i]);else for(let i in r)e(r[i])}return e(n),t}function su(n,t,e,r){if(typeof t=="string")return{dom:n.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],o;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=pR(r))&&o.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=i.indexOf(" ");a>0&&(e=i.slice(0,a),i=i.slice(a+1));let c,f=e?n.createElementNS(e,i):n.createElement(i),h=t[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let y=g.indexOf(" ");y>0?f.setAttributeNS(g.slice(0,y),g.slice(y+1),h[g]):g=="style"&&f.style?f.style.cssText=h[g]:f.setAttribute(g,h[g])}}for(let g=p;g<t.length;g++){let y=t[g];if(y===0){if(g<t.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:f,contentDOM:f}}else{let{dom:b,contentDOM:k}=su(n,y,e,r);if(f.appendChild(b),k){if(c)throw new RangeError("Multiple content holes");c=k}}}return{dom:f,contentDOM:c}}const kx=65535,wx=Math.pow(2,16);function gR(n,t){return n+t*wx}function T1(n){return n&kx}function yR(n){return(n-(n&kx))/wx}const xx=1,Sx=2,ou=4,Mx=8;class tm{constructor(t,e,r){this.pos=t,this.delInfo=e,this.recover=r}get deleted(){return(this.delInfo&Mx)>0}get deletedBefore(){return(this.delInfo&(xx|ou))>0}get deletedAfter(){return(this.delInfo&(Sx|ou))>0}get deletedAcross(){return(this.delInfo&ou)>0}}let ts=class Ws{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&Ws.empty)return Ws.empty}recover(t){let e=0,r=T1(t);if(!this.inverted)for(let i=0;i<r;i++)e+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+e+yR(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,r){let i=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?i:0);if(f>t)break;let h=this.ranges[c+o],p=this.ranges[c+a],g=f+h;if(t<=g){let y=h?t==f?-1:t==g?1:e:e,b=f+i+(y<0?0:p);if(r)return b;let k=t==(e<0?f:g)?null:gR(c/3,t-f),x=t==f?Sx:t==g?xx:ou;return(e<0?t!=f:t!=g)&&(x|=Mx),new tm(b,x,k)}i+=p-h}return r?t+i:new tm(t+i,0,null)}touches(t,e){let r=0,i=T1(e),o=this.inverted?2:1,a=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let f=this.ranges[c]-(this.inverted?r:0);if(f>t)break;let h=this.ranges[c+o],p=f+h;if(t<=p&&c==i*3)return!0;r+=this.ranges[c+a]-h}return!1}forEach(t){let e=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,o=0;i<this.ranges.length;i+=3){let a=this.ranges[i],c=a-(this.inverted?o:0),f=a+(this.inverted?0:o),h=this.ranges[i+e],p=this.ranges[i+r];t(c,c+h,f,f+p),o+=p-h}}invert(){return new Ws(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Ws.empty:new Ws(t<0?[0,-t,0]:[0,0,t])}};ts.empty=new ts([]);class aa{constructor(t,e,r=0,i=t?t.length:0){this.mirror=e,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||e)}get maps(){return this._maps}slice(t=0,e=this.maps.length){return new aa(this._maps,this.mirror,t,e)}appendMap(t,e){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),e!=null&&this.setMirror(this._maps.length-1,e)}appendMapping(t){for(let e=0,r=this._maps.length;e<t._maps.length;e++){let i=t.getMirror(e);this.appendMap(t._maps[e],i!=null&&i<e?r+i:void 0)}}getMirror(t){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,r=this._maps.length+t._maps.length;e>=0;e--){let i=t.getMirror(e);this.appendMap(t._maps[e].invert(),i!=null&&i>e?r-i-1:void 0)}}invert(){let t=new aa;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,r){let i=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],c=a.mapResult(t,e);if(c.recover!=null){let f=this.getMirror(o);if(f!=null&&f>o&&f<this.to){o=f,t=this._maps[f].recover(c.recover);continue}}i|=c.delInfo,t=c.pos}return r?t:new tm(t,i,null)}}const mp=Object.create(null);let He=class{getMap(){return ts.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=mp[e.stepType];if(!r)throw new RangeError(`No step type ${e.stepType} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in mp)throw new RangeError("Duplicate use of step JSON ID "+t);return mp[t]=e,e.prototype.jsonID=t,e}},Ie=class Rl{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new Rl(t,null)}static fail(t){return new Rl(null,t)}static fromReplace(t,e,r,i){try{return Rl.ok(t.replace(e,r,i))}catch(o){if(o instanceof wu)return Rl.fail(o.message);throw o}}};function Im(n,t,e){let r=[];for(let i=0;i<n.childCount;i++){let o=n.child(i);o.content.size&&(o=o.copy(Im(o.content,t,o))),o.isInline&&(o=t(o,e,i)),r.push(o)}return K.fromArray(r)}let _m=class Nl extends He{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),o=new W(Im(e.content,(a,c)=>!a.isAtom||!c.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),i),e.openStart,e.openEnd);return Ie.fromReplace(t,this.from,this.to,o)}invert(){return new Hn(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new Nl(e.pos,r.pos,this.mark)}merge(t){return t instanceof Nl&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Nl(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Nl(e.from,e.to,t.markFromJSON(e.mark))}};He.jsonID("addMark",_m);class Hn extends He{constructor(t,e,r){super(),this.from=t,this.to=e,this.mark=r}apply(t){let e=t.slice(this.from,this.to),r=new W(Im(e.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),e.openStart,e.openEnd);return Ie.fromReplace(t,this.from,this.to,r)}invert(){return new _m(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deleted&&r.deleted||e.pos>=r.pos?null:new Hn(e.pos,r.pos,this.mark)}merge(t){return t instanceof Hn&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Hn(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Hn(e.from,e.to,t.markFromJSON(e.mark))}}He.jsonID("removeMark",Hn);let Um=class zl extends He{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Ie.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return Ie.fromReplace(t,this.pos,this.pos+1,new W(K.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let r=this.mark.addToSet(e.marks);if(r.length==e.marks.length){for(let i=0;i<e.marks.length;i++)if(!e.marks[i].isInSet(r))return new zl(this.pos,e.marks[i]);return new zl(this.pos,this.mark)}}return new es(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new zl(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new zl(e.pos,t.markFromJSON(e.mark))}};He.jsonID("addNodeMark",Um);class es extends He{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return Ie.fail("No node at mark step's position");let r=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return Ie.fromReplace(t,this.pos,this.pos+1,new W(K.from(r),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new Um(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new es(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new es(e.pos,t.markFromJSON(e.mark))}}He.jsonID("removeNodeMark",es);let jn=class Li extends He{constructor(t,e,r,i=!1){super(),this.from=t,this.to=e,this.slice=r,this.structure=i}apply(t){return this.structure&&em(t,this.from,this.to)?Ie.fail("Structure replace would overwrite content"):Ie.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new ts([this.from,this.to-this.from,this.slice.size])}invert(t){return new Li(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return e.deletedAcross&&r.deletedAcross?null:new Li(e.pos,Math.max(e.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Li)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let e=this.slice.size+t.slice.size==0?W.empty:new W(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Li(this.from,this.to+(t.to-t.from),e,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let e=this.slice.size+t.slice.size==0?W.empty:new W(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Li(t.from,this.to,e,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Li(e.from,e.to,W.fromJSON(t,e.slice),!!e.structure)}};He.jsonID("replace",jn);let We=class lu extends He{constructor(t,e,r,i,o,a,c=!1){super(),this.from=t,this.to=e,this.gapFrom=r,this.gapTo=i,this.slice=o,this.insert=a,this.structure=c}apply(t){if(this.structure&&(em(t,this.from,this.gapFrom)||em(t,this.gapTo,this.to)))return Ie.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Ie.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,e.content);return r?Ie.fromReplace(t,this.from,this.to,r):Ie.fail("Content does not fit in gap")}getMap(){return new ts([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new lu(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return e.deletedAcross&&r.deletedAcross||i<e.pos||o>r.pos?null:new lu(e.pos,r.pos,i,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new lu(e.from,e.to,e.gapFrom,e.gapTo,W.fromJSON(t,e.slice),e.insert,!!e.structure)}};He.jsonID("replaceAround",We);function em(n,t,e){let r=n.resolve(t),i=e-t,o=r.depth;for(;i>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,i--;if(i>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;i>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,i--}}return!1}function vR(n,t,e,r){let i=[],o=[],a,c;n.doc.nodesBetween(t,e,(f,h,p)=>{if(!f.isInline)return;let g=f.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let y=Math.max(h,t),b=Math.min(h+f.nodeSize,e),k=r.addToSet(g);for(let x=0;x<g.length;x++)g[x].isInSet(k)||(a&&a.to==y&&a.mark.eq(g[x])?a.to=b:i.push(a=new Hn(y,b,g[x])));c&&c.to==y?c.to=b:o.push(c=new _m(y,b,r))}}),i.forEach(f=>n.step(f)),o.forEach(f=>n.step(f))}function bR(n,t,e,r){let i=[],o=0;n.doc.nodesBetween(t,e,(a,c)=>{if(!a.isInline)return;o++;let f=null;if(r instanceof vf){let h=a.marks,p;for(;p=r.isInSet(h);)(f||(f=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(a.marks)&&(f=[r]):f=a.marks;if(f&&f.length){let h=Math.min(c+a.nodeSize,e);for(let p=0;p<f.length;p++){let g=f[p],y;for(let b=0;b<i.length;b++){let k=i[b];k.step==o-1&&g.eq(i[b].style)&&(y=k)}y?(y.to=h,y.step=o):i.push({style:g,from:Math.max(c,t),to:h,step:o})}}}),i.forEach(a=>n.step(new Hn(a.from,a.to,a.style)))}function qm(n,t,e,r=e.contentMatch,i=!0){let o=n.doc.nodeAt(t),a=[],c=t+1;for(let f=0;f<o.childCount;f++){let h=o.child(f),p=c+h.nodeSize,g=r.matchType(h.type);if(!g)a.push(new jn(c,p,W.empty));else{r=g;for(let y=0;y<h.marks.length;y++)e.allowsMarkType(h.marks[y].type)||n.step(new Hn(c,p,h.marks[y]));if(i&&h.isText&&e.whitespace!="pre"){let y,b=/\r?\n|\r/g,k;for(;y=b.exec(h.text);)k||(k=new W(K.from(e.schema.text(" ",e.allowedMarks(h.marks))),0,0)),a.push(new jn(c+y.index,c+y.index+y[0].length,k))}}c=p}if(!r.validEnd){let f=r.fillBefore(K.empty,!0);n.replace(c,c,new W(f,0,0))}for(let f=a.length-1;f>=0;f--)n.step(a[f])}function kR(n,t,e){return(t==0||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function xo(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let e=n.depth,r=0,i=0;;--e){let o=n.$from.node(e),a=n.$from.index(e)+r,c=n.$to.indexAfter(e)-i;if(e<n.depth&&o.canReplace(a,c,t))return e;if(e==0||o.type.spec.isolating||!kR(o,a,c))break;a&&(r=1),c<o.childCount&&(i=1)}return null}function wR(n,t,e){let{$from:r,$to:i,depth:o}=t,a=r.before(o+1),c=i.after(o+1),f=a,h=c,p=K.empty,g=0;for(let k=o,x=!1;k>e;k--)x||r.index(k)>0?(x=!0,p=K.from(r.node(k).copy(p)),g++):f--;let y=K.empty,b=0;for(let k=o,x=!1;k>e;k--)x||i.after(k+1)<i.end(k)?(x=!0,y=K.from(i.node(k).copy(y)),b++):h++;n.step(new We(f,h,a,c,new W(p.append(y),g,b),p.size-g,!0))}function Vm(n,t,e=null,r=n){let i=xR(n,t),o=i&&SR(r,t);return o?i.map(E1).concat({type:t,attrs:e}).concat(o.map(E1)):null}function E1(n){return{type:n,attrs:null}}function xR(n,t){let{parent:e,startIndex:r,endIndex:i}=n,o=e.contentMatchAt(r).findWrapping(t);if(!o)return null;let a=o.length?o[0]:t;return e.canReplaceWith(r,i,a)?o:null}function SR(n,t){let{parent:e,startIndex:r,endIndex:i}=n,o=e.child(r),a=t.contentMatch.findWrapping(o.type);if(!a)return null;let c=(a.length?a[a.length-1]:t).contentMatch;for(let f=r;c&&f<i;f++)c=c.matchType(e.child(f).type);return!c||!c.validEnd?null:a}function MR(n,t,e){let r=K.empty;for(let a=e.length-1;a>=0;a--){if(r.size){let c=e[a].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=K.from(e[a].type.create(e[a].attrs,r))}let i=t.start,o=t.end;n.step(new We(i,o,i,o,new W(r,0,0),e.length,!0))}function TR(n,t,e,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=n.steps.length;n.doc.nodesBetween(t,e,(a,c)=>{let f=typeof i=="function"?i(a):i;if(a.isTextblock&&!a.hasMarkup(r,f)&&ER(n.doc,n.mapping.slice(o).map(c),r)){let h=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",k=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!k?h=!1:!b&&k&&(h=!0)}h===!1&&Ex(n,a,c,o),qm(n,n.mapping.slice(o).map(c,1),r,void 0,h===null);let p=n.mapping.slice(o),g=p.map(c,1),y=p.map(c+a.nodeSize,1);return n.step(new We(g,y,g+1,y-1,new W(K.from(r.create(f,null,a.marks)),0,0),1,!0)),h===!0&&Tx(n,a,c,o),!1}})}function Tx(n,t,e,r){t.forEach((i,o)=>{if(i.isText){let a,c=/\r?\n|\r/g;for(;a=c.exec(i.text);){let f=n.mapping.slice(r).map(e+1+o+a.index);n.replaceWith(f,f+1,t.type.schema.linebreakReplacement.create())}}})}function Ex(n,t,e,r){t.forEach((i,o)=>{if(i.type==i.type.schema.linebreakReplacement){let a=n.mapping.slice(r).map(e+1+o);n.replaceWith(a,a+1,t.type.schema.text(`
`))}})}function ER(n,t,e){let r=n.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,e)}function CR(n,t,e,r,i){let o=n.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);let a=e.create(r,null,i||o.marks);if(o.isLeaf)return n.replaceWith(t,t+o.nodeSize,a);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);n.step(new We(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new W(K.from(a),0,0),1,!0))}function ao(n,t,e=1,r){let i=n.resolve(t),o=i.depth-e,a=r&&r[r.length-1]||i.parent;if(o<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!a.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let h=i.depth-1,p=e-2;h>o;h--,p--){let g=i.node(h),y=i.index(h);if(g.type.spec.isolating)return!1;let b=g.content.cutByIndex(y,g.childCount),k=r&&r[p+1];k&&(b=b.replaceChild(0,k.type.create(k.attrs)));let x=r&&r[p]||g;if(!g.canReplace(y+1,g.childCount)||!x.type.validContent(b))return!1}let c=i.indexAfter(o),f=r&&r[0];return i.node(o).canReplaceWith(c,c,f?f.type:i.node(o+1).type)}function AR(n,t,e=1,r){let i=n.doc.resolve(t),o=K.empty,a=K.empty;for(let c=i.depth,f=i.depth-e,h=e-1;c>f;c--,h--){o=K.from(i.node(c).copy(o));let p=r&&r[h];a=K.from(p?p.type.create(p.attrs,a):i.node(c).copy(a))}n.step(new jn(t,t,new W(o.append(a),e,e),!0))}function hi(n,t){let e=n.resolve(t),r=e.index();return Cx(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(r,r+1)}function OR(n,t){t.content.size||n.type.compatibleContent(t.type);let e=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let i=0;i<t.childCount;i++){let o=t.child(i),a=o.type==r?n.type.schema.nodes.text:o.type;if(e=e.matchType(a),!e||!n.type.allowsMarks(o.marks))return!1}return e.validEnd}function Cx(n,t){return!!(n&&t&&!n.isLeaf&&OR(n,t))}function bf(n,t,e=-1){let r=n.resolve(t);for(let i=r.depth;;i--){let o,a,c=r.index(i);if(i==r.depth?(o=r.nodeBefore,a=r.nodeAfter):e>0?(o=r.node(i+1),c++,a=r.node(i).maybeChild(c)):(o=r.node(i).maybeChild(c-1),a=r.node(i+1)),o&&!o.isTextblock&&Cx(o,a)&&r.node(i).canReplace(c,c+1))return t;if(i==0)break;t=e<0?r.before(i):r.after(i)}}function RR(n,t,e){let r=null,{linebreakReplacement:i}=n.doc.type.schema,o=n.doc.resolve(t-e),a=o.node().type;if(i&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(i);p&&!g?r=!1:!p&&g&&(r=!0)}let c=n.steps.length;if(r===!1){let p=n.doc.resolve(t+e);Ex(n,p.node(),p.before(),c)}a.inlineContent&&qm(n,t+e-1,a,o.node().contentMatchAt(o.index()),r==null);let f=n.mapping.slice(c),h=f.map(t-e);if(n.step(new jn(h,f.map(t+e,-1),W.empty,!0)),r===!0){let p=n.doc.resolve(h);Tx(n,p.node(),p.before(),n.steps.length)}return n}function NR(n,t,e){let r=n.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),e))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let o=r.index(i);if(r.node(i).canReplaceWith(o,o,e))return r.before(i+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let o=r.indexAfter(i);if(r.node(i).canReplaceWith(o,o,e))return r.after(i+1);if(o<r.node(i).childCount)return null}return null}function Ax(n,t,e){let r=n.resolve(t);if(!e.content.size)return t;let i=e.content;for(let o=0;o<e.openStart;o++)i=i.firstChild.content;for(let o=1;o<=(e.openStart==0&&e.size?2:1);o++)for(let a=r.depth;a>=0;a--){let c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,f=r.index(a)+(c>0?1:0),h=r.node(a),p=!1;if(o==1)p=h.canReplace(f,f,i);else{let g=h.contentMatchAt(f).findWrapping(i.firstChild.type);p=g&&h.canReplaceWith(f,f,g[0])}if(p)return c==0?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function kf(n,t,e=t,r=W.empty){if(t==e&&!r.size)return null;let i=n.resolve(t),o=n.resolve(e);return Ox(i,o,r)?new jn(t,e,r):new zR(i,o,r).fit()}function Ox(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}class zR{constructor(t,e,r){this.$from=t,this.$to=e,this.unplaced=r,this.frontier=[],this.placed=K.empty;for(let i=0;i<=t.depth;i++){let o=t.node(i);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=K.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let o=this.placed,a=r.depth,c=i.depth;for(;a&&c&&o.childCount==1;)o=o.firstChild.content,a--,c--;let f=new W(o,a,c);return t>-1?new We(r.pos,t,this.$to.pos,this.$to.end(),f,e):f.size||r.pos!=this.$to.pos?new jn(r.pos,i.pos,f):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let o=e.firstChild;if(e.childCount>1&&(i=0),o.type.spec.isolating&&i<=r){t=r;break}e=o.content}for(let e=1;e<=2;e++)for(let r=e==1?t:this.unplaced.openStart;r>=0;r--){let i,o=null;r?(o=gp(this.unplaced.content,r-1).firstChild,i=o.content):i=this.unplaced.content;let a=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:f,match:h}=this.frontier[c],p,g=null;if(e==1&&(a?h.matchType(a.type)||(g=h.fillBefore(K.from(a),!1)):o&&f.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:c,parent:o,inject:g};if(e==2&&a&&(p=h.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:c,parent:o,wrap:p};if(o&&h.matchType(o.type))break}}}openMore(){let{content:t,openStart:e,openEnd:r}=this.unplaced,i=gp(t,e);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new W(t,e+1,Math.max(r,i.size+e>=t.size-r?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:r}=this.unplaced,i=gp(t,e);if(i.childCount<=1&&e>0){let o=t.size-e<=e+i.size;this.unplaced=new W(Dl(t,e-1,1),e-1,o?e-1:r)}else this.unplaced=new W(Dl(t,e,1),e,r)}placeNodes({sliceDepth:t,frontierDepth:e,parent:r,inject:i,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let x=0;x<o.length;x++)this.openFrontierNode(o[x]);let a=this.unplaced,c=r?r.content:a.content,f=a.openStart-t,h=0,p=[],{match:g,type:y}=this.frontier[e];if(i){for(let x=0;x<i.childCount;x++)p.push(i.child(x));g=g.matchFragment(i)}let b=c.size+t-(a.content.size-a.openEnd);for(;h<c.childCount;){let x=c.child(h),S=g.matchType(x.type);if(!S)break;h++,(h>1||f==0||x.content.size)&&(g=S,p.push(Rx(x.mark(y.allowedMarks(x.marks)),h==1?f:0,h==c.childCount?b:-1)))}let k=h==c.childCount;k||(b=-1),this.placed=Bl(this.placed,e,K.from(p)),this.frontier[e].match=g,k&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let x=0,S=c;x<b;x++){let T=S.lastChild;this.frontier.push({type:T.type,match:T.contentMatchAt(T.childCount)}),S=T.content}this.unplaced=k?t==0?W.empty:new W(Dl(a.content,t-1,1),t-1,b<0?a.openEnd:t-1):new W(Dl(a.content,t,h),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],e;if(!t.type.isTextblock||!yp(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:r,type:i}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=yp(t,e,i,r,o);if(a){for(let c=e-1;c>=0;c--){let{match:f,type:h}=this.frontier[c],p=yp(t,c,h,f,!0);if(!p||p.childCount)continue t}return{depth:e,fit:a,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Bl(this.placed,e.depth,e.fit)),t=e.move;for(let r=e.depth+1;r<=t.depth;r++){let i=t.node(r),o=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,o)}return t}openFrontierNode(t,e=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Bl(this.placed,this.depth,K.from(t.create(e,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(K.empty,!0);t.childCount&&(this.placed=Bl(this.placed,this.frontier.length,t))}}function Dl(n,t,e){return t==0?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(Dl(n.firstChild.content,t-1,e)))}function Bl(n,t,e){return t==0?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(Bl(n.lastChild.content,t-1,e)))}function gp(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function Rx(n,t,e){if(t<=0)return n;let r=n.content;return t>1&&(r=r.replaceChild(0,Rx(r.firstChild,t-1,r.childCount==1?e-1:0))),t>0&&(r=n.type.contentMatch.fillBefore(r).append(r),e<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(K.empty,!0)))),n.copy(r)}function yp(n,t,e,r,i){let o=n.node(t),a=i?n.indexAfter(t):n.index(t);if(a==o.childCount&&!e.compatibleContent(o.type))return null;let c=r.fillBefore(o.content,!0,a);return c&&!DR(e,o.content,a)?c:null}function DR(n,t,e){for(let r=e;r<t.childCount;r++)if(!n.allowsMarks(t.child(r).marks))return!0;return!1}function BR(n){return n.spec.defining||n.spec.definingForContent}function LR(n,t,e,r){if(!r.size)return n.deleteRange(t,e);let i=n.doc.resolve(t),o=n.doc.resolve(e);if(Ox(i,o,r))return n.step(new jn(t,e,r));let a=zx(i,o);a[a.length-1]==0&&a.pop();let c=-(i.depth+1);a.unshift(c);for(let y=i.depth,b=i.pos-1;y>0;y--,b--){let k=i.node(y).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;a.indexOf(y)>-1?c=y:i.before(y)==b&&a.splice(1,0,-y)}let f=a.indexOf(c),h=[],p=r.openStart;for(let y=r.content,b=0;;b++){let k=y.firstChild;if(h.push(k),b==r.openStart)break;y=k.content}for(let y=p-1;y>=0;y--){let b=h[y],k=BR(b.type);if(k&&!b.sameMarkup(i.node(Math.abs(c)-1)))p=y;else if(k||!b.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let b=(y+p+1)%(r.openStart+1),k=h[b];if(k)for(let x=0;x<a.length;x++){let S=a[(x+f)%a.length],T=!0;S<0&&(T=!1,S=-S);let D=i.node(S-1),H=i.index(S-1);if(D.canReplaceWith(H,H,k.type,k.marks))return n.replace(i.before(S),T?o.after(S):e,new W(Nx(r.content,0,r.openStart,b),b,r.openEnd))}}let g=n.steps.length;for(let y=a.length-1;y>=0&&(n.replace(t,e,r),!(n.steps.length>g));y--){let b=a[y];b<0||(t=i.before(b),e=o.after(b))}}function Nx(n,t,e,r,i){if(t<e){let o=n.firstChild;n=n.replaceChild(0,o.copy(Nx(o.content,t+1,e,r,o)))}if(t>r){let o=i.contentMatchAt(0),a=o.fillBefore(n).append(n);n=a.append(o.matchFragment(a).fillBefore(K.empty,!0))}return n}function HR(n,t,e,r){if(!r.isInline&&t==e&&n.doc.resolve(t).parent.content.size){let i=NR(n.doc,t,r.type);i!=null&&(t=e=i)}n.replaceRange(t,e,new W(K.from(r),0,0))}function $R(n,t,e){let r=n.doc.resolve(t),i=n.doc.resolve(e),o=zx(r,i);for(let a=0;a<o.length;a++){let c=o[a],f=a==o.length-1;if(f&&c==0||r.node(c).type.contentMatch.validEnd)return n.delete(r.start(c),i.end(c));if(c>0&&(f||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return n.delete(r.before(c),i.after(c))}for(let a=1;a<=r.depth&&a<=i.depth;a++)if(t-r.start(a)==r.depth-a&&e>r.end(a)&&i.end(a)-e!=i.depth-a&&r.start(a-1)==i.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),i.index(a-1)))return n.delete(r.before(a),e);n.delete(t,e)}function zx(n,t){let e=[],r=Math.min(n.depth,t.depth);for(let i=r;i>=0;i--){let o=n.start(i);if(o<n.pos-(n.depth-i)||t.end(i)>t.pos+(t.depth-i)||n.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(o==t.start(i)||i==n.depth&&i==t.depth&&n.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==o-1)&&e.push(i)}return e}class co extends He{constructor(t,e,r){super(),this.pos=t,this.attr=e,this.value=r}apply(t){let e=t.nodeAt(this.pos);if(!e)return Ie.fail("No node at attribute step's position");let r=Object.create(null);for(let o in e.attrs)r[o]=e.attrs[o];r[this.attr]=this.value;let i=e.type.create(r,null,e.marks);return Ie.fromReplace(t,this.pos,this.pos+1,new W(K.from(i),0,e.isLeaf?0:1))}getMap(){return ts.empty}invert(t){return new co(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new co(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new co(e.pos,e.attr,e.value)}}He.jsonID("attr",co);class ca extends He{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let i in t.attrs)e[i]=t.attrs[i];e[this.attr]=this.value;let r=t.type.create(e,t.content,t.marks);return Ie.ok(r)}getMap(){return ts.empty}invert(t){return new ca(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new ca(e.attr,e.value)}}He.jsonID("docAttr",ca);let mo=class extends Error{};mo=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e};mo.prototype=Object.create(Error.prototype);mo.prototype.constructor=mo;mo.prototype.name="TransformError";class Dx{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new aa}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new mo(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,r=W.empty){let i=kf(this.doc,t,e,r);return i&&this.step(i),this}replaceWith(t,e,r){return this.replace(t,e,new W(K.from(r),0,0))}delete(t,e){return this.replace(t,e,W.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,r){return LR(this,t,e,r),this}replaceRangeWith(t,e,r){return HR(this,t,e,r),this}deleteRange(t,e){return $R(this,t,e),this}lift(t,e){return wR(this,t,e),this}join(t,e=1){return RR(this,t,e),this}wrap(t,e){return MR(this,t,e),this}setBlockType(t,e=t,r,i=null){return TR(this,t,e,r,i),this}setNodeMarkup(t,e,r=null,i){return CR(this,t,e,r,i),this}setNodeAttribute(t,e,r){return this.step(new co(t,e,r)),this}setDocAttribute(t,e){return this.step(new ca(t,e)),this}addNodeMark(t,e){return this.step(new Um(t,e)),this}removeNodeMark(t,e){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(e instanceof jt)e.isInSet(r.marks)&&this.step(new es(t,e));else{let i=r.marks,o,a=[];for(;o=e.isInSet(i);)a.push(new es(t,o)),i=o.removeFromSet(i);for(let c=a.length-1;c>=0;c--)this.step(a[c])}return this}split(t,e=1,r){return AR(this,t,e,r),this}addMark(t,e,r){return vR(this,t,e,r),this}removeMark(t,e,r){return bR(this,t,e,r),this}clearIncompatible(t,e,r){return qm(this,t,e,r),this}}const vp=Object.create(null);let ut=class{constructor(t,e,r){this.$anchor=t,this.$head=e,this.ranges=r||[new jR(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=W.empty){let r=e.content.lastChild,i=null;for(let c=0;c<e.openEnd;c++)i=r,r=r.lastChild;let o=t.steps.length,a=this.ranges;for(let c=0;c<a.length;c++){let{$from:f,$to:h}=a[c],p=t.mapping.slice(o);t.replaceRange(p.map(f.pos),p.map(h.pos),c?W.empty:e),c==0&&O1(t,o,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let r=t.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:a,$to:c}=i[o],f=t.mapping.slice(r),h=f.map(a.pos),p=f.map(c.pos);o?t.deleteRange(h,p):(t.replaceRangeWith(h,p,e),O1(t,r,e.isInline?-1:1))}}static findFrom(t,e,r=!1){let i=t.parent.inlineContent?new ft(t):to(t.node(0),t.parent,t.pos,t.index(),e,r);if(i)return i;for(let o=t.depth-1;o>=0;o--){let a=e<0?to(t.node(0),t.node(o),t.before(o+1),t.index(o),e,r):to(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,r);if(a)return a}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new wr(t.node(0))}static atStart(t){return to(t,t,0,0,1)||new wr(t)}static atEnd(t){return to(t,t,t.content.size,t.childCount,-1)||new wr(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=vp[e.type];if(!r)throw new RangeError(`No selection type ${e.type} defined`);return r.fromJSON(t,e)}static jsonID(t,e){if(t in vp)throw new RangeError("Duplicate use of selection JSON ID "+t);return vp[t]=e,e.prototype.jsonID=t,e}getBookmark(){return ft.between(this.$anchor,this.$head).getBookmark()}};ut.prototype.visible=!0;class jR{constructor(t,e){this.$from=t,this.$to=e}}let C1=!1;function A1(n){!C1&&!n.parent.inlineContent&&(C1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}let ft=class Ll extends ut{constructor(t,e=t){A1(t),A1(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let r=t.resolve(e.map(this.head));if(!r.parent.inlineContent)return ut.near(r);let i=t.resolve(e.map(this.anchor));return new Ll(i.parent.inlineContent?i:r,r)}replace(t,e=W.empty){if(super.replace(t,e),e==W.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ll&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new wf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ll(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,r=e){let i=t.resolve(e);return new this(i,r==e?i:t.resolve(r))}static between(t,e,r){let i=t.pos-e.pos;if((!r||i)&&(r=i>=0?1:-1),!e.parent.inlineContent){let o=ut.findFrom(e,r,!0)||ut.findFrom(e,-r,!0);if(o)e=o.$head;else return ut.near(e,r)}return t.parent.inlineContent||(i==0?t=e:(t=(ut.findFrom(t,-r,!0)||ut.findFrom(t,r,!0)).$anchor,t.pos<e.pos!=i<0&&(t=e))),new Ll(t,e)}};ut.jsonID("text",ft);class wf{constructor(t,e){this.anchor=t,this.head=e}map(t){return new wf(t.map(this.anchor),t.map(this.head))}resolve(t){return ft.between(t.resolve(this.anchor),t.resolve(this.head))}}let ct=class Hl extends ut{constructor(t){let e=t.nodeAfter,r=t.node(0).resolve(t.pos+e.nodeSize);super(t,r),this.node=e}map(t,e){let{deleted:r,pos:i}=e.mapResult(this.anchor),o=t.resolve(i);return r?ut.near(o):new Hl(o)}content(){return new W(K.from(this.node),0,0)}eq(t){return t instanceof Hl&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Pm(this.anchor)}static fromJSON(t,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Hl(t.resolve(e.anchor))}static create(t,e){return new Hl(t.resolve(e))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}};ct.prototype.visible=!1;ut.jsonID("node",ct);class Pm{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:r}=t.mapResult(this.anchor);return e?new wf(r,r):new Pm(r)}resolve(t){let e=t.resolve(this.anchor),r=e.nodeAfter;return r&&ct.isSelectable(r)?new ct(e):ut.near(e)}}let wr=class au extends ut{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=W.empty){if(e==W.empty){t.delete(0,t.doc.content.size);let r=ut.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new au(t)}map(t){return new au(t)}eq(t){return t instanceof au}getBookmark(){return IR}};ut.jsonID("all",wr);const IR={map(){return this},resolve(n){return new wr(n)}};function to(n,t,e,r,i,o=!1){if(t.inlineContent)return ft.create(n,e);for(let a=r-(i>0?0:1);i>0?a<t.childCount:a>=0;a+=i){let c=t.child(a);if(c.isAtom){if(!o&&ct.isSelectable(c))return ct.create(n,e-(i<0?c.nodeSize:0))}else{let f=to(n,c,e+i,i<0?c.childCount:0,i,o);if(f)return f}e+=c.nodeSize*i}return null}function O1(n,t,e){let r=n.steps.length-1;if(r<t)return;let i=n.steps[r];if(!(i instanceof jn||i instanceof We))return;let o=n.mapping.maps[r],a;o.forEach((c,f,h,p)=>{a==null&&(a=p)}),n.setSelection(ut.near(n.doc.resolve(a),e))}const R1=1,Jc=2,N1=4;class _R extends Dx{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|R1)&~Jc,this.storedMarks=null,this}get selectionSet(){return(this.updated&R1)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Jc,this}ensureMarks(t){return jt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Jc)>0}addStep(t,e){super.addStep(t,e),this.updated=this.updated&~Jc,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let r=this.selection;return e&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||jt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,r){let i=this.doc.type.schema;if(e==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=e),r=r??e,!t)return this.deleteRange(e,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(e);o=r==e?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(e,r,i.text(t,o)),this.selection.empty||this.setSelection(ut.near(this.selection.$to)),this}}setMeta(t,e){return this.meta[typeof t=="string"?t:t.key]=e,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=N1,this}get scrolledIntoView(){return(this.updated&N1)>0}}function z1(n,t){return!t||!n?n:n.bind(t)}class $l{constructor(t,e,r){this.name=t,this.init=z1(e.init,r),this.apply=z1(e.apply,r)}}const UR=[new $l("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new $l("selection",{init(n,t){return n.selection||ut.atStart(t.doc)},apply(n){return n.selection}}),new $l("storedMarks",{init(n){return n.storedMarks||null},apply(n,t,e,r){return r.selection.$cursor?n.storedMarks:null}}),new $l("scrollToSelection",{init(){return 0},apply(n,t){return n.scrolledIntoView?t+1:t}})];class bp{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=UR.slice(),e&&e.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new $l(r.key,r.spec.state,r))})}}class oo{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=e){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],r=this.applyInner(t),i=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let c=this.config.plugins[a];if(c.spec.appendTransaction){let f=i?i[a].n:0,h=i?i[a].state:this,p=f<e.length&&c.spec.appendTransaction.call(c,f?e.slice(f):e,h,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",t),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<a?{state:r,n:e.length}:{state:this,n:0})}e.push(p),r=r.applyInner(p),o=!0}i&&(i[a]={state:r,n:e.length})}}if(!o)return{state:r,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new oo(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let o=r[i];e[o.name]=o.apply(t,this[o.name],this,e)}return e}get tr(){return new _R(this)}static create(t){let e=new bp(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new oo(e);for(let i=0;i<e.fields.length;i++)r[e.fields[i].name]=e.fields[i].init(t,r);return r}reconfigure(t){let e=new bp(this.schema,t.plugins),r=e.fields,i=new oo(e);for(let o=0;o<r.length;o++){let a=r[o].name;i[a]=this.hasOwnProperty(a)?this[a]:r[o].init(t,i)}return i}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],o=i.spec.state;o&&o.toJSON&&(e[r]=o.toJSON.call(i,this[i.key]))}return e}static fromJSON(t,e,r){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new bp(t.schema,t.plugins),o=new oo(i);return i.fields.forEach(a=>{if(a.name=="doc")o.doc=ai.fromJSON(t.schema,e.doc);else if(a.name=="selection")o.selection=ut.fromJSON(o.doc,e.selection);else if(a.name=="storedMarks")e.storedMarks&&(o.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let c in r){let f=r[c],h=f.spec.state;if(f.key==a.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(e,c)){o[a.name]=h.fromJSON.call(f,t,e[c],o);return}}o[a.name]=a.init(t,o)}}),o}}function Bx(n,t,e){for(let r in n){let i=n[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=Bx(i,t,{})),e[r]=i}return e}let Et=class{constructor(t){this.spec=t,this.props={},t.props&&Bx(t.props,this,this.props),this.key=t.key?t.key.key:Lx("plugin")}getState(t){return t[this.key]}};const kp=Object.create(null);function Lx(n){return n in kp?n+"$"+ ++kp[n]:(kp[n]=0,n+"$")}let It=class{constructor(t="key"){this.key=Lx(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}};const qR=(n,t)=>n.selection.empty?!1:(t&&t(n.tr.deleteSelection().scrollIntoView()),!0);function Hx(n,t){let{$cursor:e}=n.selection;return!e||e.parentOffset>0?null:e}const VR=(n,t,e)=>{let r=Hx(n);if(!r)return!1;let i=Jm(r);if(!i){let a=r.blockRange(),c=a&&xo(a);return c==null?!1:(t&&t(n.tr.lift(a,c).scrollIntoView()),!0)}let o=i.nodeBefore;if(_x(n,i,t,-1))return!0;if(r.parent.content.size==0&&(go(o,"end")||ct.isSelectable(o)))for(let a=r.depth;;a--){let c=kf(n.doc,r.before(a),r.after(a),W.empty);if(c&&c.slice.size<c.to-c.from){if(t){let f=n.tr.step(c);f.setSelection(go(o,"end")?ut.findFrom(f.doc.resolve(f.mapping.map(i.pos,-1)),-1):ct.create(f.doc,i.pos-o.nodeSize)),t(f.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return o.isAtom&&i.depth==r.depth-1?(t&&t(n.tr.delete(i.pos-o.nodeSize,i.pos).scrollIntoView()),!0):!1},PR=(n,t,e)=>{let r=Hx(n);if(!r)return!1;let i=Jm(r);return i?$x(n,i,t):!1},JR=(n,t,e)=>{let r=jx(n);if(!r)return!1;let i=Gm(r);return i?$x(n,i,t):!1};function $x(n,t,e){let r=t.nodeBefore,i=r,o=t.pos-1;for(;!i.isTextblock;o--){if(i.type.spec.isolating)return!1;let p=i.lastChild;if(!p)return!1;i=p}let a=t.nodeAfter,c=a,f=t.pos+1;for(;!c.isTextblock;f++){if(c.type.spec.isolating)return!1;let p=c.firstChild;if(!p)return!1;c=p}let h=kf(n.doc,o,f,W.empty);if(!h||h.from!=o||h instanceof jn&&h.slice.size>=f-o)return!1;if(e){let p=n.tr.step(h);p.setSelection(ft.create(p.doc,o)),e(p.scrollIntoView())}return!0}function go(n,t,e=!1){for(let r=n;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(e&&r.childCount!=1)return!1}return!1}const GR=(n,t,e)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(r.parentOffset>0)return!1;o=Jm(r)}let a=o&&o.nodeBefore;return!a||!ct.isSelectable(a)?!1:(t&&t(n.tr.setSelection(ct.create(n.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function Jm(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function jx(n,t){let{$cursor:e}=n.selection;return!e||e.parentOffset<e.parent.content.size?null:e}const KR=(n,t,e)=>{let r=jx(n);if(!r)return!1;let i=Gm(r);if(!i)return!1;let o=i.nodeAfter;if(_x(n,i,t,1))return!0;if(r.parent.content.size==0&&(go(o,"start")||ct.isSelectable(o))){let a=kf(n.doc,r.before(),r.after(),W.empty);if(a&&a.slice.size<a.to-a.from){if(t){let c=n.tr.step(a);c.setSelection(go(o,"start")?ut.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):ct.create(c.doc,c.mapping.map(i.pos))),t(c.scrollIntoView())}return!0}}return o.isAtom&&i.depth==r.depth-1?(t&&t(n.tr.delete(i.pos,i.pos+o.nodeSize).scrollIntoView()),!0):!1},YR=(n,t,e)=>{let{$head:r,empty:i}=n.selection,o=r;if(!i)return!1;if(r.parent.isTextblock){if(r.parentOffset<r.parent.content.size)return!1;o=Gm(r)}let a=o&&o.nodeAfter;return!a||!ct.isSelectable(a)?!1:(t&&t(n.tr.setSelection(ct.create(n.doc,o.pos)).scrollIntoView()),!0)};function Gm(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}const FR=(n,t)=>{let e=n.selection,r=e instanceof ct,i;if(r){if(e.node.isTextblock||!hi(n.doc,e.from))return!1;i=e.from}else if(i=bf(n.doc,e.from,-1),i==null)return!1;if(t){let o=n.tr.join(i);r&&o.setSelection(ct.create(o.doc,i-n.doc.resolve(i).nodeBefore.nodeSize)),t(o.scrollIntoView())}return!0},QR=(n,t)=>{let e=n.selection,r;if(e instanceof ct){if(e.node.isTextblock||!hi(n.doc,e.to))return!1;r=e.to}else if(r=bf(n.doc,e.to,1),r==null)return!1;return t&&t(n.tr.join(r).scrollIntoView()),!0},XR=(n,t)=>{let{$from:e,$to:r}=n.selection,i=e.blockRange(r),o=i&&xo(i);return o==null?!1:(t&&t(n.tr.lift(i,o).scrollIntoView()),!0)},ZR=(n,t)=>{let{$head:e,$anchor:r}=n.selection;return!e.parent.type.spec.code||!e.sameParent(r)?!1:(t&&t(n.tr.insertText(`
`).scrollIntoView()),!0)};function Ix(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}const WR=(n,t)=>{let{$head:e,$anchor:r}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(r))return!1;let i=e.node(-1),o=e.indexAfter(-1),a=Ix(i.contentMatchAt(o));if(!a||!i.canReplaceWith(o,o,a))return!1;if(t){let c=e.after(),f=n.tr.replaceWith(c,c,a.createAndFill());f.setSelection(ut.near(f.doc.resolve(c),1)),t(f.scrollIntoView())}return!0},tN=(n,t)=>{let e=n.selection,{$from:r,$to:i}=e;if(e instanceof wr||r.parent.inlineContent||i.parent.inlineContent)return!1;let o=Ix(i.parent.contentMatchAt(i.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let a=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=n.tr.insert(a,o.createAndFill());c.setSelection(ft.create(c.doc,a+1)),t(c.scrollIntoView())}return!0},eN=(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let o=e.before();if(ao(n.doc,o))return t&&t(n.tr.split(o).scrollIntoView()),!0}let r=e.blockRange(),i=r&&xo(r);return i==null?!1:(t&&t(n.tr.lift(r,i).scrollIntoView()),!0)},nN=(n,t)=>{let{$from:e,to:r}=n.selection,i,o=e.sharedDepth(r);return o==0?!1:(i=e.before(o),t&&t(n.tr.setSelection(ct.create(n.doc,i))),!0)};function rN(n,t,e){let r=t.nodeBefore,i=t.nodeAfter,o=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(o-1,o)?(e&&e(n.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(o,o+1)||!(i.isTextblock||hi(n.doc,t.pos))?!1:(e&&e(n.tr.join(t.pos).scrollIntoView()),!0)}function _x(n,t,e,r){let i=t.nodeBefore,o=t.nodeAfter,a,c,f=i.type.spec.isolating||o.type.spec.isolating;if(!f&&rN(n,t,e))return!0;let h=!f&&t.parent.canReplace(t.index(),t.index()+1);if(h&&(a=(c=i.contentMatchAt(i.childCount)).findWrapping(o.type))&&c.matchType(a[0]||o.type).validEnd){if(e){let b=t.pos+o.nodeSize,k=K.empty;for(let T=a.length-1;T>=0;T--)k=K.from(a[T].create(null,k));k=K.from(i.copy(k));let x=n.tr.step(new We(t.pos-1,b,t.pos,b,new W(k,1,0),a.length,!0)),S=x.doc.resolve(b+2*a.length);S.nodeAfter&&S.nodeAfter.type==i.type&&hi(x.doc,S.pos)&&x.join(S.pos),e(x.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&f?null:ut.findFrom(t,1),g=p&&p.$from.blockRange(p.$to),y=g&&xo(g);if(y!=null&&y>=t.depth)return e&&e(n.tr.lift(g,y).scrollIntoView()),!0;if(h&&go(o,"start",!0)&&go(i,"end")){let b=i,k=[];for(;k.push(b),!b.isTextblock;)b=b.lastChild;let x=o,S=1;for(;!x.isTextblock;x=x.firstChild)S++;if(b.canReplace(b.childCount,b.childCount,x.content)){if(e){let T=K.empty;for(let H=k.length-1;H>=0;H--)T=K.from(k[H].copy(T));let D=n.tr.step(new We(t.pos-k.length,t.pos+o.nodeSize,t.pos+S,t.pos+o.nodeSize-S,new W(T,k.length,0),0,!0));e(D.scrollIntoView())}return!0}}return!1}function Ux(n){return function(t,e){let r=t.selection,i=n<0?r.$from:r.$to,o=i.depth;for(;i.node(o).isInline;){if(!o)return!1;o--}return i.node(o).isTextblock?(e&&e(t.tr.setSelection(ft.create(t.doc,n<0?i.start(o):i.end(o)))),!0):!1}}const iN=Ux(-1),sN=Ux(1);function oN(n,t=null){return function(e,r){let{$from:i,$to:o}=e.selection,a=i.blockRange(o),c=a&&Vm(a,n,t);return c?(r&&r(e.tr.wrap(a,c).scrollIntoView()),!0):!1}}function D1(n,t=null){return function(e,r){let i=!1;for(let o=0;o<e.selection.ranges.length&&!i;o++){let{$from:{pos:a},$to:{pos:c}}=e.selection.ranges[o];e.doc.nodesBetween(a,c,(f,h)=>{if(i)return!1;if(!(!f.isTextblock||f.hasMarkup(n,t)))if(f.type==n)i=!0;else{let p=e.doc.resolve(h),g=p.index();i=p.parent.canReplaceWith(g,g+1,n)}})}if(!i)return!1;if(r){let o=e.tr;for(let a=0;a<e.selection.ranges.length;a++){let{$from:{pos:c},$to:{pos:f}}=e.selection.ranges[a];o.setBlockType(c,f,n,t)}r(o.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function lN(n,t=null){return function(e,r){let{$from:i,$to:o}=e.selection,a=i.blockRange(o);if(!a)return!1;let c=r?e.tr:null;return aN(c,a,n,t)?(r&&r(c.scrollIntoView()),!0):!1}}function aN(n,t,e,r=null){let i=!1,o=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(e)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let f=a.resolve(t.start-2);o=new Su(f,f,t.depth),t.endIndex<t.parent.childCount&&(t=new Su(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let c=Vm(o,e,r,t);return c?(n&&cN(n,t,c,i,e),!0):!1}function cN(n,t,e,r,i){let o=K.empty;for(let p=e.length-1;p>=0;p--)o=K.from(e[p].type.create(e[p].attrs,o));n.step(new We(t.start-(r?2:0),t.end,t.start,t.end,new W(o,0,0),e.length,!0));let a=0;for(let p=0;p<e.length;p++)e[p].type==i&&(a=p+1);let c=e.length-a,f=t.start+e.length-(r?2:0),h=t.parent;for(let p=t.startIndex,g=t.endIndex,y=!0;p<g;p++,y=!1)!y&&ao(n.doc,f,c)&&(n.split(f,c),f+=2*c),f+=h.child(p).nodeSize;return n}function uN(n){return function(t,e){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return o?e?r.node(o.depth-1).type==n?fN(t,e,n,o):dN(t,e,o):!0:!1}}function fN(n,t,e,r){let i=n.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new We(o-1,a,o,a,new W(K.from(e.create(null,r.parent.copy())),1,0),1,!0)),r=new Su(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const c=xo(r);if(c==null)return!1;i.lift(r,c);let f=i.doc.resolve(i.mapping.map(o,-1)-1);return hi(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),t(i.scrollIntoView()),!0}function dN(n,t,e){let r=n.tr,i=e.parent;for(let b=e.end,k=e.endIndex-1,x=e.startIndex;k>x;k--)b-=i.child(k).nodeSize,r.delete(b-1,b+1);let o=r.doc.resolve(e.start),a=o.nodeAfter;if(r.mapping.map(e.end)!=e.start+o.nodeAfter.nodeSize)return!1;let c=e.startIndex==0,f=e.endIndex==i.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(c?0:1),p+1,a.content.append(f?K.empty:K.from(i))))return!1;let g=o.pos,y=g+a.nodeSize;return r.step(new We(g-(c?1:0),y+(f?1:0),g+1,y-1,new W((c?K.empty:K.from(i.copy(K.empty))).append(f?K.empty:K.from(i.copy(K.empty))),c?0:1,f?0:1),c?0:1)),t(r.scrollIntoView()),!0}function hN(n){return function(t,e){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let c=o.parent,f=c.child(a-1);if(f.type!=n)return!1;if(e){let h=f.lastChild&&f.lastChild.type==c.type,p=K.from(h?n.create():null),g=new W(K.from(n.create(null,K.from(c.type.create(null,p)))),h?3:1,0),y=o.start,b=o.end;e(t.tr.step(new We(y-(h?3:1),b,y,b,g,1,!0)).scrollIntoView())}return!0}}const Ee=function(n){for(var t=0;;t++)if(n=n.previousSibling,!n)return t},yo=function(n){let t=n.assignedSlot||n.parentNode;return t&&t.nodeType==11?t.host:t};let nm=null;const vr=function(n,t,e){let r=nm||(nm=document.createRange());return r.setEnd(n,e??n.nodeValue.length),r.setStart(n,t||0),r},pN=function(){nm=null},ns=function(n,t,e,r){return e&&(B1(n,t,e,r,-1)||B1(n,t,e,r,1))},mN=/^(img|br|input|textarea|hr)$/i;function B1(n,t,e,r,i){for(var o;;){if(n==e&&t==r)return!0;if(t==(i<0?0:Tn(n))){let a=n.parentNode;if(!a||a.nodeType!=1||ba(n)||mN.test(n.nodeName)||n.contentEditable=="false")return!1;t=Ee(n)+(i<0?0:1),n=a}else if(n.nodeType==1){let a=n.childNodes[t+(i<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((o=a.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)t+=i;else return!1;else n=a,t=i<0?Tn(n):0}else return!1}}function Tn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function gN(n,t){for(;;){if(n.nodeType==3&&t)return n;if(n.nodeType==1&&t>0){if(n.contentEditable=="false")return null;n=n.childNodes[t-1],t=Tn(n)}else if(n.parentNode&&!ba(n))t=Ee(n),n=n.parentNode;else return null}}function yN(n,t){for(;;){if(n.nodeType==3&&t<n.nodeValue.length)return n;if(n.nodeType==1&&t<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[t],t=0}else if(n.parentNode&&!ba(n))t=Ee(n)+1,n=n.parentNode;else return null}}function vN(n,t,e){for(let r=t==0,i=t==Tn(n);r||i;){if(n==e)return!0;let o=Ee(n);if(n=n.parentNode,!n)return!1;r=r&&o==0,i=i&&o==Tn(n)}}function ba(n){let t;for(let e=n;e&&!(t=e.pmViewDesc);e=e.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==n||t.contentDOM==n)}const xf=function(n){return n.focusNode&&ns(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Hi(n,t){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=n,e.key=e.code=t,e}function bN(n){let t=n.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function kN(n,t,e){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(t,e);if(r)return{node:r.offsetNode,offset:Math.min(Tn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(t,e);if(r)return{node:r.startContainer,offset:Math.min(Tn(r.startContainer),r.startOffset)}}}const Qn=typeof navigator<"u"?navigator:null,L1=typeof document<"u"?document:null,pi=Qn&&Qn.userAgent||"",rm=/Edge\/(\d+)/.exec(pi),qx=/MSIE \d/.exec(pi),im=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(pi),Ze=!!(qx||im||rm),ci=qx?document.documentMode:im?+im[1]:rm?+rm[1]:0,En=!Ze&&/gecko\/(\d+)/i.test(pi);En&&+(/Firefox\/(\d+)/.exec(pi)||[0,0])[1];const sm=!Ze&&/Chrome\/(\d+)/.exec(pi),ze=!!sm,Vx=sm?+sm[1]:0,Ue=!Ze&&!!Qn&&/Apple Computer/.test(Qn.vendor),vo=Ue&&(/Mobile\/\w+/.test(pi)||!!Qn&&Qn.maxTouchPoints>2),Mn=vo||(Qn?/Mac/.test(Qn.platform):!1),wN=Qn?/Win/.test(Qn.platform):!1,br=/Android \d/.test(pi),ka=!!L1&&"webkitFontSmoothing"in L1.documentElement.style,xN=ka?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function SN(n){let t=n.defaultView&&n.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function hr(n,t){return typeof n=="number"?n:n[t]}function MN(n){let t=n.getBoundingClientRect(),e=t.width/n.offsetWidth||1,r=t.height/n.offsetHeight||1;return{left:t.left,right:t.left+n.clientWidth*e,top:t.top,bottom:t.top+n.clientHeight*r}}function H1(n,t,e){let r=n.someProp("scrollThreshold")||0,i=n.someProp("scrollMargin")||5,o=n.dom.ownerDocument;for(let a=e||n.dom;a;){if(a.nodeType!=1){a=yo(a);continue}let c=a,f=c==o.body,h=f?SN(o):MN(c),p=0,g=0;if(t.top<h.top+hr(r,"top")?g=-(h.top-t.top+hr(i,"top")):t.bottom>h.bottom-hr(r,"bottom")&&(g=t.bottom-t.top>h.bottom-h.top?t.top+hr(i,"top")-h.top:t.bottom-h.bottom+hr(i,"bottom")),t.left<h.left+hr(r,"left")?p=-(h.left-t.left+hr(i,"left")):t.right>h.right-hr(r,"right")&&(p=t.right-h.right+hr(i,"right")),p||g)if(f)o.defaultView.scrollBy(p,g);else{let b=c.scrollLeft,k=c.scrollTop;g&&(c.scrollTop+=g),p&&(c.scrollLeft+=p);let x=c.scrollLeft-b,S=c.scrollTop-k;t={left:t.left-x,top:t.top-S,right:t.right-x,bottom:t.bottom-S}}let y=f?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(y))break;a=y=="absolute"?a.offsetParent:yo(a)}}function TN(n){let t=n.dom.getBoundingClientRect(),e=Math.max(0,t.top),r,i;for(let o=(t.left+t.right)/2,a=e+1;a<Math.min(innerHeight,t.bottom);a+=5){let c=n.root.elementFromPoint(o,a);if(!c||c==n.dom||!n.dom.contains(c))continue;let f=c.getBoundingClientRect();if(f.top>=e-20){r=c,i=f.top;break}}return{refDOM:r,refTop:i,stack:Px(n.dom)}}function Px(n){let t=[],e=n.ownerDocument;for(let r=n;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=e);r=yo(r));return t}function EN({refDOM:n,refTop:t,stack:e}){let r=n?n.getBoundingClientRect().top:0;Jx(e,r==0?0:r-t)}function Jx(n,t){for(let e=0;e<n.length;e++){let{dom:r,top:i,left:o}=n[e];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Fs=null;function CN(n){if(n.setActive)return n.setActive();if(Fs)return n.focus(Fs);let t=Px(n);n.focus(Fs==null?{get preventScroll(){return Fs={preventScroll:!0},!0}}:void 0),Fs||(Fs=!1,Jx(t,0))}function Gx(n,t){let e,r=2e8,i,o=0,a=t.top,c=t.top,f,h;for(let p=n.firstChild,g=0;p;p=p.nextSibling,g++){let y;if(p.nodeType==1)y=p.getClientRects();else if(p.nodeType==3)y=vr(p).getClientRects();else continue;for(let b=0;b<y.length;b++){let k=y[b];if(k.top<=a&&k.bottom>=c){a=Math.max(k.bottom,a),c=Math.min(k.top,c);let x=k.left>t.left?k.left-t.left:k.right<t.left?t.left-k.right:0;if(x<r){e=p,r=x,i=x&&e.nodeType==3?{left:k.right<t.left?k.right:k.left,top:t.top}:t,p.nodeType==1&&x&&(o=g+(t.left>=(k.left+k.right)/2?1:0));continue}}else k.top>t.top&&!f&&k.left<=t.left&&k.right>=t.left&&(f=p,h={left:Math.max(k.left,Math.min(k.right,t.left)),top:k.top});!e&&(t.left>=k.right&&t.top>=k.top||t.left>=k.left&&t.top>=k.bottom)&&(o=g+1)}}return!e&&f&&(e=f,i=h,r=0),e&&e.nodeType==3?AN(e,i):!e||r&&e.nodeType==1?{node:n,offset:o}:Gx(e,i)}function AN(n,t){let e=n.nodeValue.length,r=document.createRange();for(let i=0;i<e;i++){r.setEnd(n,i+1),r.setStart(n,i);let o=Zr(r,1);if(o.top!=o.bottom&&Km(t,o))return{node:n,offset:i+(t.left>=(o.left+o.right)/2?1:0)}}return{node:n,offset:0}}function Km(n,t){return n.left>=t.left-1&&n.left<=t.right+1&&n.top>=t.top-1&&n.top<=t.bottom+1}function ON(n,t){let e=n.parentNode;return e&&/^li$/i.test(e.nodeName)&&t.left<n.getBoundingClientRect().left?e:n}function RN(n,t,e){let{node:r,offset:i}=Gx(t,e),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&e.left>(a.left+a.right)/2?1:-1}return n.docView.posFromDOM(r,i,o)}function NN(n,t,e,r){let i=-1;for(let o=t,a=!1;o!=n.dom;){let c=n.docView.nearestDesc(o,!0),f;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((f=c.dom.getBoundingClientRect()).width||f.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!a&&f.left>r.left||f.top>r.top?i=c.posBefore:(!a&&f.right<r.left||f.bottom<r.top)&&(i=c.posAfter),a=!0),!c.contentDOM&&i<0&&!c.node.isText))return(c.node.isBlock?r.top<(f.top+f.bottom)/2:r.left<(f.left+f.right)/2)?c.posBefore:c.posAfter;o=c.dom.parentNode}return i>-1?i:n.docView.posFromDOM(t,e,-1)}function Kx(n,t,e){let r=n.childNodes.length;if(r&&e.top<e.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-e.top)/(e.bottom-e.top))-2)),o=i;;){let a=n.childNodes[o];if(a.nodeType==1){let c=a.getClientRects();for(let f=0;f<c.length;f++){let h=c[f];if(Km(t,h))return Kx(a,t,h)}}if((o=(o+1)%r)==i)break}return n}function zN(n,t){let e=n.dom.ownerDocument,r,i=0,o=kN(e,t.left,t.top);o&&({node:r,offset:i}=o);let a=(n.root.elementFromPoint?n.root:e).elementFromPoint(t.left,t.top),c;if(!a||!n.dom.contains(a.nodeType!=1?a.parentNode:a)){let h=n.dom.getBoundingClientRect();if(!Km(t,h)||(a=Kx(n.dom,t,h),!a))return null}if(Ue)for(let h=a;r&&h;h=yo(h))h.draggable&&(r=void 0);if(a=ON(a,t),r){if(En&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let p=r.childNodes[i],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=t.left&&g.bottom>t.top&&i++}let h;ka&&i&&r.nodeType==1&&(h=r.childNodes[i-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=t.top&&i--,r==n.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?c=n.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(c=NN(n,r,i,t))}c==null&&(c=RN(n,a,t));let f=n.docView.nearestDesc(a,!0);return{pos:c,inside:f?f.posAtStart-f.border:-1}}function $1(n){return n.top<n.bottom||n.left<n.right}function Zr(n,t){let e=n.getClientRects();if(e.length){let r=e[t<0?0:e.length-1];if($1(r))return r}return Array.prototype.find.call(e,$1)||n.getBoundingClientRect()}const DN=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Yx(n,t,e){let{node:r,offset:i,atom:o}=n.docView.domFromPos(t,e<0?-1:1),a=ka||En;if(r.nodeType==3)if(a&&(DN.test(r.nodeValue)||(e<0?!i:i==r.nodeValue.length))){let c=Zr(vr(r,i,i),e);if(En&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Zr(vr(r,i-1,i-1),-1);if(f.top==c.top){let h=Zr(vr(r,i,i+1),-1);if(h.top!=c.top)return Sl(h,h.left<f.left)}}return c}else{let c=i,f=i,h=e<0?1:-1;return e<0&&!i?(f++,h=-1):e>=0&&i==r.nodeValue.length?(c--,h=1):e<0?c--:f++,Sl(Zr(vr(r,c,f),h),h<0)}if(!n.state.doc.resolve(t-(o||0)).parent.inlineContent){if(o==null&&i&&(e<0||i==Tn(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return wp(c.getBoundingClientRect(),!1)}if(o==null&&i<Tn(r)){let c=r.childNodes[i];if(c.nodeType==1)return wp(c.getBoundingClientRect(),!0)}return wp(r.getBoundingClientRect(),e>=0)}if(o==null&&i&&(e<0||i==Tn(r))){let c=r.childNodes[i-1],f=c.nodeType==3?vr(c,Tn(c)-(a?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(f)return Sl(Zr(f,1),!1)}if(o==null&&i<Tn(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let f=c?c.nodeType==3?vr(c,0,a?0:1):c.nodeType==1?c:null:null;if(f)return Sl(Zr(f,-1),!0)}return Sl(Zr(r.nodeType==3?vr(r):r,-e),e>=0)}function Sl(n,t){if(n.width==0)return n;let e=t?n.left:n.right;return{top:n.top,bottom:n.bottom,left:e,right:e}}function wp(n,t){if(n.height==0)return n;let e=t?n.top:n.bottom;return{top:e,bottom:e,left:n.left,right:n.right}}function Fx(n,t,e){let r=n.state,i=n.root.activeElement;r!=t&&n.updateState(t),i!=n.dom&&n.focus();try{return e()}finally{r!=t&&n.updateState(r),i!=n.dom&&i&&i.focus()}}function BN(n,t,e){let r=t.selection,i=e=="up"?r.$from:r.$to;return Fx(n,t,()=>{let{node:o}=n.docView.domFromPos(i.pos,e=="up"?-1:1);for(;;){let c=n.docView.nearestDesc(o,!0);if(!c)break;if(c.node.isBlock){o=c.contentDOM||c.dom;break}o=c.dom.parentNode}let a=Yx(n,i.pos,1);for(let c=o.firstChild;c;c=c.nextSibling){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=vr(c,0,c.nodeValue.length).getClientRects();else continue;for(let h=0;h<f.length;h++){let p=f[h];if(p.bottom>p.top+1&&(e=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const LN=/[\u0590-\u08ac]/;function HN(n,t,e){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,o=!i,a=i==r.parent.content.size,c=n.domSelection();return c?!LN.test(r.parent.textContent)||!c.modify?e=="left"||e=="backward"?o:a:Fx(n,t,()=>{let{focusNode:f,focusOffset:h,anchorNode:p,anchorOffset:g}=n.domSelectionRange(),y=c.caretBidiLevel;c.modify("move",e,"character");let b=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:k,focusOffset:x}=n.domSelectionRange(),S=k&&!b.contains(k.nodeType==1?k:k.parentNode)||f==k&&h==x;try{c.collapse(p,g),f&&(f!=p||h!=g)&&c.extend&&c.extend(f,h)}catch{}return y!=null&&(c.caretBidiLevel=y),S}):r.pos==r.start()||r.pos==r.end()}let j1=null,I1=null,_1=!1;function $N(n,t,e){return j1==t&&I1==e?_1:(j1=t,I1=e,_1=e=="up"||e=="down"?BN(n,t,e):HN(n,t,e))}const Cn=0,U1=1,ji=2,Xn=3;class wa{constructor(t,e,r,i){this.parent=t,this.children=e,this.dom=r,this.contentDOM=i,this.dirty=Cn,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,r=this.posAtStart;;e++){let i=this.children[e];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let o,a;if(t==this.contentDOM)o=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(t==this.contentDOM)o=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=e>Ee(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!1;break}if(o.previousSibling)break}if(i==null&&e==t.childNodes.length)for(let o=t;;o=o.parentNode){if(o==this.dom){i=!0;break}if(o.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let r=!0,i=t;i;i=i.parentNode){let o=this.getDesc(i),a;if(o&&(!e||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(t.nodeType==1?t:t.parentNode):a==t))r=!1;else return o}}getDesc(t){let e=t.pmViewDesc;for(let r=e;r;r=r.parent)if(r==this)return e}posFromDOM(t,e,r){for(let i=t;i;i=i.parentNode){let o=this.getDesc(i);if(o)return o.localPosFromDOM(t,e,r)}return-1}descAt(t){for(let e=0,r=0;e<this.children.length;e++){let i=this.children[e],o=r+i.size;if(r==t&&o!=r){for(;!i.border&&i.children.length;)for(let a=0;a<i.children.length;a++){let c=i.children[a];if(c.size){i=c;break}}return i}if(t<o)return i.descAt(t-r-i.border);r=o}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],c=o+a.size;if(c>t||a instanceof Zx){i=t-o;break}o=c}if(i)return this.children[r].domFromPos(i-this.children[r].border,e);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof Qx&&o.side>=0;r--);if(e<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&e&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,e):{node:this.contentDOM,offset:o?Ee(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,e):{node:this.contentDOM,offset:o?Ee(o.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,o=-1;for(let a=r,c=0;;c++){let f=this.children[c],h=a+f.size;if(i==-1&&t<=h){let p=a+f.border;if(t>=p&&e<=h-f.border&&f.node&&f.contentDOM&&this.contentDOM.contains(f.contentDOM))return f.parseRange(t,e,p);t=a;for(let g=c;g>0;g--){let y=this.children[g-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){i=Ee(y.dom)+1;break}t-=y.size}i==-1&&(i=0)}if(i>-1&&(h>e||c==this.children.length-1)){e=h;for(let p=c+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=Ee(g.dom);break}e+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=h}return{node:this.contentDOM,from:t,to:e,fromOffset:i,toOffset:o}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:r}=this.domFromPos(t,0);if(e.nodeType!=1||r==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[r]}setSelection(t,e,r,i=!1){let o=Math.min(t,e),a=Math.max(t,e);for(let b=0,k=0;b<this.children.length;b++){let x=this.children[b],S=k+x.size;if(o>k&&a<S)return x.setSelection(t-k-x.border,e-k-x.border,r,i);k=S}let c=this.domFromPos(t,t?-1:1),f=e==t?c:this.domFromPos(e,e?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((En||Ue)&&t==e){let{node:b,offset:k}=c;if(b.nodeType==3){if(g=!!(k&&b.nodeValue[k-1]==`
`),g&&k==b.nodeValue.length)for(let x=b,S;x;x=x.parentNode){if(S=x.nextSibling){S.nodeName=="BR"&&(c=f={node:S.parentNode,offset:Ee(S)+1});break}let T=x.pmViewDesc;if(T&&T.node&&T.node.isBlock)break}}else{let x=b.childNodes[k-1];g=x&&(x.nodeName=="BR"||x.contentEditable=="false")}}if(En&&p.focusNode&&p.focusNode!=f.node&&p.focusNode.nodeType==1){let b=p.focusNode.childNodes[p.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||g&&Ue)&&ns(c.node,c.offset,p.anchorNode,p.anchorOffset)&&ns(f.node,f.offset,p.focusNode,p.focusOffset))return;let y=!1;if((h.extend||t==e)&&!(g&&En)){h.collapse(c.node,c.offset);try{t!=e&&h.extend(f.node,f.offset),y=!0}catch{}}if(!y){if(t>e){let k=c;c=f,f=k}let b=document.createRange();b.setEnd(f.node,f.offset),b.setStart(c.node,c.offset),h.removeAllRanges(),h.addRange(b)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let r=0,i=0;i<this.children.length;i++){let o=this.children[i],a=r+o.size;if(r==a?t<=a&&e>=r:t<a&&e>r){let c=r+o.border,f=a-o.border;if(t>=c&&e<=f){this.dirty=t==r||e==a?ji:U1,t==c&&e==f&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Xn:o.markDirty(t-c,e-c);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?ji:Xn}r=a}this.dirty=ji}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let r=t==1?ji:U1;e.dirty<r&&(e.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class Qx extends wa{constructor(t,e,r,i){let o,a=e.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return i;if(o.parent)return o.parent.posBeforeChild(o)})),!e.type.spec.raw){if(a.nodeType!=1){let c=document.createElement("span");c.appendChild(a),a=c}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(t,[],a,null),this.widget=e,this.widget=e,o=this}matchesWidget(t){return this.dirty==Cn&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return e?e(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class jN extends wa{constructor(t,e,r,i){super(t,[],e,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class rs extends wa{constructor(t,e,r,i,o){super(t,[],r,i),this.mark=e,this.spec=o}static create(t,e,r,i){let o=i.nodeViews[e.type.name],a=o&&o(e,i,r);return(!a||!a.dom)&&(a=as.renderSpec(document,e.type.spec.toDOM(e,r),null,e.attrs)),new rs(t,e,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Xn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=Xn&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),this.dirty!=Cn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Cn}}slice(t,e,r){let i=rs.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;e<a&&(o=lm(o,e,a,r)),t>0&&(o=lm(o,0,t,r));for(let c=0;c<o.length;c++)o[c].parent=i;return i.children=o,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}let uo=class Xx extends wa{constructor(t,e,r,i,o,a,c,f,h){super(t,[],o,a),this.node=e,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=c}static create(t,e,r,i,o,a){let c=o.nodeViews[e.type.name],f,h=c&&c(e,o,()=>{if(!f)return a;if(f.parent)return f.parent.posBeforeChild(f)},r,i),p=h&&h.dom,g=h&&h.contentDOM;if(e.isText){if(!p)p=document.createTextNode(e.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=as.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs));!g&&!e.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),e.type.spec.draggable&&(p.draggable=!0));let y=p;return p=eS(p,r,e),h?f=new IN(t,e,r,i,p,g||null,y,h,o,a+1):e.isText?new Sf(t,e,r,i,p,y,o):new Xx(t,e,r,i,p,g||null,y,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let r=this.children[e];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>K.empty)}return t}matchesNode(t,e,r){return this.dirty==Cn&&t.eq(this.node)&&Tu(e,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let r=this.node.inlineContent,i=e,o=t.composing?this.localCompositionInfo(t,e):null,a=o&&o.pos>-1?o:null,c=o&&o.pos<0,f=new UN(this,a&&a.node,t);PN(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?f.syncToMarks(h.spec.marks,r,t):h.type.side>=0&&!g&&f.syncToMarks(p==this.node.childCount?jt.none:this.node.child(p).marks,r,t),f.placeWidget(h,t,i)},(h,p,g,y)=>{f.syncToMarks(h.marks,r,t);let b;f.findNodeMatch(h,p,g,y)||c&&t.state.selection.from>i&&t.state.selection.to<i+h.nodeSize&&(b=f.findIndexWithChild(o.node))>-1&&f.updateNodeAt(h,p,g,b,t)||f.updateNextNode(h,p,g,t,y,i)||f.addNode(h,p,g,t,i),i+=h.nodeSize}),f.syncToMarks([],r,t),this.node.isTextblock&&f.addTextblockHacks(),f.destroyRest(),(f.changed||this.dirty==ji)&&(a&&this.protectLocalComposition(t,a),Wx(this.contentDOM,this.children,t),vo&&JN(this.dom))}localCompositionInfo(t,e){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof ft)||r<e||i>e+this.node.content.size)return null;let o=t.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,c=GN(this.node.content,a,r-e,i-e);return c<0?null:{node:o,pos:c,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:r,text:i}){if(this.getDesc(e))return;let o=e;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new jN(this,o,e,i);t.input.compositionNodes.push(a),this.children=lm(this.children,r,r+i.length,t,a)}update(t,e,r,i){return this.dirty==Xn||!t.sameMarkup(this.node)?!1:(this.updateInner(t,e,r,i),!0)}updateInner(t,e,r,i){this.updateOuterDeco(e),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Cn}updateOuterDeco(t){if(Tu(t,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=tS(this.dom,this.nodeDOM,om(this.outerDeco,this.node,e),om(t,this.node,e)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function q1(n,t,e,r,i){eS(r,t,n);let o=new uo(void 0,n,t,e,r,r,r,i,0);return o.contentDOM&&o.updateChildren(i,0),o}class Sf extends uo{constructor(t,e,r,i,o,a,c){super(t,e,r,i,o,null,a,c,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,r,i){return this.dirty==Xn||this.dirty!=Cn&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=Cn||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Cn,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,r){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,e,r){let i=this.node.cut(t,e),o=document.createTextNode(i.text);return new Sf(this.parent,i,this.outerDeco,this.innerDeco,o,o,r)}markDirty(t,e){super.markDirty(t,e),this.dom!=this.nodeDOM&&(t==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=Xn)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Zx extends wa{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Cn&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class IN extends uo{constructor(t,e,r,i,o,a,c,f,h,p){super(t,e,r,i,o,a,c,h,p),this.spec=f}update(t,e,r,i){if(this.dirty==Xn)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let o=this.spec.update(t,e,r);return o&&this.updateInner(t,e,r,i),o}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,e,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,r,i){this.spec.setSelection?this.spec.setSelection(t,e,r.root):super.setSelection(t,e,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Wx(n,t,e){let r=n.firstChild,i=!1;for(let o=0;o<t.length;o++){let a=t[o],c=a.dom;if(c.parentNode==n){for(;c!=r;)r=V1(r),i=!0;r=r.nextSibling}else i=!0,n.insertBefore(c,r);if(a instanceof rs){let f=r?r.previousSibling:n.lastChild;Wx(a.contentDOM,a.children,e),r=f?f.nextSibling:n.firstChild}}for(;r;)r=V1(r),i=!0;i&&e.trackWrites==n&&(e.trackWrites=null)}const Yl=function(n){n&&(this.nodeName=n)};Yl.prototype=Object.create(null);const Ii=[new Yl];function om(n,t,e){if(n.length==0)return Ii;let r=e?Ii[0]:new Yl,i=[r];for(let o=0;o<n.length;o++){let a=n[o].type.attrs;if(a){a.nodeName&&i.push(r=new Yl(a.nodeName));for(let c in a){let f=a[c];f!=null&&(e&&i.length==1&&i.push(r=new Yl(t.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+f:c=="style"?r.style=(r.style?r.style+";":"")+f:c!="nodeName"&&(r[c]=f))}}}return i}function tS(n,t,e,r){if(e==Ii&&r==Ii)return t;let i=t;for(let o=0;o<r.length;o++){let a=r[o],c=e[o];if(o){let f;c&&c.nodeName==a.nodeName&&i!=n&&(f=i.parentNode)&&f.nodeName.toLowerCase()==a.nodeName||(f=document.createElement(a.nodeName),f.pmIsDeco=!0,f.appendChild(i),c=Ii[0]),i=f}_N(i,c||Ii[0],a)}return i}function _N(n,t,e){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in e)&&n.removeAttribute(r);for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&e[r]!=t[r]&&n.setAttribute(r,e[r]);if(t.class!=e.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=e.class?e.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)i.indexOf(r[o])==-1&&n.classList.remove(r[o]);for(let o=0;o<i.length;o++)r.indexOf(i[o])==-1&&n.classList.add(i[o]);n.classList.length==0&&n.removeAttribute("class")}if(t.style!=e.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)n.style.removeProperty(i[1])}e.style&&(n.style.cssText+=e.style)}}function eS(n,t,e){return tS(n,n,Ii,om(t,e,n.nodeType!=1))}function Tu(n,t){if(n.length!=t.length)return!1;for(let e=0;e<n.length;e++)if(!n[e].type.eq(t[e].type))return!1;return!0}function V1(n){let t=n.nextSibling;return n.parentNode.removeChild(n),t}class UN{constructor(t,e,r){this.lock=e,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=qN(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let r=t;r<e;r++)this.top.children[r].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,r){let i=0,o=this.stack.length>>1,a=Math.min(o,t.length);for(;i<a&&(i==o-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<o;)this.destroyRest(),this.top.dirty=Cn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<t.length;){this.stack.push(this.top,this.index+1);let c=-1;for(let f=this.index;f<Math.min(this.index+3,this.top.children.length);f++){let h=this.top.children[f];if(h.matchesMark(t[o])&&!this.isLocked(h.dom)){c=f;break}}if(c>-1)c>this.index&&(this.changed=!0,this.destroyBetween(this.index,c)),this.top=this.top.children[this.index];else{let f=rs.create(this.top,t[o],e,r);this.top.children.splice(this.index,0,f),this.top=f,this.changed=!0}this.index=0,o++}}findNodeMatch(t,e,r,i){let o=-1,a;if(i>=this.preMatch.index&&(a=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&a.matchesNode(t,e,r))o=this.top.children.indexOf(a,this.index);else for(let c=this.index,f=Math.min(this.top.children.length,c+5);c<f;c++){let h=this.top.children[c];if(h.matchesNode(t,e,r)&&!this.preMatch.matched.has(h)){o=c;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,r,i,o){let a=this.top.children[i];return a.dirty==Xn&&a.dom==a.contentDOM&&(a.dirty=ji),a.update(t,e,r,o)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=e}}updateNextNode(t,e,r,i,o,a){for(let c=this.index;c<this.top.children.length;c++){let f=this.top.children[c];if(f instanceof uo){let h=this.preMatch.matched.get(f);if(h!=null&&h!=o)return!1;let p=f.dom,g,y=this.isLocked(p)&&!(t.isText&&f.node&&f.node.isText&&f.nodeDOM.nodeValue==t.text&&f.dirty!=Xn&&Tu(e,f.outerDeco));if(!y&&f.update(t,e,r,i))return this.destroyBetween(this.index,c),f.dom!=p&&(this.changed=!0),this.index++,!0;if(!y&&(g=this.recreateWrapper(f,t,e,r,i,a)))return this.destroyBetween(this.index,c),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=ji,g.updateChildren(i,a+1),g.dirty=Cn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,r,i,o,a){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content)||!Tu(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let c=uo.create(this.top,e,r,i,o,a);if(c.contentDOM){c.children=t.children,t.children=[];for(let f of c.children)f.parent=c}return t.destroy(),c}addNode(t,e,r,i,o){let a=uo.create(this.top,t,e,r,i,o);a.contentDOM&&a.updateChildren(i,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(t,e,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let o=new Qx(this.top,t,e,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof rs;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof Sf)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Ue||ze)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Zx(this.top,[],r,null);e!=this.top?e.children.push(i):e.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function qN(n,t){let e=t,r=e.children.length,i=n.childCount,o=new Map,a=[];t:for(;i>0;){let c;for(;;)if(r){let h=e.children[r-1];if(h instanceof rs)e=h,r=h.children.length;else{c=h,r--;break}}else{if(e==t)break t;r=e.parent.children.indexOf(e),e=e.parent}let f=c.node;if(f){if(f!=n.child(i-1))break;--i,o.set(c,i),a.push(c)}}return{index:i,matched:o,matches:a.reverse()}}function VN(n,t){return n.type.side-t.type.side}function PN(n,t,e,r){let i=t.locals(n),o=0;if(i.length==0){for(let h=0;h<n.childCount;h++){let p=n.child(h);r(p,i,t.forChild(o,p),h),o+=p.nodeSize}return}let a=0,c=[],f=null;for(let h=0;;){let p,g;for(;a<i.length&&i[a].to==o;){let S=i[a++];S.widget&&(p?(g||(g=[p])).push(S):p=S)}if(p)if(g){g.sort(VN);for(let S=0;S<g.length;S++)e(g[S],h,!!f)}else e(p,h,!!f);let y,b;if(f)b=-1,y=f,f=null;else if(h<n.childCount)b=h,y=n.child(h++);else break;for(let S=0;S<c.length;S++)c[S].to<=o&&c.splice(S--,1);for(;a<i.length&&i[a].from<=o&&i[a].to>o;)c.push(i[a++]);let k=o+y.nodeSize;if(y.isText){let S=k;a<i.length&&i[a].from<S&&(S=i[a].from);for(let T=0;T<c.length;T++)c[T].to<S&&(S=c[T].to);S<k&&(f=y.cut(S-o),y=y.cut(0,S-o),k=S,b=-1)}else for(;a<i.length&&i[a].to<k;)a++;let x=y.isInline&&!y.isLeaf?c.filter(S=>!S.inline):c.slice();r(y,x,t.forChild(o,y),b),o=k}}function JN(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let t=n.style.cssText;n.style.cssText=t+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=t}}function GN(n,t,e,r){for(let i=0,o=0;i<n.childCount&&o<=r;){let a=n.child(i++),c=o;if(o+=a.nodeSize,!a.isText)continue;let f=a.text;for(;i<n.childCount;){let h=n.child(i++);if(o+=h.nodeSize,!h.isText)break;f+=h.text}if(o>=e){if(o>=r&&f.slice(r-t.length-c,r-c)==t)return r-t.length;let h=c<r?f.lastIndexOf(t,r-c-1):-1;if(h>=0&&h+t.length+c>=e)return c+h;if(e==r&&f.length>=r+t.length-c&&f.slice(r-c,r-c+t.length)==t)return r}}return-1}function lm(n,t,e,r,i){let o=[];for(let a=0,c=0;a<n.length;a++){let f=n[a],h=c,p=c+=f.size;h>=e||p<=t?o.push(f):(h<t&&o.push(f.slice(0,t-h,r)),i&&(o.push(i),i=void 0),p>e&&o.push(f.slice(e-h,f.size,r)))}return o}function Ym(n,t=null){let e=n.domSelectionRange(),r=n.state.doc;if(!e.focusNode)return null;let i=n.docView.nearestDesc(e.focusNode),o=i&&i.size==0,a=n.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(a<0)return null;let c=r.resolve(a),f,h;if(xf(e)){for(f=a;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&ct.isSelectable(g)&&i.parent&&!(g.isInline&&vN(e.focusNode,e.focusOffset,i.dom))){let y=i.posBefore;h=new ct(a==y?c:r.resolve(y))}}else{if(e instanceof n.dom.ownerDocument.defaultView.Selection&&e.rangeCount>1){let g=a,y=a;for(let b=0;b<e.rangeCount;b++){let k=e.getRangeAt(b);g=Math.min(g,n.docView.posFromDOM(k.startContainer,k.startOffset,1)),y=Math.max(y,n.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(g<0)return null;[f,a]=y==n.state.selection.anchor?[y,g]:[g,y],c=r.resolve(a)}else f=n.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(f<0)return null}let p=r.resolve(f);if(!h){let g=t=="pointer"||n.state.selection.head<c.pos&&!o?1:-1;h=Fm(n,p,c,g)}return h}function nS(n){return n.editable?n.hasFocus():iS(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function xr(n,t=!1){let e=n.state.selection;if(rS(n,e),!!nS(n)){if(!t&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&ze){let r=n.domSelectionRange(),i=n.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&ns(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)YN(n);else{let{anchor:r,head:i}=e,o,a;P1&&!(e instanceof ft)&&(e.$from.parent.inlineContent||(o=J1(n,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(a=J1(n,e.to))),n.docView.setSelection(r,i,n,t),P1&&(o&&G1(o),a&&G1(a)),e.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&KN(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const P1=Ue||ze&&Vx<63;function J1(n,t){let{node:e,offset:r}=n.docView.domFromPos(t,0),i=r<e.childNodes.length?e.childNodes[r]:null,o=r?e.childNodes[r-1]:null;if(Ue&&i&&i.contentEditable=="false")return xp(i);if((!i||i.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(i)return xp(i);if(o)return xp(o)}}function xp(n){return n.contentEditable="true",Ue&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function G1(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function KN(n){let t=n.dom.ownerDocument;t.removeEventListener("selectionchange",n.input.hideSelectionGuard);let e=n.domSelectionRange(),r=e.anchorNode,i=e.anchorOffset;t.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(e.anchorNode!=r||e.anchorOffset!=i)&&(t.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!nS(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function YN(n){let t=n.domSelection();if(!t)return;let e=n.cursorWrapper.dom,r=e.nodeName=="IMG";r?t.collapse(e.parentNode,Ee(e)+1):t.collapse(e,0),!r&&!n.state.selection.visible&&Ze&&ci<=11&&(e.disabled=!0,e.disabled=!1)}function rS(n,t){if(t instanceof ct){let e=n.docView.descAt(t.from);e!=n.lastSelectedViewDesc&&(K1(n),e&&e.selectNode(),n.lastSelectedViewDesc=e)}else K1(n)}function K1(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Fm(n,t,e,r){return n.someProp("createSelectionBetween",i=>i(n,t,e))||ft.between(t,e,r)}function Y1(n){return n.editable&&!n.hasFocus()?!1:iS(n)}function iS(n){let t=n.domSelectionRange();if(!t.anchorNode)return!1;try{return n.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(n.editable||n.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function FN(n){let t=n.docView.domFromPos(n.state.selection.anchor,0),e=n.domSelectionRange();return ns(t.node,t.offset,e.anchorNode,e.anchorOffset)}function am(n,t){let{$anchor:e,$head:r}=n.selection,i=t>0?e.max(r):e.min(r),o=i.parent.inlineContent?i.depth?n.doc.resolve(t>0?i.after():i.before()):null:i;return o&&ut.findFrom(o,t)}function ei(n,t){return n.dispatch(n.state.tr.setSelection(t).scrollIntoView()),!0}function F1(n,t,e){let r=n.state.selection;if(r instanceof ft)if(e.indexOf("s")>-1){let{$head:i}=r,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=n.state.doc.resolve(i.pos+o.nodeSize*(t<0?-1:1));return ei(n,new ft(r.$anchor,a))}else if(r.empty){if(n.endOfTextblock(t>0?"forward":"backward")){let i=am(n.state,t);return i&&i instanceof ct?ei(n,i):!1}else if(!(Mn&&e.indexOf("m")>-1)){let i=r.$head,o=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,a;if(!o||o.isText)return!1;let c=t<0?i.pos-o.nodeSize:i.pos;return o.isAtom||(a=n.docView.descAt(c))&&!a.contentDOM?ct.isSelectable(o)?ei(n,new ct(t<0?n.state.doc.resolve(i.pos-o.nodeSize):i)):ka?ei(n,new ft(n.state.doc.resolve(t<0?c:c+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ct&&r.node.isInline)return ei(n,new ft(t>0?r.$to:r.$from));{let i=am(n.state,t);return i?ei(n,i):!1}}}function Eu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Fl(n,t){let e=n.pmViewDesc;return e&&e.size==0&&(t<0||n.nextSibling||n.nodeName!="BR")}function Qs(n,t){return t<0?QN(n):XN(n)}function QN(n){let t=n.domSelectionRange(),e=t.focusNode,r=t.focusOffset;if(!e)return;let i,o,a=!1;for(En&&e.nodeType==1&&r<Eu(e)&&Fl(e.childNodes[r],-1)&&(a=!0);;)if(r>0){if(e.nodeType!=1)break;{let c=e.childNodes[r-1];if(Fl(c,-1))i=e,o=--r;else if(c.nodeType==3)e=c,r=e.nodeValue.length;else break}}else{if(sS(e))break;{let c=e.previousSibling;for(;c&&Fl(c,-1);)i=e.parentNode,o=Ee(c),c=c.previousSibling;if(c)e=c,r=Eu(e);else{if(e=e.parentNode,e==n.dom)break;r=0}}}a?cm(n,e,r):i&&cm(n,i,o)}function XN(n){let t=n.domSelectionRange(),e=t.focusNode,r=t.focusOffset;if(!e)return;let i=Eu(e),o,a;for(;;)if(r<i){if(e.nodeType!=1)break;let c=e.childNodes[r];if(Fl(c,1))o=e,a=++r;else break}else{if(sS(e))break;{let c=e.nextSibling;for(;c&&Fl(c,1);)o=c.parentNode,a=Ee(c)+1,c=c.nextSibling;if(c)e=c,r=0,i=Eu(e);else{if(e=e.parentNode,e==n.dom)break;r=i=0}}}o&&cm(n,o,a)}function sS(n){let t=n.pmViewDesc;return t&&t.node&&t.node.isBlock}function ZN(n,t){for(;n&&t==n.childNodes.length&&!ba(n);)t=Ee(n)+1,n=n.parentNode;for(;n&&t<n.childNodes.length;){let e=n.childNodes[t];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=0}}function WN(n,t){for(;n&&!t&&!ba(n);)t=Ee(n),n=n.parentNode;for(;n&&t;){let e=n.childNodes[t-1];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;n=e,t=n.childNodes.length}}function cm(n,t,e){if(t.nodeType!=3){let o,a;(a=ZN(t,e))?(t=a,e=0):(o=WN(t,e))&&(t=o,e=o.nodeValue.length)}let r=n.domSelection();if(!r)return;if(xf(r)){let o=document.createRange();o.setEnd(t,e),o.setStart(t,e),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(t,e);n.domObserver.setCurSelection();let{state:i}=n;setTimeout(()=>{n.state==i&&xr(n)},50)}function Q1(n,t){let e=n.state.doc.resolve(t);if(!(ze||wN)&&e.parent.inlineContent){let r=n.coordsAtPos(t);if(t>e.start()){let i=n.coordsAtPos(t-1),o=(i.top+i.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(i.left-r.left)>1)return i.left<r.left?"ltr":"rtl"}if(t<e.end()){let i=n.coordsAtPos(t+1),o=(i.top+i.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(i.left-r.left)>1)return i.left>r.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function X1(n,t,e){let r=n.state.selection;if(r instanceof ft&&!r.empty||e.indexOf("s")>-1||Mn&&e.indexOf("m")>-1)return!1;let{$from:i,$to:o}=r;if(!i.parent.inlineContent||n.endOfTextblock(t<0?"up":"down")){let a=am(n.state,t);if(a&&a instanceof ct)return ei(n,a)}if(!i.parent.inlineContent){let a=t<0?i:o,c=r instanceof wr?ut.near(a,t):ut.findFrom(a,t);return c?ei(n,c):!1}return!1}function Z1(n,t){if(!(n.state.selection instanceof ft))return!0;let{$head:e,$anchor:r,empty:i}=n.state.selection;if(!e.sameParent(r))return!0;if(!i)return!1;if(n.endOfTextblock(t>0?"forward":"backward"))return!0;let o=!e.textOffset&&(t<0?e.nodeBefore:e.nodeAfter);if(o&&!o.isText){let a=n.state.tr;return t<0?a.delete(e.pos-o.nodeSize,e.pos):a.delete(e.pos,e.pos+o.nodeSize),n.dispatch(a),!0}return!1}function W1(n,t,e){n.domObserver.stop(),t.contentEditable=e,n.domObserver.start()}function t2(n){if(!Ue||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:e}=n.domSelectionRange();if(t&&t.nodeType==1&&e==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;W1(n,r,"true"),setTimeout(()=>W1(n,r,"false"),20)}return!1}function e2(n){let t="";return n.ctrlKey&&(t+="c"),n.metaKey&&(t+="m"),n.altKey&&(t+="a"),n.shiftKey&&(t+="s"),t}function n2(n,t){let e=t.keyCode,r=e2(t);if(e==8||Mn&&e==72&&r=="c")return Z1(n,-1)||Qs(n,-1);if(e==46&&!t.shiftKey||Mn&&e==68&&r=="c")return Z1(n,1)||Qs(n,1);if(e==13||e==27)return!0;if(e==37||Mn&&e==66&&r=="c"){let i=e==37?Q1(n,n.state.selection.from)=="ltr"?-1:1:-1;return F1(n,i,r)||Qs(n,i)}else if(e==39||Mn&&e==70&&r=="c"){let i=e==39?Q1(n,n.state.selection.from)=="ltr"?1:-1:1;return F1(n,i,r)||Qs(n,i)}else{if(e==38||Mn&&e==80&&r=="c")return X1(n,-1,r)||Qs(n,-1);if(e==40||Mn&&e==78&&r=="c")return t2(n)||X1(n,1,r)||Qs(n,1);if(r==(Mn?"m":"c")&&(e==66||e==73||e==89||e==90))return!0}return!1}function Qm(n,t){n.someProp("transformCopied",b=>{t=b(t,n)});let e=[],{content:r,openStart:i,openEnd:o}=t;for(;i>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,o--;let b=r.firstChild;e.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let a=n.someProp("clipboardSerializer")||as.fromSchema(n.state.schema),c=fS(),f=c.createElement("div");f.appendChild(a.serializeFragment(r,{document:c}));let h=f.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=uS[h.nodeName.toLowerCase()]);){for(let b=p.length-1;b>=0;b--){let k=c.createElement(p[b]);for(;f.firstChild;)k.appendChild(f.firstChild);f.appendChild(k),g++}h=f.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${i} ${o}${g?` -${g}`:""} ${JSON.stringify(e)}`);let y=n.someProp("clipboardTextSerializer",b=>b(t,n))||t.content.textBetween(0,t.content.size,`

`);return{dom:f,text:y,slice:t}}function oS(n,t,e,r,i){let o=i.parent.type.spec.code,a,c;if(!e&&!t)return null;let f=!!t&&(r||o||!e);if(f){if(n.someProp("transformPastedText",y=>{t=y(t,o||r,n)}),o)return c=new W(K.from(n.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),n.someProp("transformPasted",y=>{c=y(c,n,!0)}),c;let g=n.someProp("clipboardTextParser",y=>y(t,i,r,n));if(g)c=g;else{let y=i.marks(),{schema:b}=n.state,k=as.fromSchema(b);a=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(x=>{let S=a.appendChild(document.createElement("p"));x&&S.appendChild(k.serializeNode(b.text(x,y)))})}}else n.someProp("transformPastedHTML",g=>{e=g(e,n)}),a=o2(e),ka&&l2(a);let h=a&&a.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let y=a.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;a=y}if(c||(c=(n.someProp("clipboardParser")||n.someProp("domParser")||Gl.fromSchema(n.state.schema)).parseSlice(a,{preserveWhitespace:!!(f||p),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!r2.test(g.parentNode.nodeName)?{ignore:!0}:null}})),p)c=a2(tk(c,+p[1],+p[2]),p[4]);else if(c=W.maxOpen(i2(c.content,i),!0),c.openStart||c.openEnd){let g=0,y=0;for(let b=c.content.firstChild;g<c.openStart&&!b.type.spec.isolating;g++,b=b.firstChild);for(let b=c.content.lastChild;y<c.openEnd&&!b.type.spec.isolating;y++,b=b.lastChild);c=tk(c,g,y)}return n.someProp("transformPasted",g=>{c=g(c,n,f)}),c}const r2=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function i2(n,t){if(n.childCount<2)return n;for(let e=t.depth;e>=0;e--){let r=t.node(e).contentMatchAt(t.index(e)),i,o=[];if(n.forEach(a=>{if(!o)return;let c=r.findWrapping(a.type),f;if(!c)return o=null;if(f=o.length&&i.length&&aS(c,i,a,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=cS(o[o.length-1],i.length));let h=lS(a,c);o.push(h),r=r.matchType(h.type),i=c}}),o)return K.from(o)}return n}function lS(n,t,e=0){for(let r=t.length-1;r>=e;r--)n=t[r].create(null,K.from(n));return n}function aS(n,t,e,r,i){if(i<n.length&&i<t.length&&n[i]==t[i]){let o=aS(n,t,e,r.lastChild,i+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(i==n.length-1?e.type:n[i+1]))return r.copy(r.content.append(K.from(lS(e,n,i+1))))}}function cS(n,t){if(t==0)return n;let e=n.content.replaceChild(n.childCount-1,cS(n.lastChild,t-1)),r=n.contentMatchAt(n.childCount).fillBefore(K.empty,!0);return n.copy(e.append(r))}function um(n,t,e,r,i,o){let a=t<0?n.firstChild:n.lastChild,c=a.content;return n.childCount>1&&(o=0),i<r-1&&(c=um(c,t,e,r,i+1,o)),i>=e&&(c=t<0?a.contentMatchAt(0).fillBefore(c,o<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(K.empty,!0))),n.replaceChild(t<0?0:n.childCount-1,a.copy(c))}function tk(n,t,e){return t<n.openStart&&(n=new W(um(n.content,-1,t,n.openStart,0,n.openEnd),t,n.openEnd)),e<n.openEnd&&(n=new W(um(n.content,1,e,n.openEnd,0,0),n.openStart,e)),n}const uS={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ek=null;function fS(){return ek||(ek=document.implementation.createHTMLDocument("title"))}let Sp=null;function s2(n){let t=window.trustedTypes;return t?(Sp||(Sp=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),Sp.createHTML(n)):n}function o2(n){let t=/^(\s*<meta [^>]*>)*/.exec(n);t&&(n=n.slice(t[0].length));let e=fS().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),i;if((i=r&&uS[r[1].toLowerCase()])&&(n=i.map(o=>"<"+o+">").join("")+n+i.map(o=>"</"+o+">").reverse().join("")),e.innerHTML=s2(n),i)for(let o=0;o<i.length;o++)e=e.querySelector(i[o])||e;return e}function l2(n){let t=n.querySelectorAll(ze?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<t.length;e++){let r=t[e];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function a2(n,t){if(!n.size)return n;let e=n.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return n}let{content:i,openStart:o,openEnd:a}=n;for(let c=r.length-2;c>=0;c-=2){let f=e.nodes[r[c]];if(!f||f.hasRequiredAttrs())break;i=K.from(f.create(r[c+1],i)),o++,a++}return new W(i,o,a)}const qe={},Ve={},c2={touchstart:!0,touchmove:!0};class u2{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function f2(n){for(let t in qe){let e=qe[t];n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>{h2(n,r)&&!Xm(n,r)&&(n.editable||!(r.type in Ve))&&e(n,r)},c2[t]?{passive:!0}:void 0)}Ue&&n.dom.addEventListener("input",()=>null),fm(n)}function li(n,t){n.input.lastSelectionOrigin=t,n.input.lastSelectionTime=Date.now()}function d2(n){n.domObserver.stop();for(let t in n.input.eventHandlers)n.dom.removeEventListener(t,n.input.eventHandlers[t]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function fm(n){n.someProp("handleDOMEvents",t=>{for(let e in t)n.input.eventHandlers[e]||n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>Xm(n,r))})}function Xm(n,t){return n.someProp("handleDOMEvents",e=>{let r=e[t.type];return r?r(n,t)||t.defaultPrevented:!1})}function h2(n,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let e=t.target;e!=n.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(t))return!1;return!0}function p2(n,t){!Xm(n,t)&&qe[t.type]&&(n.editable||!(t.type in Ve))&&qe[t.type](n,t)}Ve.keydown=(n,t)=>{let e=t;if(n.input.shiftKey=e.keyCode==16||e.shiftKey,!hS(n,e)&&(n.input.lastKeyCode=e.keyCode,n.input.lastKeyCodeTime=Date.now(),!(br&&ze&&e.keyCode==13)))if(e.keyCode!=229&&n.domObserver.forceFlush(),vo&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",i=>i(n,Hi(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,e))||n2(n,e)?e.preventDefault():li(n,"key")};Ve.keyup=(n,t)=>{t.keyCode==16&&(n.input.shiftKey=!1)};Ve.keypress=(n,t)=>{let e=t;if(hS(n,e)||!e.charCode||e.ctrlKey&&!e.altKey||Mn&&e.metaKey)return;if(n.someProp("handleKeyPress",i=>i(n,e))){e.preventDefault();return}let r=n.state.selection;if(!(r instanceof ft)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(e.charCode),o=()=>n.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!n.someProp("handleTextInput",a=>a(n,r.$from.pos,r.$to.pos,i,o))&&n.dispatch(o()),e.preventDefault()}};function Mf(n){return{left:n.clientX,top:n.clientY}}function m2(n,t){let e=t.x-n.clientX,r=t.y-n.clientY;return e*e+r*r<100}function Zm(n,t,e,r,i){if(r==-1)return!1;let o=n.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(n.someProp(t,c=>a>o.depth?c(n,e,o.nodeAfter,o.before(a),i,!0):c(n,e,o.node(a),o.before(a),i,!1)))return!0;return!1}function fo(n,t,e){if(n.focused||n.focus(),n.state.selection.eq(t))return;let r=n.state.tr.setSelection(t);r.setMeta("pointer",!0),n.dispatch(r)}function g2(n,t){if(t==-1)return!1;let e=n.state.doc.resolve(t),r=e.nodeAfter;return r&&r.isAtom&&ct.isSelectable(r)?(fo(n,new ct(e)),!0):!1}function y2(n,t){if(t==-1)return!1;let e=n.state.selection,r,i;e instanceof ct&&(r=e.node);let o=n.state.doc.resolve(t);for(let a=o.depth+1;a>0;a--){let c=a>o.depth?o.nodeAfter:o.node(a);if(ct.isSelectable(c)){r&&e.$from.depth>0&&a>=e.$from.depth&&o.before(e.$from.depth+1)==e.$from.pos?i=o.before(e.$from.depth):i=o.before(a);break}}return i!=null?(fo(n,ct.create(n.state.doc,i)),!0):!1}function v2(n,t,e,r,i){return Zm(n,"handleClickOn",t,e,r)||n.someProp("handleClick",o=>o(n,t,r))||(i?y2(n,e):g2(n,e))}function b2(n,t,e,r){return Zm(n,"handleDoubleClickOn",t,e,r)||n.someProp("handleDoubleClick",i=>i(n,t,r))}function k2(n,t,e,r){return Zm(n,"handleTripleClickOn",t,e,r)||n.someProp("handleTripleClick",i=>i(n,t,r))||w2(n,e,r)}function w2(n,t,e){if(e.button!=0)return!1;let r=n.state.doc;if(t==-1)return r.inlineContent?(fo(n,ft.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o),c=i.before(o);if(a.inlineContent)fo(n,ft.create(r,c+1,c+1+a.content.size));else if(ct.isSelectable(a))fo(n,ct.create(r,c));else continue;return!0}}function Wm(n){return Cu(n)}const dS=Mn?"metaKey":"ctrlKey";qe.mousedown=(n,t)=>{let e=t;n.input.shiftKey=e.shiftKey;let r=Wm(n),i=Date.now(),o="singleClick";i-n.input.lastClick.time<500&&m2(e,n.input.lastClick)&&!e[dS]&&n.input.lastClick.button==e.button&&(n.input.lastClick.type=="singleClick"?o="doubleClick":n.input.lastClick.type=="doubleClick"&&(o="tripleClick")),n.input.lastClick={time:i,x:e.clientX,y:e.clientY,type:o,button:e.button};let a=n.posAtCoords(Mf(e));a&&(o=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new x2(n,a,e,!!r)):(o=="doubleClick"?b2:k2)(n,a.pos,a.inside,e)?e.preventDefault():li(n,"pointer"))};class x2{constructor(t,e,r,i){this.view=t,this.pos=e,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[dS],this.allowDefault=r.shiftKey;let o,a;if(e.inside>-1)o=t.state.doc.nodeAt(e.inside),a=e.inside;else{let p=t.state.doc.resolve(e.pos);o=p.parent,a=p.depth?p.before():0}const c=i?null:r.target,f=c?t.docView.nearestDesc(c,!0):null;this.target=f&&f.nodeDOM.nodeType==1?f.nodeDOM:null;let{selection:h}=t.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||h instanceof ct&&h.from<=a&&h.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&En&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),li(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xr(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Mf(t))),this.updateAllowDefault(t),this.allowDefault||!e?li(this.view,"pointer"):v2(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||Ue&&this.mightDrag&&!this.mightDrag.node.isAtom||ze&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(fo(this.view,ut.near(this.view.state.doc.resolve(e.pos))),t.preventDefault()):li(this.view,"pointer")}move(t){this.updateAllowDefault(t),li(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}qe.touchstart=n=>{n.input.lastTouch=Date.now(),Wm(n),li(n,"pointer")};qe.touchmove=n=>{n.input.lastTouch=Date.now(),li(n,"pointer")};qe.contextmenu=n=>Wm(n);function hS(n,t){return n.composing?!0:Ue&&Math.abs(t.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const S2=br?5e3:-1;Ve.compositionstart=Ve.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:t}=n,e=t.selection.$to;if(t.selection instanceof ft&&(t.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||e.marks(),Cu(n,!0),n.markCursor=null;else if(Cu(n,!t.selection.empty),En&&t.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let r=n.domSelectionRange();for(let i=r.focusNode,o=r.focusOffset;i&&i.nodeType==1&&o!=0;){let a=o<0?i.lastChild:i.childNodes[o-1];if(!a)break;if(a.nodeType==3){let c=n.domSelection();c&&c.collapse(a,a.nodeValue.length);break}else i=a,o=-1}}n.input.composing=!0}pS(n,S2)};Ve.compositionend=(n,t)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=t.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,pS(n,20))};function pS(n,t){clearTimeout(n.input.composingTimeout),t>-1&&(n.input.composingTimeout=setTimeout(()=>Cu(n),t))}function mS(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=T2());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function M2(n){let t=n.domSelectionRange();if(!t.focusNode)return null;let e=gN(t.focusNode,t.focusOffset),r=yN(t.focusNode,t.focusOffset);if(e&&r&&e!=r){let i=r.pmViewDesc,o=n.domObserver.lastChangedTextNode;if(e==o||r==o)return o;if(!i||!i.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let a=e.pmViewDesc;if(!(!a||!a.isText(e.nodeValue)))return r}}return e||r}function T2(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Cu(n,t=!1){if(!(br&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),mS(n),t||n.docView&&n.docView.dirty){let e=Ym(n),r=n.state.selection;return e&&!e.eq(r)?n.dispatch(n.state.tr.setSelection(e)):(n.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function E2(n,t){if(!n.dom.parentNode)return;let e=n.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(t),e.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),n.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),n.focus()},50)}const ua=Ze&&ci<15||vo&&xN<604;qe.copy=Ve.cut=(n,t)=>{let e=t,r=n.state.selection,i=e.type=="cut";if(r.empty)return;let o=ua?null:e.clipboardData,a=r.content(),{dom:c,text:f}=Qm(n,a);o?(e.preventDefault(),o.clearData(),o.setData("text/html",c.innerHTML),o.setData("text/plain",f)):E2(n,c),i&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function C2(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function A2(n,t){if(!n.dom.parentNode)return;let e=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),e?fa(n,r.value,null,i,t):fa(n,r.textContent,r.innerHTML,i,t)},50)}function fa(n,t,e,r,i){let o=oS(n,t,e,r,n.state.selection.$from);if(n.someProp("handlePaste",f=>f(n,i,o||W.empty)))return!0;if(!o)return!1;let a=C2(o),c=a?n.state.tr.replaceSelectionWith(a,r):n.state.tr.replaceSelection(o);return n.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function gS(n){let t=n.getData("text/plain")||n.getData("Text");if(t)return t;let e=n.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}Ve.paste=(n,t)=>{let e=t;if(n.composing&&!br)return;let r=ua?null:e.clipboardData,i=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&fa(n,gS(r),r.getData("text/html"),i,e)?e.preventDefault():A2(n,e)};class yS{constructor(t,e,r){this.slice=t,this.move=e,this.node=r}}const O2=Mn?"altKey":"ctrlKey";function vS(n,t){return n.someProp("dragCopies",r=>!r(t))??!t[O2]}qe.dragstart=(n,t)=>{let e=t,r=n.input.mouseDown;if(r&&r.done(),!e.dataTransfer)return;let i=n.state.selection,o=i.empty?null:n.posAtCoords(Mf(e)),a;if(!(o&&o.pos>=i.from&&o.pos<=(i instanceof ct?i.to-1:i.to))){if(r&&r.mightDrag)a=ct.create(n.state.doc,r.mightDrag.pos);else if(e.target&&e.target.nodeType==1){let g=n.docView.nearestDesc(e.target,!0);g&&g.node.type.spec.draggable&&g!=n.docView&&(a=ct.create(n.state.doc,g.posBefore))}}let c=(a||n.state.selection).content(),{dom:f,text:h,slice:p}=Qm(n,c);(!e.dataTransfer.files.length||!ze||Vx>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(ua?"Text":"text/html",f.innerHTML),e.dataTransfer.effectAllowed="copyMove",ua||e.dataTransfer.setData("text/plain",h),n.dragging=new yS(p,vS(n,e),a)};qe.dragend=n=>{let t=n.dragging;window.setTimeout(()=>{n.dragging==t&&(n.dragging=null)},50)};Ve.dragover=Ve.dragenter=(n,t)=>t.preventDefault();Ve.drop=(n,t)=>{let e=t,r=n.dragging;if(n.dragging=null,!e.dataTransfer)return;let i=n.posAtCoords(Mf(e));if(!i)return;let o=n.state.doc.resolve(i.pos),a=r&&r.slice;a?n.someProp("transformPasted",k=>{a=k(a,n,!1)}):a=oS(n,gS(e.dataTransfer),ua?null:e.dataTransfer.getData("text/html"),!1,o);let c=!!(r&&vS(n,e));if(n.someProp("handleDrop",k=>k(n,e,a||W.empty,c))){e.preventDefault();return}if(!a)return;e.preventDefault();let f=a?Ax(n.state.doc,o.pos,a):o.pos;f==null&&(f=o.pos);let h=n.state.tr;if(c){let{node:k}=r;k?k.replace(h):h.deleteSelection()}let p=h.mapping.map(f),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,y=h.doc;if(g?h.replaceRangeWith(p,p,a.content.firstChild):h.replaceRange(p,p,a),h.doc.eq(y))return;let b=h.doc.resolve(p);if(g&&ct.isSelectable(a.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(a.content.firstChild))h.setSelection(new ct(b));else{let k=h.mapping.map(f);h.mapping.maps[h.mapping.maps.length-1].forEach((x,S,T,D)=>k=D),h.setSelection(Fm(n,b,h.doc.resolve(k)))}n.focus(),n.dispatch(h.setMeta("uiEvent","drop"))};qe.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&xr(n)},20))};qe.blur=(n,t)=>{let e=t;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),e.relatedTarget&&n.dom.contains(e.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};qe.beforeinput=(n,t)=>{if(ze&&br&&t.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:e}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=e||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,Hi(8,"Backspace")))))return;let{$cursor:r}=n.state.selection;r&&r.pos>0&&n.dispatch(n.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let n in Ve)qe[n]=Ve[n];function da(n,t){if(n==t)return!0;for(let e in n)if(n[e]!==t[e])return!1;for(let e in t)if(!(e in n))return!1;return!0}class Au{constructor(t,e){this.toDOM=t,this.spec=e||Yi,this.side=this.spec.side||0}map(t,e,r,i){let{pos:o,deleted:a}=t.mapResult(e.from+i,this.side<0?-1:1);return a?null:new In(o-r,o-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Au&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&da(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}let Ql=class dm{constructor(t,e){this.attrs=t,this.spec=e||Yi}map(t,e,r,i){let o=t.map(e.from+i,this.spec.inclusiveStart?-1:1)-r,a=t.map(e.to+i,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new In(o,a,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof dm&&da(this.attrs,t.attrs)&&da(this.spec,t.spec)}static is(t){return t.type instanceof dm}destroy(){}};class tg{constructor(t,e){this.attrs=t,this.spec=e||Yi}map(t,e,r,i){let o=t.mapResult(e.from+i,1);if(o.deleted)return null;let a=t.mapResult(e.to+i,-1);return a.deleted||a.pos<=o.pos?null:new In(o.pos-r,a.pos-r,this)}valid(t,e){let{index:r,offset:i}=t.content.findIndex(e.from),o;return i==e.from&&!(o=t.child(r)).isText&&i+o.nodeSize==e.to}eq(t){return this==t||t instanceof tg&&da(this.attrs,t.attrs)&&da(this.spec,t.spec)}destroy(){}}let In=class jl{constructor(t,e,r){this.from=t,this.to=e,this.type=r}copy(t,e){return new jl(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,r){return this.type.map(t,this,e,r)}static widget(t,e,r){return new jl(t,t,new Au(e,r))}static inline(t,e,r,i){return new jl(t,e,new Ql(r,i))}static node(t,e,r,i){return new jl(t,e,new tg(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ql}get widget(){return this.type instanceof Au}};const eo=[],Yi={};let be=class Wr{constructor(t,e){this.local=t.length?t:eo,this.children=e.length?e:eo}static create(t,e){return e.length?Ou(e,t,0,Yi):Ne}find(t,e,r){let i=[];return this.findInner(t??0,e??1e9,i,0,r),i}findInner(t,e,r,i,o){for(let a=0;a<this.local.length;a++){let c=this.local[a];c.from<=e&&c.to>=t&&(!o||o(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){let c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,r,i+c,o)}}map(t,e,r){return this==Ne||t.maps.length==0?this:this.mapInner(t,e,0,0,r||Yi)}mapInner(t,e,r,i,o){let a;for(let c=0;c<this.local.length;c++){let f=this.local[c].map(t,r,i);f&&f.type.valid(e,f)?(a||(a=[])).push(f):o.onRemove&&o.onRemove(this.local[c].spec)}return this.children.length?R2(this.children,a||[],t,e,r,i,o):a?new Wr(a.sort(Fi),eo):Ne}add(t,e){return e.length?this==Ne?Wr.create(t,e):this.addInner(t,e,0):this}addInner(t,e,r){let i,o=0;t.forEach((c,f)=>{let h=f+r,p;if(p=wS(e,c,h)){for(i||(i=this.children.slice());o<i.length&&i[o]<f;)o+=3;i[o]==f?i[o+2]=i[o+2].addInner(c,p,h+1):i.splice(o,0,f,f+c.nodeSize,Ou(p,c,h+1,Yi)),o+=3}});let a=kS(o?xS(e):e,-r);for(let c=0;c<a.length;c++)a[c].type.valid(t,a[c])||a.splice(c--,1);return new Wr(a.length?this.local.concat(a).sort(Fi):this.local,i||this.children)}remove(t){return t.length==0||this==Ne?this:this.removeInner(t,0)}removeInner(t,e){let r=this.children,i=this.local;for(let o=0;o<r.length;o+=3){let a,c=r[o]+e,f=r[o+1]+e;for(let p=0,g;p<t.length;p++)(g=t[p])&&g.from>c&&g.to<f&&(t[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let h=r[o+2].removeInner(a,c+1);h!=Ne?r[o+2]=h:(r.splice(o,3),o-=3)}if(i.length){for(let o=0,a;o<t.length;o++)if(a=t[o])for(let c=0;c<i.length;c++)i[c].eq(a,e)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Wr(i,r):Ne}forChild(t,e){if(this==Ne)return this;if(e.isLeaf)return Wr.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=t){this.children[c]==t&&(r=this.children[c+2]);break}let o=t+1,a=o+e.content.size;for(let c=0;c<this.local.length;c++){let f=this.local[c];if(f.from<a&&f.to>o&&f.type instanceof Ql){let h=Math.max(o,f.from)-o,p=Math.min(a,f.to)-o;h<p&&(i||(i=[])).push(f.copy(h,p))}}if(i){let c=new Wr(i.sort(Fi),eo);return r?new bS([c,r]):c}return r||Ne}eq(t){if(this==t)return!0;if(!(t instanceof Wr)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return eg(this.localsInner(t))}localsInner(t){if(this==Ne)return eo;if(t.inlineContent||!this.local.some(Ql.is))return this.local;let e=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ql||e.push(this.local[r]);return e}forEachSet(t){t(this)}};be.empty=new be([],[]);be.removeOverlap=eg;const Ne=be.empty;let bS=class no{constructor(t){this.members=t}map(t,e){const r=this.members.map(i=>i.map(t,e,Yi));return no.from(r)}forChild(t,e){if(e.isLeaf)return be.empty;let r=[];for(let i=0;i<this.members.length;i++){let o=this.members[i].forChild(t,e);o!=Ne&&(o instanceof no?r=r.concat(o.members):r.push(o))}return no.from(r)}eq(t){if(!(t instanceof no)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,r=!0;for(let i=0;i<this.members.length;i++){let o=this.members[i].localsInner(t);if(o.length)if(!e)e=o;else{r&&(e=e.slice(),r=!1);for(let a=0;a<o.length;a++)e.push(o[a])}}return e?eg(r?e:e.sort(Fi)):eo}static from(t){switch(t.length){case 0:return Ne;case 1:return t[0];default:return new no(t.every(e=>e instanceof be)?t:t.reduce((e,r)=>e.concat(r instanceof be?r:r.members),[]))}}forEachSet(t){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(t)}};function R2(n,t,e,r,i,o,a){let c=n.slice();for(let h=0,p=o;h<e.maps.length;h++){let g=0;e.maps[h].forEach((y,b,k,x)=>{let S=x-k-(b-y);for(let T=0;T<c.length;T+=3){let D=c[T+1];if(D<0||y>D+p-g)continue;let H=c[T]+p-g;b>=H?c[T+1]=y<=H?-2:-1:y>=p&&S&&(c[T]+=S,c[T+1]+=S)}g+=S}),p=e.maps[h].map(p,-1)}let f=!1;for(let h=0;h<c.length;h+=3)if(c[h+1]<0){if(c[h+1]==-2){f=!0,c[h+1]=-1;continue}let p=e.map(n[h]+o),g=p-i;if(g<0||g>=r.content.size){f=!0;continue}let y=e.map(n[h+1]+o,-1),b=y-i,{index:k,offset:x}=r.content.findIndex(g),S=r.maybeChild(k);if(S&&x==g&&x+S.nodeSize==b){let T=c[h+2].mapInner(e,S,p+1,n[h]+o+1,a);T!=Ne?(c[h]=g,c[h+1]=b,c[h+2]=T):(c[h+1]=-2,f=!0)}else f=!0}if(f){let h=N2(c,n,t,e,i,o,a),p=Ou(h,r,0,a);t=p.local;for(let g=0;g<c.length;g+=3)c[g+1]<0&&(c.splice(g,3),g-=3);for(let g=0,y=0;g<p.children.length;g+=3){let b=p.children[g];for(;y<c.length&&c[y]<b;)y+=3;c.splice(y,0,p.children[g],p.children[g+1],p.children[g+2])}}return new be(t.sort(Fi),c)}function kS(n,t){if(!t||!n.length)return n;let e=[];for(let r=0;r<n.length;r++){let i=n[r];e.push(new In(i.from+t,i.to+t,i.type))}return e}function N2(n,t,e,r,i,o,a){function c(f,h){for(let p=0;p<f.local.length;p++){let g=f.local[p].map(r,i,h);g?e.push(g):a.onRemove&&a.onRemove(f.local[p].spec)}for(let p=0;p<f.children.length;p+=3)c(f.children[p+2],f.children[p]+h+1)}for(let f=0;f<n.length;f+=3)n[f+1]==-1&&c(n[f+2],t[f]+o+1);return e}function wS(n,t,e){if(t.isLeaf)return null;let r=e+t.nodeSize,i=null;for(let o=0,a;o<n.length;o++)(a=n[o])&&a.from>e&&a.to<r&&((i||(i=[])).push(a),n[o]=null);return i}function xS(n){let t=[];for(let e=0;e<n.length;e++)n[e]!=null&&t.push(n[e]);return t}function Ou(n,t,e,r){let i=[],o=!1;t.forEach((c,f)=>{let h=wS(n,c,f+e);if(h){o=!0;let p=Ou(h,c,e+f+1,r);p!=Ne&&i.push(f,f+c.nodeSize,p)}});let a=kS(o?xS(n):n,-e).sort(Fi);for(let c=0;c<a.length;c++)a[c].type.valid(t,a[c])||(r.onRemove&&r.onRemove(a[c].spec),a.splice(c--,1));return a.length||i.length?new be(a,i):Ne}function Fi(n,t){return n.from-t.from||n.to-t.to}function eg(n){let t=n;for(let e=0;e<t.length-1;e++){let r=t[e];if(r.from!=r.to)for(let i=e+1;i<t.length;i++){let o=t[i];if(o.from==r.from){o.to!=r.to&&(t==n&&(t=n.slice()),t[i]=o.copy(o.from,r.to),nk(t,i+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(t==n&&(t=n.slice()),t[e]=r.copy(r.from,o.from),nk(t,i,r.copy(o.from,r.to)));break}}}return t}function nk(n,t,e){for(;t<n.length&&Fi(e,n[t])>0;)t++;n.splice(t,0,e)}function Mp(n){let t=[];return n.someProp("decorations",e=>{let r=e(n.state);r&&r!=Ne&&t.push(r)}),n.cursorWrapper&&t.push(be.create(n.state.doc,[n.cursorWrapper.deco])),bS.from(t)}const z2={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},D2=Ze&&ci<=11;class B2{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class L2{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new B2,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ze&&ci<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),D2&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,z2)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Y1(this.view)){if(this.suppressingSelectionUpdates)return xr(this.view);if(Ze&&ci<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&ns(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e=new Set,r;for(let o=t.focusNode;o;o=yo(o))e.add(o);for(let o=t.anchorNode;o;o=yo(o))if(e.has(o)){r=o;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Y1(t)&&!this.ignoreSelectionChange(r),o=-1,a=-1,c=!1,f=[];if(t.editable)for(let p=0;p<e.length;p++){let g=this.registerMutation(e[p],f);g&&(o=o<0?g.from:Math.min(g.from,o),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(c=!0))}if(En&&f.length){let p=f.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,y]=p;g.parentNode&&g.parentNode.parentNode==y.parentNode?y.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let y of p){let b=y.parentNode;b&&b.nodeName=="LI"&&(!g||j2(t,g)!=b)&&y.remove()}}}let h=null;o<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&xf(r)&&(h=Ym(t))&&h.eq(ut.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,xr(t),this.currentSelection.set(r),t.scrollToSelection()):(o>-1||i)&&(o>-1&&(t.docView.markDirty(o,a),H2(t)),this.handleDOMChange(o,a,c,f),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||xr(t),this.currentSelection.set(r))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let p=0;p<t.addedNodes.length;p++){let g=t.addedNodes[p];e.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,o=t.nextSibling;if(Ze&&ci<=11&&t.addedNodes.length)for(let p=0;p<t.addedNodes.length;p++){let{previousSibling:g,nextSibling:y}=t.addedNodes[p];(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(i=g),(!y||Array.prototype.indexOf.call(t.addedNodes,y)<0)&&(o=y)}let a=i&&i.parentNode==t.target?Ee(i)+1:0,c=r.localPosFromDOM(t.target,a,-1),f=o&&o.parentNode==t.target?Ee(o):t.target.childNodes.length,h=r.localPosFromDOM(t.target,f,1);return{from:c,to:h}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let rk=new WeakMap,ik=!1;function H2(n){if(!rk.has(n)&&(rk.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=En,ik)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),ik=!0}}function sk(n,t){let e=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,a=n.domAtPos(n.state.selection.anchor);return ns(a.node,a.offset,i,o)&&([e,r,i,o]=[i,o,e,r]),{anchorNode:e,anchorOffset:r,focusNode:i,focusOffset:o}}function $2(n,t){if(t.getComposedRanges){let i=t.getComposedRanges(n.root)[0];if(i)return sk(n,i)}let e;function r(i){i.preventDefault(),i.stopImmediatePropagation(),e=i.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),e?sk(n,e):null}function j2(n,t){for(let e=t.parentNode;e&&e!=n.dom;e=e.parentNode){let r=n.docView.nearestDesc(e,!0);if(r&&r.node.isBlock)return e}return null}function I2(n,t,e){let{node:r,fromOffset:i,toOffset:o,from:a,to:c}=n.docView.parseRange(t,e),f=n.domSelectionRange(),h,p=f.anchorNode;if(p&&n.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],xf(f)||h.push({node:f.focusNode,offset:f.focusOffset})),ze&&n.input.lastKeyCode===8)for(let S=o;S>i;S--){let T=r.childNodes[S-1],D=T.pmViewDesc;if(T.nodeName=="BR"&&!D){o=S;break}if(!D||D.size)break}let g=n.state.doc,y=n.someProp("domParser")||Gl.fromSchema(n.state.schema),b=g.resolve(a),k=null,x=y.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:o,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:_2,context:b});if(h&&h[0].pos!=null){let S=h[0].pos,T=h[1]&&h[1].pos;T==null&&(T=S),k={anchor:S+a,head:T+a}}return{doc:x,sel:k,from:a,to:c}}function _2(n){let t=n.pmViewDesc;if(t)return t.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ue&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(n.parentNode.lastChild==n||Ue&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const U2=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function q2(n,t,e,r,i){let o=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,t<0){let q=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,Y=Ym(n,q);if(Y&&!n.state.selection.eq(Y)){if(ze&&br&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",Qt=>Qt(n,Hi(13,"Enter"))))return;let nt=n.state.tr.setSelection(Y);q=="pointer"?nt.setMeta("pointer",!0):q=="key"&&nt.scrollIntoView(),o&&nt.setMeta("composition",o),n.dispatch(nt)}return}let a=n.state.doc.resolve(t),c=a.sharedDepth(e);t=a.before(c+1),e=n.state.doc.resolve(e).after(c+1);let f=n.state.selection,h=I2(n,t,e),p=n.state.doc,g=p.slice(h.from,h.to),y,b;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(y=n.state.selection.to,b="end"):(y=n.state.selection.from,b="start"),n.input.lastKeyCode=null;let k=J2(g.content,h.doc.content,h.from,y,b);if(k&&n.input.domChangeCount++,(vo&&n.input.lastIOSEnter>Date.now()-225||br)&&i.some(q=>q.nodeType==1&&!U2.test(q.nodeName))&&(!k||k.endA>=k.endB)&&n.someProp("handleKeyDown",q=>q(n,Hi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!k)if(r&&f instanceof ft&&!f.empty&&f.$head.sameParent(f.$anchor)&&!n.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))k={start:f.from,endA:f.to,endB:f.to};else{if(h.sel){let q=ok(n,n.state.doc,h.sel);if(q&&!q.eq(n.state.selection)){let Y=n.state.tr.setSelection(q);o&&Y.setMeta("composition",o),n.dispatch(Y)}}return}n.state.selection.from<n.state.selection.to&&k.start==k.endB&&n.state.selection instanceof ft&&(k.start>n.state.selection.from&&k.start<=n.state.selection.from+2&&n.state.selection.from>=h.from?k.start=n.state.selection.from:k.endA<n.state.selection.to&&k.endA>=n.state.selection.to-2&&n.state.selection.to<=h.to&&(k.endB+=n.state.selection.to-k.endA,k.endA=n.state.selection.to)),Ze&&ci<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>h.from&&h.doc.textBetween(k.start-h.from-1,k.start-h.from+1)==" "&&(k.start--,k.endA--,k.endB--);let x=h.doc.resolveNoCache(k.start-h.from),S=h.doc.resolveNoCache(k.endB-h.from),T=p.resolve(k.start),D=x.sameParent(S)&&x.parent.inlineContent&&T.end()>=k.endA;if((vo&&n.input.lastIOSEnter>Date.now()-225&&(!D||i.some(q=>q.nodeName=="DIV"||q.nodeName=="P"))||!D&&x.pos<h.doc.content.size&&(!x.sameParent(S)||!x.parent.inlineContent)&&x.pos<S.pos&&!/\S/.test(h.doc.textBetween(x.pos,S.pos,"","")))&&n.someProp("handleKeyDown",q=>q(n,Hi(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>k.start&&P2(p,k.start,k.endA,x,S)&&n.someProp("handleKeyDown",q=>q(n,Hi(8,"Backspace")))){br&&ze&&n.domObserver.suppressSelectionUpdates();return}ze&&k.endB==k.start&&(n.input.lastChromeDelete=Date.now()),br&&!D&&x.start()!=S.start()&&S.parentOffset==0&&x.depth==S.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==k.endA&&(k.endB-=2,S=h.doc.resolveNoCache(k.endB-h.from),setTimeout(()=>{n.someProp("handleKeyDown",function(q){return q(n,Hi(13,"Enter"))})},20));let H=k.start,V=k.endA,L=q=>{let Y=q||n.state.tr.replace(H,V,h.doc.slice(k.start-h.from,k.endB-h.from));if(h.sel){let nt=ok(n,Y.doc,h.sel);nt&&!(ze&&n.composing&&nt.empty&&(k.start!=k.endB||n.input.lastChromeDelete<Date.now()-100)&&(nt.head==H||nt.head==Y.mapping.map(V)-1)||Ze&&nt.empty&&nt.head==H)&&Y.setSelection(nt)}return o&&Y.setMeta("composition",o),Y.scrollIntoView()},I;if(D)if(x.pos==S.pos){Ze&&ci<=11&&x.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>xr(n),20));let q=L(n.state.tr.delete(H,V)),Y=p.resolve(k.start).marksAcross(p.resolve(k.endA));Y&&q.ensureMarks(Y),n.dispatch(q)}else if(k.endA==k.endB&&(I=V2(x.parent.content.cut(x.parentOffset,S.parentOffset),T.parent.content.cut(T.parentOffset,k.endA-T.start())))){let q=L(n.state.tr);I.type=="add"?q.addMark(H,V,I.mark):q.removeMark(H,V,I.mark),n.dispatch(q)}else if(x.parent.child(x.index()).isText&&x.index()==S.index()-(S.textOffset?0:1)){let q=x.parent.textBetween(x.parentOffset,S.parentOffset),Y=()=>L(n.state.tr.insertText(q,H,V));n.someProp("handleTextInput",nt=>nt(n,H,V,q,Y))||n.dispatch(Y())}else n.dispatch(L());else n.dispatch(L())}function ok(n,t,e){return Math.max(e.anchor,e.head)>t.content.size?null:Fm(n,t.resolve(e.anchor),t.resolve(e.head))}function V2(n,t){let e=n.firstChild.marks,r=t.firstChild.marks,i=e,o=r,a,c,f;for(let p=0;p<r.length;p++)i=r[p].removeFromSet(i);for(let p=0;p<e.length;p++)o=e[p].removeFromSet(o);if(i.length==1&&o.length==0)c=i[0],a="add",f=p=>p.mark(c.addToSet(p.marks));else if(i.length==0&&o.length==1)c=o[0],a="remove",f=p=>p.mark(c.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<t.childCount;p++)h.push(f(t.child(p)));if(K.from(h).eq(n))return{mark:c,type:a}}function P2(n,t,e,r,i){if(e-t<=i.pos-r.pos||Tp(r,!0,!1)<i.pos)return!1;let o=n.resolve(t);if(!r.parent.isTextblock){let c=o.nodeAfter;return c!=null&&e==t+c.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=n.resolve(Tp(o,!0,!0));return!a.parent.isTextblock||a.pos>e||Tp(a,!0,!1)<e?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Tp(n,t,e){let r=n.depth,i=t?n.end():n.pos;for(;r>0&&(t||n.indexAfter(r)==n.node(r).childCount);)r--,i++,t=!1;if(e){let o=n.node(r).maybeChild(n.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,i++}return i}function J2(n,t,e,r,i){let o=n.findDiffStart(t,e);if(o==null)return null;let{a,b:c}=n.findDiffEnd(t,e+n.size,e+t.size);if(i=="end"){let f=Math.max(0,o-Math.min(a,c));r-=a+f-o}if(a<o&&n.size<t.size){let f=r<=o&&r>=a?o-r:0;o-=f,o&&o<t.size&&lk(t.textBetween(o-1,o+1))&&(o+=f?1:-1),c=o+(c-a),a=o}else if(c<o){let f=r<=o&&r>=c?o-r:0;o-=f,o&&o<n.size&&lk(n.textBetween(o-1,o+1))&&(o+=f?1:-1),a=o+(a-c),c=o}return{start:o,endA:a,endB:c}}function lk(n){if(n.length!=2)return!1;let t=n.charCodeAt(0),e=n.charCodeAt(1);return t>=56320&&t<=57343&&e>=55296&&e<=56319}class SS{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new u2,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(dk),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=uk(this),ck(this),this.nodeViews=fk(this),this.docView=q1(this.state.doc,ak(this),Mp(this),this.dom,this),this.domObserver=new L2(this,(r,i,o,a)=>q2(this,r,i,o,a)),this.domObserver.start(),f2(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&fm(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(dk),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let r in this._props)e[r]=this._props[r];e.state=this.state;for(let r in t)e[r]=t[r];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var r;let i=this.state,o=!1,a=!1;t.storedMarks&&this.composing&&(mS(this),a=!0),this.state=t;let c=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(c||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let b=fk(this);K2(b,this.nodeViews)&&(this.nodeViews=b,o=!0)}(c||e.handleDOMEvents!=this._props.handleDOMEvents)&&fm(this),this.editable=uk(this),ck(this);let f=Mp(this),h=ak(this),p=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=o||!this.docView.matchesNode(t.doc,h,f);(g||!t.selection.eq(i.selection))&&(a=!0);let y=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&TN(this);if(a){this.domObserver.stop();let b=g&&(Ze||ze)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&G2(i.selection,t.selection);if(g){let k=ze?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=M2(this)),(o||!this.docView.update(t.doc,h,f,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=q1(t.doc,h,f,this.dom,this)),k&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&FN(this))?xr(this,b):(rS(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():y&&EN(y)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))&&!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof ct){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&H1(this,e.getBoundingClientRect(),t)}else H1(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let r=this.directPlugins[e];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let r=this.state.plugins[e];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let r=this.pluginViews[e];r.update&&r.update(this,t)}}updateDraggedNode(t,e){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let o=r.from+(this.state.doc.content.size-e.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(i=o)}this.dragging=new yS(t.slice,t.move,i<0?void 0:ct.create(this.state.doc,i))}someProp(t,e){let r=this._props&&this._props[t],i;if(r!=null&&(i=e?e(r):r))return i;for(let a=0;a<this.directPlugins.length;a++){let c=this.directPlugins[a].props[t];if(c!=null&&(i=e?e(c):c))return i}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let c=o[a].props[t];if(c!=null&&(i=e?e(c):c))return i}}hasFocus(){if(Ze){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&CN(this.dom),xr(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return t||document}updateRoot(){this._root=null}posAtCoords(t){return zN(this,t)}coordsAtPos(t,e=1){return Yx(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,r=-1){let i=this.docView.posFromDOM(t,e,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,e){return $N(this,e||this.state,t)}pasteHTML(t,e){return fa(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return fa(this,t,null,!0,e||new ClipboardEvent("paste"))}serializeForClipboard(t){return Qm(this,t)}destroy(){this.docView&&(d2(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,pN())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return p2(this,t)}domSelectionRange(){let t=this.domSelection();return t?Ue&&this.root.nodeType===11&&bN(this.dom.ownerDocument)==this.dom&&$2(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}SS.prototype.dispatch=function(n){let t=this._props.dispatchTransaction;t?t.call(this,n):this.updateState(this.state.apply(n))};function ak(n){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(n.editable),n.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(n.state)),e)for(let r in e)r=="class"?t.class+=" "+e[r]:r=="style"?t.style=(t.style?t.style+";":"")+e[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(e[r]))}),t.translate||(t.translate="no"),[In.node(0,n.state.doc.content.size,t)]}function ck(n){if(n.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),n.cursorWrapper={dom:t,deco:In.widget(n.state.selection.from,t,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function uk(n){return!n.someProp("editable",t=>t(n.state)===!1)}function G2(n,t){let e=Math.min(n.$anchor.sharedDepth(n.head),t.$anchor.sharedDepth(t.head));return n.$anchor.start(e)!=t.$anchor.start(e)}function fk(n){let t=Object.create(null);function e(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return n.someProp("nodeViews",e),n.someProp("markViews",e),t}function K2(n,t){let e=0,r=0;for(let i in n){if(n[i]!=t[i])return!0;e++}for(let i in t)r++;return e!=r}function dk(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ui={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ru={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Y2=typeof navigator<"u"&&/Mac/.test(navigator.platform),F2=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ce=0;Ce<10;Ce++)ui[48+Ce]=ui[96+Ce]=String(Ce);for(var Ce=1;Ce<=24;Ce++)ui[Ce+111]="F"+Ce;for(var Ce=65;Ce<=90;Ce++)ui[Ce]=String.fromCharCode(Ce+32),Ru[Ce]=String.fromCharCode(Ce);for(var Ep in ui)Ru.hasOwnProperty(Ep)||(Ru[Ep]=ui[Ep]);function Q2(n){var t=Y2&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||F2&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",e=!t&&n.key||(n.shiftKey?Ru:ui)[n.keyCode]||n.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}const X2=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Z2(n){let t=n.split(/-(?!$)/),e=t[t.length-1];e=="Space"&&(e=" ");let r,i,o,a;for(let c=0;c<t.length-1;c++){let f=t[c];if(/^(cmd|meta|m)$/i.test(f))a=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))X2?a=!0:i=!0;else throw new Error("Unrecognized modifier name: "+f)}return r&&(e="Alt-"+e),i&&(e="Ctrl-"+e),a&&(e="Meta-"+e),o&&(e="Shift-"+e),e}function W2(n){let t=Object.create(null);for(let e in n)t[Z2(e)]=n[e];return t}function Cp(n,t,e=!0){return t.altKey&&(n="Alt-"+n),t.ctrlKey&&(n="Ctrl-"+n),t.metaKey&&(n="Meta-"+n),e&&t.shiftKey&&(n="Shift-"+n),n}function tz(n){return new Et({props:{handleKeyDown:MS(n)}})}function MS(n){let t=W2(n);return function(e,r){let i=Q2(r),o,a=t[Cp(i,r)];if(a&&a(e.state,e.dispatch,e))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=t[Cp(i,r,!1)];if(c&&c(e.state,e.dispatch,e))return!0}if((r.shiftKey||r.altKey||r.metaKey||i.charCodeAt(0)>127)&&(o=ui[r.keyCode])&&o!=i){let c=t[Cp(o,r)];if(c&&c(e.state,e.dispatch,e))return!0}}return!1}}var ez=Object.defineProperty,ng=(n,t)=>{for(var e in t)ez(n,e,{get:t[e],enumerable:!0})};function Tf(n){const{state:t,transaction:e}=n;let{selection:r}=e,{doc:i}=e,{storedMarks:o}=e;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=e.selection,i=e.doc,o=e.storedMarks,e}}}var Ef=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:t,state:e}=this,{view:r}=t,{tr:i}=e,o=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...f)=>{const h=c(...f)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,t=!0){const{rawCommands:e,editor:r,state:i}=this,{view:o}=r,a=[],c=!!n,f=n||i.tr,h=()=>(!c&&t&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(f),a.every(g=>g===!0)),p={...Object.fromEntries(Object.entries(e).map(([g,y])=>[g,(...b)=>{const k=this.buildProps(f,t),x=y(...b)(k);return a.push(x),p}])),run:h};return p}createCan(n){const{rawCommands:t,state:e}=this,r=!1,i=n||e.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([a,c])=>[a,(...f)=>c(...f)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,t=!0){const{rawCommands:e,editor:r,state:i}=this,{view:o}=r,a={tr:n,editor:r,view:o,state:Tf({state:i,transaction:n}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(n,t),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(e).map(([c,f])=>[c,(...h)=>f(...h)(a)]))}};return a}},TS={};ng(TS,{blur:()=>nz,clearContent:()=>rz,clearNodes:()=>iz,command:()=>sz,createParagraphNear:()=>oz,cut:()=>lz,deleteCurrentNode:()=>az,deleteNode:()=>cz,deleteRange:()=>uz,deleteSelection:()=>fz,enter:()=>dz,exitCode:()=>hz,extendMarkRange:()=>pz,first:()=>mz,focus:()=>yz,forEach:()=>vz,insertContent:()=>bz,insertContentAt:()=>xz,joinBackward:()=>Tz,joinDown:()=>Mz,joinForward:()=>Ez,joinItemBackward:()=>Cz,joinItemForward:()=>Az,joinTextblockBackward:()=>Oz,joinTextblockForward:()=>Rz,joinUp:()=>Sz,keyboardShortcut:()=>zz,lift:()=>Dz,liftEmptyBlock:()=>Bz,liftListItem:()=>Lz,newlineInCode:()=>Hz,resetAttributes:()=>$z,scrollIntoView:()=>jz,selectAll:()=>Iz,selectNodeBackward:()=>_z,selectNodeForward:()=>Uz,selectParentNode:()=>qz,selectTextblockEnd:()=>Vz,selectTextblockStart:()=>Pz,setContent:()=>Jz,setMark:()=>uD,setMeta:()=>fD,setNode:()=>dD,setNodeSelection:()=>hD,setTextDirection:()=>pD,setTextSelection:()=>mD,sinkListItem:()=>gD,splitBlock:()=>yD,splitListItem:()=>vD,toggleList:()=>bD,toggleMark:()=>kD,toggleNode:()=>wD,toggleWrap:()=>xD,undoInputRule:()=>SD,unsetAllMarks:()=>MD,unsetMark:()=>TD,unsetTextDirection:()=>ED,updateAttributes:()=>CD,wrapIn:()=>AD,wrapInList:()=>OD});var nz=()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),(e=window?.getSelection())==null||e.removeAllRanges())}),!0),rz=(n=!0)=>({commands:t})=>t.setContent("",{emitUpdate:n}),iz=()=>({state:n,tr:t,dispatch:e})=>{const{selection:r}=t,{ranges:i}=r;return e&&i.forEach(({$from:o,$to:a})=>{n.doc.nodesBetween(o.pos,a.pos,(c,f)=>{if(c.type.isText)return;const{doc:h,mapping:p}=t,g=h.resolve(p.map(f)),y=h.resolve(p.map(f+c.nodeSize)),b=g.blockRange(y);if(!b)return;const k=xo(b);if(c.type.isTextblock){const{defaultType:x}=g.parent.contentMatchAt(g.index());t.setNodeMarkup(b.start,x)}(k||k===0)&&t.lift(b,k)})}),!0},sz=n=>t=>n(t),oz=()=>({state:n,dispatch:t})=>tN(n,t),lz=(n,t)=>({editor:e,tr:r})=>{const{state:i}=e,o=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(t);return r.insert(a,o.content),r.setSelection(new ft(r.doc.resolve(Math.max(a-1,0)))),!0},az=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,r=e.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(t){const a=i.before(o),c=i.after(o);n.delete(a,c).scrollIntoView()}return!0}return!1};function ae(n,t){if(typeof n=="string"){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}var cz=n=>({tr:t,state:e,dispatch:r})=>{const i=ae(n,e.schema),o=t.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i){if(r){const c=o.before(a),f=o.after(a);t.delete(c,f).scrollIntoView()}return!0}return!1},uz=n=>({tr:t,dispatch:e})=>{const{from:r,to:i}=n;return e&&t.delete(r,i),!0},fz=()=>({state:n,dispatch:t})=>qR(n,t),dz=()=>({commands:n})=>n.keyboardShortcut("Enter"),hz=()=>({state:n,dispatch:t})=>WR(n,t);function rg(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function Nu(n,t,e={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>e.strict?t[i]===n[i]:rg(t[i])?t[i].test(n[i]):t[i]===n[i]):!0}function ES(n,t,e={}){return n.find(r=>r.type===t&&Nu(Object.fromEntries(Object.keys(e).map(i=>[i,r.attrs[i]])),e))}function hk(n,t,e={}){return!!ES(n,t,e)}function ig(n,t,e){var r;if(!n||!t)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(e=e||((r=i.node.marks[0])==null?void 0:r.attrs),!ES([...i.node.marks],t,e)))return;let o=i.index,a=n.start()+i.offset,c=o+1,f=a+i.node.nodeSize;for(;o>0&&hk([...n.parent.child(o-1).marks],t,e);)o-=1,a-=n.parent.child(o).nodeSize;for(;c<n.parent.childCount&&hk([...n.parent.child(c).marks],t,e);)f+=n.parent.child(c).nodeSize,c+=1;return{from:a,to:f}}function Sr(n,t){if(typeof n=="string"){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}var pz=(n,t={})=>({tr:e,state:r,dispatch:i})=>{const o=Sr(n,r.schema),{doc:a,selection:c}=e,{$from:f,from:h,to:p}=c;if(i){const g=ig(f,o,t);if(g&&g.from<=h&&g.to>=p){const y=ft.create(a,g.from,g.to);e.setSelection(y)}}return!0},mz=n=>t=>{const e=typeof n=="function"?n(t):n;for(let r=0;r<e.length;r+=1)if(e[r](t))return!0;return!1};function CS(n){return n instanceof ft}function _i(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function AS(n,t=null){if(!t)return null;const e=ut.atStart(n),r=ut.atEnd(n);if(t==="start"||t===!0)return e;if(t==="end")return r;const i=e.from,o=r.to;return t==="all"?ft.create(n,_i(0,i,o),_i(n.content.size,i,o)):ft.create(n,_i(t,i,o),_i(t,i,o))}function gz(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function sg(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var yz=(n=null,t={})=>({editor:e,view:r,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};const a=()=>{(sg()||gz())&&r.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(r.focus(),t!=null&&t.scrollIntoView&&e.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(o&&n===null&&!CS(e.state.selection))return a(),!0;const c=AS(i.doc,n)||e.state.selection,f=e.state.selection.eq(c);return o&&(f||i.setSelection(c),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},vz=(n,t)=>e=>n.every((r,i)=>t(r,{...e,index:i})),bz=(n,t)=>({tr:e,commands:r})=>r.insertContentAt({from:e.selection.from,to:e.selection.to},n,t),OS=n=>{const t=n.childNodes;for(let e=t.length-1;e>=0;e-=1){const r=t[e];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&OS(r)}return n};function Gc(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${n}</body>`,e=new window.DOMParser().parseFromString(t,"text/html").body;return OS(e)}function ha(n,t,e){if(n instanceof ai||n instanceof K)return n;e={slice:!0,parseOptions:{},...e};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return K.fromArray(n.map(a=>t.nodeFromJSON(a)));const o=t.nodeFromJSON(n);return e.errorOnInvalidContent&&o.check(),o}catch(o){if(e.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),ha("",t,e)}if(i){if(e.errorOnInvalidContent){let a=!1,c="";const f=new yx({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(a=!0,c=typeof h=="string"?h:h.outerHTML,null)}]}})});if(e.slice?Gl.fromSchema(f).parseSlice(Gc(n),e.parseOptions):Gl.fromSchema(f).parse(Gc(n),e.parseOptions),e.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=Gl.fromSchema(t);return e.slice?o.parseSlice(Gc(n),e.parseOptions).content:o.parse(Gc(n),e.parseOptions)}return ha("",t,e)}function kz(n,t,e){const r=n.steps.length-1;if(r<t)return;const i=n.steps[r];if(!(i instanceof jn||i instanceof We))return;const o=n.mapping.maps[r];let a=0;o.forEach((c,f,h,p)=>{a===0&&(a=p)}),n.setSelection(ut.near(n.doc.resolve(a),e))}var wz=n=>!("type"in n),xz=(n,t,e)=>({tr:r,dispatch:i,editor:o})=>{var a;if(i){e={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...e};let c;const f=x=>{o.emit("contentError",{editor:o,error:x,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...e.parseOptions};if(!e.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{ha(t,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(x){f(x)}try{c=ha(t,o.schema,{parseOptions:h,errorOnInvalidContent:(a=e.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(x){return f(x),!1}let{from:p,to:g}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},y=!0,b=!0;if((wz(c)?c:[c]).forEach(x=>{x.check(),y=y?x.isText&&x.marks.length===0:!1,b=b?x.isBlock:!1}),p===g&&b){const{parent:x}=r.doc.resolve(p);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(p-=1,g+=1)}let k;if(y){if(Array.isArray(t))k=t.map(x=>x.text||"").join("");else if(t instanceof K){let x="";t.forEach(S=>{S.text&&(x+=S.text)}),k=x}else typeof t=="object"&&t&&t.text?k=t.text:k=t;r.insertText(k,p,g)}else{k=c;const x=r.doc.resolve(p),S=x.node(),T=x.parentOffset===0,D=S.isText||S.isTextblock,H=S.content.size>0;T&&D&&H&&(p=Math.max(0,p-1)),r.replaceWith(p,g,k)}e.updateSelection&&kz(r,r.steps.length-1,-1),e.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:k}),e.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:k})}return!0},Sz=()=>({state:n,dispatch:t})=>FR(n,t),Mz=()=>({state:n,dispatch:t})=>QR(n,t),Tz=()=>({state:n,dispatch:t})=>VR(n,t),Ez=()=>({state:n,dispatch:t})=>KR(n,t),Cz=()=>({state:n,dispatch:t,tr:e})=>{try{const r=bf(n.doc,n.selection.$from.pos,-1);return r==null?!1:(e.join(r,2),t&&t(e),!0)}catch{return!1}},Az=()=>({state:n,dispatch:t,tr:e})=>{try{const r=bf(n.doc,n.selection.$from.pos,1);return r==null?!1:(e.join(r,2),t&&t(e),!0)}catch{return!1}},Oz=()=>({state:n,dispatch:t})=>PR(n,t),Rz=()=>({state:n,dispatch:t})=>JR(n,t);function RS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Nz(n){const t=n.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let r,i,o,a;for(let c=0;c<t.length-1;c+=1){const f=t[c];if(/^(cmd|meta|m)$/i.test(f))a=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))sg()||RS()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(e=`Alt-${e}`),i&&(e=`Ctrl-${e}`),a&&(e=`Meta-${e}`),o&&(e=`Shift-${e}`),e}var zz=n=>({editor:t,view:e,tr:r,dispatch:i})=>{const o=Nz(n).split(/-(?!$)/),a=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),c=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),f=t.captureTransaction(()=>{e.someProp("handleKeyDown",h=>h(e,c))});return f?.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function fi(n,t,e={}){const{from:r,to:i,empty:o}=n.selection,a=t?ae(t,n.schema):null,c=[];n.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const y=Math.max(r,g),b=Math.min(i,g+p.nodeSize);c.push({node:p,from:y,to:b})});const f=i-r,h=c.filter(p=>a?a.name===p.node.type.name:!0).filter(p=>Nu(p.node.attrs,e,{strict:!1}));return o?!!h.length:h.reduce((p,g)=>p+g.to-g.from,0)>=f}var Dz=(n,t={})=>({state:e,dispatch:r})=>{const i=ae(n,e.schema);return fi(e,i,t)?XR(e,r):!1},Bz=()=>({state:n,dispatch:t})=>eN(n,t),Lz=n=>({state:t,dispatch:e})=>{const r=ae(n,t.schema);return uN(r)(t,e)},Hz=()=>({state:n,dispatch:t})=>ZR(n,t);function Cf(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function pk(n,t){const e=typeof t=="string"?[t]:t;return Object.keys(n).reduce((r,i)=>(e.includes(i)||(r[i]=n[i]),r),{})}var $z=(n,t)=>({tr:e,state:r,dispatch:i})=>{let o=null,a=null;const c=Cf(typeof n=="string"?n:n.name,r.schema);if(!c)return!1;c==="node"&&(o=ae(n,r.schema)),c==="mark"&&(a=Sr(n,r.schema));let f=!1;return e.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,g)=>{o&&o===p.type&&(f=!0,i&&e.setNodeMarkup(g,void 0,pk(p.attrs,t))),a&&p.marks.length&&p.marks.forEach(y=>{a===y.type&&(f=!0,i&&e.addMark(g,g+p.nodeSize,a.create(pk(y.attrs,t))))})})}),f},jz=()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),Iz=()=>({tr:n,dispatch:t})=>{if(t){const e=new wr(n.doc);n.setSelection(e)}return!0},_z=()=>({state:n,dispatch:t})=>GR(n,t),Uz=()=>({state:n,dispatch:t})=>YR(n,t),qz=()=>({state:n,dispatch:t})=>nN(n,t),Vz=()=>({state:n,dispatch:t})=>sN(n,t),Pz=()=>({state:n,dispatch:t})=>iN(n,t);function hm(n,t,e={},r={}){return ha(n,t,{slice:!1,parseOptions:e,errorOnInvalidContent:r.errorOnInvalidContent})}var Jz=(n,{errorOnInvalidContent:t,emitUpdate:e=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:a,commands:c})=>{const{doc:f}=o;if(r.preserveWhitespace!=="full"){const h=hm(n,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return a&&o.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!e),!0}return a&&o.setMeta("preventUpdate",!e),c.insertContentAt({from:0,to:f.content.size},n,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function NS(n,t){const e=Sr(t,n.schema),{from:r,to:i,empty:o}=n.selection,a=[];o?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,f=>{a.push(...f.marks)});const c=a.find(f=>f.type.name===e.name);return c?{...c.attrs}:{}}function zS(n,t){const e=new Dx(n);return t.forEach(r=>{r.steps.forEach(i=>{e.step(i)})}),e}function Gz(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function Kz(n,t,e){const r=[];return n.nodesBetween(t.from,t.to,(i,o)=>{e(i)&&r.push({node:i,pos:o})}),r}function Yz(n,t){for(let e=n.depth;e>0;e-=1){const r=n.node(e);if(t(r))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:r}}}function Af(n){return t=>Yz(t.$from,n)}function rt(n,t,e){return n.config[t]===void 0&&n.parent?rt(n.parent,t,e):typeof n.config[t]=="function"?n.config[t].bind({...e,parent:n.parent?rt(n.parent,t,e):null}):n.config[t]}function og(n){return n.map(t=>{const e={name:t.name,options:t.options,storage:t.storage},r=rt(t,"addExtensions",e);return r?[t,...og(r())]:t}).flat(10)}function lg(n,t){const e=as.fromSchema(t).serializeFragment(n),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(e),r.innerHTML}function DS(n){return typeof n=="function"}function Rt(n,t=void 0,...e){return DS(n)?t?n.bind(t)(...e):n(...e):n}function Fz(n={}){return Object.keys(n).length===0&&n.constructor===Object}function bo(n){const t=n.filter(i=>i.type==="extension"),e=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:r}}function BS(n){const t=[],{nodeExtensions:e,markExtensions:r}=bo(n),i=[...e,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage,extensions:i},f=rt(a,"addGlobalAttributes",c);f&&f().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,y])=>{t.push({type:p,name:g,attribute:{...o,...y}})})})})}),i.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},f=rt(a,"addAttributes",c);if(!f)return;const h=f();Object.entries(h).forEach(([p,g])=>{const y={...o,...g};typeof y?.default=="function"&&(y.default=y.default()),y!=null&&y.isRequired&&y?.default===void 0&&delete y.default,t.push({type:a.name,name:p,attribute:y})})}),t}function ie(...n){return n.filter(t=>!!t).reduce((t,e)=>{const r={...t};return Object.entries(e).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const a=o?String(o).split(" "):[],c=r[i]?r[i].split(" "):[],f=a.filter(h=>!c.includes(h));r[i]=[...c,...f].join(" ")}else if(i==="style"){const a=o?o.split(";").map(h=>h.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],f=new Map;c.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());f.set(p,g)}),a.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());f.set(p,g)}),r[i]=Array.from(f.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=o}),r},{})}function zu(n,t){return t.filter(e=>e.type===n.type.name).filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n.attrs)||{}:{[e.name]:n.attrs[e.name]}).reduce((e,r)=>ie(e,r),{})}function Qz(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function mk(n,t){return"style"in n?n:{...n,getAttrs:e=>{const r=n.getAttrs?n.getAttrs(e):n.attrs;if(r===!1)return!1;const i=t.reduce((o,a)=>{const c=a.attribute.parseHTML?a.attribute.parseHTML(e):Qz(e.getAttribute(a.name));return c==null?o:{...o,[a.name]:c}},{});return{...r,...i}}}}function gk(n){return Object.fromEntries(Object.entries(n).filter(([t,e])=>t==="attrs"&&Fz(e)?!1:e!=null))}function yk(n){var t,e;const r={};return!((t=n?.attribute)!=null&&t.isRequired)&&"default"in(n?.attribute||{})&&(r.default=n.attribute.default),((e=n?.attribute)==null?void 0:e.validate)!==void 0&&(r.validate=n.attribute.validate),[n.name,r]}function Xz(n,t){var e;const r=BS(n),{nodeExtensions:i,markExtensions:o}=bo(n),a=(e=i.find(h=>rt(h,"topNode")))==null?void 0:e.name,c=Object.fromEntries(i.map(h=>{const p=r.filter(T=>T.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:t},y=n.reduce((T,D)=>{const H=rt(D,"extendNodeSchema",g);return{...T,...H?H(h):{}}},{}),b=gk({...y,content:Rt(rt(h,"content",g)),marks:Rt(rt(h,"marks",g)),group:Rt(rt(h,"group",g)),inline:Rt(rt(h,"inline",g)),atom:Rt(rt(h,"atom",g)),selectable:Rt(rt(h,"selectable",g)),draggable:Rt(rt(h,"draggable",g)),code:Rt(rt(h,"code",g)),whitespace:Rt(rt(h,"whitespace",g)),linebreakReplacement:Rt(rt(h,"linebreakReplacement",g)),defining:Rt(rt(h,"defining",g)),isolating:Rt(rt(h,"isolating",g)),attrs:Object.fromEntries(p.map(yk))}),k=Rt(rt(h,"parseHTML",g));k&&(b.parseDOM=k.map(T=>mk(T,p)));const x=rt(h,"renderHTML",g);x&&(b.toDOM=T=>x({node:T,HTMLAttributes:zu(T,p)}));const S=rt(h,"renderText",g);return S&&(b.toText=S),[h.name,b]})),f=Object.fromEntries(o.map(h=>{const p=r.filter(S=>S.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:t},y=n.reduce((S,T)=>{const D=rt(T,"extendMarkSchema",g);return{...S,...D?D(h):{}}},{}),b=gk({...y,inclusive:Rt(rt(h,"inclusive",g)),excludes:Rt(rt(h,"excludes",g)),group:Rt(rt(h,"group",g)),spanning:Rt(rt(h,"spanning",g)),code:Rt(rt(h,"code",g)),attrs:Object.fromEntries(p.map(yk))}),k=Rt(rt(h,"parseHTML",g));k&&(b.parseDOM=k.map(S=>mk(S,p)));const x=rt(h,"renderHTML",g);return x&&(b.toDOM=S=>x({mark:S,HTMLAttributes:zu(S,p)})),[h.name,b]}));return new yx({topNode:a,nodes:c,marks:f})}function Zz(n){const t=n.filter((e,r)=>n.indexOf(e)!==r);return Array.from(new Set(t))}function ag(n){return n.sort((t,e)=>{const r=rt(t,"priority")||100,i=rt(e,"priority")||100;return r>i?-1:r<i?1:0})}function LS(n){const t=ag(og(n)),e=Zz(t.map(r=>r.name));return e.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${e.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function HS(n,t,e){const{from:r,to:i}=t,{blockSeparator:o=`

`,textSerializers:a={}}=e||{};let c="";return n.nodesBetween(r,i,(f,h,p,g)=>{var y;f.isBlock&&h>r&&(c+=o);const b=a?.[f.type.name];if(b)return p&&(c+=b({node:f,pos:h,parent:p,index:g,range:t})),!1;f.isText&&(c+=(y=f?.text)==null?void 0:y.slice(Math.max(r,h)-h,i-h))}),c}function Wz(n,t){const e={from:0,to:n.content.size};return HS(n,e,t)}function $S(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}function tD(n,t){const e=ae(t,n.schema),{from:r,to:i}=n.selection,o=[];n.doc.nodesBetween(r,i,c=>{o.push(c)});const a=o.reverse().find(c=>c.type.name===e.name);return a?{...a.attrs}:{}}function jS(n,t){const e=Cf(typeof t=="string"?t:t.name,n.schema);return e==="node"?tD(n,t):e==="mark"?NS(n,t):{}}function eD(n,t=JSON.stringify){const e={};return n.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(e,i)?!1:e[i]=!0})}function nD(n){const t=eD(n);return t.length===1?t:t.filter((e,r)=>!t.filter((i,o)=>o!==r).some(i=>e.oldRange.from>=i.oldRange.from&&e.oldRange.to<=i.oldRange.to&&e.newRange.from>=i.newRange.from&&e.newRange.to<=i.newRange.to))}function IS(n){const{mapping:t,steps:e}=n,r=[];return t.maps.forEach((i,o)=>{const a=[];if(i.ranges.length)i.forEach((c,f)=>{a.push({from:c,to:f})});else{const{from:c,to:f}=e[o];if(c===void 0||f===void 0)return;a.push({from:c,to:f})}a.forEach(({from:c,to:f})=>{const h=t.slice(o).map(c,-1),p=t.slice(o).map(f),g=t.invert().map(h,-1),y=t.invert().map(p);r.push({oldRange:{from:g,to:y},newRange:{from:h,to:p}})})}),nD(r)}function cg(n,t,e){const r=[];return n===t?e.resolve(n).marks().forEach(i=>{const o=e.resolve(n),a=ig(o,i.type);a&&r.push({mark:i,...a})}):e.nodesBetween(n,t,(i,o)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(a=>({from:o,to:o+i.nodeSize,mark:a})))}),r}var rD=(n,t,e,r=20)=>{const i=n.doc.resolve(e);let o=r,a=null;for(;o>0&&a===null;){const c=i.node(o);c?.type.name===t?a=c:o-=1}return[a,o]};function Ap(n,t){return t.nodes[n]||t.marks[n]||null}function cu(n,t,e){return Object.fromEntries(Object.entries(e).filter(([r])=>{const i=n.find(o=>o.type===t&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}var iD=(n,t=500)=>{let e="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-t),r,(i,o,a,c)=>{var f,h;const p=((h=(f=i.type.spec).toText)==null?void 0:h.call(f,{node:i,pos:o,parent:a,index:c}))||i.textContent||"%leaf%";e+=i.isAtom&&!i.isText?p:p.slice(0,Math.max(0,r-o))}),e};function pm(n,t,e={}){const{empty:r,ranges:i}=n.selection,o=t?Sr(t,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(p=>o?o.name===p.type.name:!0).find(p=>Nu(p.attrs,e,{strict:!1}));let a=0;const c=[];if(i.forEach(({$from:p,$to:g})=>{const y=p.pos,b=g.pos;n.doc.nodesBetween(y,b,(k,x)=>{if(!k.isText&&!k.marks.length)return;const S=Math.max(y,x),T=Math.min(b,x+k.nodeSize),D=T-S;a+=D,c.push(...k.marks.map(H=>({mark:H,from:S,to:T})))})}),a===0)return!1;const f=c.filter(p=>o?o.name===p.mark.type.name:!0).filter(p=>Nu(p.mark.attrs,e,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),h=c.filter(p=>o?p.mark.type!==o&&p.mark.type.excludes(o):!0).reduce((p,g)=>p+g.to-g.from,0);return(f>0?f+h:f)>=a}function sD(n,t,e={}){if(!t)return fi(n,null,e)||pm(n,null,e);const r=Cf(t,n.schema);return r==="node"?fi(n,t,e):r==="mark"?pm(n,t,e):!1}var oD=(n,t)=>{const{$from:e,$to:r,$anchor:i}=n.selection;if(t){const o=Af(c=>c.type.name===t)(n.selection);if(!o)return!1;const a=n.doc.resolve(o.pos+1);return i.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||e.pos!==r.pos)},lD=n=>{const{$from:t,$to:e}=n.selection;return!(t.parentOffset>0||t.pos!==e.pos)};function vk(n,t){return Array.isArray(t)?t.some(e=>(typeof e=="string"?e:e.name)===n.name):t}function bk(n,t){const{nodeExtensions:e}=bo(t),r=e.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=Rt(rt(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function Of(n,{checkChildren:t=!0,ignoreWhitespace:e=!1}={}){var r;if(e){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(t){let i=!0;return n.content.forEach(o=>{i!==!1&&(Of(o,{ignoreWhitespace:e,checkChildren:t})||(i=!1))}),i}return!1}function aD(n){return n instanceof ct}function cD(n,t,e){var r;const{selection:i}=t;let o=null;if(CS(i)&&(o=i.$cursor),o){const c=(r=n.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(e)&&(!!e.isInSet(c)||!c.some(f=>f.type.excludes(e)))}const{ranges:a}=i;return a.some(({$from:c,$to:f})=>{let h=c.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(e):!1;return n.doc.nodesBetween(c.pos,f.pos,(p,g,y)=>{if(h)return!1;if(p.isInline){const b=!y||y.type.allowsMarkType(e),k=!!e.isInSet(p.marks)||!p.marks.some(x=>x.type.excludes(e));h=b&&k}return!h}),h})}var uD=(n,t={})=>({tr:e,state:r,dispatch:i})=>{const{selection:o}=e,{empty:a,ranges:c}=o,f=Sr(n,r.schema);if(i)if(a){const h=NS(r,f);e.addStoredMark(f.create({...h,...t}))}else c.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(y,b)=>{const k=Math.max(b,p),x=Math.min(b+y.nodeSize,g);y.marks.find(S=>S.type===f)?y.marks.forEach(S=>{f===S.type&&e.addMark(k,x,f.create({...S.attrs,...t}))}):e.addMark(k,x,f.create(t))})});return cD(r,e,f)},fD=(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),dD=(n,t={})=>({state:e,dispatch:r,chain:i})=>{const o=ae(n,e.schema);let a;return e.selection.$anchor.sameParent(e.selection.$head)&&(a=e.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:c})=>D1(o,{...a,...t})(e)?!0:c.clearNodes()).command(({state:c})=>D1(o,{...a,...t})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},hD=n=>({tr:t,dispatch:e})=>{if(e){const{doc:r}=t,i=_i(n,0,r.content.size),o=ct.create(r,i);t.setSelection(o)}return!0},pD=(n,t)=>({tr:e,state:r,dispatch:i})=>{const{selection:o}=r;let a,c;return typeof t=="number"?(a=t,c=t):t&&"from"in t&&"to"in t?(a=t.from,c=t.to):(a=o.from,c=o.to),i&&e.doc.nodesBetween(a,c,(f,h)=>{f.isText||e.setNodeMarkup(h,void 0,{...f.attrs,dir:n})}),!0},mD=n=>({tr:t,dispatch:e})=>{if(e){const{doc:r}=t,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,a=ft.atStart(r).from,c=ft.atEnd(r).to,f=_i(i,a,c),h=_i(o,a,c),p=ft.create(r,f,h);t.setSelection(p)}return!0},gD=n=>({state:t,dispatch:e})=>{const r=ae(n,t.schema);return hN(r)(t,e)};function kk(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const r=e.filter(i=>t?.includes(i.type.name));n.tr.ensureMarks(r)}}var yD=({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:r,editor:i})=>{const{selection:o,doc:a}=t,{$from:c,$to:f}=o,h=i.extensionManager.attributes,p=cu(h,c.node().type.name,c.node().attrs);if(o instanceof ct&&o.node.isBlock)return!c.parentOffset||!ao(a,c.pos)?!1:(r&&(n&&kk(e,i.extensionManager.splittableMarks),t.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const g=f.parentOffset===f.parent.content.size,y=c.depth===0?void 0:Gz(c.node(-1).contentMatchAt(c.indexAfter(-1)));let b=g&&y?[{type:y,attrs:p}]:void 0,k=ao(t.doc,t.mapping.map(c.pos),1,b);if(!b&&!k&&ao(t.doc,t.mapping.map(c.pos),1,y?[{type:y}]:void 0)&&(k=!0,b=y?[{type:y,attrs:p}]:void 0),r){if(k&&(o instanceof ft&&t.deleteSelection(),t.split(t.mapping.map(c.pos),1,b),y&&!g&&!c.parentOffset&&c.parent.type!==y)){const x=t.mapping.map(c.before()),S=t.doc.resolve(x);c.node(-1).canReplaceWith(S.index(),S.index()+1,y)&&t.setNodeMarkup(t.mapping.map(c.before()),y)}n&&kk(e,i.extensionManager.splittableMarks),t.scrollIntoView()}return k},vD=(n,t={})=>({tr:e,state:r,dispatch:i,editor:o})=>{var a;const c=ae(n,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const g=f.node(-1);if(g.type!==c)return!1;const y=o.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==c||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let T=K.empty;const D=f.index(-1)?1:f.index(-2)?2:3;for(let Y=f.depth-D;Y>=f.depth-3;Y-=1)T=K.from(f.node(Y).copy(T));const H=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,V={...cu(y,f.node().type.name,f.node().attrs),...t},L=((a=c.contentMatch.defaultType)==null?void 0:a.createAndFill(V))||void 0;T=T.append(K.from(c.createAndFill(null,L)||void 0));const I=f.before(f.depth-(D-1));e.replace(I,f.after(-H),new W(T,4-D,0));let q=-1;e.doc.nodesBetween(I,e.doc.content.size,(Y,nt)=>{if(q>-1)return!1;Y.isTextblock&&Y.content.size===0&&(q=nt+1)}),q>-1&&e.setSelection(ft.near(e.doc.resolve(q))),e.scrollIntoView()}return!0}const b=h.pos===f.end()?g.contentMatchAt(0).defaultType:null,k={...cu(y,g.type.name,g.attrs),...t},x={...cu(y,f.node().type.name,f.node().attrs),...t};e.delete(f.pos,h.pos);const S=b?[{type:c,attrs:k},{type:b,attrs:x}]:[{type:c,attrs:k}];if(!ao(e.doc,f.pos,2))return!1;if(i){const{selection:T,storedMarks:D}=r,{splittableMarks:H}=o.extensionManager,V=D||T.$to.parentOffset&&T.$from.marks();if(e.split(f.pos,2,S).scrollIntoView(),!V||!i)return!0;const L=V.filter(I=>H.includes(I.type.name));e.ensureMarks(L)}return!0},Op=(n,t)=>{const e=Af(o=>o.type===t)(n.selection);if(!e)return!0;const r=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return e.node.type===i?.type&&hi(n.doc,e.pos)&&n.join(e.pos),!0},Rp=(n,t)=>{const e=Af(o=>o.type===t)(n.selection);if(!e)return!0;const r=n.doc.resolve(e.start).after(e.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return e.node.type===i?.type&&hi(n.doc,r)&&n.join(r),!0},bD=(n,t,e,r={})=>({editor:i,tr:o,state:a,dispatch:c,chain:f,commands:h,can:p})=>{const{extensions:g,splittableMarks:y}=i.extensionManager,b=ae(n,a.schema),k=ae(t,a.schema),{selection:x,storedMarks:S}=a,{$from:T,$to:D}=x,H=T.blockRange(D),V=S||x.$to.parentOffset&&x.$from.marks();if(!H)return!1;const L=Af(I=>bk(I.type.name,g))(x);if(H.depth>=1&&L&&H.depth-L.depth<=1){if(L.node.type===b)return h.liftListItem(k);if(bk(L.node.type.name,g)&&b.validContent(L.node.content)&&c)return f().command(()=>(o.setNodeMarkup(L.pos,b),!0)).command(()=>Op(o,b)).command(()=>Rp(o,b)).run()}return!e||!V||!c?f().command(()=>p().wrapInList(b,r)?!0:h.clearNodes()).wrapInList(b,r).command(()=>Op(o,b)).command(()=>Rp(o,b)).run():f().command(()=>{const I=p().wrapInList(b,r),q=V.filter(Y=>y.includes(Y.type.name));return o.ensureMarks(q),I?!0:h.clearNodes()}).wrapInList(b,r).command(()=>Op(o,b)).command(()=>Rp(o,b)).run()},kD=(n,t={},e={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=e,a=Sr(n,r.schema);return pm(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,t)},wD=(n,t,e={})=>({state:r,commands:i})=>{const o=ae(n,r.schema),a=ae(t,r.schema),c=fi(r,o,e);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),c?i.setNode(a,f):i.setNode(o,{...f,...e})},xD=(n,t={})=>({state:e,commands:r})=>{const i=ae(n,e.schema);return fi(e,i,t)?r.lift(i):r.wrapIn(i,t)},SD=()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let r=0;r<e.length;r+=1){const i=e[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(t){const a=n.tr,c=o.transform;for(let f=c.steps.length-1;f>=0;f-=1)a.step(c.steps[f].invert(c.docs[f]));if(o.text){const f=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,n.schema.text(o.text,f))}else a.delete(o.from,o.to)}return!0}}return!1},MD=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:r,ranges:i}=e;return r||t&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},TD=(n,t={})=>({tr:e,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=t,{selection:c}=e,f=Sr(n,r.schema),{$from:h,empty:p,ranges:g}=c;if(!i)return!0;if(p&&a){let{from:y,to:b}=c;const k=(o=h.marks().find(S=>S.type===f))==null?void 0:o.attrs,x=ig(h,f,k);x&&(y=x.from,b=x.to),e.removeMark(y,b,f)}else g.forEach(y=>{e.removeMark(y.$from.pos,y.$to.pos,f)});return e.removeStoredMark(f),!0},ED=n=>({tr:t,state:e,dispatch:r})=>{const{selection:i}=e;let o,a;return typeof n=="number"?(o=n,a=n):n&&"from"in n&&"to"in n?(o=n.from,a=n.to):(o=i.from,a=i.to),r&&t.doc.nodesBetween(o,a,(c,f)=>{if(c.isText)return;const h={...c.attrs};delete h.dir,t.setNodeMarkup(f,void 0,h)}),!0},CD=(n,t={})=>({tr:e,state:r,dispatch:i})=>{let o=null,a=null;const c=Cf(typeof n=="string"?n:n.name,r.schema);if(!c)return!1;c==="node"&&(o=ae(n,r.schema)),c==="mark"&&(a=Sr(n,r.schema));let f=!1;return e.selection.ranges.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;let y,b,k,x;e.selection.empty?r.doc.nodesBetween(p,g,(S,T)=>{o&&o===S.type&&(f=!0,k=Math.max(T,p),x=Math.min(T+S.nodeSize,g),y=T,b=S)}):r.doc.nodesBetween(p,g,(S,T)=>{T<p&&o&&o===S.type&&(f=!0,k=Math.max(T,p),x=Math.min(T+S.nodeSize,g),y=T,b=S),T>=p&&T<=g&&(o&&o===S.type&&(f=!0,i&&e.setNodeMarkup(T,void 0,{...S.attrs,...t})),a&&S.marks.length&&S.marks.forEach(D=>{if(a===D.type&&(f=!0,i)){const H=Math.max(T,p),V=Math.min(T+S.nodeSize,g);e.addMark(H,V,a.create({...D.attrs,...t}))}}))}),b&&(y!==void 0&&i&&e.setNodeMarkup(y,void 0,{...b.attrs,...t}),a&&b.marks.length&&b.marks.forEach(S=>{a===S.type&&i&&e.addMark(k,x,a.create({...S.attrs,...t}))}))}),f},AD=(n,t={})=>({state:e,dispatch:r})=>{const i=ae(n,e.schema);return oN(i,t)(e,r)},OD=(n,t={})=>({state:e,dispatch:r})=>{const i=ae(n,e.schema);return lN(i,t)(e,r)},RD=class{constructor(){this.callbacks={}}on(n,t){return this.callbacks[n]||(this.callbacks[n]=[]),this.callbacks[n].push(t),this}emit(n,...t){const e=this.callbacks[n];return e&&e.forEach(r=>r.apply(this,t)),this}off(n,t){const e=this.callbacks[n];return e&&(t?this.callbacks[n]=e.filter(r=>r!==t):delete this.callbacks[n]),this}once(n,t){const e=(...r)=>{this.off(n,e),t.apply(this,r)};return this.on(n,e)}removeAllListeners(){this.callbacks={}}},Rf=class{constructor(n){var t;this.find=n.find,this.handler=n.handler,this.undoable=(t=n.undoable)!=null?t:!0}},ND=(n,t)=>{if(rg(t))return t.exec(n);const e=t(n);if(!e)return null;const r=[e.text];return r.index=e.index,r.input=n,r.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(e.replaceWith)),r};function Kc(n){var t;const{editor:e,from:r,to:i,text:o,rules:a,plugin:c}=n,{view:f}=e;if(f.composing)return!1;const h=f.state.doc.resolve(r);if(h.parent.type.spec.code||(t=h.nodeBefore||h.nodeAfter)!=null&&t.marks.find(y=>y.type.spec.code))return!1;let p=!1;const g=iD(h)+o;return a.forEach(y=>{if(p)return;const b=ND(g,y.find);if(!b)return;const k=f.state.tr,x=Tf({state:f.state,transaction:k}),S={from:r-(b[0].length-o.length),to:i},{commands:T,chain:D,can:H}=new Ef({editor:e,state:x});y.handler({state:x,range:S,match:b,commands:T,chain:D,can:H})===null||!k.steps.length||(y.undoable&&k.setMeta(c,{transform:k,from:r,to:i,text:o}),f.dispatch(k),p=!0)}),p}function zD(n){const{editor:t,rules:e}=n,r=new Et({state:{init(){return null},apply(i,o,a){const c=i.getMeta(r);if(c)return c;const f=i.getMeta("applyInputRules");return f&&setTimeout(()=>{let{text:h}=f;typeof h=="string"?h=h:h=lg(K.from(h),a.schema);const{from:p}=f,g=p+h.length;Kc({editor:t,from:p,to:g,text:h,rules:e,plugin:r})}),i.selectionSet||i.docChanged?null:o}},props:{handleTextInput(i,o,a,c){return Kc({editor:t,from:o,to:a,text:c,rules:e,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:o}=i.state.selection;o&&Kc({editor:t,from:o.pos,to:o.pos,text:"",rules:e,plugin:r})}),!1)},handleKeyDown(i,o){if(o.key!=="Enter")return!1;const{$cursor:a}=i.state.selection;return a?Kc({editor:t,from:a.pos,to:a.pos,text:`
`,rules:e,plugin:r}):!1}},isInputRules:!0});return r}function DD(n){return Object.prototype.toString.call(n).slice(8,-1)}function Yc(n){return DD(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function _S(n,t){const e={...n};return Yc(n)&&Yc(t)&&Object.keys(t).forEach(r=>{Yc(t[r])&&Yc(n[r])?e[r]=_S(n[r],t[r]):e[r]=t[r]}),e}var ug=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...Rt(rt(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Rt(rt(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const t=this.extend({...this.config,addOptions:()=>_S(this.options,n)});return t.name=this.name,t.parent=this.parent,t}extend(n={}){const t=new this.constructor({...this.config,...n});return t.parent=this,this.child=t,t.name="name"in n?n.name:t.parent.name,t}},Mr=class US extends ug{constructor(){super(...arguments),this.type="mark"}static create(t={}){const e=typeof t=="function"?t():t;return new US(e)}static handleExit({editor:t,mark:e}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!o.find(c=>c?.type.name===e.name))return!1;const a=o.find(c=>c?.type.name===e.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const e=typeof t=="function"?t():t;return super.extend(e)}};function BD(n){return typeof n=="number"}var LD=class{constructor(n){this.find=n.find,this.handler=n.handler}},HD=(n,t,e)=>{if(rg(t))return[...n.matchAll(t)];const r=t(n,e);return r?r.map(i=>{const o=[i.text];return o.index=i.index,o.input=n,o.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(i.replaceWith)),o}):[]};function $D(n){const{editor:t,state:e,from:r,to:i,rule:o,pasteEvent:a,dropEvent:c}=n,{commands:f,chain:h,can:p}=new Ef({editor:t,state:e}),g=[];return e.doc.nodesBetween(r,i,(y,b)=>{var k,x,S,T,D;if((x=(k=y.type)==null?void 0:k.spec)!=null&&x.code||!(y.isText||y.isTextblock||y.isInline))return;const H=(D=(T=(S=y.content)==null?void 0:S.size)!=null?T:y.nodeSize)!=null?D:0,V=Math.max(r,b),L=Math.min(i,b+H);if(V>=L)return;const I=y.isText?y.text||"":y.textBetween(V-b,L-b,void 0,"");HD(I,o.find,a).forEach(q=>{if(q.index===void 0)return;const Y=V+q.index+1,nt=Y+q[0].length,Qt={from:e.tr.mapping.map(Y),to:e.tr.mapping.map(nt)},de=o.handler({state:e,range:Qt,match:q,commands:f,chain:h,can:p,pasteEvent:a,dropEvent:c});g.push(de)})}),g.every(y=>y!==null)}var Fc=null,jD=n=>{var t;const e=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=e.clipboardData)==null||t.setData("text/html",n),e};function ID(n){const{editor:t,rules:e}=n;let r=null,i=!1,o=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const f=({state:h,from:p,to:g,rule:y,pasteEvt:b})=>{const k=h.tr,x=Tf({state:h,transaction:k});if(!(!$D({editor:t,state:x,from:Math.max(p-1,0),to:g.b-1,rule:y,pasteEvent:b,dropEvent:c})||!k.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return e.map(h=>new Et({view(p){const g=b=>{var k;r=(k=p.dom.parentElement)!=null&&k.contains(b.target)?p.dom.parentElement:null,r&&(Fc=t)},y=()=>{Fc&&(Fc=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(o=r===p.dom.parentElement,c=g,!o){const y=Fc;y!=null&&y.isEditable&&setTimeout(()=>{const b=y.state.selection;b&&y.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(p,g)=>{var y;const b=(y=g.clipboardData)==null?void 0:y.getData("text/html");return a=g,i=!!(b!=null&&b.includes("data-pm-slice")),!1}}},appendTransaction:(p,g,y)=>{const b=p[0],k=b.getMeta("uiEvent")==="paste"&&!i,x=b.getMeta("uiEvent")==="drop"&&!o,S=b.getMeta("applyPasteRules"),T=!!S;if(!k&&!x&&!T)return;if(T){let{text:V}=S;typeof V=="string"?V=V:V=lg(K.from(V),y.schema);const{from:L}=S,I=L+V.length,q=jD(V);return f({rule:h,state:y,from:L,to:{b:I},pasteEvt:q})}const D=g.doc.content.findDiffStart(y.doc.content),H=g.doc.content.findDiffEnd(y.doc.content);if(!(!BD(D)||!H||D===H.b))return f({rule:h,state:y,from:D,to:H,pasteEvt:a})}}))}var Nf=class{constructor(n,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=n,this.extensions=LS(n),this.schema=Xz(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((n,t)=>{const e={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Ap(t.name,this.schema)},r=rt(t,"addCommands",e);return r?{...n,...r()}:n},{})}get plugins(){const{editor:n}=this;return ag([...this.extensions].reverse()).flatMap(t=>{const e={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:n,type:Ap(t.name,this.schema)},r=[],i=rt(t,"addKeyboardShortcuts",e);let o={};if(t.type==="mark"&&rt(t,"exitable",e)&&(o.ArrowRight=()=>Mr.handleExit({editor:n,mark:t})),i){const p=Object.fromEntries(Object.entries(i()).map(([g,y])=>[g,()=>y({editor:n})]));o={...o,...p}}const a=tz(o);r.push(a);const c=rt(t,"addInputRules",e);if(vk(t,n.options.enableInputRules)&&c){const p=c();if(p&&p.length){const g=zD({editor:n,rules:p}),y=Array.isArray(g)?g:[g];r.push(...y)}}const f=rt(t,"addPasteRules",e);if(vk(t,n.options.enablePasteRules)&&f){const p=f();if(p&&p.length){const g=ID({editor:n,rules:p});r.push(...g)}}const h=rt(t,"addProseMirrorPlugins",e);if(h){const p=h();r.push(...p)}return r})}get attributes(){return BS(this.extensions)}get nodeViews(){const{editor:n}=this,{nodeExtensions:t}=bo(this.extensions);return Object.fromEntries(t.filter(e=>!!rt(e,"addNodeView")).map(e=>{const r=this.attributes.filter(f=>f.type===e.name),i={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:n,type:ae(e.name,this.schema)},o=rt(e,"addNodeView",i);if(!o)return[];const a=o();if(!a)return[];const c=(f,h,p,g,y)=>{const b=zu(f,r);return a({node:f,view:h,getPos:p,decorations:g,innerDecorations:y,editor:n,extension:e,HTMLAttributes:b})};return[e.name,c]}))}get markViews(){const{editor:n}=this,{markExtensions:t}=bo(this.extensions);return Object.fromEntries(t.filter(e=>!!rt(e,"addMarkView")).map(e=>{const r=this.attributes.filter(c=>c.type===e.name),i={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:n,type:Sr(e.name,this.schema)},o=rt(e,"addMarkView",i);if(!o)return[];const a=(c,f,h)=>{const p=zu(c,r);return o()({mark:c,view:f,inline:h,editor:n,extension:e,HTMLAttributes:p,updateAttributes:g=>{eB(c,n,g)}})};return[e.name,a]}))}setupExtensions(){const n=this.extensions;this.editor.extensionStorage=Object.fromEntries(n.map(t=>[t.name,t.storage])),n.forEach(t=>{var e;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:Ap(t.name,this.schema)};t.type==="mark"&&((e=Rt(rt(t,"keepOnSplit",r)))==null||e)&&this.splittableMarks.push(t.name);const i=rt(t,"onBeforeCreate",r),o=rt(t,"onCreate",r),a=rt(t,"onUpdate",r),c=rt(t,"onSelectionUpdate",r),f=rt(t,"onTransaction",r),h=rt(t,"onFocus",r),p=rt(t,"onBlur",r),g=rt(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),o&&this.editor.on("create",o),a&&this.editor.on("update",a),c&&this.editor.on("selectionUpdate",c),f&&this.editor.on("transaction",f),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}};Nf.resolve=LS;Nf.sort=ag;Nf.flatten=og;var _D={};ng(_D,{ClipboardTextSerializer:()=>VS,Commands:()=>PS,Delete:()=>JS,Drop:()=>GS,Editable:()=>KS,FocusEvents:()=>FS,Keymap:()=>QS,Paste:()=>XS,Tabindex:()=>ZS,TextDirection:()=>WS,focusEventsPluginKey:()=>YS});var _t=class qS extends ug{constructor(){super(...arguments),this.type="extension"}static create(t={}){const e=typeof t=="function"?t():t;return new qS(e)}configure(t){return super.configure(t)}extend(t){const e=typeof t=="function"?t():t;return super.extend(e)}},VS=_t.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Et({key:new It("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:r,selection:i}=t,{ranges:o}=i,a=Math.min(...o.map(h=>h.$from.pos)),c=Math.max(...o.map(h=>h.$to.pos)),f=$S(e);return HS(r,{from:a,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),PS=_t.create({name:"commands",addCommands(){return{...TS}}}),JS=_t.create({name:"delete",onUpdate({transaction:n,appendedTransactions:t}){var e,r,i;const o=()=>{var a,c,f,h;if((h=(f=(c=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:c.filterTransaction)==null?void 0:f.call(c,n))!=null?h:n.getMeta("y-sync$"))return;const p=zS(n.before,[n,...t]);IS(p).forEach(y=>{p.mapping.mapResult(y.oldRange.from).deletedAfter&&p.mapping.mapResult(y.oldRange.to).deletedBefore&&p.before.nodesBetween(y.oldRange.from,y.oldRange.to,(b,k)=>{const x=k+b.nodeSize-2,S=y.oldRange.from<=k&&x<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:b,from:k,to:x,newFrom:p.mapping.map(k),newTo:p.mapping.map(x),deletedRange:y.oldRange,newRange:y.newRange,partial:!S,editor:this.editor,transaction:n,combinedTransform:p})})});const g=p.mapping;p.steps.forEach((y,b)=>{var k,x;if(y instanceof Hn){const S=g.slice(b).map(y.from,-1),T=g.slice(b).map(y.to),D=g.invert().map(S,-1),H=g.invert().map(T),V=(k=p.doc.nodeAt(S-1))==null?void 0:k.marks.some(I=>I.eq(y.mark)),L=(x=p.doc.nodeAt(T))==null?void 0:x.marks.some(I=>I.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:D,to:H},newRange:{from:S,to:T},partial:!!(L||V),editor:this.editor,transaction:n,combinedTransform:p})}})};(i=(r=(e=this.editor.options.coreExtensionOptions)==null?void 0:e.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),GS=_t.create({name:"drop",addProseMirrorPlugins(){return[new Et({key:new It("tiptapDrop"),props:{handleDrop:(n,t,e,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:e,moved:r})}}})]}}),KS=_t.create({name:"editable",addProseMirrorPlugins(){return[new Et({key:new It("editable"),props:{editable:()=>this.editor.options.editable}})]}}),YS=new It("focusEvents"),FS=_t.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Et({key:YS,props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,e)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),QS=_t.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:c,doc:f}=a,{empty:h,$anchor:p}=c,{pos:g,parent:y}=p,b=p.parent.isTextblock&&g>0?a.doc.resolve(g-1):p,k=b.parent.type.spec.isolating,x=p.pos-p.parentOffset,S=k&&b.parent.childCount===1?x===p.pos:ut.atStart(f).from===g;return!h||!y.type.isTextblock||y.textContent.length||!S||S&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),e={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...e},i={...e,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return sg()||RS()?i:r},addProseMirrorPlugins(){return[new Et({key:new It("clearDocument"),appendTransaction:(n,t,e)=>{if(n.some(b=>b.getMeta("composition")))return;const r=n.some(b=>b.docChanged)&&!t.doc.eq(e.doc),i=n.some(b=>b.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:a,to:c}=t.selection,f=ut.atStart(t.doc).from,h=ut.atEnd(t.doc).to;if(o||!(a===f&&c===h)||!Of(e.doc))return;const p=e.tr,g=Tf({state:e,transaction:p}),{commands:y}=new Ef({editor:this.editor,state:g});if(y.clearNodes(),!!p.steps.length)return p}})]}}),XS=_t.create({name:"paste",addProseMirrorPlugins(){return[new Et({key:new It("tiptapPaste"),props:{handlePaste:(n,t,e)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:e})}}})]}}),ZS=_t.create({name:"tabindex",addProseMirrorPlugins(){return[new Et({key:new It("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),WS=_t.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=bo(this.extensions);return[{types:n.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const e=t.getAttribute("dir");return e&&(e==="ltr"||e==="rtl"||e==="auto")?e:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Et({key:new It("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),UD=class ro{constructor(t,e,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=e,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let e=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}e=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:e,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),e=this.resolvedPos.doc.resolve(t);return new ro(e,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new ro(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new ro(t,this.editor)}get children(){const t=[];return this.node.content.forEach((e,r)=>{const i=e.isBlock&&!e.isTextblock,o=e.isAtom&&!e.isText,a=this.pos+r+(o?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(a);if(!i&&c.depth<=this.depth)return;const f=new ro(c,this.editor,i,i?e:null);i&&(f.actualDepth=this.depth+1),t.push(new ro(c,this.editor,i,i?e:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,e={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(e).length>0){const o=i.node.attrs,a=Object.keys(e);for(let c=0;c<a.length;c+=1){const f=a[c];if(o[f]!==e[f])break}}else r=i;i=i.parent}return r}querySelector(t,e={}){return this.querySelectorAll(t,e,!0)[0]||null}querySelectorAll(t,e={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const o=Object.keys(e);return this.children.forEach(a=>{r&&i.length>0||(a.node.type.name===t&&o.every(c=>e[c]===a.node.attrs[c])&&i.push(a),!(r&&i.length>0)&&(i=i.concat(a.querySelectorAll(t,e,r))))}),i}setAttribute(t){const{tr:e}=this.editor.state;e.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(e)}},qD=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function VD(n,t,e){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(i),i}var PD=class extends RD{constructor(n={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(n),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:o})=>this.options.onDrop(r,i,o)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),e=AS(t,this.options.autofocus);this.editorState=oo.create({doc:t,schema:this.schema,selection:e||void 0}),this.options.element&&this.mount(this.options.element)}mount(n){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(n),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const n=this.editorView.dom;n!=null&&n.editor&&delete n.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(n){console.warn("Failed to remove CSS element:",n)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=VD(qD,this.options.injectNonce))}setOptions(n={}){this.options={...this.options,...n},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(n,t=!0){this.setOptions({editable:n}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:n=>{this.editorState=n},dispatch:n=>{this.dispatchTransaction(n)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(n,t)=>{if(this.editorView)return this.editorView[t];if(t==="state")return this.editorState;if(t in n)return Reflect.get(n,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(n,t){const e=DS(t)?t(n,[...this.state.plugins]):[...this.state.plugins,n],r=this.state.reconfigure({plugins:e});return this.view.updateState(r),r}unregisterPlugin(n){if(this.isDestroyed)return;const t=this.state.plugins;let e=t;if([].concat(n).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;e=e.filter(a=>!a.key.startsWith(o))}),t.length===e.length)return;const r=this.state.reconfigure({plugins:e});return this.view.updateState(r),r}createExtensionManager(){var n,t;const e=[...this.options.enableCoreExtensions?[KS,VS.configure({blockSeparator:(t=(n=this.options.coreExtensionOptions)==null?void 0:n.clipboardTextSerializer)==null?void 0:t.blockSeparator}),PS,FS,QS,ZS,GS,XS,JS,WS.configure({direction:this.options.textDirection})].filter(r=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[r.name]!==!1:!0):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r?.type));this.extensionManager=new Nf(e,this)}createCommandManager(){this.commandManager=new Ef({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let n;try{n=hm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(e=>e.name!=="collaboration"),this.createExtensionManager()}}),n=hm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return n}createView(n){var t;this.editorView=new SS(n,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const e=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(e),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(n){this.isCapturingTransaction=!0,n(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(n){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=n;return}n.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:t,transactions:e}=this.state.applyTransaction(n),r=!this.state.selection.eq(t.selection),i=e.includes(n),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:n,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:n,appendedTransactions:e.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:n});const a=e.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),c=a?.getMeta("focus"),f=a?.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:a}),f&&this.emit("blur",{editor:this,event:f.event,transaction:a}),!(n.getMeta("preventUpdate")||!e.some(h=>h.docChanged)||o.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:n,appendedTransactions:e.slice(1)})}getAttributes(n){return jS(this.state,n)}isActive(n,t){const e=typeof n=="string"?n:null,r=typeof n=="string"?t:n;return sD(this.state,e,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return lg(this.state.doc.content,this.schema)}getText(n){const{blockSeparator:t=`

`,textSerializers:e={}}=n||{};return Wz(this.state.doc,{blockSeparator:t,textSerializers:{...$S(this.schema),...e}})}get isEmpty(){return Of(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var n,t;return(t=(n=this.editorView)==null?void 0:n.isDestroyed)!=null?t:!0}$node(n,t){var e;return((e=this.$doc)==null?void 0:e.querySelector(n,t))||null}$nodes(n,t){var e;return((e=this.$doc)==null?void 0:e.querySelectorAll(n,t))||null}$pos(n){const t=this.state.doc.resolve(n);return new UD(t,this)}get $doc(){return this.$pos(0)}};function is(n){return new Rf({find:n.find,handler:({state:t,range:e,match:r})=>{const i=Rt(n.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:o}=t,a=r[r.length-1],c=r[0];if(a){const f=c.search(/\S/),h=e.from+c.indexOf(a),p=h+a.length;if(cg(e.from,e.to,t.doc).filter(y=>y.mark.type.excluded.find(b=>b===n.type&&b!==y.mark.type)).filter(y=>y.to>h).length)return null;p<e.to&&o.delete(p,e.to),h>e.from&&o.delete(e.from+f,h);const g=e.from+f+a.length;o.addMark(e.from+f,g,n.type.create(i||{})),o.removeStoredMark(n.type)}},undoable:n.undoable})}function JD(n){return new Rf({find:n.find,handler:({state:t,range:e,match:r})=>{const i=Rt(n.getAttributes,void 0,r)||{},{tr:o}=t,a=e.from;let c=e.to;const f=n.type.create(i);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=a+h;p>c?p=c:c=p+r[1].length;const g=r[0][r[0].length-1];o.insertText(g,a+r[0].length-1),o.replaceWith(p,c,f)}else if(r[0]){const h=n.type.isInline?a:a-1;o.insert(h,n.type.create(i)).delete(o.mapping.map(a),o.mapping.map(c))}o.scrollIntoView()},undoable:n.undoable})}function GD(n){return new Rf({find:n.find,handler:({state:t,range:e,match:r})=>{const i=t.doc.resolve(e.from),o=Rt(n.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),n.type))return null;t.tr.delete(e.from,e.to).setBlockType(e.from,e.from,n.type,o)},undoable:n.undoable})}function ko(n){return new Rf({find:n.find,handler:({state:t,range:e,match:r,chain:i})=>{const o=Rt(n.getAttributes,void 0,r)||{},a=t.tr.delete(e.from,e.to),c=a.doc.resolve(e.from).blockRange(),f=c&&Vm(c,n.type,o);if(!f)return null;if(a.wrap(c,f),n.keepMarks&&n.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:y}=n.editor.extensionManager,b=g||p.$to.parentOffset&&p.$from.marks();if(b){const k=b.filter(x=>y.includes(x.type.name));a.ensureMarks(k)}}if(n.keepAttributes){const p=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,o).run()}const h=a.doc.resolve(e.from-1).nodeBefore;h&&h.type===n.type&&hi(a.doc,e.from-1)&&(!n.joinPredicate||n.joinPredicate(r,h))&&a.join(e.from-1)},undoable:n.undoable})}var KD=n=>"touches"in n,YD=class{constructor(n){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const c=a.clientX-this.startX,f=a.clientY-this.startY;this.handleResize(c,f)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const c=a.touches[0];if(!c)return;const f=c.clientX-this.startX,h=c.clientY-this.startY;this.handleResize(f,h)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,c=this.element.offsetHeight;this.onCommit(a,c),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var t,e,r,i,o;this.node=n.node,this.element=n.element,this.contentElement=n.contentElement,this.getPos=n.getPos,this.onResize=n.onResize,this.onCommit=n.onCommit,this.onUpdate=n.onUpdate,(t=n.options)!=null&&t.min&&(this.minSize={...this.minSize,...n.options.min}),(e=n.options)!=null&&e.max&&(this.maxSize=n.options.max),(r=n?.options)!=null&&r.directions&&(this.directions=n.options.directions),(i=n.options)!=null&&i.preserveAspectRatio&&(this.preserveAspectRatio=n.options.preserveAspectRatio),(o=n.options)!=null&&o.className&&(this.classNames={container:n.options.className.container||"",wrapper:n.options.className.wrapper||"",handle:n.options.className.handle||"",resizing:n.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(n,t,e){return n.type!==this.node.type?!1:(this.node=n,this.onUpdate?this.onUpdate(n,t,e):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){const n=document.createElement("div");return n.dataset.resizeContainer="",n.dataset.node=this.node.type.name,n.style.display="flex",n.style.justifyContent="flex-start",n.style.alignItems="flex-start",this.classNames.container&&(n.className=this.classNames.container),n.appendChild(this.wrapper),n}createWrapper(){const n=document.createElement("div");return n.style.position="relative",n.style.display="block",n.dataset.resizeWrapper="",this.classNames.wrapper&&(n.className=this.classNames.wrapper),n.appendChild(this.element),n}createHandle(n){const t=document.createElement("div");return t.dataset.resizeHandle=n,t.style.position="absolute",this.classNames.handle&&(t.className=this.classNames.handle),t}positionHandle(n,t){const e=t.includes("top"),r=t.includes("bottom"),i=t.includes("left"),o=t.includes("right");e&&(n.style.top="0"),r&&(n.style.bottom="0"),i&&(n.style.left="0"),o&&(n.style.right="0"),(t==="top"||t==="bottom")&&(n.style.left="0",n.style.right="0"),(t==="left"||t==="right")&&(n.style.top="0",n.style.bottom="0")}attachHandles(){this.directions.forEach(n=>{const t=this.createHandle(n);this.positionHandle(t,n),t.addEventListener("mousedown",e=>this.handleResizeStart(e,n)),t.addEventListener("touchstart",e=>this.handleResizeStart(e,n)),this.wrapper.appendChild(t)})}applyInitialSize(){const n=this.node.attrs.width,t=this.node.attrs.height;n?(this.element.style.width=`${n}px`,this.initialWidth=n):this.initialWidth=this.element.offsetWidth,t?(this.element.style.height=`${t}px`,this.initialHeight=t):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(n,t){n.preventDefault(),n.stopPropagation(),this.isResizing=!0,this.activeHandle=t,KD(n)?(this.startX=n.touches[0].clientX,this.startY=n.touches[0].clientY):(this.startX=n.clientX,this.startY=n.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(n,t){if(!this.activeHandle)return;const e=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:i}=this.calculateNewDimensions(this.activeHandle,n,t),o=this.applyConstraints(r,i,e);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(n,t,e){let r=this.startWidth,i=this.startHeight;const o=n.includes("right"),a=n.includes("left"),c=n.includes("bottom"),f=n.includes("top");return o?r=this.startWidth+t:a&&(r=this.startWidth-t),c?i=this.startHeight+e:f&&(i=this.startHeight-e),(n==="right"||n==="left")&&(r=this.startWidth+(o?t:-t)),(n==="top"||n==="bottom")&&(i=this.startHeight+(c?e:-e)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,i,n):{width:r,height:i}}applyConstraints(n,t,e){var r,i,o,a;if(!e){let h=Math.max(this.minSize.width,n),p=Math.max(this.minSize.height,t);return(r=this.maxSize)!=null&&r.width&&(h=Math.min(this.maxSize.width,h)),(i=this.maxSize)!=null&&i.height&&(p=Math.min(this.maxSize.height,p)),{width:h,height:p}}let c=n,f=t;return c<this.minSize.width&&(c=this.minSize.width,f=c/this.aspectRatio),f<this.minSize.height&&(f=this.minSize.height,c=f*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&c>this.maxSize.width&&(c=this.maxSize.width,f=c/this.aspectRatio),(a=this.maxSize)!=null&&a.height&&f>this.maxSize.height&&(f=this.maxSize.height,c=f*this.aspectRatio),{width:c,height:f}}applyAspectRatio(n,t,e){return e==="left"||e==="right"?{width:n,height:n/this.aspectRatio}:e==="top"||e==="bottom"?{width:t*this.aspectRatio,height:t}:{width:n,height:n/this.aspectRatio}}},FD={};ng(FD,{createAtomBlockMarkdownSpec:()=>QD,createBlockMarkdownSpec:()=>XD,createInlineMarkdownSpec:()=>tB,parseAttributes:()=>fg,parseIndentedBlocks:()=>mm,renderNestedMarkdownContent:()=>hg,serializeAttributes:()=>dg});function fg(n){if(!(n!=null&&n.trim()))return{};const t={},e=[],r=n.replace(/["']([^"']*)["']/g,f=>(e.push(f),`__QUOTED_${e.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const f=i.map(h=>h.trim().slice(1));t.class=f.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(t.id=o[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,f,h])=>{var p;const g=parseInt(((p=h.match(/__QUOTED_(\d+)__/))==null?void 0:p[1])||"0",10),y=e[g];y&&(t[f]=y.slice(1,-1))});const c=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return c&&c.split(/\s+/).filter(Boolean).forEach(f=>{f.match(/^[a-zA-Z][\w-]*$/)&&(t[f]=!0)}),t}function dg(n){if(!n||Object.keys(n).length===0)return"";const t=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(e=>t.push(`.${e}`)),n.id&&t.push(`#${n.id}`),Object.entries(n).forEach(([e,r])=>{e==="class"||e==="id"||(r===!0?t.push(e):r!==!1&&r!=null&&t.push(`${e}="${String(r)}"`))}),t.join(" ")}function QD(n){const{nodeName:t,name:e,parseAttributes:r=fg,serializeAttributes:i=dg,defaultAttributes:o={},requiredAttributes:a=[],allowedAttributes:c}=n,f=e||t,h=p=>{if(!c)return p;const g={};return c.forEach(y=>{y in p&&(g[y]=p[y])}),g};return{parseMarkdown:(p,g)=>{const y={...o,...p.attributes};return g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"block",start(p){var g;const y=new RegExp(`^:::${f}(?:\\s|$)`,"m"),b=(g=p.match(y))==null?void 0:g.index;return b!==void 0?b:-1},tokenize(p,g,y){const b=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=p.match(b);if(!k)return;const x=k[1]||"",S=r(x);if(!a.find(T=>!(T in S)))return{type:t,raw:k[0],attributes:S}}},renderMarkdown:p=>{const g=h(p.attrs||{}),y=i(g),b=y?` {${y}}`:"";return`:::${f}${b} :::`}}}function XD(n){const{nodeName:t,name:e,getContent:r,parseAttributes:i=fg,serializeAttributes:o=dg,defaultAttributes:a={},content:c="block",allowedAttributes:f}=n,h=e||t,p=g=>{if(!f)return g;const y={};return f.forEach(b=>{b in g&&(y[b]=g[b])}),y};return{parseMarkdown:(g,y)=>{let b;if(r){const x=r(g);b=typeof x=="string"?[{type:"text",text:x}]:x}else c==="block"?b=y.parseChildren(g.tokens||[]):b=y.parseInline(g.tokens||[]);const k={...a,...g.attributes};return y.createNode(t,k,b)},markdownTokenizer:{name:t,level:"block",start(g){var y;const b=new RegExp(`^:::${h}`,"m"),k=(y=g.match(b))==null?void 0:y.index;return k!==void 0?k:-1},tokenize(g,y,b){var k;const x=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),S=g.match(x);if(!S)return;const[T,D=""]=S,H=i(D);let V=1;const L=T.length;let I="";const q=/^:::([\w-]*)(\s.*)?/gm,Y=g.slice(L);for(q.lastIndex=0;;){const nt=q.exec(Y);if(nt===null)break;const Qt=nt.index,de=nt[1];if(!((k=nt[2])!=null&&k.endsWith(":::"))){if(de)V+=1;else if(V-=1,V===0){const Ut=Y.slice(0,Qt);I=Ut.trim();const Pe=g.slice(0,L+Qt+nt[0].length);let Ct=[];if(I)if(c==="block")for(Ct=b.blockTokens(Ut),Ct.forEach(ht=>{ht.text&&(!ht.tokens||ht.tokens.length===0)&&(ht.tokens=b.inlineTokens(ht.text))});Ct.length>0;){const ht=Ct[Ct.length-1];if(ht.type==="paragraph"&&(!ht.text||ht.text.trim()===""))Ct.pop();else break}else Ct=b.inlineTokens(I);return{type:t,raw:Pe,attributes:H,content:I,tokens:Ct}}}}}},renderMarkdown:(g,y)=>{const b=p(g.attrs||{}),k=o(b),x=k?` {${k}}`:"",S=y.renderChildren(g.content||[],`

`);return`:::${h}${x}

${S}

:::`}}}function ZD(n){if(!n.trim())return{};const t={},e=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=e.exec(n);for(;r!==null;){const[,i,o,a]=r;t[i]=o||a,r=e.exec(n)}return t}function WD(n){return Object.entries(n).filter(([,t])=>t!=null).map(([t,e])=>`${t}="${e}"`).join(" ")}function tB(n){const{nodeName:t,name:e,getContent:r,parseAttributes:i=ZD,serializeAttributes:o=WD,defaultAttributes:a={},selfClosing:c=!1,allowedAttributes:f}=n,h=e||t,p=y=>{if(!f)return y;const b={};return f.forEach(k=>{k in y&&(b[k]=y[k])}),b},g=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,b)=>{const k={...a,...y.attributes};if(c)return b.createNode(t,k);const x=r?r(y):y.content||"";return x?b.createNode(t,k,[b.createTextNode(x)]):b.createNode(t,k,[])},markdownTokenizer:{name:t,level:"inline",start(y){const b=c?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),k=y.match(b),x=k?.index;return x!==void 0?x:-1},tokenize(y,b,k){const x=c?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),S=y.match(x);if(!S)return;let T="",D="";if(c){const[,V]=S;D=V}else{const[,V,L]=S;D=V,T=L||""}const H=i(D.trim());return{type:t,raw:S[0],content:T.trim(),attributes:H}}},renderMarkdown:y=>{let b="";r?b=r(y):y.content&&y.content.length>0&&(b=y.content.filter(T=>T.type==="text").map(T=>T.text).join(""));const k=p(y.attrs||{}),x=o(k),S=x?` ${x}`:"";return c?`[${h}${S}]`:`[${h}${S}]${b}[/${h}]`}}}function mm(n,t,e){var r,i,o,a;const c=n.split(`
`),f=[];let h="",p=0;const g=t.baseIndentSize||2;for(;p<c.length;){const y=c[p],b=y.match(t.itemPattern);if(!b){if(f.length>0)break;if(y.trim()===""){p+=1,h=`${h}${y}
`;continue}else return}const k=t.extractItemData(b),{indentLevel:x,mainContent:S}=k;h=`${h}${y}
`;const T=[S];for(p+=1;p<c.length;){const L=c[p];if(L.trim()===""){const I=c.slice(p+1).findIndex(q=>q.trim()!=="");if(I===-1)break;if((((i=(r=c[p+1+I].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>x){T.push(L),h=`${h}${L}
`,p+=1;continue}else break}if((((a=(o=L.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:a.length)||0)>x)T.push(L),h=`${h}${L}
`,p+=1;else break}let D;const H=T.slice(1);if(H.length>0){const L=H.map(I=>I.slice(x+g)).join(`
`);L.trim()&&(t.customNestedParser?D=t.customNestedParser(L):D=e.blockTokens(L))}const V=t.createToken(k,D);f.push(V)}if(f.length!==0)return{items:f,raw:h}}function hg(n,t,e,r){if(!n||!Array.isArray(n.content))return"";const i=typeof e=="function"?e(r):e,[o,...a]=n.content,c=t.renderChildren([o]),f=[`${i}${c}`];return a&&a.length>0&&a.forEach(h=>{const p=t.renderChildren([h]);if(p){const g=p.split(`
`).map(y=>y?t.indent(y):"").join(`
`);f.push(g)}}),f.join(`
`)}function eB(n,t,e={}){const{state:r}=t,{doc:i,tr:o}=r,a=n;i.descendants((c,f)=>{const h=o.mapping.map(f),p=o.mapping.map(f)+c.nodeSize;let g=null;if(c.marks.forEach(b=>{if(b!==a)return!1;g=b}),!g)return;let y=!1;if(Object.keys(e).forEach(b=>{e[b]!==g.attrs[b]&&(y=!0)}),y){const b=n.type.create({...n.attrs,...e});o.removeMark(h,p,n.type),o.addMark(h,p,b)}}),o.docChanged&&t.view.dispatch(o)}var An=class tM extends ug{constructor(){super(...arguments),this.type="node"}static create(t={}){const e=typeof t=="function"?t():t;return new tM(e)}configure(t){return super.configure(t)}extend(t){const e=typeof t=="function"?t():t;return super.extend(e)}};function di(n){return new LD({find:n.find,handler:({state:t,range:e,match:r,pasteEvent:i})=>{const o=Rt(n.getAttributes,void 0,r,i);if(o===!1||o===null)return null;const{tr:a}=t,c=r[r.length-1],f=r[0];let h=e.to;if(c){const p=f.search(/\S/),g=e.from+f.indexOf(c),y=g+c.length;if(cg(e.from,e.to,t.doc).filter(b=>b.mark.type.excluded.find(k=>k===n.type&&k!==b.mark.type)).filter(b=>b.to>g).length)return null;y<e.to&&a.delete(y,e.to),g>e.from&&a.delete(e.from+p,g),h=e.from+p+c.length,a.addMark(e.from+p,h,n.type.create(o||{})),a.removeStoredMark(n.type)}}})}var nB=function n(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(i=r;i--!==0;)if(!n(t[i],e[i]))return!1;return!0}if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i of t.entries())if(!e.has(i[0]))return!1;for(i of t.entries())if(!n(i[1],e.get(i[0])))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i of t.entries())if(!e.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(i=r;i--!==0;)if(t[i]!==e[i])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(e).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!(a==="_owner"&&t.$$typeof)&&!n(t[a],e[a]))return!1}return!0}return t!==t&&e!==e};const rB=Qw(nB);var eM={exports:{}},Np={};var wk;function iB(){if(wk)return Np;wk=1;var n=De,t=jm;function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,o=n.useRef,a=n.useEffect,c=n.useMemo,f=n.useDebugValue;return Np.useSyncExternalStoreWithSelector=function(h,p,g,y,b){var k=o(null);if(k.current===null){var x={hasValue:!1,value:null};k.current=x}else x=k.current;k=c(function(){function T(I){if(!D){if(D=!0,H=I,I=y(I),b!==void 0&&x.hasValue){var q=x.value;if(b(q,I))return V=q}return V=I}if(q=V,r(H,I))return q;var Y=y(I);return b!==void 0&&b(q,Y)?(H=I,q):(H=I,V=Y)}var D=!1,H,V,L=g===void 0?null:g;return[function(){return T(p())},L===null?void 0:function(){return T(L())}]},[p,g,y,b]);var S=i(h,k[0],k[1]);return a(function(){x.hasValue=!0,x.value=S},[S]),f(S),S},Np}eM.exports=iB();var sB=eM.exports,oB=(...n)=>t=>{n.forEach(e=>{typeof e=="function"?e(t):e&&(e.current=t)})},lB=({contentComponent:n})=>{const t=jm.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return fe.jsx(fe.Fragment,{children:Object.values(t)})};function aB(){const n=new Set;let t={};return{subscribe(e){return n.add(e),()=>{n.delete(e)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(e,r){t={...t,[e]:ow.createPortal(r.reactElement,r.element,e)},n.forEach(i=>i())},removeRenderer(e){const r={...t};delete r[e],t=r,n.forEach(i=>i())}}}var cB=class extends De.Component{constructor(n){var t;super(n),this.editorContentRef=De.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=n.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const n=this.props.editor;if(n&&!n.isDestroyed&&n.options.element){if(n.contentComponent)return;const t=this.editorContentRef.current;t.append(n.view.dom),n.setOptions({element:t}),n.contentComponent=aB(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=n.contentComponent.subscribe(()=>{this.setState(e=>e.hasContentComponentInitialized?e:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),n.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((n=t.view.dom)!=null&&n.firstChild))return;const e=document.createElement("div");e.append(t.view.dom),t.setOptions({element:e})}catch{}}}render(){const{editor:n,innerRef:t,...e}=this.props;return fe.jsxs(fe.Fragment,{children:[fe.jsx("div",{ref:oB(t,this.editorContentRef),...e}),n?.contentComponent&&fe.jsx(lB,{contentComponent:n.contentComponent})]})}},uB=Gt.forwardRef((n,t)=>{const e=De.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return De.createElement(cB,{key:e,innerRef:t,...n})});De.memo(uB);var fB=typeof window<"u"?Gt.useLayoutEffect:Gt.useEffect,dB=class{constructor(n){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=n,this.lastSnapshot={editor:n,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(n){return this.subscribers.add(n),()=>{this.subscribers.delete(n)}}watch(n){if(this.editor=n,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},e=this.editor;return e.on("transaction",t),()=>{e.off("transaction",t)}}}};function hB(n){var t;const[e]=Gt.useState(()=>new dB(n.editor)),r=sB.useSyncExternalStoreWithSelector(e.subscribe,e.getSnapshot,e.getServerSnapshot,n.selector,(t=n.equalityFn)!=null?t:rB);return fB(()=>e.watch(n.editor),[n.editor,e]),Gt.useDebugValue(r),r}var pB=!1,gm=typeof window>"u",mB=gm||!!(typeof window<"u"&&window.next),gB=class nM{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(e=>e())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?gm||mB?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...e)=>{var r,i;return(i=(r=this.options.current).onBeforeCreate)==null?void 0:i.call(r,...e)},onBlur:(...e)=>{var r,i;return(i=(r=this.options.current).onBlur)==null?void 0:i.call(r,...e)},onCreate:(...e)=>{var r,i;return(i=(r=this.options.current).onCreate)==null?void 0:i.call(r,...e)},onDestroy:(...e)=>{var r,i;return(i=(r=this.options.current).onDestroy)==null?void 0:i.call(r,...e)},onFocus:(...e)=>{var r,i;return(i=(r=this.options.current).onFocus)==null?void 0:i.call(r,...e)},onSelectionUpdate:(...e)=>{var r,i;return(i=(r=this.options.current).onSelectionUpdate)==null?void 0:i.call(r,...e)},onTransaction:(...e)=>{var r,i;return(i=(r=this.options.current).onTransaction)==null?void 0:i.call(r,...e)},onUpdate:(...e)=>{var r,i;return(i=(r=this.options.current).onUpdate)==null?void 0:i.call(r,...e)},onContentError:(...e)=>{var r,i;return(i=(r=this.options.current).onContentError)==null?void 0:i.call(r,...e)},onDrop:(...e)=>{var r,i;return(i=(r=this.options.current).onDrop)==null?void 0:i.call(r,...e)},onPaste:(...e)=>{var r,i;return(i=(r=this.options.current).onPaste)==null?void 0:i.call(r,...e)},onDelete:(...e)=>{var r,i;return(i=(r=this.options.current).onDelete)==null?void 0:i.call(r,...e)}};return new PD(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,e){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&e.extensions?t.extensions.length!==e.extensions.length?!1:t.extensions.every((i,o)=>{var a;return i===((a=e.extensions)==null?void 0:a[o])}):t[r]===e[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?nM.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((e,r)=>e===t[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,e=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){e&&e.setOptions(this.options.current);return}e&&!e.isDestroyed&&(e.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function yB(n={},t=[]){const e=Gt.useRef(n);e.current=n;const[r]=Gt.useState(()=>new gB(e)),i=jm.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return Gt.useDebugValue(i),Gt.useEffect(r.onRender(t)),hB({editor:i,selector:({transactionNumber:o})=>n.shouldRerenderOnTransaction===!1||n.shouldRerenderOnTransaction===void 0?null:n.immediatelyRender&&o===0?0:o+1}),i}var vB=Gt.createContext({editor:null});vB.Consumer;var bB=Gt.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),kB=()=>Gt.useContext(bB);De.forwardRef((n,t)=>{const{onDragStart:e}=kB(),r=n.as||"div";return fe.jsx(r,{...n,ref:t,"data-node-view-wrapper":"",onDragStart:e,style:{whiteSpace:"normal",...n.style}})});De.createContext({markViewContentRef:()=>{}});var rM=(n=>(n.Action="action",n))(rM||{});class Ft{constructor({forceName:t,tiptapExtension:e,tiptapExtensionDeps:r,onBridgeMessage:i,onEditorMessage:o,extendEditorState:a,extendEditorInstance:c,extendCSS:f,config:h,extendConfig:p}){e?this.name=Array.isArray(e)?e.map(g=>g.name).join("+"):e.name:this.name=t||"BridgeExtension",this.tiptapExtension=e,this.tiptapExtensionDeps=r,this.onBridgeMessage=i,this.onEditorMessage=o,this.extendEditorState=a,this.extendEditorInstance=c,this.extendCSS=f,this.config=h,this.extendConfig=p}clone(){return new Ft({...this,forceName:this.name})}configureExtension(t){const e=this.clone();return e.config=t,e}configureCSS(t){const e=this.clone();return e.extendCSS=t,e}extendExtension(t){const e=this.clone();return e.extendConfig=t,e}configureTiptapExtensionsOnRunTime(t,e){var r,i;return this.tiptapExtension&&(t&&(this.tiptapExtension=(r=this.tiptapExtension)==null?void 0:r.configure(t)),e&&(this.tiptapExtension=(i=this.tiptapExtension)==null?void 0:i.extend(e))),[this.tiptapExtension,...this.tiptapExtensionDeps||[]]}}class wB{constructor(){JA(this,"subscriptions",{}),this.subscriptions={}}onMessage(t,e){this.subscriptions[t]&&this.subscriptions[t].forEach(r=>{r(e)})}addListener(t,e){this.subscriptions[t]||(this.subscriptions[t]=[]),this.subscriptions[t].push(e)}sendAsyncMessage(t,e){const r=Math.random().toString(36).substring(7);return t.payload=t.payload||{},t.payload.messageId=r,new Promise(i=>{this.addListener(r,i),e(t)})}}const Qc=new wB,iM=()=>{let n=!1;try{require("expo-constants")&&(n=!0)}catch{n=!1}return n};class xB{constructor(){this.focus=!1,window.document.addEventListener("focus",()=>{this.focus=!0},!0),window.document.addEventListener("blur",()=>{this.focus=!1},!0)}get isFocused(){return this.focus}}const SB={isFocused:!1},MB=iM()?SB:new xB;var TB=An.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(n,t)=>n.content?t.renderChildren(n.content,`

`):""}),EB=TB,CB=An.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",ie(this.options.HTMLAttributes,n),0]},parseMarkdown:(n,t)=>{const e=n.tokens||[];return e.length===1&&e[0].type==="image"?t.parseChildren([e[0]]):t.createNode("paragraph",void 0,t.parseInline(e))},renderMarkdown:(n,t)=>!n||!Array.isArray(n.content)?"":t.renderChildren(n.content),addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),AB=CB,OB=An.create({name:"text",group:"inline",parseMarkdown:n=>({type:"text",text:n.text||""}),renderMarkdown:n=>n.text||""}),RB=OB,Il=(n=>(n.SetSelection="set-selection",n.GetHTML="get-html",n.GetJSON="get-json",n.GetText="get-text",n.SendHTMLToNative="send-html-back",n.SendTextToNative="send-text-back",n.SendJSONToNative="send-json-back",n.SetContent="set-content",n.StateUpdate="stateUpdate",n.Focus="focus",n.Blur="blur",n.EditorReady="editor-ready",n.UpdateScrollThresholdAndMargin="update-scroll-threshold-and-margin",n.ContentUpdate="content-update",n.DocumentHeight="document-height",n.SetEditable="set-editable",n))(Il||{});const NB=new Ft({forceName:"coreBridge",tiptapExtension:EB,tiptapExtensionDeps:[AB,RB],onBridgeMessage:(n,t,e)=>t.type==="set-content"?(n.commands.setContent(t.payload.content),!0):(t.type==="get-html"&&e({type:"send-html-back",payload:{content:n.getHTML(),messageId:t.payload.messageId}}),t.type==="get-json"&&e({type:"send-json-back",payload:{content:n.getJSON(),messageId:t.payload.messageId}}),t.type==="get-text"&&e({type:"send-text-back",payload:{content:n.getText(),messageId:t.payload.messageId}}),t.type==="set-selection"?(n.commands.setTextSelection({from:t.payload.from,to:t.payload.to}),!0):t.type==="focus"?(n.commands.focus(t.payload),!0):t.type==="blur"?(n.commands.blur(),!0):t.type==="update-scroll-threshold-and-margin"?(n.setOptions({editorProps:{scrollThreshold:{top:0,bottom:t.payload,right:0,left:0},scrollMargin:{top:0,bottom:t.payload,right:0,left:0}}}),!0):t.type==="set-editable"?(n.setEditable(t.payload),!0):!1),onEditorMessage:({type:n,payload:t},e)=>n==="send-html-back"||n==="send-text-back"||n==="send-json-back"?(Qc.onMessage(t.messageId,t.content),!0):(n==="editor-ready"&&e.autofocus&&e.focus("end"),n==="stateUpdate"&&e._updateEditorState(t),n==="content-update"&&e._onContentUpdate(),!1),extendEditorInstance:(n,t,e,r,i)=>({updateScrollThresholdAndMargin:o=>n({type:"update-scroll-threshold-and-margin",payload:o}),setSelection:(o,a)=>{n({type:"set-selection",payload:{from:o,to:a}})},setContent:o=>{n({type:"set-content",payload:{content:o}})},getHTML:async()=>await Qc.sendAsyncMessage({type:"get-html"},n),getText:async()=>await Qc.sendAsyncMessage({type:"get-text"},n),getJSON:async()=>await Qc.sendAsyncMessage({type:"get-json"},n),focus:o=>{var a;i==="android"?setTimeout(()=>{var c;(c=t?.current)==null||c.requestFocus()},100):(a=t?.current)==null||a.requestFocus(),e&&e.current&&r&&r({...e.current,isFocused:!0}),n({type:"focus",payload:o})},blur:()=>{n({type:"blur",payload:void 0})},injectJS:o=>{var a;(a=t?.current)==null||a.injectJavaScript(o)},setEditable:o=>{n({type:"set-editable",payload:o})}}),extendEditorState:n=>({isFocused:MB.isFocused,isReady:!0,selection:{from:n.state.selection.from,to:n.state.selection.to},editable:n.isEditable,empty:n.isEmpty})}),zB=_t.create({name:"eventHandler",addProseMirrorPlugins(){return[new Et({key:new It("blueBackground"),state:{init(){return be.empty},apply(n,t,e,r){if(n.selection.empty)return be.empty;{const i=[],{from:o,to:a}=n.selection;return i.push(In.inline(o,a,{class:"highlight-background"})),be.create(r.doc,i)}}},props:{decorations(n){return this.getState(n)}}})]}});class DB{constructor(){this.connected=!1,this.resizeObserver=null,this.currentHeight=null}connect(t,e){this.connected=!0,this.currentHeight=t.getBoundingClientRect().height,e(this.currentHeight),this.resizeObserver=new ResizeObserver(r=>{for(let i of r){const o=i.target.getBoundingClientRect().height;this.currentHeight!==o&&(this.currentHeight=o,e(o))}}),this.resizeObserver.observe(t)}disconnect(){var t;(t=this.resizeObserver)==null||t.disconnect()}get height(){return this.currentHeight}}const BB={height:0,connect:()=>{},connected:!0},xk=iM()?BB:new DB,Ml=n=>{var t;(t=window.ReactNativeWebView)==null||t.postMessage(JSON.stringify(n))},LB=n=>{const{tiptapOptions:t={},bridges:e=[]}=n||{},r=Gt.useMemo(()=>JSON.parse(window.bridgeExtensionConfigMap||"{}"),[]);function i(p){return p!=null}const o=e.map(p=>{const g=r[p.name];if(!g)return null;const{optionsConfig:y,extendConfig:b}=g;return p.configureTiptapExtensionsOnRunTime(y,b)}).filter(i).flat(),a={...t,extensions:[...window.disableColorHighlight?[]:[zB],...o,...t.extensions||[]]},c=JO(p=>{let g={};const y=e.reduce((b,k)=>k.extendEditorState?Object.assign(b,k.extendEditorState(p)):b,g);Ml({type:Il.StateUpdate,payload:y})},10),f=window.initialContent||"",h=yB({content:f,onCreate:()=>Ml({type:Il.EditorReady,payload:void 0}),onUpdate:p=>{c(p.editor),Ml({type:Il.ContentUpdate,payload:void 0})},onSelectionUpdate:p=>c(p.editor),onTransaction:p=>c(p.editor),editable:window.editable,shouldRerenderOnTransaction:!0,...a});return Gt.useEffect(()=>{if(!h)return;const p=y=>{e.forEach(b=>{b.onBridgeMessage&&b.onBridgeMessage(h,y,Ml)})},g=y=>{if(!(y instanceof MessageEvent))return;const b=JSON.parse(y.data);if(b.type===rM.Action){if(b.id){if(window.lastMessageID===b.id)return;window.lastMessageID=b.id}p(b.payload)}};return window.addEventListener("message",g),document.addEventListener("message",g),()=>{window.removeEventListener("message",g),document.removeEventListener("message",g)}},[h,e]),Gt.useEffect(()=>{if(h&&!xk.connected&&window.dynamicHeight){const p=document.querySelector(".dynamic-height");xk.connect(document.querySelector(".ProseMirror"),g=>{p&&(p.scrollTop=0),Ml({type:Il.DocumentHeight,payload:g})})}},[h]),h};var Du=(n,t)=>{if(n==="slot")return 0;if(n instanceof Function)return n(t);const{children:e,...r}=t??{};if(n==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[n,r,e]},HB=/^\s*>\s$/,$B=An.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return Du("blockquote",{...ie(this.options.HTMLAttributes,n),children:Du("slot",{})})},parseMarkdown:(n,t)=>t.createNode("blockquote",void 0,t.parseChildren(n.tokens||[])),renderMarkdown:(n,t)=>{if(!n.content)return"";const e=">",r=[];return n.content.forEach(i=>{const o=t.renderChildren([i]).split(`
`).map(a=>a.trim()===""?e:`${e} ${a}`);r.push(o.join(`
`))}),r.join(`
${e}
`)},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[ko({find:HB,type:this.type})]}}),jB=$B;const IB=new Ft({tiptapExtension:jB,onBridgeMessage:(n,t)=>(t.type==="toggle-blockquote"&&n.chain().focus().toggleBlockquote().run(),!1),extendEditorInstance:n=>({toggleBlockquote:()=>n({type:"toggle-blockquote"})}),extendEditorState:n=>({canToggleBlockquote:n.can().toggleBlockquote(),isBlockquoteActive:n.isActive("blockquote")}),extendCSS:`
    blockquote {
        border-left: 3px solid #0d0d0d1a;
        padding-left: 1rem;
    }
  `});var _B=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,UB=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,qB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,VB=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,PB=Mr.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return Du("strong",{...ie(this.options.HTMLAttributes,n),children:Du("slot",{})})},markdownTokenName:"strong",parseMarkdown:(n,t)=>t.applyMark("bold",t.parseInline(n.tokens||[])),renderMarkdown:(n,t)=>`**${t.renderChildren(n)}**`,addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[is({find:_B,type:this.type}),is({find:qB,type:this.type})]},addPasteRules(){return[di({find:UB,type:this.type}),di({find:VB,type:this.type})]}}),JB=PB;const GB=new Ft({tiptapExtension:JB,onBridgeMessage:(n,t)=>(t.type==="toggle-bold"&&n.chain().focus().toggleBold().run(),!1),extendEditorInstance:n=>({toggleBold:()=>n({type:"toggle-bold"})}),extendEditorState:n=>({canToggleBold:n.can().toggleBold(),isBoldActive:n.isActive("bold")})});var KB=Object.defineProperty,YB=(n,t)=>{for(var e in t)KB(n,e,{get:t[e],enumerable:!0})},FB="listItem",Sk="textStyle",Mk=/^\s*([-+*])\s$/,sM=An.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",ie(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,t)=>n.type!=="list"||n.ordered?[]:{type:"bulletList",content:n.items?t.parseChildren(n.items):[]},renderMarkdown:(n,t)=>n.content?t.renderChildren(n.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(FB,this.editor.getAttributes(Sk)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=ko({find:Mk,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ko({find:Mk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Sk),editor:this.editor})),[n]}}),zf=An.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",ie(this.options.HTMLAttributes,n),0]},markdownTokenName:"list_item",parseMarkdown:(n,t)=>{if(n.type!=="list_item")return[];let e=[];if(n.tokens&&n.tokens.length>0)if(n.tokens.some(r=>r.type==="paragraph"))e=t.parseChildren(n.tokens);else{const r=n.tokens[0];if(r&&r.type==="text"&&r.tokens&&r.tokens.length>0){if(e=[{type:"paragraph",content:t.parseInline(r.tokens)}],n.tokens.length>1){const i=n.tokens.slice(1),o=t.parseChildren(i);e.push(...o)}}else e=t.parseChildren(n.tokens)}return e.length===0&&(e=[{type:"paragraph",content:[]}]),{type:"listItem",content:e}},renderMarkdown:(n,t,e)=>hg(n,t,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",e),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),QB={};YB(QB,{findListItemPos:()=>xa,getNextListDepth:()=>pg,handleBackspace:()=>ym,handleDelete:()=>vm,hasListBefore:()=>oM,hasListItemAfter:()=>XB,hasListItemBefore:()=>lM,listItemHasSubList:()=>aM,nextListIsDeeper:()=>cM,nextListIsHigher:()=>uM});var xa=(n,t)=>{const{$from:e}=t.selection,r=ae(n,t.schema);let i=null,o=e.depth,a=e.pos,c=null;for(;o>0&&c===null;)i=e.node(o),i.type===r?c=o:(o-=1,a-=1);return c===null?null:{$pos:t.doc.resolve(a),depth:c}},pg=(n,t)=>{const e=xa(n,t);if(!e)return!1;const[,r]=rD(t,n,e.$pos.pos+4);return r},oM=(n,t,e)=>{const{$anchor:r}=n.selection,i=Math.max(0,r.pos-2),o=n.doc.resolve(i).node();return!(!o||!e.includes(o.type.name))},lM=(n,t)=>{var e;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((e=i.nodeBefore)==null?void 0:e.type.name)!==n)},aM=(n,t,e)=>{if(!e)return!1;const r=ae(n,t.schema);let i=!1;return e.descendants(o=>{o.type===r&&(i=!0)}),i},ym=(n,t,e)=>{if(n.commands.undoInputRule())return!0;if(n.state.selection.from!==n.state.selection.to)return!1;if(!fi(n.state,t)&&oM(n.state,t,e)){const{$anchor:a}=n.state.selection,c=n.state.doc.resolve(a.before()-1),f=[];c.node().descendants((g,y)=>{g.type.name===t&&f.push({node:g,pos:y})});const h=f.at(-1);if(!h)return!1;const p=n.state.doc.resolve(c.start()+h.pos+1);return n.chain().cut({from:a.start()-1,to:a.end()+1},p.end()).joinForward().run()}if(!fi(n.state,t)||!lD(n.state))return!1;const r=xa(t,n.state);if(!r)return!1;const i=n.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=aM(t,n.state,i);return lM(t,n.state)&&!o?n.commands.joinItemBackward():n.chain().liftListItem(t).run()},cM=(n,t)=>{const e=pg(n,t),r=xa(n,t);return!r||!e?!1:e>r.depth},uM=(n,t)=>{const e=pg(n,t),r=xa(n,t);return!r||!e?!1:e<r.depth},vm=(n,t)=>{if(!fi(n.state,t)||!oD(n.state,t))return!1;const{selection:e}=n.state,{$from:r,$to:i}=e;return!e.empty&&r.sameParent(i)?!1:cM(t,n.state)?n.chain().focus(n.state.selection.from+4).lift(t).joinBackward().run():uM(t,n.state)?n.chain().joinForward().joinBackward().run():n.commands.joinItemForward()},XB=(n,t)=>{var e;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((e=i.nodeAfter)==null?void 0:e.type.name)!==n)},ZB=_t.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:n})=>{let t=!1;return this.options.listTypes.forEach(({itemName:e})=>{n.state.schema.nodes[e]!==void 0&&vm(n,e)&&(t=!0)}),t},"Mod-Delete":({editor:n})=>{let t=!1;return this.options.listTypes.forEach(({itemName:e})=>{n.state.schema.nodes[e]!==void 0&&vm(n,e)&&(t=!0)}),t},Backspace:({editor:n})=>{let t=!1;return this.options.listTypes.forEach(({itemName:e,wrapperNames:r})=>{n.state.schema.nodes[e]!==void 0&&ym(n,e,r)&&(t=!0)}),t},"Mod-Backspace":({editor:n})=>{let t=!1;return this.options.listTypes.forEach(({itemName:e,wrapperNames:r})=>{n.state.schema.nodes[e]!==void 0&&ym(n,e,r)&&(t=!0)}),t}}}}),Tk=/^(\s*)(\d+)\.\s+(.*)$/,WB=/^\s/;function tL(n){const t=[];let e=0,r=0;for(;e<n.length;){const i=n[e],o=i.match(Tk);if(!o)break;const[,a,c,f]=o,h=a.length;let p=f,g=e+1;const y=[i];for(;g<n.length;){const b=n[g];if(b.match(Tk))break;if(b.trim()==="")y.push(b),p+=`
`,g+=1;else if(b.match(WB))y.push(b),p+=`
${b.slice(h+2)}`,g+=1;else break}t.push({indent:h,number:parseInt(c,10),content:p.trim(),raw:y.join(`
`)}),r=g,e=g}return[t,r]}function fM(n,t,e){var r;const i=[];let o=0;for(;o<n.length;){const a=n[o];if(a.indent===t){const c=a.content.split(`
`),f=((r=c[0])==null?void 0:r.trim())||"",h=[];f&&h.push({type:"paragraph",raw:f,tokens:e.inlineTokens(f)});const p=c.slice(1).join(`
`).trim();if(p){const b=e.blockTokens(p);h.push(...b)}let g=o+1;const y=[];for(;g<n.length&&n[g].indent>t;)y.push(n[g]),g+=1;if(y.length>0){const b=Math.min(...y.map(x=>x.indent)),k=fM(y,b,e);h.push({type:"list",ordered:!0,start:y[0].number,items:k,raw:y.map(x=>x.raw).join(`
`)})}i.push({type:"list_item",raw:a.raw,tokens:h}),o=g}else o+=1}return i}function eL(n,t){return n.map(e=>{if(e.type!=="list_item")return t.parseChildren([e])[0];const r=[];return e.tokens&&e.tokens.length>0&&e.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...t.parseChildren([i]));else if(i.type==="text"&&i.tokens){const o=t.parseChildren([i]);r.push({type:"paragraph",content:o})}else{const o=t.parseChildren([i]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var nL="listItem",Ek="textStyle",Ck=/^(\d+)\.\s$/,dM=An.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:t,...e}=n;return t===1?["ol",ie(this.options.HTMLAttributes,e),0]:["ol",ie(this.options.HTMLAttributes,n),0]},markdownTokenName:"list",parseMarkdown:(n,t)=>{if(n.type!=="list"||!n.ordered)return[];const e=n.start||1,r=n.items?eL(n.items,t):[];return e!==1?{type:"orderedList",attrs:{start:e},content:r}:{type:"orderedList",content:r}},renderMarkdown:(n,t)=>n.content?t.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:n=>{const t=n.match(/^(\s*)(\d+)\.\s+/),e=t?.index;return e!==void 0?e:-1},tokenize:(n,t,e)=>{var r;const i=n.split(`
`),[o,a]=tL(i);if(o.length===0)return;const c=fM(o,0,e);return c.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:c,raw:i.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(nL,this.editor.getAttributes(Ek)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=ko({find:Ck,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=ko({find:Ck,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Ek)}),joinPredicate:(t,e)=>e.childCount+e.attrs.start===+t[1],editor:this.editor})),[n]}}),rL=/^\s*(\[([( |x])?\])\s$/,hM=An.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:n=>{const t=n.getAttribute("data-checked");return t===""||t==="true"},renderHTML:n=>({"data-checked":n.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:n,HTMLAttributes:t}){return["li",ie(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:n.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(n,t)=>{const e=[];if(n.tokens&&n.tokens.length>0?e.push(t.createNode("paragraph",{},t.parseInline(n.tokens))):n.text?e.push(t.createNode("paragraph",{},[t.createNode("text",{text:n.text})])):e.push(t.createNode("paragraph",{},[])),n.nestedTokens&&n.nestedTokens.length>0){const r=t.parseChildren(n.nestedTokens);e.push(...r)}return t.createNode("taskItem",{checked:n.checked||!1},e)},renderMarkdown:(n,t)=>{var e;const r=`- [${(e=n.attrs)!=null&&e.checked?"x":" "}] `;return hg(n,t,r)},addKeyboardShortcuts(){const n={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...n,Tab:()=>this.editor.commands.sinkListItem(this.name)}:n},addNodeView(){return({node:n,HTMLAttributes:t,getPos:e,editor:r})=>{const i=document.createElement("li"),o=document.createElement("label"),a=document.createElement("span"),c=document.createElement("input"),f=document.createElement("div"),h=p=>{var g,y;c.ariaLabel=((y=(g=this.options.a11y)==null?void 0:g.checkboxLabel)==null?void 0:y.call(g,p,c.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};return h(n),o.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",p=>p.preventDefault()),c.addEventListener("change",p=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:g}=p.target;r.isEditable&&typeof e=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:y})=>{const b=e();if(typeof b!="number")return!1;const k=y.doc.nodeAt(b);return y.setNodeMarkup(b,void 0,{...k?.attrs,checked:g}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(n,g)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,g])=>{i.setAttribute(p,g)}),i.dataset.checked=n.attrs.checked,c.checked=n.attrs.checked,o.append(c,a),i.append(o,f),Object.entries(t).forEach(([p,g])=>{i.setAttribute(p,g)}),{dom:i,contentDOM:f,update:p=>p.type!==this.type?!1:(i.dataset.checked=p.attrs.checked,c.checked=p.attrs.checked,h(p),!0)}}},addInputRules(){return[ko({find:rL,type:this.type,getAttributes:n=>({checked:n[n.length-1]==="x"})})]}}),pM=An.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:n}){return["ul",ie(this.options.HTMLAttributes,n,{"data-type":this.name}),0]},parseMarkdown:(n,t)=>t.createNode("taskList",{},t.parseChildren(n.items||[])),renderMarkdown:(n,t)=>n.content?t.renderChildren(n.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(n){var t;const e=(t=n.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:t.index;return e!==void 0?e:-1},tokenize(n,t,e){const r=o=>{const a=mm(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:c=>({indentLevel:c[1].length,mainContent:c[4],checked:c[3].toLowerCase()==="x"}),createToken:(c,f)=>({type:"taskItem",raw:"",mainContent:c.mainContent,indentLevel:c.indentLevel,checked:c.checked,text:c.mainContent,tokens:e.inlineTokens(c.mainContent),nestedTokens:f}),customNestedParser:r},e);return a?[{type:"taskList",raw:a.raw,items:a.items}]:e.blockTokens(o)},i=mm(n,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,a)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:e.inlineTokens(o.mainContent),nestedTokens:a}),customNestedParser:r},e);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:n})=>n.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});_t.create({name:"listKit",addExtensions(){const n=[];return this.options.bulletList!==!1&&n.push(sM.configure(this.options.bulletList)),this.options.listItem!==!1&&n.push(zf.configure(this.options.listItem)),this.options.listKeymap!==!1&&n.push(ZB.configure(this.options.listKeymap)),this.options.orderedList!==!1&&n.push(dM.configure(this.options.orderedList)),this.options.taskItem!==!1&&n.push(hM.configure(this.options.taskItem)),this.options.taskList!==!1&&n.push(pM.configure(this.options.taskList)),n}});const iL=new Ft({tiptapExtension:sM,tiptapExtensionDeps:[zf],onBridgeMessage:(n,t)=>(t.type==="toggle-bulletList"&&n.chain().focus().toggleBulletList().run(),!1),extendEditorInstance:n=>({toggleBulletList:()=>n({type:"toggle-bulletList"})}),extendEditorState:n=>({canToggleBulletList:n.can().toggleBulletList(),isBulletListActive:n.isActive("bulletList")})});var sL=/(^|[^`])`([^`]+)`(?!`)$/,oL=/(^|[^`])`([^`]+)`(?!`)/g,lL=Mr.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",ie(this.options.HTMLAttributes,n),0]},markdownTokenName:"codespan",parseMarkdown:(n,t)=>t.applyMark("code",[{type:"text",text:n.text||""}]),renderMarkdown:(n,t)=>n.content?`\`${t.renderChildren(n.content)}\``:"",addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[is({find:sL,type:this.type})]},addPasteRules(){return[di({find:oL,type:this.type})]}}),aL=lL;const cL=new Ft({tiptapExtension:aL,onBridgeMessage:(n,t)=>(t.type==="toggle-code"&&n.chain().focus().toggleCode().run(),!1),extendEditorInstance:n=>({toggleCode:()=>n({type:"toggle-code"})}),extendEditorState:n=>({canToggleCode:n.can().toggleCode(),isCodeActive:n.isActive("code")}),extendCSS:`
    code {
        background-color: #6161611a;
        border-radius: 0.25em;
        box-decoration-break: clone;
        color: #616161;
        font-size: 0.9rem;
        padding: 0.25em;
    }
  `});var uL=20,mM=(n,t=0)=>{const e=[];return!n.children.length||t>uL||Array.from(n.children).forEach(r=>{r.tagName==="SPAN"?e.push(r):r.children.length&&e.push(...mM(r,t+1))}),e},fL=n=>{if(!n.children.length)return;const t=mM(n);t&&t.forEach(e=>{var r,i;const o=e.getAttribute("style"),a=(i=(r=e.parentElement)==null?void 0:r.closest("span"))==null?void 0:i.getAttribute("style");e.setAttribute("style",`${a};${o}`)})},mg=Mr.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&fL(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",ie(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleTextStyle:n=>({commands:t})=>t.toggleMark(this.name,n),removeEmptyTextStyle:()=>({tr:n})=>{const{selection:t}=n;return n.doc.nodesBetween(t.from,t.to,(e,r)=>{if(e.isTextblock)return!0;e.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(o=>!!o))||n.removeMark(r,r+e.nodeSize,this.type)}),!0}}}}),dL=_t.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:n=>{var t;const e=n.getAttribute("style");if(e){const r=e.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const a=o[0].trim().toLowerCase(),c=o.slice(1).join(":").trim();if(a==="background-color")return c.replace(/['"]+/g,"")}}}return(t=n.style.backgroundColor)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:n=>n.backgroundColor?{style:`background-color: ${n.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:n=>({chain:t})=>t().setMark("textStyle",{backgroundColor:n}).run(),unsetBackgroundColor:()=>({chain:n})=>n().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),gM=_t.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var t;const e=n.getAttribute("style");if(e){const r=e.split(";").map(i=>i.trim()).filter(Boolean);for(let i=r.length-1;i>=0;i-=1){const o=r[i].split(":");if(o.length>=2){const a=o[0].trim().toLowerCase(),c=o.slice(1).join(":").trim();if(a==="color")return c.replace(/['"]+/g,"")}}}return(t=n.style.color)==null?void 0:t.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:t})=>t().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),hL=_t.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:n=>n.style.fontFamily,renderHTML:n=>n.fontFamily?{style:`font-family: ${n.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:n=>({chain:t})=>t().setMark("textStyle",{fontFamily:n}).run(),unsetFontFamily:()=>({chain:n})=>n().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),pL=_t.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:t})=>t().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),mL=_t.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:n=>n.style.lineHeight,renderHTML:n=>n.lineHeight?{style:`line-height: ${n.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:n=>({chain:t})=>t().setMark("textStyle",{lineHeight:n}).run(),unsetLineHeight:()=>({chain:n})=>n().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});_t.create({name:"textStyleKit",addExtensions(){const n=[];return this.options.backgroundColor!==!1&&n.push(dL.configure(this.options.backgroundColor)),this.options.color!==!1&&n.push(gM.configure(this.options.color)),this.options.fontFamily!==!1&&n.push(hL.configure(this.options.fontFamily)),this.options.fontSize!==!1&&n.push(pL.configure(this.options.fontSize)),this.options.lineHeight!==!1&&n.push(mL.configure(this.options.lineHeight)),this.options.textStyle!==!1&&n.push(mg.configure(this.options.textStyle)),n}});const gL=new Ft({tiptapExtension:gM,tiptapExtensionDeps:[mg],onBridgeMessage:(n,{type:t,payload:e})=>{switch(t){case"set-color":n.chain().focus().setColor(e).run();break;case"unset-color":n.chain().focus().unsetColor().run();break}return!1},extendEditorInstance:n=>({setColor:t=>n({type:"set-color",payload:t}),unsetColor:()=>n({type:"unset-color",payload:void 0})}),extendEditorState:n=>({activeColor:n.getAttributes("textStyle").color})});var yL=An.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:t}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,ie(this.options.HTMLAttributes,t),0]},parseMarkdown:(n,t)=>t.createNode("heading",{level:n.depth||1},t.parseInline(n.tokens||[])),renderMarkdown:(n,t)=>{var e;const r=(e=n.attrs)!=null&&e.level?parseInt(n.attrs.level,10):1,i="#".repeat(r);return n.content?`${i} ${t.renderChildren(n.content)}`:""},addCommands(){return{setHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.setNode(this.name,n):!1,toggleHeading:n=>({commands:t})=>this.options.levels.includes(n.level)?t.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,t)=>({...n,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(n=>GD({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}}),vL=yL;const bL=new Ft({tiptapExtension:vL,onBridgeMessage:(n,t)=>(t.type==="toggle-heading"&&n.chain().focus().toggleHeading({level:t.payload}).run(),!1),extendEditorInstance:n=>({toggleHeading:t=>n({type:"toggle-heading",payload:t})}),extendEditorState:n=>{var t;return{canToggleHeading:n.can().toggleHeading({level:1}),headingLevel:(t=n.getAttributes("heading"))==null?void 0:t.level}}});var kL=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,wL=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,xL=Mr.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",ie(this.options.HTMLAttributes,n),0]},renderMarkdown:(n,t)=>`==${t.renderChildren(n)}==`,parseMarkdown:(n,t)=>t.applyMark("highlight",t.parseInline(n.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:n=>n.indexOf("=="),tokenize(n,t,e){const r=/^(==)([^=]+)(==)/.exec(n);if(r){const i=r[2].trim(),o=e.inlineTokens(i);return{type:"highlight",raw:r[0],text:i,tokens:o}}}},addCommands(){return{setHighlight:n=>({commands:t})=>t.setMark(this.name,n),toggleHighlight:n=>({commands:t})=>t.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[is({find:kL,type:this.type})]},addPasteRules(){return[di({find:wL,type:this.type})]}});const SL=new Ft({tiptapExtension:xL.configure({multicolor:!0}),tiptapExtensionDeps:[mg],onBridgeMessage:(n,{type:t,payload:e})=>{switch(t){case"set-highlight":n.chain().focus().setHighlight({color:e}).run();break;case"toggle-highlight":n.chain().focus().toggleHighlight({color:e}).run();break;case"unset-highlight":n.chain().focus().unsetHighlight().run();break}return!1},extendEditorInstance:n=>({setHighlight:t=>n({type:"set-highlight",payload:t}),toggleHighlight:t=>n({type:"toggle-highlight",payload:t}),unsetHighlight:()=>n({type:"unset-highlight",payload:void 0})}),extendEditorState:n=>({activeHighlight:n.getAttributes("highlight").color})});function ML(n={}){return new Et({view(t){return new TL(t,n)}})}class TL{constructor(t,e){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=e.width)!==null&&r!==void 0?r:1,this.color=e.color===!1?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let o=a=>{this[i](a)};return t.dom.addEventListener(i,o),{name:i,handler:o}})}destroy(){this.handlers.forEach(({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e))}update(t,e){this.cursorPos!=null&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),e=!t.parent.inlineContent,r;if(e){let c=t.nodeBefore,f=t.nodeAfter;if(c||f){let h=this.editorView.nodeDOM(this.cursorPos-(c?c.nodeSize:0));if(h){let p=h.getBoundingClientRect(),g=c?p.bottom:p.top;c&&f&&(g=(g+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),r={left:p.left,right:p.right,top:g-this.width/2,bottom:g+this.width/2}}}}if(!r){let c=this.editorView.coordsAtPos(this.cursorPos);r={left:c.left-this.width/2,right:c.left+this.width/2,top:c.top,bottom:c.bottom}}let i=this.editorView.dom.offsetParent;this.element||(this.element=i.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",e),this.element.classList.toggle("prosemirror-dropcursor-inline",!e);let o,a;if(!i||i==document.body&&getComputedStyle(i).position=="static")o=-pageXOffset,a=-pageYOffset;else{let c=i.getBoundingClientRect();o=c.left-i.scrollLeft,a=c.top-i.scrollTop}this.element.style.left=r.left-o+"px",this.element.style.top=r.top-a+"px",this.element.style.width=r.right-r.left+"px",this.element.style.height=r.bottom-r.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),i=r&&r.type.spec.disableDropCursor,o=typeof i=="function"?i(this.editorView,e,t):i;if(e&&!o){let a=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=Ax(this.editorView.state.doc,a,this.editorView.dragging.slice);c!=null&&(a=c)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){(t.target==this.editorView.dom||!this.editorView.dom.contains(t.relatedTarget))&&this.setCursor(null)}}let tn=class ti extends ut{constructor(t){super(t,t)}map(t,e){let r=t.resolve(e.map(this.head));return ti.valid(r)?new ti(r):ut.near(r)}content(){return W.empty}eq(t){return t instanceof ti&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ti(t.resolve(e.pos))}getBookmark(){return new gg(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!EL(t)||!CL(t))return!1;let r=e.type.spec.allowGapCursor;if(r!=null)return r;let i=e.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,e,r=!1){t:for(;;){if(!r&&ti.valid(t))return t;let i=t.pos,o=null;for(let a=t.depth;;a--){let c=t.node(a);if(e>0?t.indexAfter(a)<c.childCount:t.index(a)>0){o=c.child(e>0?t.indexAfter(a):t.index(a)-1);break}else if(a==0)return null;i+=e;let f=t.doc.resolve(i);if(ti.valid(f))return f}for(;;){let a=e>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!ct.isSelectable(o)){t=t.doc.resolve(i+o.nodeSize*e),r=!1;continue t}break}o=a,i+=e;let c=t.doc.resolve(i);if(ti.valid(c))return c}return null}}};tn.prototype.visible=!1;tn.findFrom=tn.findGapCursorFrom;ut.jsonID("gapcursor",tn);class gg{constructor(t){this.pos=t}map(t){return new gg(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return tn.valid(e)?new tn(e):ut.near(e)}}function EL(n){for(let t=n.depth;t>=0;t--){let e=n.index(t),r=n.node(t);if(e==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(e-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function CL(n){for(let t=n.depth;t>=0;t--){let e=n.indexAfter(t),r=n.node(t);if(e==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(e);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function AL(){return new Et({props:{decorations:zL,createSelectionBetween(n,t,e){return t.pos==e.pos&&tn.valid(e)?new tn(e):null},handleClick:RL,handleKeyDown:OL,handleDOMEvents:{beforeinput:NL}}})}const OL=MS({ArrowLeft:Xc("horiz",-1),ArrowRight:Xc("horiz",1),ArrowUp:Xc("vert",-1),ArrowDown:Xc("vert",1)});function Xc(n,t){const e=n=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,o){let a=r.selection,c=t>0?a.$to:a.$from,f=a.empty;if(a instanceof ft){if(!o.endOfTextblock(e)||c.depth==0)return!1;f=!1,c=r.doc.resolve(t>0?c.after():c.before())}let h=tn.findGapCursorFrom(c,t,f);return h?(i&&i(r.tr.setSelection(new tn(h))),!0):!1}}function RL(n,t,e){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(t);if(!tn.valid(r))return!1;let i=n.posAtCoords({left:e.clientX,top:e.clientY});return i&&i.inside>-1&&ct.isSelectable(n.state.doc.nodeAt(i.inside))?!1:(n.dispatch(n.state.tr.setSelection(new tn(r))),!0)}function NL(n,t){if(t.inputType!="insertCompositionText"||!(n.state.selection instanceof tn))return!1;let{$from:e}=n.state.selection,r=e.parent.contentMatchAt(e.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let i=K.empty;for(let a=r.length-1;a>=0;a--)i=K.from(r[a].createAndFill(null,i));let o=n.state.tr.replace(e.pos,e.pos,new W(i,0,0));return o.setSelection(ft.near(o.doc.resolve(e.pos+1))),n.dispatch(o),!1}function zL(n){if(!(n.selection instanceof tn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",be.create(n.doc,[In.widget(n.selection.head,t,{key:"gapcursor"})])}var Bu=200,ke=function(){};ke.prototype.append=function(n){return n.length?(n=ke.from(n),!this.length&&n||n.length<Bu&&this.leafAppend(n)||this.length<Bu&&n.leafPrepend(this)||this.appendInner(n)):this};ke.prototype.prepend=function(n){return n.length?ke.from(n).append(this):this};ke.prototype.appendInner=function(n){return new DL(this,n)};ke.prototype.slice=function(n,t){return n===void 0&&(n=0),t===void 0&&(t=this.length),n>=t?ke.empty:this.sliceInner(Math.max(0,n),Math.min(this.length,t))};ke.prototype.get=function(n){if(!(n<0||n>=this.length))return this.getInner(n)};ke.prototype.forEach=function(n,t,e){t===void 0&&(t=0),e===void 0&&(e=this.length),t<=e?this.forEachInner(n,t,e,0):this.forEachInvertedInner(n,t,e,0)};ke.prototype.map=function(n,t,e){t===void 0&&(t=0),e===void 0&&(e=this.length);var r=[];return this.forEach(function(i,o){return r.push(n(i,o))},t,e),r};ke.from=function(n){return n instanceof ke?n:n&&n.length?new yM(n):ke.empty};var yM=(function(n){function t(r){n.call(this),this.values=r}n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t;var e={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,i){return r==0&&i==this.length?this:new t(this.values.slice(r,i))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,i,o,a){for(var c=i;c<o;c++)if(r(this.values[c],a+c)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,o,a){for(var c=i-1;c>=o;c--)if(r(this.values[c],a+c)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=Bu)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=Bu)return new t(r.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(t.prototype,e),t})(ke);ke.empty=new yM([]);var DL=(function(n){function t(e,r){n.call(this),this.left=e,this.right=r,this.length=e.length+r.length,this.depth=Math.max(e.depth,r.depth)+1}return n&&(t.__proto__=n),t.prototype=Object.create(n&&n.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(e){return e<this.left.length?this.left.get(e):this.right.get(e-this.left.length)},t.prototype.forEachInner=function(e,r,i,o){var a=this.left.length;if(r<a&&this.left.forEachInner(e,r,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(e,Math.max(r-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},t.prototype.forEachInvertedInner=function(e,r,i,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(e,r-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(e,Math.min(r,a),i,o)===!1)return!1},t.prototype.sliceInner=function(e,r){if(e==0&&r==this.length)return this;var i=this.left.length;return r<=i?this.left.slice(e,r):e>=i?this.right.slice(e-i,r-i):this.left.slice(e,i).append(this.right.slice(0,r-i))},t.prototype.leafAppend=function(e){var r=this.right.leafAppend(e);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(e){var r=this.left.leafPrepend(e);if(r)return new t(r,this.right)},t.prototype.appendInner=function(e){return this.left.depth>=Math.max(this.right.depth,e.depth)+1?new t(this.left,new t(this.right,e)):new t(this,e)},t})(ke);const BL=500;let pa=class io{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,o;e&&(i=this.remapping(r,this.items.length),o=i.maps.length);let a=t.tr,c,f,h=[],p=[];return this.items.forEach((g,y)=>{if(!g.step){i||(i=this.remapping(r,y+1),o=i.maps.length),o--,p.push(g);return}if(i){p.push(new Qr(g.map));let b=g.step.map(i.slice(o)),k;b&&a.maybeStep(b).doc&&(k=a.mapping.maps[a.mapping.maps.length-1],h.push(new Qr(k,void 0,void 0,h.length+p.length))),o--,k&&i.appendMap(k,o)}else a.maybeStep(g.step);if(g.selection)return c=i?g.selection.map(i.slice(o)):g.selection,f=new io(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:f,transform:a,selection:c}}addTransform(t,e,r,i){let o=[],a=this.eventCount,c=this.items,f=!i&&c.length?c.get(c.length-1):null;for(let p=0;p<t.steps.length;p++){let g=t.steps[p].invert(t.docs[p]),y=new Qr(t.mapping.maps[p],g,e),b;(b=f&&f.merge(y))&&(y=b,p?o.pop():c=c.slice(0,c.length-1)),o.push(y),e&&(a++,e=void 0),i||(f=y)}let h=a-r.depth;return h>HL&&(c=LL(c,h),a-=h),new io(c.append(o),a)}remapping(t,e){let r=new aa;return this.items.forEach((i,o)=>{let a=i.mirrorOffset!=null&&o-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,a)},t,e),r}addMaps(t){return this.eventCount==0?this:new io(this.items.append(t.map(e=>new Qr(e))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-e),o=t.mapping,a=t.steps.length,c=this.eventCount;this.items.forEach(y=>{y.selection&&c--},i);let f=e;this.items.forEach(y=>{let b=o.getMirror(--f);if(b==null)return;a=Math.min(a,b);let k=o.maps[b];if(y.step){let x=t.steps[b].invert(t.docs[b]),S=y.selection&&y.selection.map(o.slice(f+1,b));S&&c++,r.push(new Qr(k,x,S))}else r.push(new Qr(k))},i);let h=[];for(let y=e;y<a;y++)h.push(new Qr(o.maps[y]));let p=this.items.slice(0,i).append(h).append(r),g=new io(p,c);return g.emptyItemCount()>BL&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let t=0;return this.items.forEach(e=>{e.step||t++}),t}compress(t=this.items.length){let e=this.remapping(0,t),r=e.maps.length,i=[],o=0;return this.items.forEach((a,c)=>{if(c>=t)i.push(a),a.selection&&o++;else if(a.step){let f=a.step.map(e.slice(r)),h=f&&f.getMap();if(r--,h&&e.appendMap(h,r),f){let p=a.selection&&a.selection.map(e.slice(r));p&&o++;let g=new Qr(h.invert(),f,p),y,b=i.length-1;(y=i.length&&i[b].merge(g))?i[b]=y:i.push(g)}}else a.map&&r--},this.items.length,0),new io(ke.from(i.reverse()),o)}};pa.empty=new pa(ke.empty,0);function LL(n,t){let e;return n.forEach((r,i)=>{if(r.selection&&t--==0)return e=i,!1}),n.slice(e)}let Qr=class vM{constructor(t,e,r,i){this.map=t,this.step=e,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new vM(e.getMap().invert(),e,this.selection)}}},ni=class{constructor(t,e,r,i,o){this.done=t,this.undone=e,this.prevRanges=r,this.prevTime=i,this.prevComposition=o}};const HL=20;function $L(n,t,e,r){let i=e.getMeta(Qi),o;if(i)return i.historyState;e.getMeta(_L)&&(n=new ni(n.done,n.undone,null,0,-1));let a=e.getMeta("appendedTransaction");if(e.steps.length==0)return n;if(a&&a.getMeta(Qi))return a.getMeta(Qi).redo?new ni(n.done.addTransform(e,void 0,r,uu(t)),n.undone,Ak(e.mapping.maps),n.prevTime,n.prevComposition):new ni(n.done,n.undone.addTransform(e,void 0,r,uu(t)),null,n.prevTime,n.prevComposition);if(e.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let c=e.getMeta("composition"),f=n.prevTime==0||!a&&n.prevComposition!=c&&(n.prevTime<(e.time||0)-r.newGroupDelay||!jL(e,n.prevRanges)),h=a?zp(n.prevRanges,e.mapping):Ak(e.mapping.maps);return new ni(n.done.addTransform(e,f?t.selection.getBookmark():void 0,r,uu(t)),pa.empty,h,e.time,c??n.prevComposition)}else return(o=e.getMeta("rebased"))?new ni(n.done.rebased(e,o),n.undone.rebased(e,o),zp(n.prevRanges,e.mapping),n.prevTime,n.prevComposition):new ni(n.done.addMaps(e.mapping.maps),n.undone.addMaps(e.mapping.maps),zp(n.prevRanges,e.mapping),n.prevTime,n.prevComposition)}function jL(n,t){if(!t)return!1;if(!n.docChanged)return!0;let e=!1;return n.mapping.maps[0].forEach((r,i)=>{for(let o=0;o<t.length;o+=2)r<=t[o+1]&&i>=t[o]&&(e=!0)}),e}function Ak(n){let t=[];for(let e=n.length-1;e>=0&&t.length==0;e--)n[e].forEach((r,i,o,a)=>t.push(o,a));return t}function zp(n,t){if(!n)return null;let e=[];for(let r=0;r<n.length;r+=2){let i=t.map(n[r],1),o=t.map(n[r+1],-1);i<=o&&e.push(i,o)}return e}function IL(n,t,e){let r=uu(t),i=Qi.get(t).spec.config,o=(e?n.undone:n.done).popEvent(t,r);if(!o)return null;let a=o.selection.resolve(o.transform.doc),c=(e?n.done:n.undone).addTransform(o.transform,t.selection.getBookmark(),i,r),f=new ni(e?c:o.remaining,e?o.remaining:c,null,0,-1);return o.transform.setSelection(a).setMeta(Qi,{redo:e,historyState:f})}let Dp=!1,Ok=null;function uu(n){let t=n.plugins;if(Ok!=t){Dp=!1,Ok=t;for(let e=0;e<t.length;e++)if(t[e].spec.historyPreserveItems){Dp=!0;break}}return Dp}const Qi=new It("history"),_L=new It("closeHistory");function UL(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new Et({key:Qi,state:{init(){return new ni(pa.empty,pa.empty,null,0,-1)},apply(t,e,r){return $L(e,r,t,n)}},config:n,props:{handleDOMEvents:{beforeinput(t,e){let r=e.inputType,i=r=="historyUndo"?kM:r=="historyRedo"?wM:null;return!i||!t.editable?!1:(e.preventDefault(),i(t.state,t.dispatch))}}}})}function bM(n,t){return(e,r)=>{let i=Qi.getState(e);if(!i||(n?i.undone:i.done).eventCount==0)return!1;if(r){let o=IL(i,e,n);o&&r(o.scrollIntoView())}return!0}}const kM=bM(!1),wM=bM(!0);_t.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:n=>n.length,wordCounter:n=>n.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=n=>{const t=n?.node||this.editor.state.doc;if((n?.mode||this.options.mode)==="textSize"){const e=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(e)}return t.nodeSize},this.storage.words=n=>{const t=n?.node||this.editor.state.doc,e=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(e)}},addProseMirrorPlugins(){let n=!1;return[new Et({key:new It("characterCount"),appendTransaction:(t,e,r)=>{if(n)return;const i=this.options.limit;if(i==null||i===0){n=!0;return}const o=this.storage.characters({node:r.doc});if(o>i){const a=o-i,c=0,f=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(c,f);return n=!0,h}n=!0},filterTransaction:(t,e)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:e.doc}),o=this.storage.characters({node:t.doc});if(o<=r||i>r&&o>r&&o<=i)return!0;if(i>r&&o>r&&o>i||!t.getMeta("paste"))return!1;const a=t.selection.$head.pos,c=o-r,f=a-c,h=a;return t.deleteRange(f,h),!(this.storage.characters({node:t.doc})>r)}})]}});var qL=_t.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[ML(this.options)]}});_t.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Et({key:new It("focus"),props:{decorations:({doc:n,selection:t})=>{const{isEditable:e,isFocused:r}=this.editor,{anchor:i}=t,o=[];if(!e||!r)return be.create(n,[]);let a=0;this.options.mode==="deepest"&&n.descendants((f,h)=>{if(!f.isText){if(!(i>=h&&i<=h+f.nodeSize-1))return!1;a+=1}});let c=0;return n.descendants((f,h)=>{if(f.isText||!(i>=h&&i<=h+f.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&a-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";o.push(In.node(h,h+f.nodeSize,{class:this.options.className}))}),be.create(n,o)}}})]}});_t.create({name:"gapCursor",addProseMirrorPlugins(){return[AL()]},extendNodeSchema(n){var t;const e={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(t=Rt(rt(n,"allowGapCursor",e)))!=null?t:null}}});var VL=_t.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Et({key:new It("placeholder"),props:{decorations:({doc:n,selection:t})=>{const e=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!e)return null;const o=this.editor.isEmpty;return n.descendants((a,c)=>{const f=r>=c&&r<=c+a.nodeSize,h=!a.isLeaf&&Of(a);if((f||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const g=In.node(c,c+a.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:c,hasAnchor:f}):this.options.placeholder});i.push(g)}return this.options.includeChildren}),be.create(n,i)}}})]}});_t.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:n,options:t}=this;return[new Et({key:new It("selection"),props:{decorations(e){return e.selection.empty||n.isFocused||!n.isEditable||aD(e.selection)||n.view.dragging?null:be.create(e.doc,[In.inline(e.selection.from,e.selection.to,{class:t.className})])}}})]}});function Rk({types:n,node:t}){return t&&Array.isArray(n)&&n.includes(t.type)||t?.type===n}_t.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var n;const t=new It(this.name),e=((n=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:n.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(e).includes(i.name));return[new Et({key:t,appendTransaction:(i,o,a)=>{const{doc:c,tr:f,schema:h}=a,p=t.getState(a),g=c.content.size,y=h.nodes[e];if(p)return f.insert(g,y.create())},state:{init:(i,o)=>{const a=o.tr.doc.lastChild;return!Rk({node:a,types:r})},apply:(i,o)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return o;const a=i.doc.lastChild;return!Rk({node:a,types:r})}}})]}});var PL=_t.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:t})=>kM(n,t),redo:()=>({state:n,dispatch:t})=>wM(n,t)}},addProseMirrorPlugins(){return[UL(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}});const JL=new Ft({tiptapExtension:PL,onBridgeMessage:(n,t)=>(t.type==="undo"&&n.chain().focus().undo().run(),t.type==="redo"&&n.chain().focus().redo().run(),!1),extendEditorInstance:n=>({redo:()=>n({type:"redo"}),undo:()=>n({type:"undo"})}),extendEditorState:n=>{var t,e,r,i;return{canUndo:((e=(t=n.can()).undo)==null?void 0:e.call(t))??!1,canRedo:((i=(r=n.can()).redo)==null?void 0:i.call(r))??!1}}});var GL=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,KL=An.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:n}){return["img",ie(this.options.HTMLAttributes,n)]},parseMarkdown:(n,t)=>t.createNode("image",{src:n.href,title:n.title,alt:n.text}),renderMarkdown:n=>{var t,e,r,i,o,a;const c=(e=(t=n.attrs)==null?void 0:t.src)!=null?e:"",f=(i=(r=n.attrs)==null?void 0:r.alt)!=null?i:"",h=(a=(o=n.attrs)==null?void 0:o.title)!=null?a:"";return h?`![${f}](${c} "${h}")`:`![${f}](${c})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:n,minWidth:t,minHeight:e,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:i,getPos:o,HTMLAttributes:a})=>{const c=document.createElement("img");Object.entries(a).forEach(([p,g])=>{if(g!=null)switch(p){case"width":case"height":break;default:c.setAttribute(p,g);break}}),c.src=a.src;const f=new YD({element:c,node:i,getPos:o,onResize:(p,g)=>{c.style.width=`${p}px`,c.style.height=`${g}px`},onCommit:(p,g)=>{const y=o();y!==void 0&&this.editor.chain().setNodeSelection(y).updateAttributes(this.name,{width:p,height:g}).run()},onUpdate:(p,g,y)=>p.type===i.type,options:{directions:n,min:{width:t,height:e},preserveAspectRatio:r===!0}}),h=f.dom;return h.style.visibility="hidden",h.style.pointerEvents="none",c.onload=()=>{h.style.visibility="",h.style.pointerEvents=""},f}},addCommands(){return{setImage:n=>({commands:t})=>t.insertContent({type:this.name,attrs:n})}},addInputRules(){return[JD({find:GL,type:this.type,getAttributes:n=>{const[,,t,e,r]=n;return{src:e,alt:t,title:r}}})]}}),YL=KL;const FL=new Ft({tiptapExtension:YL.configure({allowBase64:!0}),onBridgeMessage:(n,t)=>(t.type==="set-image"&&n.chain().focus().setImage({src:t.payload}).setTextSelection(n.state.selection.to+1).run(),!1),extendEditorInstance:n=>({setImage:t=>n({type:"set-image",payload:t})}),extendEditorState:()=>({}),extendCSS:`
  img {
    height: auto;
    max-width: 100%;
  }

  img &.ProseMirror-selectednode {
    outline: 3px solid #68cef8;
  }
  `});var QL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,XL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ZL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,WL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,t4=Mr.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",ie(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(n,t)=>t.applyMark("italic",t.parseInline(n.tokens||[])),renderMarkdown:(n,t)=>`*${t.renderChildren(n)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[is({find:QL,type:this.type}),is({find:ZL,type:this.type})]},addPasteRules(){return[di({find:XL,type:this.type}),di({find:WL,type:this.type})]}}),e4=t4;const n4=new Ft({tiptapExtension:e4,onBridgeMessage:(n,t)=>(t.type==="toggle-italic"&&n.chain().focus().toggleItalic().run(),!1),extendEditorInstance:n=>({toggleItalic:()=>n({type:"toggle-italic"})}),extendEditorState:n=>({canToggleItalic:n.can().toggleItalic(),isItalicActive:n.isActive("italic")})}),r4="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",i4="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",bm="numeric",km="ascii",wm="alpha",Xl="asciinumeric",_l="alphanumeric",xm="domain",xM="emoji",s4="scheme",o4="slashscheme",Bp="whitespace";function l4(n,t){return n in t||(t[n]=[]),t[n]}function Ui(n,t,e){t[bm]&&(t[Xl]=!0,t[_l]=!0),t[km]&&(t[Xl]=!0,t[wm]=!0),t[Xl]&&(t[_l]=!0),t[wm]&&(t[_l]=!0),t[_l]&&(t[xm]=!0),t[xM]&&(t[xm]=!0);for(const r in t){const i=l4(r,e);i.indexOf(n)<0&&i.push(n)}}function a4(n,t){const e={};for(const r in t)t[r].indexOf(n)>=0&&(e[r]=!0);return e}function Qe(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Qe.groups={};Qe.prototype={accepts(){return!!this.t},go(n){const t=this,e=t.j[n];if(e)return e;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],o=t.jr[r][1];if(o&&i.test(n))return o}return t.jd},has(n,t=!1){return t?n in this.j:!!this.go(n)},ta(n,t,e,r){for(let i=0;i<n.length;i++)this.tt(n[i],t,e,r)},tr(n,t,e,r){r=r||Qe.groups;let i;return t&&t.j?i=t:(i=new Qe(t),e&&r&&Ui(t,e,r)),this.jr.push([n,i]),i},ts(n,t,e,r){let i=this;const o=n.length;if(!o)return i;for(let a=0;a<o-1;a++)i=i.tt(n[a]);return i.tt(n[o-1],t,e,r)},tt(n,t,e,r){r=r||Qe.groups;const i=this;if(t&&t.j)return i.j[n]=t,t;const o=t;let a,c=i.go(n);if(c?(a=new Qe,Object.assign(a.j,c.j),a.jr.push.apply(a.jr,c.jr),a.jd=c.jd,a.t=c.t):a=new Qe,o){if(r)if(a.t&&typeof a.t=="string"){const f=Object.assign(a4(a.t,r),e);Ui(o,f,r)}else e&&Ui(o,e,r);a.t=o}return i.j[n]=a,a}};const mt=(n,t,e,r,i)=>n.ta(t,e,r,i),Wt=(n,t,e,r,i)=>n.tr(t,e,r,i),Nk=(n,t,e,r,i)=>n.ts(t,e,r,i),J=(n,t,e,r,i)=>n.tt(t,e,r,i),gr="WORD",Sm="UWORD",SM="ASCIINUMERICAL",MM="ALPHANUMERICAL",ma="LOCALHOST",Mm="TLD",Tm="UTLD",fu="SCHEME",so="SLASH_SCHEME",yg="NUM",Em="WS",vg="NL",Zl="OPENBRACE",Wl="CLOSEBRACE",Lu="OPENBRACKET",Hu="CLOSEBRACKET",$u="OPENPAREN",ju="CLOSEPAREN",Iu="OPENANGLEBRACKET",_u="CLOSEANGLEBRACKET",Uu="FULLWIDTHLEFTPAREN",qu="FULLWIDTHRIGHTPAREN",Vu="LEFTCORNERBRACKET",Pu="RIGHTCORNERBRACKET",Ju="LEFTWHITECORNERBRACKET",Gu="RIGHTWHITECORNERBRACKET",Ku="FULLWIDTHLESSTHAN",Yu="FULLWIDTHGREATERTHAN",Fu="AMPERSAND",Qu="APOSTROPHE",Xu="ASTERISK",ri="AT",Zu="BACKSLASH",Wu="BACKTICK",tf="CARET",ii="COLON",bg="COMMA",ef="DOLLAR",Kn="DOT",nf="EQUALS",kg="EXCLAMATION",Sn="HYPHEN",ta="PERCENT",rf="PIPE",sf="PLUS",of="POUND",ea="QUERY",wg="QUOTE",TM="FULLWIDTHMIDDLEDOT",xg="SEMI",Yn="SLASH",na="TILDE",lf="UNDERSCORE",EM="EMOJI",af="SYM";var CM=Object.freeze({__proto__:null,ALPHANUMERICAL:MM,AMPERSAND:Fu,APOSTROPHE:Qu,ASCIINUMERICAL:SM,ASTERISK:Xu,AT:ri,BACKSLASH:Zu,BACKTICK:Wu,CARET:tf,CLOSEANGLEBRACKET:_u,CLOSEBRACE:Wl,CLOSEBRACKET:Hu,CLOSEPAREN:ju,COLON:ii,COMMA:bg,DOLLAR:ef,DOT:Kn,EMOJI:EM,EQUALS:nf,EXCLAMATION:kg,FULLWIDTHGREATERTHAN:Yu,FULLWIDTHLEFTPAREN:Uu,FULLWIDTHLESSTHAN:Ku,FULLWIDTHMIDDLEDOT:TM,FULLWIDTHRIGHTPAREN:qu,HYPHEN:Sn,LEFTCORNERBRACKET:Vu,LEFTWHITECORNERBRACKET:Ju,LOCALHOST:ma,NL:vg,NUM:yg,OPENANGLEBRACKET:Iu,OPENBRACE:Zl,OPENBRACKET:Lu,OPENPAREN:$u,PERCENT:ta,PIPE:rf,PLUS:sf,POUND:of,QUERY:ea,QUOTE:wg,RIGHTCORNERBRACKET:Pu,RIGHTWHITECORNERBRACKET:Gu,SCHEME:fu,SEMI:xg,SLASH:Yn,SLASH_SCHEME:so,SYM:af,TILDE:na,TLD:Mm,UNDERSCORE:lf,UTLD:Tm,UWORD:Sm,WORD:gr,WS:Em});const pr=/[a-z]/,Tl=new RegExp("\\p{L}","u"),Lp=new RegExp("\\p{Emoji}","u"),mr=/\d/,Hp=/\s/,zk="\r",$p=`
`,c4="",u4="",jp="";let Zc=null,Wc=null;function f4(n=[]){const t={};Qe.groups=t;const e=new Qe;Zc==null&&(Zc=Dk(r4)),Wc==null&&(Wc=Dk(i4)),J(e,"'",Qu),J(e,"{",Zl),J(e,"}",Wl),J(e,"[",Lu),J(e,"]",Hu),J(e,"(",$u),J(e,")",ju),J(e,"<",Iu),J(e,">",_u),J(e,"",Uu),J(e,"",qu),J(e,"",Vu),J(e,"",Pu),J(e,"",Ju),J(e,"",Gu),J(e,"",Ku),J(e,"",Yu),J(e,"&",Fu),J(e,"*",Xu),J(e,"@",ri),J(e,"`",Wu),J(e,"^",tf),J(e,":",ii),J(e,",",bg),J(e,"$",ef),J(e,".",Kn),J(e,"=",nf),J(e,"!",kg),J(e,"-",Sn),J(e,"%",ta),J(e,"|",rf),J(e,"+",sf),J(e,"#",of),J(e,"?",ea),J(e,'"',wg),J(e,"/",Yn),J(e,";",xg),J(e,"~",na),J(e,"_",lf),J(e,"\\",Zu),J(e,"",TM);const r=Wt(e,mr,yg,{[bm]:!0});Wt(r,mr,r);const i=Wt(r,pr,SM,{[Xl]:!0}),o=Wt(r,Tl,MM,{[_l]:!0}),a=Wt(e,pr,gr,{[km]:!0});Wt(a,mr,i),Wt(a,pr,a),Wt(i,mr,i),Wt(i,pr,i);const c=Wt(e,Tl,Sm,{[wm]:!0});Wt(c,pr),Wt(c,mr,o),Wt(c,Tl,c),Wt(o,mr,o),Wt(o,pr),Wt(o,Tl,o);const f=J(e,$p,vg,{[Bp]:!0}),h=J(e,zk,Em,{[Bp]:!0}),p=Wt(e,Hp,Em,{[Bp]:!0});J(e,jp,p),J(h,$p,f),J(h,jp,p),Wt(h,Hp,p),J(p,zk),J(p,$p),Wt(p,Hp,p),J(p,jp,p);const g=Wt(e,Lp,EM,{[xM]:!0});J(g,"#"),Wt(g,Lp,g),J(g,c4,g);const y=J(g,u4);J(y,"#"),Wt(y,Lp,g);const b=[[pr,a],[mr,i]],k=[[pr,null],[Tl,c],[mr,o]];for(let x=0;x<Zc.length;x++)Xr(e,Zc[x],Mm,gr,b);for(let x=0;x<Wc.length;x++)Xr(e,Wc[x],Tm,Sm,k);Ui(Mm,{tld:!0,ascii:!0},t),Ui(Tm,{utld:!0,alpha:!0},t),Xr(e,"file",fu,gr,b),Xr(e,"mailto",fu,gr,b),Xr(e,"http",so,gr,b),Xr(e,"https",so,gr,b),Xr(e,"ftp",so,gr,b),Xr(e,"ftps",so,gr,b),Ui(fu,{scheme:!0,ascii:!0},t),Ui(so,{slashscheme:!0,ascii:!0},t),n=n.sort((x,S)=>x[0]>S[0]?1:-1);for(let x=0;x<n.length;x++){const S=n[x][0],T=n[x][1]?{[s4]:!0}:{[o4]:!0};S.indexOf("-")>=0?T[xm]=!0:pr.test(S)?mr.test(S)?T[Xl]=!0:T[km]=!0:T[bm]=!0,Nk(e,S,S,T)}return Nk(e,"localhost",ma,{ascii:!0}),e.jd=new Qe(af),{start:e,tokens:Object.assign({groups:t},CM)}}function AM(n,t){const e=d4(t.replace(/[A-Z]/g,c=>c.toLowerCase())),r=e.length,i=[];let o=0,a=0;for(;a<r;){let c=n,f=null,h=0,p=null,g=-1,y=-1;for(;a<r&&(f=c.go(e[a]));)c=f,c.accepts()?(g=0,y=0,p=c):g>=0&&(g+=e[a].length,y++),h+=e[a].length,o+=e[a].length,a++;o-=g,a-=y,h-=g,i.push({t:p.t,v:t.slice(o-h,o),s:o-h,e:o})}return i}function d4(n){const t=[],e=n.length;let r=0;for(;r<e;){let i=n.charCodeAt(r),o,a=i<55296||i>56319||r+1===e||(o=n.charCodeAt(r+1))<56320||o>57343?n[r]:n.slice(r,r+2);t.push(a),r+=a.length}return t}function Xr(n,t,e,r,i){let o;const a=t.length;for(let c=0;c<a-1;c++){const f=t[c];n.j[f]?o=n.j[f]:(o=new Qe(r),o.jr=i.slice(),n.j[f]=o),n=o}return o=new Qe(e),o.jr=i.slice(),n.j[t[a-1]]=o,o}function Dk(n){const t=[],e=[];let r=0,i="0123456789";for(;r<n.length;){let o=0;for(;i.indexOf(n[r+o])>=0;)o++;if(o>0){t.push(e.join(""));for(let a=parseInt(n.substring(r,r+o),10);a>0;a--)e.pop();r+=o}else e.push(n[r]),r++}return t}const ga={defaultProtocol:"http",events:null,format:Bk,formatHref:Bk,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Sg(n,t=null){let e=Object.assign({},ga);n&&(e=Object.assign(e,n instanceof Sg?n.o:n));const r=e.ignoreTags,i=[];for(let o=0;o<r.length;o++)i.push(r[o].toUpperCase());this.o=e,t&&(this.defaultRender=t),this.ignoreTags=i}Sg.prototype={o:ga,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,t,e){const r=t!=null;let i=this.o[n];return i&&(typeof i=="object"?(i=e.t in i?i[e.t]:ga[n],typeof i=="function"&&r&&(i=i(t,e))):typeof i=="function"&&r&&(i=i(t,e.t,e)),i)},getObj(n,t,e){let r=this.o[n];return typeof r=="function"&&t!=null&&(r=r(t,e.t,e)),r},render(n){const t=n.render(this);return(this.get("render",null,n)||this.defaultRender)(t,n.t,n)}};function Bk(n){return n}function OM(n,t){this.t="token",this.v=n,this.tk=t}OM.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const t=this.toString(),e=n.get("truncate",t,this),r=n.get("format",t,this);return e&&r.length>e?r.substring(0,e)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=ga.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const t=this,e=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",e,this),i=n.get("tagName",e,t),o=this.toFormattedString(n),a={},c=n.get("className",e,t),f=n.get("target",e,t),h=n.get("rel",e,t),p=n.getObj("attributes",e,t),g=n.getObj("events",e,t);return a.href=r,c&&(a.class=c),f&&(a.target=f),h&&(a.rel=h),p&&Object.assign(a,p),{tagName:i,attributes:a,content:o,eventListeners:g}}};function Df(n,t){class e extends OM{constructor(i,o){super(i,o),this.t=n}}for(const r in t)e.prototype[r]=t[r];return e.t=n,e}const Lk=Df("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Hk=Df("text"),h4=Df("nl"),tu=Df("url",{isLink:!0,toHref(n=ga.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==ma&&n[1].t===ii}}),xn=n=>new Qe(n);function p4({groups:n}){const t=n.domain.concat([Fu,Xu,ri,Zu,Wu,tf,ef,nf,Sn,yg,ta,rf,sf,of,Yn,af,na,lf]),e=[Qu,ii,bg,Kn,kg,ta,ea,wg,xg,Iu,_u,Zl,Wl,Hu,Lu,$u,ju,Uu,qu,Vu,Pu,Ju,Gu,Ku,Yu],r=[Fu,Qu,Xu,Zu,Wu,tf,ef,nf,Sn,Zl,Wl,ta,rf,sf,of,ea,Yn,af,na,lf],i=xn(),o=J(i,na);mt(o,r,o),mt(o,n.domain,o);const a=xn(),c=xn(),f=xn();mt(i,n.domain,a),mt(i,n.scheme,c),mt(i,n.slashscheme,f),mt(a,r,o),mt(a,n.domain,a);const h=J(a,ri);J(o,ri,h),J(c,ri,h),J(f,ri,h);const p=J(o,Kn);mt(p,r,o),mt(p,n.domain,o);const g=xn();mt(h,n.domain,g),mt(g,n.domain,g);const y=J(g,Kn);mt(y,n.domain,g);const b=xn(Lk);mt(y,n.tld,b),mt(y,n.utld,b),J(h,ma,b);const k=J(g,Sn);J(k,Sn,k),mt(k,n.domain,g),mt(b,n.domain,g),J(b,Kn,y),J(b,Sn,k);const x=J(b,ii);mt(x,n.numeric,Lk);const S=J(a,Sn),T=J(a,Kn);J(S,Sn,S),mt(S,n.domain,a),mt(T,r,o),mt(T,n.domain,a);const D=xn(tu);mt(T,n.tld,D),mt(T,n.utld,D),mt(D,n.domain,a),mt(D,r,o),J(D,Kn,T),J(D,Sn,S),J(D,ri,h);const H=J(D,ii),V=xn(tu);mt(H,n.numeric,V);const L=xn(tu),I=xn();mt(L,t,L),mt(L,e,I),mt(I,t,L),mt(I,e,I),J(D,Yn,L),J(V,Yn,L);const q=J(c,ii),Y=J(f,ii),nt=J(Y,Yn),Qt=J(nt,Yn);mt(c,n.domain,a),J(c,Kn,T),J(c,Sn,S),mt(f,n.domain,a),J(f,Kn,T),J(f,Sn,S),mt(q,n.domain,L),J(q,Yn,L),J(q,ea,L),mt(Qt,n.domain,L),mt(Qt,t,L),J(Qt,Yn,L);const de=[[Zl,Wl],[Lu,Hu],[$u,ju],[Iu,_u],[Uu,qu],[Vu,Pu],[Ju,Gu],[Ku,Yu]];for(let Ut=0;Ut<de.length;Ut++){const[Pe,Ct]=de[Ut],ht=J(L,Pe);J(I,Pe,ht),J(ht,Ct,L);const $=xn(tu);mt(ht,t,$);const F=xn();mt(ht,e),mt($,t,$),mt($,e,F),mt(F,t,$),mt(F,e,F),J($,Ct,L),J(F,Ct,L)}return J(i,ma,D),J(i,vg,h4),{start:i,tokens:CM}}function m4(n,t,e){let r=e.length,i=0,o=[],a=[];for(;i<r;){let c=n,f=null,h=null,p=0,g=null,y=-1;for(;i<r&&!(f=c.go(e[i].t));)a.push(e[i++]);for(;i<r&&(h=f||c.go(e[i].t));)f=null,c=h,c.accepts()?(y=0,g=c):y>=0&&y++,i++,p++;if(y<0)i-=p,i<r&&(a.push(e[i]),i++);else{a.length>0&&(o.push(Ip(Hk,t,a)),a=[]),i-=y,p-=y;const b=g.t,k=e.slice(i-p,i);o.push(Ip(b,t,k))}}return a.length>0&&o.push(Ip(Hk,t,a)),o}function Ip(n,t,e){const r=e[0].s,i=e[e.length-1].e,o=t.slice(r,i);return new n(o,e)}const g4=typeof console<"u"&&console&&console.warn||(()=>{}),y4="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Vt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function v4(){return Qe.groups={},Vt.scanner=null,Vt.parser=null,Vt.tokenQueue=[],Vt.pluginQueue=[],Vt.customSchemes=[],Vt.initialized=!1,Vt}function $k(n,t=!1){if(Vt.initialized&&g4(`linkifyjs: already initialized - will not register custom scheme "${n}" ${y4}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Vt.customSchemes.push([n,t])}function b4(){Vt.scanner=f4(Vt.customSchemes);for(let n=0;n<Vt.tokenQueue.length;n++)Vt.tokenQueue[n][1]({scanner:Vt.scanner});Vt.parser=p4(Vt.scanner.tokens);for(let n=0;n<Vt.pluginQueue.length;n++)Vt.pluginQueue[n][1]({scanner:Vt.scanner,parser:Vt.parser});return Vt.initialized=!0,Vt}function Mg(n){return Vt.initialized||b4(),m4(Vt.parser.start,n,AM(Vt.scanner.start,n))}Mg.scan=AM;function RM(n,t=null,e=null){if(t&&typeof t=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);e=t,t=null}const r=new Sg(e),i=Mg(n),o=[];for(let a=0;a<i.length;a++){const c=i[a];c.isLink&&(!t||c.t===t)&&r.check(c)&&o.push(c.toFormattedObject(r))}return o}var Tg="[\0- -\u2029]",k4=new RegExp(Tg),w4=new RegExp(`${Tg}$`),x4=new RegExp(Tg,"g");function S4(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function M4(n){return new Et({key:new It("autolink"),appendTransaction:(t,e,r)=>{const i=t.some(f=>f.docChanged)&&!e.doc.eq(r.doc),o=t.some(f=>f.getMeta("preventAutolink"));if(!i||o)return;const{tr:a}=r,c=zS(e.doc,[...t]);if(IS(c).forEach(({newRange:f})=>{const h=Kz(r.doc,f,y=>y.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(f.from,f.to," "," ");if(!w4.test(y))return;p=h[0],g=r.doc.textBetween(p.pos,f.to,void 0," ")}if(p&&g){const y=g.split(k4).filter(Boolean);if(y.length<=0)return!1;const b=y[y.length-1],k=p.pos+g.lastIndexOf(b);if(!b)return!1;const x=Mg(b).map(S=>S.toObject(n.defaultProtocol));if(!S4(x))return!1;x.filter(S=>S.isLink).map(S=>({...S,from:k+S.start+1,to:k+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>n.validate(S.value)).filter(S=>n.shouldAutoLink(S.value)).forEach(S=>{cg(S.from,S.to,r.doc).some(T=>T.mark.type===n.type)||a.addMark(S.from,S.to,n.type.create({href:S.href}))})}}),!!a.steps.length)return a}})}function T4(n){return new Et({key:new It("handleClickLink"),props:{handleClick:(t,e,r)=>{var i,o;if(r.button!==0||!t.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let p=r.target;const g=[];for(;p.nodeName!=="DIV";)g.push(p),p=p.parentNode;a=g.find(y=>y.nodeName==="A")}if(!a)return!1;const c=jS(t.state,n.type.name),f=(i=a?.href)!=null?i:c.href,h=(o=a?.target)!=null?o:c.target;return n.enableClickSelection&&n.editor.commands.extendMarkRange(n.type.name),a&&f?(window.open(f,h),!0):!1}}})}function E4(n){return new Et({key:new It("handlePasteLink"),props:{handlePaste:(t,e,r)=>{const{shouldAutoLink:i}=n,{state:o}=t,{selection:a}=o,{empty:c}=a;if(c)return!1;let f="";r.content.forEach(p=>{f+=p.textContent});const h=RM(f,{defaultProtocol:n.defaultProtocol}).find(p=>p.isLink&&p.value===f);return!f||!h||i!==void 0&&!i(h.href)?!1:n.editor.commands.setMark(n.type,{href:h.href})}}})}function Bi(n,t){const e=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&e.push(i)}),!n||n.replace(x4,"").match(new RegExp(`^(?:(?:${e.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var C4=Mr.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){$k(n);return}$k(n.scheme,n.optionalSlashes)})},onDestroy(){v4()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,t)=>!!Bi(n,t.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const t=n.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:e=>!!Bi(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:t=>!!Bi(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",ie(this.options.HTMLAttributes,n),0]:["a",ie(this.options.HTMLAttributes,{...n,href:""}),0]},markdownTokenName:"link",parseMarkdown:(n,t)=>t.applyMark("link",t.parseInline(n.tokens||[]),{href:n.href,title:n.title||null}),renderMarkdown:(n,t)=>{var e;const r=((e=n.attrs)==null?void 0:e.href)||"";return`[${t.renderChildren(n)}](${r})`},addCommands(){return{setLink:n=>({chain:t})=>{const{href:e}=n;return this.options.isAllowedUri(e,{defaultValidate:r=>!!Bi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:t})=>{const{href:e}=n||{};return e&&!this.options.isAllowedUri(e,{defaultValidate:r=>!!Bi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[di({find:n=>{const t=[];if(n){const{protocols:e,defaultProtocol:r}=this.options,i=RM(n).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:a=>!!Bi(a,e),protocols:e,defaultProtocol:r}));i.length&&i.forEach(o=>{this.options.shouldAutoLink(o.value)&&t.push({text:o.value,data:{href:o.href},index:o.start})})}return t},type:this.type,getAttributes:n=>{var t;return{href:(t=n.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:t,defaultProtocol:e}=this.options;return this.options.autolink&&n.push(M4({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Bi(i,t),protocols:t,defaultProtocol:e}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(T4({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&n.push(E4({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),n}}),A4=C4;const O4=new Ft({tiptapExtension:A4.configure({openOnClick:!1,autolink:!0}),onBridgeMessage:(n,{type:t,payload:e})=>{if(t==="set-link"){if(e===null)return!1;if(e==="")return n.chain().focus().extendMarkRange("link").unsetLink().setTextSelection(n.state.selection.from).run(),!1;n.chain().focus().extendMarkRange("link").setLink({href:e}).setTextSelection(n.state.selection.from).run()}return!1},extendEditorInstance:n=>({setLink:t=>n({type:"set-link",payload:t})}),extendEditorState:n=>({canSetLink:!n.state.selection.empty,isLinkActive:n.isActive("link"),activeLink:n.getAttributes("link").href})}),R4=new Ft({tiptapExtension:zf,onBridgeMessage:(n,t)=>{switch(t.type){case"lift":n.chain().focus().liftListItem(n.schema.nodes.listItem.name).run();break;case"sink":n.chain().focus().sinkListItem(n.schema.nodes.listItem.name).run();break}return!1},extendEditorInstance:n=>({lift:()=>n({type:"lift"}),sink:()=>n({type:"sink"})}),extendEditorState:n=>({canLift:n.can().liftListItem(n.state.schema.nodes.listItem.name),canSink:n.can().sinkListItem(n.state.schema.nodes.listItem.name)})}),N4=new Ft({tiptapExtension:dM,tiptapExtensionDeps:[zf],onBridgeMessage:(n,t)=>(t.type==="toggle-orderedList"&&n.chain().focus().toggleOrderedList().run(),!1),extendEditorInstance:n=>({toggleOrderedList:()=>n({type:"toggle-orderedList"})}),extendEditorState:n=>({canToggleOrderedList:n.can().toggleOrderedList(),isOrderedListActive:n.isActive("orderedList")})}),z4=new Ft({tiptapExtension:VL,extendCSS:`
    .is-editor-empty:first-child::before {
        color: #adb5bd;
        content: attr(data-placeholder);
        float: left;
        height: 0;
        pointer-events: none;
    }
  `,onBridgeMessage:(n,t)=>(t.type==="set-placeholder"&&(n.extensionManager.extensions.forEach(e=>{e.name==="placeholder"&&(e.options.placeholder=t.payload)}),n.setOptions()),!1),extendEditorInstance:n=>({setPlaceholder:t=>n({type:"set-placeholder",payload:t})})});var D4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,B4=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,L4=Mr.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",ie(this.options.HTMLAttributes,n),0]},markdownTokenName:"del",parseMarkdown:(n,t)=>t.applyMark("strike",t.parseInline(n.tokens||[])),renderMarkdown:(n,t)=>`~~${t.renderChildren(n)}~~`,addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[is({find:D4,type:this.type})]},addPasteRules(){return[di({find:B4,type:this.type})]}}),H4=L4;const $4=new Ft({tiptapExtension:H4,onBridgeMessage:(n,t)=>(t.type==="toggle-strike"&&n.chain().focus().toggleStrike().run(),!1),extendEditorInstance:n=>({toggleStrike:()=>n({type:"toggle-strike"})}),extendEditorState:n=>({canToggleStrike:n.can().toggleStrike(),isStrikeActive:n.isActive("strike")})});var j4=Mr.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",ie(this.options.HTMLAttributes,n),0]},parseMarkdown(n,t){return t.applyMark(this.name||"underline",t.parseInline(n.tokens||[]))},renderMarkdown(n,t){return`++${t.renderChildren(n)}++`},markdownTokenizer:{name:"underline",level:"inline",start(n){return n.indexOf("++")},tokenize(n,t,e){const r=/^(\+\+)([\s\S]+?)(\+\+)/.exec(n);if(!r)return;const i=r[2].trim();return{type:"underline",raw:r[0],text:i,tokens:e.inlineTokens(i)}}},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),I4=j4;const _4=new Ft({tiptapExtension:I4,onBridgeMessage:(n,t)=>(t.type==="toggle-underline"&&n.chain().focus().toggleUnderline().run(),!1),extendEditorInstance:n=>({toggleUnderline:()=>n({type:"toggle-underline"})}),extendEditorState:n=>({canToggleUnderline:n.can().toggleUnderline(),isUnderlineActive:n.isActive("underline")})}),U4=new Ft({tiptapExtension:pM,tiptapExtensionDeps:[hM.configure({nested:!0})],onBridgeMessage:(n,t)=>(t.type==="toggle-task-list"&&n.chain().focus().toggleTaskList().run(),t.type==="lift-task-list-item"&&n.chain().focus().liftListItem(n.state.schema.nodes.taskItem.name).run(),t.type==="sink-task-list-item"&&n.chain().focus().sinkListItem(n.state.schema.nodes.taskItem.name).run(),!1),extendEditorInstance:n=>({toggleTaskList:()=>n({type:"toggle-task-list"}),liftTaskListItem:()=>n({type:"lift-task-list-item"}),sinkTaskListItem:()=>n({type:"sink-task-list-item"})}),extendEditorState:n=>({canToggleTaskList:n.can().toggleTaskList(),isTaskListActive:n.isActive("taskList"),canLiftTaskListItem:n.can().liftListItem(n.state.schema.nodes.taskItem.name),canSinkTaskListItem:n.can().sinkListItem(n.state.schema.nodes.taskItem.name)}),extendCSS:`
  ul[data-type="taskList"] {
    list-style: none;
    padding: 0;
  }
  
  ul[data-type="taskList"] > li {
    display: flex;
  }
  
  ul[data-type="taskList"] p {
    margin: 0;
  }
  
  ul[data-type="taskList"] li {
    display: flex;
  }
  
  ul[data-type="taskList"] li > label > input {
    font-size: inherit;
    font-family: inherit;
    color: #000;
    margin: 0.1rem;
    border: 1px solid black;
    border-radius: 0.3rem;
    padding: 0.1rem 0.4rem;
    background: white;
    accent-color: black;
  }
  ul[data-type="taskList"] li > label {
    flex: 0 0 auto;
    margin-right: 0.5rem;
    user-select: none;
  }
  
  ul[data-type="taskList"] li > div {
    flex: 1 1 auto;
  }  
  `}),q4=new Ft({tiptapExtension:qL});var V4=An.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",ie(this.options.HTMLAttributes,n)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:n,chain:t,state:e,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:i,storedMarks:o}=e;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:c}=r.extensionManager,f=o||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&f&&a){const g=f.filter(y=>c.includes(y.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),P4=V4;const J4=new Ft({tiptapExtension:P4,onBridgeMessage:(n,t)=>(t.type==="set-hard-break"&&(console.log("setting hard break"),n.chain().focus().setHardBreak().run()),!1),extendEditorInstance:n=>({setHardBreak:()=>n({type:"set-hard-break"})}),extendEditorState:()=>({})}),G4=[GB,JL,cL,n4,$4,_4,N4,bL,FL,iL,IB,U4,O4,gL,SL,NB,z4,R4,q4,J4];function K4(n,t=null){return function(e,r){let{$from:i,$to:o}=e.selection,a=i.blockRange(o);if(!a)return!1;let c=r?e.tr:null;return Y4(c,a,n,t)?(r&&r(c.scrollIntoView()),!0):!1}}function Y4(n,t,e,r=null){let i=!1,o=t,a=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(e)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let f=a.resolve(t.start-2);o=new gu(f,f,t.depth),t.endIndex<t.parent.childCount&&(t=new gu(t.$from,a.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let c=Rw(o,e,r,t);return c?(n&&F4(n,t,c,i,e),!0):!1}function F4(n,t,e,r,i){let o=G.empty;for(let p=e.length-1;p>=0;p--)o=G.from(e[p].type.create(e[p].attrs,o));n.step(new ve(t.start-(r?2:0),t.end,t.start,t.end,new tt(o,0,0),e.length,!0));let a=0;for(let p=0;p<e.length;p++)e[p].type==i&&(a=p+1);let c=e.length-a,f=t.start+e.length-(r?2:0),h=t.parent;for(let p=t.startIndex,g=t.endIndex,y=!0;p<g;p++,y=!1)!y&&kr(n.doc,f,c)&&(n.split(f,c),f+=2*c),f+=h.child(p).nodeSize;return n}function Q4(n){return function(t,e){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,a=>a.childCount>0&&a.firstChild.type==n);return o?e?r.node(o.depth-1).type==n?X4(t,e,n,o):Z4(t,e,o):!0:!1}}function X4(n,t,e,r){let i=n.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(i.step(new ve(o-1,a,o,a,new tt(G.from(e.create(null,r.parent.copy())),1,0),1,!0)),r=new gu(i.doc.resolve(r.$from.pos),i.doc.resolve(a),r.depth));const c=wo(r);if(c==null)return!1;i.lift(r,c);let f=i.doc.resolve(i.mapping.map(o,-1)-1);return ls(i.doc,f.pos)&&f.nodeBefore.type==f.nodeAfter.type&&i.join(f.pos),t(i.scrollIntoView()),!0}function Z4(n,t,e){let r=n.tr,i=e.parent;for(let b=e.end,k=e.endIndex-1,x=e.startIndex;k>x;k--)b-=i.child(k).nodeSize,r.delete(b-1,b+1);let o=r.doc.resolve(e.start),a=o.nodeAfter;if(r.mapping.map(e.end)!=e.start+o.nodeAfter.nodeSize)return!1;let c=e.startIndex==0,f=e.endIndex==i.childCount,h=o.node(-1),p=o.index(-1);if(!h.canReplace(p+(c?0:1),p+1,a.content.append(f?G.empty:G.from(i))))return!1;let g=o.pos,y=g+a.nodeSize;return r.step(new ve(g-(c?1:0),y+(f?1:0),g+1,y-1,new tt((c?G.empty:G.from(i.copy(G.empty))).append(f?G.empty:G.from(i.copy(G.empty))),c?0:1,f?0:1),c?0:1)),t(r.scrollIntoView()),!0}function W4(n){return function(t,e){let{$from:r,$to:i}=t.selection,o=r.blockRange(i,h=>h.childCount>0&&h.firstChild.type==n);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let c=o.parent,f=c.child(a-1);if(f.type!=n)return!1;if(e){let h=f.lastChild&&f.lastChild.type==c.type,p=G.from(h?n.create():null),g=new tt(G.from(n.create(null,G.from(c.type.create(null,p)))),h?3:1,0),y=o.start,b=o.end;e(t.tr.step(new ve(y-(h?3:1),b,y,b,g,1,!0)).scrollIntoView())}return!0}}var tH=Object.defineProperty,Eg=(n,t)=>{for(var e in t)tH(n,e,{get:t[e],enumerable:!0})};function NM(n){const{state:t,transaction:e}=n;let{selection:r}=e,{doc:i}=e,{storedMarks:o}=e;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return o},get selection(){return r},get doc(){return i},get tr(){return r=e.selection,i=e.doc,o=e.storedMarks,e}}}var eH=class{constructor(n){this.editor=n.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=n.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:n,editor:t,state:e}=this,{view:r}=t,{tr:i}=e,o=this.buildProps(i);return Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...h)=>{const p=c(...h)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(n,t=!0){const{rawCommands:e,editor:r,state:i}=this,{view:o}=r,a=[],c=!!n,f=n||i.tr,h=()=>(!c&&t&&!f.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(f),a.every(g=>g===!0)),p={...Object.fromEntries(Object.entries(e).map(([g,y])=>[g,(...k)=>{const x=this.buildProps(f,t),S=y(...k)(x);return a.push(S),p}])),run:h};return p}createCan(n){const{rawCommands:t,state:e}=this,r=!1,i=n||e.tr,o=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([c,f])=>[c,(...h)=>f(...h)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(n,t=!0){const{rawCommands:e,editor:r,state:i}=this,{view:o}=r,a={tr:n,editor:r,view:o,state:NM({state:i,transaction:n}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(n,t),can:()=>this.createCan(n),get commands(){return Object.fromEntries(Object.entries(e).map(([c,f])=>[c,(...h)=>f(...h)(a)]))}};return a}},zn={};Eg(zn,{blur:()=>nH,clearContent:()=>rH,clearNodes:()=>iH,command:()=>sH,createParagraphNear:()=>oH,cut:()=>lH,deleteCurrentNode:()=>aH,deleteNode:()=>cH,deleteRange:()=>uH,deleteSelection:()=>fH,enter:()=>dH,exitCode:()=>hH,extendMarkRange:()=>mH,first:()=>gH,focus:()=>bH,forEach:()=>kH,insertContent:()=>wH,insertContentAt:()=>MH,joinBackward:()=>CH,joinDown:()=>EH,joinForward:()=>AH,joinItemBackward:()=>OH,joinItemForward:()=>RH,joinTextblockBackward:()=>NH,joinTextblockForward:()=>zH,joinUp:()=>TH,keyboardShortcut:()=>BH,lift:()=>LH,liftEmptyBlock:()=>HH,liftListItem:()=>$H,newlineInCode:()=>jH,resetAttributes:()=>IH,scrollIntoView:()=>_H,selectAll:()=>UH,selectNodeBackward:()=>qH,selectNodeForward:()=>VH,selectParentNode:()=>PH,selectTextblockEnd:()=>JH,selectTextblockStart:()=>GH,setContent:()=>YH,setMark:()=>y$,setMeta:()=>v$,setNode:()=>b$,setNodeSelection:()=>k$,setTextDirection:()=>w$,setTextSelection:()=>x$,sinkListItem:()=>S$,splitBlock:()=>M$,splitListItem:()=>T$,toggleList:()=>E$,toggleMark:()=>C$,toggleNode:()=>A$,toggleWrap:()=>O$,undoInputRule:()=>R$,unsetAllMarks:()=>N$,unsetMark:()=>z$,unsetTextDirection:()=>D$,updateAttributes:()=>B$,wrapIn:()=>L$,wrapInList:()=>H$});var nH=()=>({editor:n,view:t})=>(requestAnimationFrame(()=>{var e;n.isDestroyed||(t.dom.blur(),(e=window?.getSelection())==null||e.removeAllRanges())}),!0),rH=(n=!0)=>({commands:t})=>t.setContent("",{emitUpdate:n}),iH=()=>({state:n,tr:t,dispatch:e})=>{const{selection:r}=t,{ranges:i}=r;return e&&i.forEach(({$from:o,$to:a})=>{n.doc.nodesBetween(o.pos,a.pos,(c,f)=>{if(c.type.isText)return;const{doc:h,mapping:p}=t,g=h.resolve(p.map(f)),y=h.resolve(p.map(f+c.nodeSize)),b=g.blockRange(y);if(!b)return;const k=wo(b);if(c.type.isTextblock){const{defaultType:x}=g.parent.contentMatchAt(g.index());t.setNodeMarkup(b.start,x)}(k||k===0)&&t.lift(b,k)})}),!0},sH=n=>t=>n(t),oH=()=>({state:n,dispatch:t})=>Gw(n,t),lH=(n,t)=>({editor:e,tr:r})=>{const{state:i}=e,o=i.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const a=r.mapping.map(t);return r.insert(a,o.content),r.setSelection(new ft(r.doc.resolve(Math.max(a-1,0)))),!0},aH=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,r=e.$anchor.node();if(r.content.size>0)return!1;const i=n.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===r.type){if(t){const c=i.before(o),f=i.after(o);n.delete(c,f).scrollIntoView()}return!0}return!1};function Be(n,t){if(typeof n=="string"){if(!t.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return t.nodes[n]}return n}var cH=n=>({tr:t,state:e,dispatch:r})=>{const i=Be(n,e.schema),o=t.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===i){if(r){const f=o.before(a),h=o.after(a);t.delete(f,h).scrollIntoView()}return!0}return!1},uH=n=>({tr:t,dispatch:e})=>{const{from:r,to:i}=n;return e&&t.delete(r,i),!0},fH=()=>({state:n,dispatch:t})=>Dm(n,t),dH=()=>({commands:n})=>n.keyboardShortcut("Enter"),hH=()=>({state:n,dispatch:t})=>LA(n,t);function pH(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function cf(n,t,e={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>e.strict?t[i]===n[i]:pH(t[i])?t[i].test(n[i]):t[i]===n[i]):!0}function zM(n,t,e={}){return n.find(r=>r.type===t&&cf(Object.fromEntries(Object.keys(e).map(i=>[i,r.attrs[i]])),e))}function jk(n,t,e={}){return!!zM(n,t,e)}function DM(n,t,e){var r;if(!n||!t)return;let i=n.parent.childAfter(n.parentOffset);if((!i.node||!i.node.marks.some(p=>p.type===t))&&(i=n.parent.childBefore(n.parentOffset)),!i.node||!i.node.marks.some(p=>p.type===t)||(e=e||((r=i.node.marks[0])==null?void 0:r.attrs),!zM([...i.node.marks],t,e)))return;let a=i.index,c=n.start()+i.offset,f=a+1,h=c+i.node.nodeSize;for(;a>0&&jk([...n.parent.child(a-1).marks],t,e);)a-=1,c-=n.parent.child(a).nodeSize;for(;f<n.parent.childCount&&jk([...n.parent.child(f).marks],t,e);)h+=n.parent.child(f).nodeSize,f+=1;return{from:c,to:h}}function mi(n,t){if(typeof n=="string"){if(!t.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return t.marks[n]}return n}var mH=(n,t={})=>({tr:e,state:r,dispatch:i})=>{const o=mi(n,r.schema),{doc:a,selection:c}=e,{$from:f,from:h,to:p}=c;if(i){const g=DM(f,o,t);if(g&&g.from<=h&&g.to>=p){const y=ft.create(a,g.from,g.to);e.setSelection(y)}}return!0},gH=n=>t=>{const e=typeof n=="function"?n(t):n;for(let r=0;r<e.length;r+=1)if(e[r](t))return!0;return!1};function BM(n){return n instanceof ft}function qi(n=0,t=0,e=0){return Math.min(Math.max(n,t),e)}function yH(n,t=null){if(!t)return null;const e=ut.atStart(n),r=ut.atEnd(n);if(t==="start"||t===!0)return e;if(t==="end")return r;const i=e.from,o=r.to;return t==="all"?ft.create(n,qi(0,i,o),qi(n.content.size,i,o)):ft.create(n,qi(t,i,o),qi(t,i,o))}function Ik(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function uf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function vH(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var bH=(n=null,t={})=>({editor:e,view:r,tr:i,dispatch:o})=>{t={scrollIntoView:!0,...t};const a=()=>{(uf()||Ik())&&r.dom.focus(),vH()&&!uf()&&!Ik()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{e.isDestroyed||(r.focus(),t?.scrollIntoView&&e.commands.scrollIntoView())})};try{if(r.hasFocus()&&n===null||n===!1)return!0}catch{return!1}if(o&&n===null&&!BM(e.state.selection))return a(),!0;const c=yH(i.doc,n)||e.state.selection,f=e.state.selection.eq(c);return o&&(f||i.setSelection(c),f&&i.storedMarks&&i.setStoredMarks(i.storedMarks),a()),!0},kH=(n,t)=>e=>n.every((r,i)=>t(r,{...e,index:i})),wH=(n,t)=>({tr:e,commands:r})=>r.insertContentAt({from:e.selection.from,to:e.selection.to},n,t),LM=n=>{const t=n.childNodes;for(let e=t.length-1;e>=0;e-=1){const r=t[e];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&LM(r)}return n};function Ul(n){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${n}</body>`,e=new window.DOMParser().parseFromString(t,"text/html").body;return LM(e)}function ya(n,t,e){if(n instanceof Fn||n instanceof G)return n;e={slice:!0,parseOptions:{},...e};const r=typeof n=="object"&&n!==null,i=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return G.fromArray(n.map(c=>t.nodeFromJSON(c)));const a=t.nodeFromJSON(n);return e.errorOnInvalidContent&&a.check(),a}catch(o){if(e.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",o),ya("",t,e)}if(i){if(e.errorOnInvalidContent){let a=!1,c="";const f=new xw({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(a=!0,c=typeof h=="string"?h:h.outerHTML,null)}]}})});if(e.slice?Ji.fromSchema(f).parseSlice(Ul(n),e.parseOptions):Ji.fromSchema(f).parse(Ul(n),e.parseOptions),e.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const o=Ji.fromSchema(t);return e.slice?o.parseSlice(Ul(n),e.parseOptions).content:o.parse(Ul(n),e.parseOptions)}return ya("",t,e)}function xH(n,t,e){const r=n.steps.length-1;if(r<t)return;const i=n.steps[r];if(!(i instanceof ye||i instanceof ve))return;const o=n.mapping.maps[r];let a=0;o.forEach((c,f,h,p)=>{a===0&&(a=p)}),n.setSelection(ut.near(n.doc.resolve(a),e))}var SH=n=>!("type"in n),MH=(n,t,e)=>({tr:r,dispatch:i,editor:o})=>{var a;if(i){e={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...e};let c;const f=S=>{o.emit("contentError",{editor:o,error:S,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...e.parseOptions};if(!e.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{ya(t,o.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(S){f(S)}try{c=ya(t,o.schema,{parseOptions:h,errorOnInvalidContent:(a=e.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(S){return f(S),!1}let{from:p,to:g}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},y=!0,b=!0;if((SH(c)?c:[c]).forEach(S=>{S.check(),y=y?S.isText&&S.marks.length===0:!1,b=b?S.isBlock:!1}),p===g&&b){const{parent:S}=r.doc.resolve(p);S.isTextblock&&!S.type.spec.code&&!S.childCount&&(p-=1,g+=1)}let x;if(y){if(Array.isArray(t))x=t.map(S=>S.text||"").join("");else if(t instanceof G){let S="";t.forEach(T=>{T.text&&(S+=T.text)}),x=S}else typeof t=="object"&&t&&t.text?x=t.text:x=t;r.insertText(x,p,g)}else{x=c;const S=r.doc.resolve(p),T=S.node(),D=S.parentOffset===0,H=T.isText||T.isTextblock,V=T.content.size>0;D&&H&&V&&(p=Math.max(0,p-1)),r.replaceWith(p,g,x)}e.updateSelection&&xH(r,r.steps.length-1,-1),e.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:x}),e.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:x})}return!0},TH=()=>({state:n,dispatch:t})=>zA(n,t),EH=()=>({state:n,dispatch:t})=>DA(n,t),CH=()=>({state:n,dispatch:t})=>Iw(n,t),AH=()=>({state:n,dispatch:t})=>Vw(n,t),OH=()=>({state:n,dispatch:t,tr:e})=>{try{const r=mf(n.doc,n.selection.$from.pos,-1);return r==null?!1:(e.join(r,2),t&&t(e),!0)}catch{return!1}},RH=()=>({state:n,dispatch:t,tr:e})=>{try{const r=mf(n.doc,n.selection.$from.pos,1);return r==null?!1:(e.join(r,2),t&&t(e),!0)}catch{return!1}},NH=()=>({state:n,dispatch:t})=>RA(n,t),zH=()=>({state:n,dispatch:t})=>NA(n,t);function HM(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function DH(n){const t=n.split(/-(?!$)/);let e=t[t.length-1];e==="Space"&&(e=" ");let r,i,o,a;for(let c=0;c<t.length-1;c+=1){const f=t[c];if(/^(cmd|meta|m)$/i.test(f))a=!0;else if(/^a(lt)?$/i.test(f))r=!0;else if(/^(c|ctrl|control)$/i.test(f))i=!0;else if(/^s(hift)?$/i.test(f))o=!0;else if(/^mod$/i.test(f))uf()||HM()?a=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${f}`)}return r&&(e=`Alt-${e}`),i&&(e=`Ctrl-${e}`),a&&(e=`Meta-${e}`),o&&(e=`Shift-${e}`),e}var BH=n=>({editor:t,view:e,tr:r,dispatch:i})=>{const o=DH(n).split(/-(?!$)/),a=o.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),c=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),f=t.captureTransaction(()=>{e.someProp("handleKeyDown",h=>h(e,c))});return f?.steps.forEach(h=>{const p=h.map(r.mapping);p&&i&&r.maybeStep(p)}),!0};function Cg(n,t,e={}){const{from:r,to:i,empty:o}=n.selection,a=t?Be(t,n.schema):null,c=[];n.doc.nodesBetween(r,i,(g,y)=>{if(g.isText)return;const b=Math.max(r,y),k=Math.min(i,y+g.nodeSize);c.push({node:g,from:b,to:k})});const f=i-r,h=c.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>cf(g.node.attrs,e,{strict:!1}));return o?!!h.length:h.reduce((g,y)=>g+y.to-y.from,0)>=f}var LH=(n,t={})=>({state:e,dispatch:r})=>{const i=Be(n,e.schema);return Cg(e,i,t)?BA(e,r):!1},HH=()=>({state:n,dispatch:t})=>Kw(n,t),$H=n=>({state:t,dispatch:e})=>{const r=Be(n,t.schema);return Q4(r)(t,e)},jH=()=>({state:n,dispatch:t})=>Jw(n,t);function $M(n,t){return t.nodes[n]?"node":t.marks[n]?"mark":null}function _k(n,t){const e=typeof t=="string"?[t]:t;return Object.keys(n).reduce((r,i)=>(e.includes(i)||(r[i]=n[i]),r),{})}var IH=(n,t)=>({tr:e,state:r,dispatch:i})=>{let o=null,a=null;const c=$M(typeof n=="string"?n:n.name,r.schema);if(!c)return!1;c==="node"&&(o=Be(n,r.schema)),c==="mark"&&(a=mi(n,r.schema));let f=!1;return e.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,g)=>{o&&o===p.type&&(f=!0,i&&e.setNodeMarkup(g,void 0,_k(p.attrs,t))),a&&p.marks.length&&p.marks.forEach(y=>{a===y.type&&(f=!0,i&&e.addMark(g,g+p.nodeSize,a.create(_k(y.attrs,t))))})})}),f},_H=()=>({tr:n,dispatch:t})=>(t&&n.scrollIntoView(),!0),UH=()=>({tr:n,dispatch:t})=>{if(t){const e=new wr(n.doc);n.setSelection(e)}return!0},qH=()=>({state:n,dispatch:t})=>Uw(n,t),VH=()=>({state:n,dispatch:t})=>Pw(n,t),PH=()=>({state:n,dispatch:t})=>jA(n,t),JH=()=>({state:n,dispatch:t})=>UA(n,t),GH=()=>({state:n,dispatch:t})=>_A(n,t);function KH(n,t,e={},r={}){return ya(n,t,{slice:!1,parseOptions:e,errorOnInvalidContent:r.errorOnInvalidContent})}var YH=(n,{errorOnInvalidContent:t,emitUpdate:e=!0,parseOptions:r={}}={})=>({editor:i,tr:o,dispatch:a,commands:c})=>{const{doc:f}=o;if(r.preserveWhitespace!=="full"){const h=KH(n,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return a&&o.replaceWith(0,f.content.size,h).setMeta("preventUpdate",!e),!0}return a&&o.setMeta("preventUpdate",!e),c.insertContentAt({from:0,to:f.content.size},n,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function FH(n,t){const e=mi(t,n.schema),{from:r,to:i,empty:o}=n.selection,a=[];o?(n.storedMarks&&a.push(...n.storedMarks),a.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,i,f=>{a.push(...f.marks)});const c=a.find(f=>f.type.name===e.name);return c?{...c.attrs}:{}}function QH(n,t){const e=new CA(n);return t.forEach(r=>{r.steps.forEach(i=>{e.step(i)})}),e}function XH(n){for(let t=0;t<n.edgeCount;t+=1){const{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function ZH(n,t){for(let e=n.depth;e>0;e-=1){const r=n.node(e);if(t(r))return{pos:e>0?n.before(e):0,start:n.start(e),depth:e,node:r}}}function Ag(n){return t=>ZH(t.$from,n)}function gt(n,t,e){return n.config[t]===void 0&&n.parent?gt(n.parent,t,e):typeof n.config[t]=="function"?n.config[t].bind({...e,parent:n.parent?gt(n.parent,t,e):null}):n.config[t]}function Og(n){return n.map(t=>{const e={name:t.name,options:t.options,storage:t.storage},r=gt(t,"addExtensions",e);return r?[t,...Og(r())]:t}).flat(10)}function WH(n){return typeof n=="function"}function te(n,t=void 0,...e){return WH(n)?t?n.bind(t)(...e):n(...e):n}function t$(n={}){return Object.keys(n).length===0&&n.constructor===Object}function Bf(n){const t=n.filter(i=>i.type==="extension"),e=n.filter(i=>i.type==="node"),r=n.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:e,markExtensions:r}}function e$(n){const t=[],{nodeExtensions:e,markExtensions:r}=Bf(n),i=[...e,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage,extensions:i},f=gt(a,"addGlobalAttributes",c);if(!f)return;f().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([y,b])=>{t.push({type:g,name:y,attribute:{...o,...b}})})})})}),i.forEach(a=>{const c={name:a.name,options:a.options,storage:a.storage},f=gt(a,"addAttributes",c);if(!f)return;const h=f();Object.entries(h).forEach(([p,g])=>{const y={...o,...g};typeof y?.default=="function"&&(y.default=y.default()),y?.isRequired&&y?.default===void 0&&delete y.default,t.push({type:a.name,name:p,attribute:y})})}),t}function n$(...n){return n.filter(t=>!!t).reduce((t,e)=>{const r={...t};return Object.entries(e).forEach(([i,o])=>{if(!r[i]){r[i]=o;return}if(i==="class"){const c=o?String(o).split(" "):[],f=r[i]?r[i].split(" "):[],h=c.filter(p=>!f.includes(p));r[i]=[...f,...h].join(" ")}else if(i==="style"){const c=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],f=r[i]?r[i].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;f.forEach(p=>{const[g,y]=p.split(":").map(b=>b.trim());h.set(g,y)}),c.forEach(p=>{const[g,y]=p.split(":").map(b=>b.trim());h.set(g,y)}),r[i]=Array.from(h.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[i]=o}),r},{})}function Uk(n,t){return t.filter(e=>e.type===n.type.name).filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(n.attrs)||{}:{[e.name]:n.attrs[e.name]}).reduce((e,r)=>n$(e,r),{})}function r$(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function qk(n,t){return"style"in n?n:{...n,getAttrs:e=>{const r=n.getAttrs?n.getAttrs(e):n.attrs;if(r===!1)return!1;const i=t.reduce((o,a)=>{const c=a.attribute.parseHTML?a.attribute.parseHTML(e):r$(e.getAttribute(a.name));return c==null?o:{...o,[a.name]:c}},{});return{...r,...i}}}}function Vk(n){return Object.fromEntries(Object.entries(n).filter(([t,e])=>t==="attrs"&&t$(e)?!1:e!=null))}function Pk(n){var t,e;const r={};return!((t=n?.attribute)!=null&&t.isRequired)&&"default"in(n?.attribute||{})&&(r.default=n.attribute.default),((e=n?.attribute)==null?void 0:e.validate)!==void 0&&(r.validate=n.attribute.validate),[n.name,r]}function i$(n,t){var e;const r=e$(n),{nodeExtensions:i,markExtensions:o}=Bf(n),a=(e=i.find(h=>gt(h,"topNode")))==null?void 0:e.name,c=Object.fromEntries(i.map(h=>{const p=r.filter(T=>T.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:t},y=n.reduce((T,D)=>{const H=gt(D,"extendNodeSchema",g);return{...T,...H?H(h):{}}},{}),b=Vk({...y,content:te(gt(h,"content",g)),marks:te(gt(h,"marks",g)),group:te(gt(h,"group",g)),inline:te(gt(h,"inline",g)),atom:te(gt(h,"atom",g)),selectable:te(gt(h,"selectable",g)),draggable:te(gt(h,"draggable",g)),code:te(gt(h,"code",g)),whitespace:te(gt(h,"whitespace",g)),linebreakReplacement:te(gt(h,"linebreakReplacement",g)),defining:te(gt(h,"defining",g)),isolating:te(gt(h,"isolating",g)),attrs:Object.fromEntries(p.map(Pk))}),k=te(gt(h,"parseHTML",g));k&&(b.parseDOM=k.map(T=>qk(T,p)));const x=gt(h,"renderHTML",g);x&&(b.toDOM=T=>x({node:T,HTMLAttributes:Uk(T,p)}));const S=gt(h,"renderText",g);return S&&(b.toText=S),[h.name,b]})),f=Object.fromEntries(o.map(h=>{const p=r.filter(S=>S.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:t},y=n.reduce((S,T)=>{const D=gt(T,"extendMarkSchema",g);return{...S,...D?D(h):{}}},{}),b=Vk({...y,inclusive:te(gt(h,"inclusive",g)),excludes:te(gt(h,"excludes",g)),group:te(gt(h,"group",g)),spanning:te(gt(h,"spanning",g)),code:te(gt(h,"code",g)),attrs:Object.fromEntries(p.map(Pk))}),k=te(gt(h,"parseHTML",g));k&&(b.parseDOM=k.map(S=>qk(S,p)));const x=gt(h,"renderHTML",g);return x&&(b.toDOM=S=>x({mark:S,HTMLAttributes:Uk(S,p)})),[h.name,b]}));return new xw({topNode:a,nodes:c,marks:f})}function s$(n){const t=n.filter((e,r)=>n.indexOf(e)!==r);return Array.from(new Set(t))}function o$(n){return n.sort((e,r)=>{const i=gt(e,"priority")||100,o=gt(r,"priority")||100;return i>o?-1:i<o?1:0})}function l$(n){const t=o$(Og(n)),e=s$(t.map(r=>r.name));return e.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${e.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function a$(n,t){const e=l$(n);return i$(e,t)}function c$(n,t){const e=a$(t),r=Ul(n);return Ji.fromSchema(e).parse(r).toJSON()}function u$(n,t,e){const{from:r,to:i}=t,{blockSeparator:o=`

`,textSerializers:a={}}=e||{};let c="";return n.nodesBetween(r,i,(f,h,p,g)=>{var y;f.isBlock&&h>r&&(c+=o);const b=a?.[f.type.name];if(b)return p&&(c+=b({node:f,pos:h,parent:p,index:g,range:t})),!1;f.isText&&(c+=(y=f?.text)==null?void 0:y.slice(Math.max(r,h)-h,i-h))}),c}function f$(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,t])=>t.spec.toText).map(([t,e])=>[t,e.spec.toText]))}function d$(n,t=JSON.stringify){const e={};return n.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(e,i)?!1:e[i]=!0})}function h$(n){const t=d$(n);return t.length===1?t:t.filter((e,r)=>!t.filter((o,a)=>a!==r).some(o=>e.oldRange.from>=o.oldRange.from&&e.oldRange.to<=o.oldRange.to&&e.newRange.from>=o.newRange.from&&e.newRange.to<=o.newRange.to))}function p$(n){const{mapping:t,steps:e}=n,r=[];return t.maps.forEach((i,o)=>{const a=[];if(i.ranges.length)i.forEach((c,f)=>{a.push({from:c,to:f})});else{const{from:c,to:f}=e[o];if(c===void 0||f===void 0)return;a.push({from:c,to:f})}a.forEach(({from:c,to:f})=>{const h=t.slice(o).map(c,-1),p=t.slice(o).map(f),g=t.invert().map(h,-1),y=t.invert().map(p);r.push({oldRange:{from:g,to:y},newRange:{from:h,to:p}})})}),h$(r)}function du(n,t,e){return Object.fromEntries(Object.entries(e).filter(([r])=>{const i=n.find(o=>o.type===t&&o.name===r);return i?i.attribute.keepOnSplit:!1}))}function m$(n,t,e={}){const{empty:r,ranges:i}=n.selection,o=t?mi(t,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(g=>o?o.name===g.type.name:!0).find(g=>cf(g.attrs,e,{strict:!1}));let a=0;const c=[];if(i.forEach(({$from:g,$to:y})=>{const b=g.pos,k=y.pos;n.doc.nodesBetween(b,k,(x,S)=>{if(!x.isText&&!x.marks.length)return;const T=Math.max(b,S),D=Math.min(k,S+x.nodeSize),H=D-T;a+=H,c.push(...x.marks.map(V=>({mark:V,from:T,to:D})))})}),a===0)return!1;const f=c.filter(g=>o?o.name===g.mark.type.name:!0).filter(g=>cf(g.mark.attrs,e,{strict:!1})).reduce((g,y)=>g+y.to-y.from,0),h=c.filter(g=>o?g.mark.type!==o&&g.mark.type.excludes(o):!0).reduce((g,y)=>g+y.to-y.from,0);return(f>0?f+h:f)>=a}function Jk(n,t){const{nodeExtensions:e}=Bf(t),r=e.find(a=>a.name===n);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},o=te(gt(r,"group",i));return typeof o!="string"?!1:o.split(" ").includes("list")}function jM(n,{checkChildren:t=!0,ignoreWhitespace:e=!1}={}){var r;if(e){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!=null?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(t){let i=!0;return n.content.forEach(o=>{i!==!1&&(jM(o,{ignoreWhitespace:e,checkChildren:t})||(i=!1))}),i}return!1}function g$(n,t,e){var r;const{selection:i}=t;let o=null;if(BM(i)&&(o=i.$cursor),o){const c=(r=n.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(e)&&(!!e.isInSet(c)||!c.some(h=>h.type.excludes(e)))}const{ranges:a}=i;return a.some(({$from:c,$to:f})=>{let h=c.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(e):!1;return n.doc.nodesBetween(c.pos,f.pos,(p,g,y)=>{if(h)return!1;if(p.isInline){const b=!y||y.type.allowsMarkType(e),k=!!e.isInSet(p.marks)||!p.marks.some(x=>x.type.excludes(e));h=b&&k}return!h}),h})}var y$=(n,t={})=>({tr:e,state:r,dispatch:i})=>{const{selection:o}=e,{empty:a,ranges:c}=o,f=mi(n,r.schema);if(i)if(a){const h=FH(r,f);e.addStoredMark(f.create({...h,...t}))}else c.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(y,b)=>{const k=Math.max(b,p),x=Math.min(b+y.nodeSize,g);y.marks.find(T=>T.type===f)?y.marks.forEach(T=>{f===T.type&&e.addMark(k,x,f.create({...T.attrs,...t}))}):e.addMark(k,x,f.create(t))})});return g$(r,e,f)},v$=(n,t)=>({tr:e})=>(e.setMeta(n,t),!0),b$=(n,t={})=>({state:e,dispatch:r,chain:i})=>{const o=Be(n,e.schema);let a;return e.selection.$anchor.sameParent(e.selection.$head)&&(a=e.selection.$anchor.parent.attrs),o.isTextblock?i().command(({commands:c})=>o1(o,{...a,...t})(e)?!0:c.clearNodes()).command(({state:c})=>o1(o,{...a,...t})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},k$=n=>({tr:t,dispatch:e})=>{if(e){const{doc:r}=t,i=qi(n,0,r.content.size),o=ct.create(r,i);t.setSelection(o)}return!0},w$=(n,t)=>({tr:e,state:r,dispatch:i})=>{const{selection:o}=r;let a,c;return typeof t=="number"?(a=t,c=t):t&&"from"in t&&"to"in t?(a=t.from,c=t.to):(a=o.from,c=o.to),i&&e.doc.nodesBetween(a,c,(f,h)=>{f.isText||e.setNodeMarkup(h,void 0,{...f.attrs,dir:n})}),!0},x$=n=>({tr:t,dispatch:e})=>{if(e){const{doc:r}=t,{from:i,to:o}=typeof n=="number"?{from:n,to:n}:n,a=ft.atStart(r).from,c=ft.atEnd(r).to,f=qi(i,a,c),h=qi(o,a,c),p=ft.create(r,f,h);t.setSelection(p)}return!0},S$=n=>({state:t,dispatch:e})=>{const r=Be(n,t.schema);return W4(r)(t,e)};function Gk(n,t){const e=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(e){const r=e.filter(i=>t?.includes(i.type.name));n.tr.ensureMarks(r)}}var M$=({keepMarks:n=!0}={})=>({tr:t,state:e,dispatch:r,editor:i})=>{const{selection:o,doc:a}=t,{$from:c,$to:f}=o,h=i.extensionManager.attributes,p=du(h,c.node().type.name,c.node().attrs);if(o instanceof ct&&o.node.isBlock)return!c.parentOffset||!kr(a,c.pos)?!1:(r&&(n&&Gk(e,i.extensionManager.splittableMarks),t.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const g=f.parentOffset===f.parent.content.size,y=c.depth===0?void 0:XH(c.node(-1).contentMatchAt(c.indexAfter(-1)));let b=g&&y?[{type:y,attrs:p}]:void 0,k=kr(t.doc,t.mapping.map(c.pos),1,b);if(!b&&!k&&kr(t.doc,t.mapping.map(c.pos),1,y?[{type:y}]:void 0)&&(k=!0,b=y?[{type:y,attrs:p}]:void 0),r){if(k&&(o instanceof ft&&t.deleteSelection(),t.split(t.mapping.map(c.pos),1,b),y&&!g&&!c.parentOffset&&c.parent.type!==y)){const x=t.mapping.map(c.before()),S=t.doc.resolve(x);c.node(-1).canReplaceWith(S.index(),S.index()+1,y)&&t.setNodeMarkup(t.mapping.map(c.before()),y)}n&&Gk(e,i.extensionManager.splittableMarks),t.scrollIntoView()}return k},T$=(n,t={})=>({tr:e,state:r,dispatch:i,editor:o})=>{var a;const c=Be(n,r.schema),{$from:f,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||f.depth<2||!f.sameParent(h))return!1;const g=f.node(-1);if(g.type!==c)return!1;const y=o.extensionManager.attributes;if(f.parent.content.size===0&&f.node(-1).childCount===f.indexAfter(-1)){if(f.depth===2||f.node(-3).type!==c||f.index(-2)!==f.node(-2).childCount-1)return!1;if(i){let T=G.empty;const D=f.index(-1)?1:f.index(-2)?2:3;for(let Y=f.depth-D;Y>=f.depth-3;Y-=1)T=G.from(f.node(Y).copy(T));const H=f.indexAfter(-1)<f.node(-2).childCount?1:f.indexAfter(-2)<f.node(-3).childCount?2:3,V={...du(y,f.node().type.name,f.node().attrs),...t},L=((a=c.contentMatch.defaultType)==null?void 0:a.createAndFill(V))||void 0;T=T.append(G.from(c.createAndFill(null,L)||void 0));const I=f.before(f.depth-(D-1));e.replace(I,f.after(-H),new tt(T,4-D,0));let q=-1;e.doc.nodesBetween(I,e.doc.content.size,(Y,nt)=>{if(q>-1)return!1;Y.isTextblock&&Y.content.size===0&&(q=nt+1)}),q>-1&&e.setSelection(ft.near(e.doc.resolve(q))),e.scrollIntoView()}return!0}const b=h.pos===f.end()?g.contentMatchAt(0).defaultType:null,k={...du(y,g.type.name,g.attrs),...t},x={...du(y,f.node().type.name,f.node().attrs),...t};e.delete(f.pos,h.pos);const S=b?[{type:c,attrs:k},{type:b,attrs:x}]:[{type:c,attrs:k}];if(!kr(e.doc,f.pos,2))return!1;if(i){const{selection:T,storedMarks:D}=r,{splittableMarks:H}=o.extensionManager,V=D||T.$to.parentOffset&&T.$from.marks();if(e.split(f.pos,2,S).scrollIntoView(),!V||!i)return!0;const L=V.filter(I=>H.includes(I.type.name));e.ensureMarks(L)}return!0},_p=(n,t)=>{const e=Ag(a=>a.type===t)(n.selection);if(!e)return!0;const r=n.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return e.node.type===i?.type&&ls(n.doc,e.pos)&&n.join(e.pos),!0},Up=(n,t)=>{const e=Ag(a=>a.type===t)(n.selection);if(!e)return!0;const r=n.doc.resolve(e.start).after(e.depth);if(r===void 0)return!0;const i=n.doc.nodeAt(r);return e.node.type===i?.type&&ls(n.doc,r)&&n.join(r),!0},E$=(n,t,e,r={})=>({editor:i,tr:o,state:a,dispatch:c,chain:f,commands:h,can:p})=>{const{extensions:g,splittableMarks:y}=i.extensionManager,b=Be(n,a.schema),k=Be(t,a.schema),{selection:x,storedMarks:S}=a,{$from:T,$to:D}=x,H=T.blockRange(D),V=S||x.$to.parentOffset&&x.$from.marks();if(!H)return!1;const L=Ag(I=>Jk(I.type.name,g))(x);if(H.depth>=1&&L&&H.depth-L.depth<=1){if(L.node.type===b)return h.liftListItem(k);if(Jk(L.node.type.name,g)&&b.validContent(L.node.content)&&c)return f().command(()=>(o.setNodeMarkup(L.pos,b),!0)).command(()=>_p(o,b)).command(()=>Up(o,b)).run()}return!e||!V||!c?f().command(()=>p().wrapInList(b,r)?!0:h.clearNodes()).wrapInList(b,r).command(()=>_p(o,b)).command(()=>Up(o,b)).run():f().command(()=>{const I=p().wrapInList(b,r),q=V.filter(Y=>y.includes(Y.type.name));return o.ensureMarks(q),I?!0:h.clearNodes()}).wrapInList(b,r).command(()=>_p(o,b)).command(()=>Up(o,b)).run()},C$=(n,t={},e={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:o=!1}=e,a=mi(n,r.schema);return m$(r,a,t)?i.unsetMark(a,{extendEmptyMarkRange:o}):i.setMark(a,t)},A$=(n,t,e={})=>({state:r,commands:i})=>{const o=Be(n,r.schema),a=Be(t,r.schema),c=Cg(r,o,e);let f;return r.selection.$anchor.sameParent(r.selection.$head)&&(f=r.selection.$anchor.parent.attrs),c?i.setNode(a,f):i.setNode(o,{...f,...e})},O$=(n,t={})=>({state:e,commands:r})=>{const i=Be(n,e.schema);return Cg(e,i,t)?r.lift(i):r.wrapIn(i,t)},R$=()=>({state:n,dispatch:t})=>{const e=n.plugins;for(let r=0;r<e.length;r+=1){const i=e[r];let o;if(i.spec.isInputRules&&(o=i.getState(n))){if(t){const a=n.tr,c=o.transform;for(let f=c.steps.length-1;f>=0;f-=1)a.step(c.steps[f].invert(c.docs[f]));if(o.text){const f=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,n.schema.text(o.text,f))}else a.delete(o.from,o.to)}return!0}}return!1},N$=()=>({tr:n,dispatch:t})=>{const{selection:e}=n,{empty:r,ranges:i}=e;return r||t&&i.forEach(o=>{n.removeMark(o.$from.pos,o.$to.pos)}),!0},z$=(n,t={})=>({tr:e,state:r,dispatch:i})=>{var o;const{extendEmptyMarkRange:a=!1}=t,{selection:c}=e,f=mi(n,r.schema),{$from:h,empty:p,ranges:g}=c;if(!i)return!0;if(p&&a){let{from:y,to:b}=c;const k=(o=h.marks().find(S=>S.type===f))==null?void 0:o.attrs,x=DM(h,f,k);x&&(y=x.from,b=x.to),e.removeMark(y,b,f)}else g.forEach(y=>{e.removeMark(y.$from.pos,y.$to.pos,f)});return e.removeStoredMark(f),!0},D$=n=>({tr:t,state:e,dispatch:r})=>{const{selection:i}=e;let o,a;return typeof n=="number"?(o=n,a=n):n&&"from"in n&&"to"in n?(o=n.from,a=n.to):(o=i.from,a=i.to),r&&t.doc.nodesBetween(o,a,(c,f)=>{if(c.isText)return;const h={...c.attrs};delete h.dir,t.setNodeMarkup(f,void 0,h)}),!0},B$=(n,t={})=>({tr:e,state:r,dispatch:i})=>{let o=null,a=null;const c=$M(typeof n=="string"?n:n.name,r.schema);if(!c)return!1;c==="node"&&(o=Be(n,r.schema)),c==="mark"&&(a=mi(n,r.schema));let f=!1;return e.selection.ranges.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;let y,b,k,x;e.selection.empty?r.doc.nodesBetween(p,g,(S,T)=>{o&&o===S.type&&(f=!0,k=Math.max(T,p),x=Math.min(T+S.nodeSize,g),y=T,b=S)}):r.doc.nodesBetween(p,g,(S,T)=>{T<p&&o&&o===S.type&&(f=!0,k=Math.max(T,p),x=Math.min(T+S.nodeSize,g),y=T,b=S),T>=p&&T<=g&&(o&&o===S.type&&(f=!0,i&&e.setNodeMarkup(T,void 0,{...S.attrs,...t})),a&&S.marks.length&&S.marks.forEach(D=>{if(a===D.type&&(f=!0,i)){const H=Math.max(T,p),V=Math.min(T+S.nodeSize,g);e.addMark(H,V,a.create({...D.attrs,...t}))}}))}),b&&(y!==void 0&&i&&e.setNodeMarkup(y,void 0,{...b.attrs,...t}),a&&b.marks.length&&b.marks.forEach(S=>{a===S.type&&i&&e.addMark(k,x,a.create({...S.attrs,...t}))}))}),f},L$=(n,t={})=>({state:e,dispatch:r})=>{const i=Be(n,e.schema);return qA(i,t)(e,r)},H$=(n,t={})=>({state:e,dispatch:r})=>{const i=Be(n,e.schema);return K4(i,t)(e,r)};function $$(n){return Object.prototype.toString.call(n).slice(8,-1)}function eu(n){return $$(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function IM(n,t){const e={...n};return eu(n)&&eu(t)&&Object.keys(t).forEach(r=>{eu(t[r])&&eu(n[r])?e[r]=IM(n[r],t[r]):e[r]=t[r]}),e}var j$=class{constructor(n={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...n},this.name=this.config.name}get options(){return{...te(gt(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...te(gt(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(n={}){const t=this.extend({...this.config,addOptions:()=>IM(this.options,n)});return t.name=this.name,t.parent=this.parent,t}extend(n={}){const t=new this.constructor({...this.config,...n});return t.parent=this,this.child=t,t.name="name"in n?n.name:t.parent.name,t}},I$={};Eg(I$,{ClipboardTextSerializer:()=>_$,Commands:()=>U$,Delete:()=>q$,Drop:()=>V$,Editable:()=>P$,FocusEvents:()=>J$,Keymap:()=>G$,Paste:()=>K$,Tabindex:()=>Y$,TextDirection:()=>F$,focusEventsPluginKey:()=>UM});var _n=class _M extends j${constructor(){super(...arguments),this.type="extension"}static create(t={}){const e=typeof t=="function"?t():t;return new _M(e)}configure(t){return super.configure(t)}extend(t){const e=typeof t=="function"?t():t;return super.extend(e)}},_$=_n.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Et({key:new It("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:t,schema:e}=n,{doc:r,selection:i}=t,{ranges:o}=i,a=Math.min(...o.map(p=>p.$from.pos)),c=Math.max(...o.map(p=>p.$to.pos)),f=f$(e);return u$(r,{from:a,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:f})}}})]}}),U$=_n.create({name:"commands",addCommands(){return{...zn}}}),q$=_n.create({name:"delete",onUpdate({transaction:n,appendedTransactions:t}){var e,r,i;const o=()=>{var a,c,f,h;if((h=(f=(c=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:c.filterTransaction)==null?void 0:f.call(c,n))!=null?h:n.getMeta("y-sync$"))return;const p=QH(n.before,[n,...t]);p$(p).forEach(b=>{p.mapping.mapResult(b.oldRange.from).deletedAfter&&p.mapping.mapResult(b.oldRange.to).deletedBefore&&p.before.nodesBetween(b.oldRange.from,b.oldRange.to,(k,x)=>{const S=x+k.nodeSize-2,T=b.oldRange.from<=x&&S<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:x,to:S,newFrom:p.mapping.map(x),newTo:p.mapping.map(S),deletedRange:b.oldRange,newRange:b.newRange,partial:!T,editor:this.editor,transaction:n,combinedTransform:p})})});const y=p.mapping;p.steps.forEach((b,k)=>{var x,S;if(b instanceof Ln){const T=y.slice(k).map(b.from,-1),D=y.slice(k).map(b.to),H=y.invert().map(T,-1),V=y.invert().map(D),L=(x=p.doc.nodeAt(T-1))==null?void 0:x.marks.some(q=>q.eq(b.mark)),I=(S=p.doc.nodeAt(D))==null?void 0:S.marks.some(q=>q.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:H,to:V},newRange:{from:T,to:D},partial:!!(I||L),editor:this.editor,transaction:n,combinedTransform:p})}})};(i=(r=(e=this.editor.options.coreExtensionOptions)==null?void 0:e.delete)==null?void 0:r.async)==null||i?setTimeout(o,0):o()}}),V$=_n.create({name:"drop",addProseMirrorPlugins(){return[new Et({key:new It("tiptapDrop"),props:{handleDrop:(n,t,e,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:e,moved:r})}}})]}}),P$=_n.create({name:"editable",addProseMirrorPlugins(){return[new Et({key:new It("editable"),props:{editable:()=>this.editor.options.editable}})]}}),UM=new It("focusEvents"),J$=_n.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new Et({key:UM,props:{handleDOMEvents:{focus:(t,e)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,e)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),G$=_n.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:c})=>{const{selection:f,doc:h}=c,{empty:p,$anchor:g}=f,{pos:y,parent:b}=g,k=g.parent.isTextblock&&y>0?c.doc.resolve(y-1):g,x=k.parent.type.spec.isolating,S=g.pos-g.parentOffset,T=x&&k.parent.childCount===1?S===g.pos:ut.atStart(h).from===y;return!p||!b.type.isTextblock||b.textContent.length||!T||T&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},o={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return uf()||HM()?o:i},addProseMirrorPlugins(){return[new Et({key:new It("clearDocument"),appendTransaction:(n,t,e)=>{if(n.some(x=>x.getMeta("composition")))return;const r=n.some(x=>x.docChanged)&&!t.doc.eq(e.doc),i=n.some(x=>x.getMeta("preventClearDocument"));if(!r||i)return;const{empty:o,from:a,to:c}=t.selection,f=ut.atStart(t.doc).from,h=ut.atEnd(t.doc).to;if(o||!(a===f&&c===h)||!jM(e.doc))return;const y=e.tr,b=NM({state:e,transaction:y}),{commands:k}=new eH({editor:this.editor,state:b});if(k.clearNodes(),!!y.steps.length)return y}})]}}),K$=_n.create({name:"paste",addProseMirrorPlugins(){return[new Et({key:new It("tiptapPaste"),props:{handlePaste:(n,t,e)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:e})}}})]}}),Y$=_n.create({name:"tabindex",addProseMirrorPlugins(){return[new Et({key:new It("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),F$=_n.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:n}=Bf(this.extensions);return[{types:n.filter(t=>t.name!=="text").map(t=>t.name),attributes:{dir:{default:this.options.direction,parseHTML:t=>{const e=t.getAttribute("dir");return e&&(e==="ltr"||e==="rtl"||e==="auto")?e:this.options.direction},renderHTML:t=>t.dir?{dir:t.dir}:{}}}}]},addProseMirrorPlugins(){return[new Et({key:new It("textDirection"),props:{attributes:()=>{const n=this.options.direction;return n?{dir:n}:{}}}})]}}),Q$={};Eg(Q$,{createAtomBlockMarkdownSpec:()=>X$,createBlockMarkdownSpec:()=>Z$,createInlineMarkdownSpec:()=>e6,parseAttributes:()=>Rg,parseIndentedBlocks:()=>n6,renderNestedMarkdownContent:()=>r6,serializeAttributes:()=>Ng});function Rg(n){if(!n?.trim())return{};const t={},e=[],r=n.replace(/["']([^"']*)["']/g,h=>(e.push(h),`__QUOTED_${e.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const h=i.map(p=>p.trim().slice(1));t.class=h.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(t.id=o[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,h,p])=>{var g;const y=parseInt(((g=p.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),b=e[y];b&&(t[h]=b.slice(1,-1))});const f=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return f&&f.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(t[p]=!0)}),t}function Ng(n){if(!n||Object.keys(n).length===0)return"";const t=[];return n.class&&String(n.class).split(/\s+/).filter(Boolean).forEach(r=>t.push(`.${r}`)),n.id&&t.push(`#${n.id}`),Object.entries(n).forEach(([e,r])=>{e==="class"||e==="id"||(r===!0?t.push(e):r!==!1&&r!=null&&t.push(`${e}="${String(r)}"`))}),t.join(" ")}function X$(n){const{nodeName:t,name:e,parseAttributes:r=Rg,serializeAttributes:i=Ng,defaultAttributes:o={},requiredAttributes:a=[],allowedAttributes:c}=n,f=e||t,h=p=>{if(!c)return p;const g={};return c.forEach(y=>{y in p&&(g[y]=p[y])}),g};return{parseMarkdown:(p,g)=>{const y={...o,...p.attributes};return g.createNode(t,y,[])},markdownTokenizer:{name:t,level:"block",start(p){var g;const y=new RegExp(`^:::${f}(?:\\s|$)`,"m"),b=(g=p.match(y))==null?void 0:g.index;return b!==void 0?b:-1},tokenize(p,g,y){const b=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=p.match(b);if(!k)return;const x=k[1]||"",S=r(x);if(!a.find(D=>!(D in S)))return{type:t,raw:k[0],attributes:S}}},renderMarkdown:p=>{const g=h(p.attrs||{}),y=i(g),b=y?` {${y}}`:"";return`:::${f}${b} :::`}}}function Z$(n){const{nodeName:t,name:e,getContent:r,parseAttributes:i=Rg,serializeAttributes:o=Ng,defaultAttributes:a={},content:c="block",allowedAttributes:f}=n,h=e||t,p=g=>{if(!f)return g;const y={};return f.forEach(b=>{b in g&&(y[b]=g[b])}),y};return{parseMarkdown:(g,y)=>{let b;if(r){const x=r(g);b=typeof x=="string"?[{type:"text",text:x}]:x}else c==="block"?b=y.parseChildren(g.tokens||[]):b=y.parseInline(g.tokens||[]);const k={...a,...g.attributes};return y.createNode(t,k,b)},markdownTokenizer:{name:t,level:"block",start(g){var y;const b=new RegExp(`^:::${h}`,"m"),k=(y=g.match(b))==null?void 0:y.index;return k!==void 0?k:-1},tokenize(g,y,b){var k;const x=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),S=g.match(x);if(!S)return;const[T,D=""]=S,H=i(D);let V=1;const L=T.length;let I="";const q=/^:::([\w-]*)(\s.*)?/gm,Y=g.slice(L);for(q.lastIndex=0;;){const nt=q.exec(Y);if(nt===null)break;const Qt=nt.index,de=nt[1];if(!((k=nt[2])!=null&&k.endsWith(":::"))){if(de)V+=1;else if(V-=1,V===0){const Ut=Y.slice(0,Qt);I=Ut.trim();const Pe=g.slice(0,L+Qt+nt[0].length);let Ct=[];if(I)if(c==="block")for(Ct=b.blockTokens(Ut),Ct.forEach(ht=>{ht.text&&(!ht.tokens||ht.tokens.length===0)&&(ht.tokens=b.inlineTokens(ht.text))});Ct.length>0;){const ht=Ct[Ct.length-1];if(ht.type==="paragraph"&&(!ht.text||ht.text.trim()===""))Ct.pop();else break}else Ct=b.inlineTokens(I);return{type:t,raw:Pe,attributes:H,content:I,tokens:Ct}}}}}},renderMarkdown:(g,y)=>{const b=p(g.attrs||{}),k=o(b),x=k?` {${k}}`:"",S=y.renderChildren(g.content||[],`

`);return`:::${h}${x}

${S}

:::`}}}function W$(n){if(!n.trim())return{};const t={},e=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=e.exec(n);for(;r!==null;){const[,i,o,a]=r;t[i]=o||a,r=e.exec(n)}return t}function t6(n){return Object.entries(n).filter(([,t])=>t!=null).map(([t,e])=>`${t}="${e}"`).join(" ")}function e6(n){const{nodeName:t,name:e,getContent:r,parseAttributes:i=W$,serializeAttributes:o=t6,defaultAttributes:a={},selfClosing:c=!1,allowedAttributes:f}=n,h=e||t,p=y=>{if(!f)return y;const b={};return f.forEach(k=>{const x=typeof k=="string"?k:k.name,S=typeof k=="string"?void 0:k.skipIfDefault;if(x in y){const T=y[x];if(S!==void 0&&T===S)return;b[x]=T}}),b},g=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,b)=>{const k={...a,...y.attributes};if(c)return b.createNode(t,k);const x=r?r(y):y.content||"";return x?b.createNode(t,k,[b.createTextNode(x)]):b.createNode(t,k,[])},markdownTokenizer:{name:t,level:"inline",start(y){const b=c?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),k=y.match(b),x=k?.index;return x!==void 0?x:-1},tokenize(y,b,k){const x=c?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),S=y.match(x);if(!S)return;let T="",D="";if(c){const[,V]=S;D=V}else{const[,V,L]=S;D=V,T=L||""}const H=i(D.trim());return{type:t,raw:S[0],content:T.trim(),attributes:H}}},renderMarkdown:y=>{let b="";r?b=r(y):y.content&&y.content.length>0&&(b=y.content.filter(T=>T.type==="text").map(T=>T.text).join(""));const k=p(y.attrs||{}),x=o(k),S=x?` ${x}`:"";return c?`[${h}${S}]`:`[${h}${S}]${b}[/${h}]`}}}function n6(n,t,e){var r,i,o,a;const c=n.split(`
`),f=[];let h="",p=0;const g=t.baseIndentSize||2;for(;p<c.length;){const y=c[p],b=y.match(t.itemPattern);if(!b){if(f.length>0)break;if(y.trim()===""){p+=1,h=`${h}${y}
`;continue}else return}const k=t.extractItemData(b),{indentLevel:x,mainContent:S}=k;h=`${h}${y}
`;const T=[S];for(p+=1;p<c.length;){const L=c[p];if(L.trim()===""){const q=c.slice(p+1).findIndex(Qt=>Qt.trim()!=="");if(q===-1)break;if((((i=(r=c[p+1+q].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>x){T.push(L),h=`${h}${L}
`,p+=1;continue}else break}if((((a=(o=L.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:a.length)||0)>x)T.push(L),h=`${h}${L}
`,p+=1;else break}let D;const H=T.slice(1);if(H.length>0){const L=H.map(I=>I.slice(x+g)).join(`
`);L.trim()&&(t.customNestedParser?D=t.customNestedParser(L):D=e.blockTokens(L))}const V=t.createToken(k,D);f.push(V)}if(f.length!==0)return{items:f,raw:h}}function r6(n,t,e,r){if(!n||!Array.isArray(n.content))return"";const i=typeof e=="function"?e(r):e,[o,...a]=n.content,c=t.renderChildren([o]),f=[`${i}${c}`];return a&&a.length>0&&a.forEach(h=>{const p=t.renderChildren([h]);if(p){const g=p.split(`
`).map(y=>y?t.indent(y):"").join(`
`);f.push(g)}}),f.join(`
`)}var qp={exports:{}},Vp={};var Kk;function i6(){if(Kk)return Vp;Kk=1;var n=va(),t=lw();function e(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,o=n.useRef,a=n.useEffect,c=n.useMemo,f=n.useDebugValue;return Vp.useSyncExternalStoreWithSelector=function(h,p,g,y,b){var k=o(null);if(k.current===null){var x={hasValue:!1,value:null};k.current=x}else x=k.current;k=c(function(){function T(I){if(!D){if(D=!0,H=I,I=y(I),b!==void 0&&x.hasValue){var q=x.value;if(b(q,I))return V=q}return V=I}if(q=V,r(H,I))return q;var Y=y(I);return b!==void 0&&b(q,Y)?(H=I,q):(H=I,V=Y)}var D=!1,H,V,L=g===void 0?null:g;return[function(){return T(p())},L===null?void 0:function(){return T(L())}]},[p,g,y,b]);var S=i(h,k[0],k[1]);return a(function(){x.hasValue=!0,x.value=S},[S]),f(S),S},Vp}var Yk;function s6(){return Yk||(Yk=1,qp.exports=i6()),qp.exports}s6();var o6=(...n)=>t=>{n.forEach(e=>{typeof e=="function"?e(t):e&&(e.current=t)})},l6=({contentComponent:n})=>{const t=$C.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return fe.jsx(fe.Fragment,{children:Object.values(t)})};function a6(){const n=new Set;let t={};return{subscribe(e){return n.add(e),()=>{n.delete(e)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(e,r){t={...t,[e]:ow.createPortal(r.reactElement,r.element,e)},n.forEach(i=>i())},removeRenderer(e){const r={...t};delete r[e],t=r,n.forEach(i=>i())}}}var c6=class extends De.Component{constructor(n){var t;super(n),this.editorContentRef=De.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=n.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var n;const t=this.props.editor;if(t&&!t.isDestroyed&&((n=t.view.dom)!=null&&n.parentNode)){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:e}),t.contentComponent=a6(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var n;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((n=t.view.dom)!=null&&n.parentNode))return;const e=document.createElement("div");e.append(...t.view.dom.parentNode.childNodes),t.setOptions({element:e})}catch{}}}render(){const{editor:n,innerRef:t,...e}=this.props;return fe.jsxs(fe.Fragment,{children:[fe.jsx("div",{ref:o6(t,this.editorContentRef),...e}),n?.contentComponent&&fe.jsx(l6,{contentComponent:n.contentComponent})]})}},u6=Gt.forwardRef((n,t)=>{const e=De.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return De.createElement(c6,{key:e,innerRef:t,...n})}),qM=De.memo(u6),VM=Gt.createContext({editor:null});VM.Consumer;var f6=Gt.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),d6=()=>Gt.useContext(f6);De.forwardRef((n,t)=>{const{onDragStart:e}=d6(),r=n.as||"div";return fe.jsx(r,{...n,ref:t,"data-node-view-wrapper":"",onDragStart:e,style:{whiteSpace:"normal",...n.style}})});De.createContext({markViewContentRef:()=>{}});var zg=Gt.createContext({get editor(){throw new Error("useTiptap must be used within a <Tiptap> provider")}});zg.displayName="TiptapContext";var h6=()=>Gt.useContext(zg);function PM({editor:n,instance:t,children:e}){const r=n??t;if(!r)throw new Error("Tiptap: An editor instance is required. Pass a non-null `editor` prop.");const i=Gt.useMemo(()=>({editor:r}),[r]),o=Gt.useMemo(()=>({editor:r}),[r]);return fe.jsx(VM.Provider,{value:o,children:fe.jsx(zg.Provider,{value:i,children:e})})}PM.displayName="Tiptap";function JM({...n}){const{editor:t}=h6();return fe.jsx(qM,{editor:t,...n})}JM.displayName="Tiptap.Content";Object.assign(PM,{Content:JM});function Dg(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var cs=Dg();function GM(n){cs=n}var $i={exec:()=>null};function xt(n,t=""){let e=typeof n=="string"?n:n.source,r={replace:(i,o)=>{let a=typeof o=="string"?o:o.source;return a=a.replace(_e.caret,"$1"),e=e.replace(i,a),r},getRegex:()=>new RegExp(e,t)};return r}var p6=(()=>{try{return!!new RegExp("(?<=1)(?<!1)")}catch{return!1}})(),_e={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] +\S/,listReplaceTask:/^\[[ xX]\] +/,listTaskCheckbox:/\[[ xX]\]/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i"),blockquoteBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}>`)},m6=/^(?:[ \t]*(?:\n|$))+/,g6=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,y6=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Sa=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,v6=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Bg=/ {0,3}(?:[*+-]|\d{1,9}[.)])/,KM=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,YM=xt(KM).replace(/bull/g,Bg).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),b6=xt(KM).replace(/bull/g,Bg).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Lg=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,k6=/^[^\n]+/,Hg=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,w6=xt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Hg).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),x6=xt(/^(bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Bg).getRegex(),Lf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$g=/\x3C!--(?:-?>|[\s\S]*?(?:-->|$))/,S6=xt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",$g).replace("tag",Lf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),FM=xt(Lg).replace("hr",Sa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lf).getRegex(),M6=xt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",FM).getRegex(),jg={blockquote:M6,code:g6,def:w6,fences:y6,heading:v6,hr:Sa,html:S6,lheading:YM,list:x6,newline:m6,paragraph:FM,table:$i,text:k6},Fk=xt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Sa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lf).getRegex(),T6={...jg,lheading:b6,table:Fk,paragraph:xt(Lg).replace("hr",Sa).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Fk).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)])[ \\t]").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Lf).getRegex()},E6={...jg,html:xt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",$g).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$i,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:xt(Lg).replace("hr",Sa).replace("heading",` *#{1,6} *[^
]`).replace("lheading",YM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},C6=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,A6=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,QM=/^( {2,}|\\)\n(?!\s*$)/,O6=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Hf=/[\p{P}\p{S}]/u,Ig=/[\s\p{P}\p{S}]/u,XM=/[^\s\p{P}\p{S}]/u,R6=xt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ig).getRegex(),ZM=/(?!~)[\p{P}\p{S}]/u,N6=/(?!~)[\s\p{P}\p{S}]/u,z6=/(?:[^\s\p{P}\p{S}]|~)/u,WM=/(?![*_])[\p{P}\p{S}]/u,D6=/(?![*_])[\s\p{P}\p{S}]/u,B6=/(?:[^\s\p{P}\p{S}]|[*_])/u,L6=xt(/link|precode-code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("precode-",p6?"(?<!`)()":"(^^|[^`])").replace("code",/(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),tT=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,H6=xt(tT,"u").replace(/punct/g,Hf).getRegex(),$6=xt(tT,"u").replace(/punct/g,ZM).getRegex(),eT="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",j6=xt(eT,"gu").replace(/notPunctSpace/g,XM).replace(/punctSpace/g,Ig).replace(/punct/g,Hf).getRegex(),I6=xt(eT,"gu").replace(/notPunctSpace/g,z6).replace(/punctSpace/g,N6).replace(/punct/g,ZM).getRegex(),_6=xt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,XM).replace(/punctSpace/g,Ig).replace(/punct/g,Hf).getRegex(),U6=xt(/^~~?(?:((?!~)punct)|[^\s~])/,"u").replace(/punct/g,WM).getRegex(),q6="^[^~]+(?=[^~])|(?!~)punct(~~?)(?=[\\s]|$)|notPunctSpace(~~?)(?!~)(?=punctSpace|$)|(?!~)punctSpace(~~?)(?=notPunctSpace)|[\\s](~~?)(?!~)(?=punct)|(?!~)punct(~~?)(?!~)(?=punct)|notPunctSpace(~~?)(?=notPunctSpace)",V6=xt(q6,"gu").replace(/notPunctSpace/g,B6).replace(/punctSpace/g,D6).replace(/punct/g,WM).getRegex(),P6=xt(/\\(punct)/,"gu").replace(/punct/g,Hf).getRegex(),J6=xt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),G6=xt($g).replace("(?:-->|$)","-->").getRegex(),K6=xt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",G6).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ff=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,Y6=xt(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ff).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),nT=xt(/^!?\[(label)\]\[(ref)\]/).replace("label",ff).replace("ref",Hg).getRegex(),rT=xt(/^!?\[(ref)\](?:\[\])?/).replace("ref",Hg).getRegex(),F6=xt("reflink|nolink(?!\\()","g").replace("reflink",nT).replace("nolink",rT).getRegex(),Qk=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,_g={_backpedal:$i,anyPunctuation:P6,autolink:J6,blockSkip:L6,br:QM,code:A6,del:$i,delLDelim:$i,delRDelim:$i,emStrongLDelim:H6,emStrongRDelimAst:j6,emStrongRDelimUnd:_6,escape:C6,link:Y6,nolink:rT,punctuation:R6,reflink:nT,reflinkSearch:F6,tag:K6,text:O6,url:$i},Q6={..._g,link:xt(/^!?\[(label)\]\((.*?)\)/).replace("label",ff).getRegex(),reflink:xt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ff).getRegex()},Cm={..._g,emStrongRDelimAst:I6,emStrongLDelim:$6,delLDelim:U6,delRDelim:V6,url:xt(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",Qk).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:xt(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",Qk).getRegex()},X6={...Cm,br:xt(QM).replace("{2,}","*").getRegex(),text:xt(Cm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},nu={normal:jg,gfm:T6,pedantic:E6},El={normal:_g,gfm:Cm,breaks:X6,pedantic:Q6},Z6={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Xk=n=>Z6[n];function yr(n,t){if(t){if(_e.escapeTest.test(n))return n.replace(_e.escapeReplace,Xk)}else if(_e.escapeTestNoEncode.test(n))return n.replace(_e.escapeReplaceNoEncode,Xk);return n}function Zk(n){try{n=encodeURI(n).replace(_e.percentDecode,"%")}catch{return null}return n}function Wk(n,t){let e=n.replace(_e.findPipe,(o,a,c)=>{let f=!1,h=a;for(;--h>=0&&c[h]==="\\";)f=!f;return f?"|":" |"}),r=e.split(_e.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(_e.slashPipe,"|");return r}function Cl(n,t,e){let r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===t;)i++;return n.slice(0,r-i)}function W6(n,t){if(n.indexOf(t[1])===-1)return-1;let e=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===t[0])e++;else if(n[r]===t[1]&&(e--,e<0))return r;return e>0?-2:-1}function tj(n,t=0){let e=t,r="";for(let i of n)if(i==="	"){let o=4-e%4;r+=" ".repeat(o),e+=o}else r+=i,e++;return r}function tw(n,t,e,r,i){let o=t.href,a=t.title||null,c=n[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let f={type:n[0].charAt(0)==="!"?"image":"link",raw:e,href:o,title:a,text:c,tokens:r.inlineTokens(c)};return r.state.inLink=!1,f}function ej(n,t,e){let r=n.match(e.other.indentCodeCompensation);if(r===null)return t;let i=r[1];return t.split(`
`).map(o=>{let a=o.match(e.other.beginningSpace);if(a===null)return o;let[c]=a;return c.length>=i.length?o.slice(i.length):o}).join(`
`)}var df=class{options;rules;lexer;constructor(n){this.options=n||cs}space(n){let t=this.rules.block.newline.exec(n);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(n){let t=this.rules.block.code.exec(n);if(t){let e=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:Cl(e,`
`)}}}fences(n){let t=this.rules.block.fences.exec(n);if(t){let e=t[0],r=ej(e,t[3]||"",this.rules);return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(n){let t=this.rules.block.heading.exec(n);if(t){let e=t[2].trim();if(this.rules.other.endingHash.test(e)){let r=Cl(e,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(e=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(n){let t=this.rules.block.hr.exec(n);if(t)return{type:"hr",raw:Cl(t[0],`
`)}}blockquote(n){let t=this.rules.block.blockquote.exec(n);if(t){let e=Cl(t[0],`
`).split(`
`),r="",i="",o=[];for(;e.length>0;){let a=!1,c=[],f;for(f=0;f<e.length;f++)if(this.rules.other.blockquoteStart.test(e[f]))c.push(e[f]),a=!0;else if(!a)c.push(e[f]);else break;e=e.slice(f);let h=c.join(`
`),p=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${h}`:h,i=i?`${i}
${p}`:p;let g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(p,o,!0),this.lexer.state.top=g,e.length===0)break;let y=o.at(-1);if(y?.type==="code")break;if(y?.type==="blockquote"){let b=y,k=b.raw+`
`+e.join(`
`),x=this.blockquote(k);o[o.length-1]=x,r=r.substring(0,r.length-b.raw.length)+x.raw,i=i.substring(0,i.length-b.text.length)+x.text;break}else if(y?.type==="list"){let b=y,k=b.raw+`
`+e.join(`
`),x=this.list(k);o[o.length-1]=x,r=r.substring(0,r.length-y.raw.length)+x.raw,i=i.substring(0,i.length-b.raw.length)+x.raw,e=k.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:o,text:i}}}list(n){let t=this.rules.block.list.exec(n);if(t){let e=t[1].trim(),r=e.length>1,i={type:"list",raw:"",ordered:r,start:r?+e.slice(0,-1):"",loose:!1,items:[]};e=r?`\\d{1,9}\\${e.slice(-1)}`:`\\${e}`,this.options.pedantic&&(e=r?e:"[*+-]");let o=this.rules.other.listItemRegex(e),a=!1;for(;n;){let f=!1,h="",p="";if(!(t=o.exec(n))||this.rules.block.hr.test(n))break;h=t[0],n=n.substring(h.length);let g=tj(t[2].split(`
`,1)[0],t[1].length),y=n.split(`
`,1)[0],b=!g.trim(),k=0;if(this.options.pedantic?(k=2,p=g.trimStart()):b?k=t[1].length+1:(k=g.search(this.rules.other.nonSpaceChar),k=k>4?1:k,p=g.slice(k),k+=t[1].length),b&&this.rules.other.blankLine.test(y)&&(h+=y+`
`,n=n.substring(y.length+1),f=!0),!f){let x=this.rules.other.nextBulletRegex(k),S=this.rules.other.hrRegex(k),T=this.rules.other.fencesBeginRegex(k),D=this.rules.other.headingBeginRegex(k),H=this.rules.other.htmlBeginRegex(k),V=this.rules.other.blockquoteBeginRegex(k);for(;n;){let L=n.split(`
`,1)[0],I;if(y=L,this.options.pedantic?(y=y.replace(this.rules.other.listReplaceNesting,"  "),I=y):I=y.replace(this.rules.other.tabCharGlobal,"    "),T.test(y)||D.test(y)||H.test(y)||V.test(y)||x.test(y)||S.test(y))break;if(I.search(this.rules.other.nonSpaceChar)>=k||!y.trim())p+=`
`+I.slice(k);else{if(b||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||T.test(g)||D.test(g)||S.test(g))break;p+=`
`+y}b=!y.trim(),h+=L+`
`,n=n.substring(L.length+1),g=I.slice(k)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(a=!0)),i.items.push({type:"list_item",raw:h,task:!!this.options.gfm&&this.rules.other.listIsTask.test(p),loose:!1,text:p,tokens:[]}),i.raw+=h}let c=i.items.at(-1);if(c)c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let f of i.items){if(this.lexer.state.top=!1,f.tokens=this.lexer.blockTokens(f.text,[]),f.task){if(f.text=f.text.replace(this.rules.other.listReplaceTask,""),f.tokens[0]?.type==="text"||f.tokens[0]?.type==="paragraph"){f.tokens[0].raw=f.tokens[0].raw.replace(this.rules.other.listReplaceTask,""),f.tokens[0].text=f.tokens[0].text.replace(this.rules.other.listReplaceTask,"");for(let p=this.lexer.inlineQueue.length-1;p>=0;p--)if(this.rules.other.listIsTask.test(this.lexer.inlineQueue[p].src)){this.lexer.inlineQueue[p].src=this.lexer.inlineQueue[p].src.replace(this.rules.other.listReplaceTask,"");break}}let h=this.rules.other.listTaskCheckbox.exec(f.raw);if(h){let p={type:"checkbox",raw:h[0]+" ",checked:h[0]!=="[ ]"};f.checked=p.checked,i.loose?f.tokens[0]&&["paragraph","text"].includes(f.tokens[0].type)&&"tokens"in f.tokens[0]&&f.tokens[0].tokens?(f.tokens[0].raw=p.raw+f.tokens[0].raw,f.tokens[0].text=p.raw+f.tokens[0].text,f.tokens[0].tokens.unshift(p)):f.tokens.unshift({type:"paragraph",raw:p.raw,text:p.raw,tokens:[p]}):f.tokens.unshift(p)}}if(!i.loose){let h=f.tokens.filter(g=>g.type==="space"),p=h.length>0&&h.some(g=>this.rules.other.anyLine.test(g.raw));i.loose=p}}if(i.loose)for(let f of i.items){f.loose=!0;for(let h of f.tokens)h.type==="text"&&(h.type="paragraph")}return i}}html(n){let t=this.rules.block.html.exec(n);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(n){let t=this.rules.block.def.exec(n);if(t){let e=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:r,title:i}}}table(n){let t=this.rules.block.table.exec(n);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let e=Wk(t[1]),r=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(e.length===r.length){for(let a of r)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<e.length;a++)o.header.push({text:e[a],tokens:this.lexer.inline(e[a]),header:!0,align:o.align[a]});for(let a of i)o.rows.push(Wk(a,o.header.length).map((c,f)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[f]})));return o}}lheading(n){let t=this.rules.block.lheading.exec(n);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(n){let t=this.rules.block.paragraph.exec(n);if(t){let e=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(n){let t=this.rules.block.text.exec(n);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(n){let t=this.rules.inline.escape.exec(n);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(n){let t=this.rules.inline.tag.exec(n);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(n){let t=this.rules.inline.link.exec(n);if(t){let e=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(e)){if(!this.rules.other.endAngleBracket.test(e))return;let o=Cl(e.slice(0,-1),"\\");if((e.length-o.length)%2===0)return}else{let o=W6(t[2],"()");if(o===-2)return;if(o>-1){let a=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],i="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(r);o&&(r=o[1],i=o[3])}else i=t[3]?t[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(e)?r=r.slice(1):r=r.slice(1,-1)),tw(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(n,t){let e;if((e=this.rules.inline.reflink.exec(n))||(e=this.rules.inline.nolink.exec(n))){let r=(e[2]||e[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[r.toLowerCase()];if(!i){let o=e[0].charAt(0);return{type:"text",raw:o,text:o}}return tw(e,i,e[0],this.lexer,this.rules)}}emStrong(n,t,e=""){let r=this.rules.inline.emStrongLDelim.exec(n);if(!(!r||r[3]&&e.match(this.rules.other.unicodeAlphaNumeric))&&(!(r[1]||r[2])||!e||this.rules.inline.punctuation.exec(e))){let i=[...r[0]].length-1,o,a,c=i,f=0,h=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*n.length+i);(r=h.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&i%3&&!((i+a)%3)){f+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+f);let p=[...r[0]][0].length,g=n.slice(0,i+r.index+p+a);if(Math.min(i,a)%2){let b=g.slice(1,-1);return{type:"em",raw:g,text:b,tokens:this.lexer.inlineTokens(b)}}let y=g.slice(2,-2);return{type:"strong",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(n){let t=this.rules.inline.code.exec(n);if(t){let e=t[2].replace(this.rules.other.newLineCharGlobal," "),r=this.rules.other.nonSpaceChar.test(e),i=this.rules.other.startingSpaceChar.test(e)&&this.rules.other.endingSpaceChar.test(e);return r&&i&&(e=e.substring(1,e.length-1)),{type:"codespan",raw:t[0],text:e}}}br(n){let t=this.rules.inline.br.exec(n);if(t)return{type:"br",raw:t[0]}}del(n,t,e=""){let r=this.rules.inline.delLDelim.exec(n);if(r&&(!r[1]||!e||this.rules.inline.punctuation.exec(e))){let i=[...r[0]].length-1,o,a,c=i,f=this.rules.inline.delRDelim;for(f.lastIndex=0,t=t.slice(-1*n.length+i);(r=f.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o||(a=[...o].length,a!==i))continue;if(r[3]||r[4]){c+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c);let h=[...r[0]][0].length,p=n.slice(0,i+r.index+h+a),g=p.slice(i,-i);return{type:"del",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}autolink(n){let t=this.rules.inline.autolink.exec(n);if(t){let e,r;return t[2]==="@"?(e=t[1],r="mailto:"+e):(e=t[1],r=e),{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}url(n){let t;if(t=this.rules.inline.url.exec(n)){let e,r;if(t[2]==="@")e=t[0],r="mailto:"+e;else{let i;do i=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(i!==t[0]);e=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:e,href:r,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(n){let t=this.rules.inline.text.exec(n);if(t){let e=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:e}}}},Dn=class Am{tokens;options;state;inlineQueue;tokenizer;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||cs,this.options.tokenizer=this.options.tokenizer||new df,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:_e,block:nu.normal,inline:El.normal};this.options.pedantic?(e.block=nu.pedantic,e.inline=El.pedantic):this.options.gfm&&(e.block=nu.gfm,this.options.breaks?e.inline=El.breaks:e.inline=El.gfm),this.tokenizer.rules=e}static get rules(){return{block:nu,inline:El}}static lex(t,e){return new Am(e).lex(t)}static lexInline(t,e){return new Am(e).inlineTokens(t)}lex(t){t=t.replace(_e.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let e=0;e<this.inlineQueue.length;e++){let r=this.inlineQueue[e];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],r=!1){for(this.options.pedantic&&(t=t.replace(_e.tabCharGlobal,"    ").replace(_e.spaceLine,""));t;){let i;if(this.options.extensions?.block?.some(a=>(i=a.call({lexer:this},t,e))?(t=t.substring(i.raw.length),e.push(i),!0):!1))continue;if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length);let a=e.at(-1);i.raw.length===1&&a!==void 0?a.raw+=`
`:e.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length);let a=e.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+i.raw,a.text+=`
`+i.text,this.inlineQueue.at(-1).src=a.text):e.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length);let a=e.at(-1);a?.type==="paragraph"||a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+i.raw,a.text+=`
`+i.raw,this.inlineQueue.at(-1).src=a.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title},e.push(i));continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),e.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),e.push(i);continue}let o=t;if(this.options.extensions?.startBlock){let a=1/0,c=t.slice(1),f;this.options.extensions.startBlock.forEach(h=>{f=h.call({lexer:this},c),typeof f=="number"&&f>=0&&(a=Math.min(a,f))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){let a=e.at(-1);r&&a?.type==="paragraph"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+i.raw,a.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):e.push(i),r=o.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length);let a=e.at(-1);a?.type==="text"?(a.raw+=(a.raw.endsWith(`
`)?"":`
`)+i.raw,a.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=a.text):e.push(i);continue}if(t){let a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r=t,i=null;if(this.tokens.links){let f=Object.keys(this.tokens.links);if(f.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)f.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o;for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)o=i[2]?i[2].length:0,r=r.slice(0,i.index+o)+"["+"a".repeat(i[0].length-o-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);r=this.options.hooks?.emStrongMask?.call({lexer:this},r)??r;let a=!1,c="";for(;t;){a||(c=""),a=!1;let f;if(this.options.extensions?.inline?.some(p=>(f=p.call({lexer:this},t,e))?(t=t.substring(f.raw.length),e.push(f),!0):!1))continue;if(f=this.tokenizer.escape(t)){t=t.substring(f.raw.length),e.push(f);continue}if(f=this.tokenizer.tag(t)){t=t.substring(f.raw.length),e.push(f);continue}if(f=this.tokenizer.link(t)){t=t.substring(f.raw.length),e.push(f);continue}if(f=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(f.raw.length);let p=e.at(-1);f.type==="text"&&p?.type==="text"?(p.raw+=f.raw,p.text+=f.text):e.push(f);continue}if(f=this.tokenizer.emStrong(t,r,c)){t=t.substring(f.raw.length),e.push(f);continue}if(f=this.tokenizer.codespan(t)){t=t.substring(f.raw.length),e.push(f);continue}if(f=this.tokenizer.br(t)){t=t.substring(f.raw.length),e.push(f);continue}if(f=this.tokenizer.del(t,r,c)){t=t.substring(f.raw.length),e.push(f);continue}if(f=this.tokenizer.autolink(t)){t=t.substring(f.raw.length),e.push(f);continue}if(!this.state.inLink&&(f=this.tokenizer.url(t))){t=t.substring(f.raw.length),e.push(f);continue}let h=t;if(this.options.extensions?.startInline){let p=1/0,g=t.slice(1),y;this.options.extensions.startInline.forEach(b=>{y=b.call({lexer:this},g),typeof y=="number"&&y>=0&&(p=Math.min(p,y))}),p<1/0&&p>=0&&(h=t.substring(0,p+1))}if(f=this.tokenizer.inlineText(h)){t=t.substring(f.raw.length),f.raw.slice(-1)!=="_"&&(c=f.raw.slice(-1)),a=!0;let p=e.at(-1);p?.type==="text"?(p.raw+=f.raw,p.text+=f.text):e.push(f);continue}if(t){let p="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return e}},hf=class{options;parser;constructor(n){this.options=n||cs}space(n){return""}code({text:n,lang:t,escaped:e}){let r=(t||"").match(_e.notSpaceStart)?.[0],i=n.replace(_e.endingNewline,"")+`
`;return r?'<pre><code class="language-'+yr(r)+'">'+(e?i:yr(i,!0))+`</code></pre>
`:"<pre><code>"+(e?i:yr(i,!0))+`</code></pre>
`}blockquote({tokens:n}){return`<blockquote>
${this.parser.parse(n)}</blockquote>
`}html({text:n}){return n}def(n){return""}heading({tokens:n,depth:t}){return`<h${t}>${this.parser.parseInline(n)}</h${t}>
`}hr(n){return`<hr>
`}list(n){let t=n.ordered,e=n.start,r="";for(let a=0;a<n.items.length;a++){let c=n.items[a];r+=this.listitem(c)}let i=t?"ol":"ul",o=t&&e!==1?' start="'+e+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(n){return`<li>${this.parser.parse(n.tokens)}</li>
`}checkbox({checked:n}){return"<input "+(n?'checked="" ':"")+'disabled="" type="checkbox"> '}paragraph({tokens:n}){return`<p>${this.parser.parseInline(n)}</p>
`}table(n){let t="",e="";for(let i=0;i<n.header.length;i++)e+=this.tablecell(n.header[i]);t+=this.tablerow({text:e});let r="";for(let i=0;i<n.rows.length;i++){let o=n.rows[i];e="";for(let a=0;a<o.length;a++)e+=this.tablecell(o[a]);r+=this.tablerow({text:e})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:n}){return`<tr>
${n}</tr>
`}tablecell(n){let t=this.parser.parseInline(n.tokens),e=n.header?"th":"td";return(n.align?`<${e} align="${n.align}">`:`<${e}>`)+t+`</${e}>
`}strong({tokens:n}){return`<strong>${this.parser.parseInline(n)}</strong>`}em({tokens:n}){return`<em>${this.parser.parseInline(n)}</em>`}codespan({text:n}){return`<code>${yr(n,!0)}</code>`}br(n){return"<br>"}del({tokens:n}){return`<del>${this.parser.parseInline(n)}</del>`}link({href:n,title:t,tokens:e}){let r=this.parser.parseInline(e),i=Zk(n);if(i===null)return r;n=i;let o='<a href="'+n+'"';return t&&(o+=' title="'+yr(t)+'"'),o+=">"+r+"</a>",o}image({href:n,title:t,text:e,tokens:r}){r&&(e=this.parser.parseInline(r,this.parser.textRenderer));let i=Zk(n);if(i===null)return yr(e);n=i;let o=`<img src="${n}" alt="${e}"`;return t&&(o+=` title="${yr(t)}"`),o+=">",o}text(n){return"tokens"in n&&n.tokens?this.parser.parseInline(n.tokens):"escaped"in n&&n.escaped?n.text:yr(n.text)}},Ug=class{strong({text:n}){return n}em({text:n}){return n}codespan({text:n}){return n}del({text:n}){return n}html({text:n}){return n}text({text:n}){return n}link({text:n}){return""+n}image({text:n}){return""+n}br(){return""}checkbox({raw:n}){return n}},Bn=class Om{options;renderer;textRenderer;constructor(t){this.options=t||cs,this.options.renderer=this.options.renderer||new hf,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Ug}static parse(t,e){return new Om(e).parse(t)}static parseInline(t,e){return new Om(e).parseInline(t)}parse(t){let e="";for(let r=0;r<t.length;r++){let i=t[r];if(this.options.extensions?.renderers?.[i.type]){let a=i,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(a.type)){e+=c||"";continue}}let o=i;switch(o.type){case"space":{e+=this.renderer.space(o);break}case"hr":{e+=this.renderer.hr(o);break}case"heading":{e+=this.renderer.heading(o);break}case"code":{e+=this.renderer.code(o);break}case"table":{e+=this.renderer.table(o);break}case"blockquote":{e+=this.renderer.blockquote(o);break}case"list":{e+=this.renderer.list(o);break}case"checkbox":{e+=this.renderer.checkbox(o);break}case"html":{e+=this.renderer.html(o);break}case"def":{e+=this.renderer.def(o);break}case"paragraph":{e+=this.renderer.paragraph(o);break}case"text":{e+=this.renderer.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return e}parseInline(t,e=this.renderer){let r="";for(let i=0;i<t.length;i++){let o=t[i];if(this.options.extensions?.renderers?.[o.type]){let c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){r+=c||"";continue}}let a=o;switch(a.type){case"escape":{r+=e.text(a);break}case"html":{r+=e.html(a);break}case"link":{r+=e.link(a);break}case"image":{r+=e.image(a);break}case"checkbox":{r+=e.checkbox(a);break}case"strong":{r+=e.strong(a);break}case"em":{r+=e.em(a);break}case"codespan":{r+=e.codespan(a);break}case"br":{r+=e.br(a);break}case"del":{r+=e.del(a);break}case"text":{r+=e.text(a);break}default:{let c='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}},ql=class{options;block;constructor(n){this.options=n||cs}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(n){return n}postprocess(n){return n}processAllTokens(n){return n}emStrongMask(n){return n}provideLexer(){return this.block?Dn.lex:Dn.lexInline}provideParser(){return this.block?Bn.parse:Bn.parseInline}},nj=class{defaults=Dg();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Bn;Renderer=hf;TextRenderer=Ug;Lexer=Dn;Tokenizer=df;Hooks=ql;constructor(...n){this.use(...n)}walkTokens(n,t){let e=[];for(let r of n)switch(e=e.concat(t.call(this,r)),r.type){case"table":{let i=r;for(let o of i.header)e=e.concat(this.walkTokens(o.tokens,t));for(let o of i.rows)for(let a of o)e=e.concat(this.walkTokens(a.tokens,t));break}case"list":{let i=r;e=e.concat(this.walkTokens(i.items,t));break}default:{let i=r;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(o=>{let a=i[o].flat(1/0);e=e.concat(this.walkTokens(a,t))}):i.tokens&&(e=e.concat(this.walkTokens(i.tokens,t)))}}return e}use(...n){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return n.forEach(e=>{let r={...e};if(r.async=this.defaults.async||r.async||!1,e.extensions&&(e.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let o=t.renderers[i.name];o?t.renderers[i.name]=function(...a){let c=i.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[i.level];o?o.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),r.extensions=t),e.renderer){let i=this.defaults.renderer||new hf(this.defaults);for(let o in e.renderer){if(!(o in i))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,c=e.renderer[a],f=i[a];i[a]=(...h)=>{let p=c.apply(i,h);return p===!1&&(p=f.apply(i,h)),p||""}}r.renderer=i}if(e.tokenizer){let i=this.defaults.tokenizer||new df(this.defaults);for(let o in e.tokenizer){if(!(o in i))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=e.tokenizer[a],f=i[a];i[a]=(...h)=>{let p=c.apply(i,h);return p===!1&&(p=f.apply(i,h)),p}}r.tokenizer=i}if(e.hooks){let i=this.defaults.hooks||new ql;for(let o in e.hooks){if(!(o in i))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,c=e.hooks[a],f=i[a];ql.passThroughHooks.has(o)?i[a]=h=>{if(this.defaults.async&&ql.passThroughHooksRespectAsync.has(o))return(async()=>{let g=await c.call(i,h);return f.call(i,g)})();let p=c.call(i,h);return f.call(i,p)}:i[a]=(...h)=>{if(this.defaults.async)return(async()=>{let g=await c.apply(i,h);return g===!1&&(g=await f.apply(i,h)),g})();let p=c.apply(i,h);return p===!1&&(p=f.apply(i,h)),p}}r.hooks=i}if(e.walkTokens){let i=this.defaults.walkTokens,o=e.walkTokens;r.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),i&&(c=c.concat(i.call(this,a))),c}}this.defaults={...this.defaults,...r}}),this}setOptions(n){return this.defaults={...this.defaults,...n},this}lexer(n,t){return Dn.lex(n,t??this.defaults)}parser(n,t){return Bn.parse(n,t??this.defaults)}parseMarkdown(n){return(t,e)=>{let r={...e},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof t>"u"||t===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof t!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=n),i.async)return(async()=>{let a=i.hooks?await i.hooks.preprocess(t):t,c=await(i.hooks?await i.hooks.provideLexer():n?Dn.lex:Dn.lexInline)(a,i),f=i.hooks?await i.hooks.processAllTokens(c):c;i.walkTokens&&await Promise.all(this.walkTokens(f,i.walkTokens));let h=await(i.hooks?await i.hooks.provideParser():n?Bn.parse:Bn.parseInline)(f,i);return i.hooks?await i.hooks.postprocess(h):h})().catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let a=(i.hooks?i.hooks.provideLexer():n?Dn.lex:Dn.lexInline)(t,i);i.hooks&&(a=i.hooks.processAllTokens(a)),i.walkTokens&&this.walkTokens(a,i.walkTokens);let c=(i.hooks?i.hooks.provideParser():n?Bn.parse:Bn.parseInline)(a,i);return i.hooks&&(c=i.hooks.postprocess(c)),c}catch(a){return o(a)}}}onError(n,t){return e=>{if(e.message+=`
Please report this to https://github.com/markedjs/marked.`,n){let r="<p>An error occurred:</p><pre>"+yr(e.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(e);throw e}}},ss=new nj;function Nt(n,t){return ss.parse(n,t)}Nt.options=Nt.setOptions=function(n){return ss.setOptions(n),Nt.defaults=ss.defaults,GM(Nt.defaults),Nt};Nt.getDefaults=Dg;Nt.defaults=cs;Nt.use=function(...n){return ss.use(...n),Nt.defaults=ss.defaults,GM(Nt.defaults),Nt};Nt.walkTokens=function(n,t){return ss.walkTokens(n,t)};Nt.parseInline=ss.parseInline;Nt.Parser=Bn;Nt.parser=Bn.parse;Nt.Renderer=hf;Nt.TextRenderer=Ug;Nt.Lexer=Dn;Nt.lexer=Dn.lex;Nt.Tokenizer=df;Nt.Hooks=ql;Nt.parse=Nt;Nt.options;Nt.setOptions;Nt.use;Nt.walkTokens;Nt.parseInline;Bn.parse;Dn.lex;function rj(n,t){const r=t.split(`
`).flatMap(i=>[i,""]).map(i=>`${n}${i}`).join(`
`);return r.slice(0,r.length-1)}function ij(n,t){const e=[];return Array.from(n.keys()).forEach(r=>{(!t||!t.marks||!t.marks.map(i=>i.type).includes(r))&&e.push(r)}),e}function sj(n,t){const e=[];return Array.from(t.entries()).forEach(([r,i])=>{n.has(r)||e.push({type:r,mark:i})}),e}function oj(n,t,e,r){const i=!e,o=e&&e.type==="text"&&(!e.marks||e.marks.length===0),a=e&&e.type==="text"&&e.marks&&!r(t,new Map(e.marks.map(f=>[f.type,f]))),c=[];if(i||o||a)if(e&&e.type==="text"&&e.marks){const f=new Map(e.marks.map(h=>[h.type,h]));Array.from(n.keys()).forEach(h=>{f.has(h)||c.push(h)})}else(i||o)&&c.push(...Array.from(n.keys()));return c}function lj(n,t){let e="";return Array.from(n.keys()).reverse().forEach(r=>{const i=n.get(r),o=t(r,i);o&&(e=o+e)}),n.clear(),e}function aj(n,t,e){let r="";return Array.from(n.entries()).forEach(([i,o])=>{const a=e(i,o);a&&(r+=a),t.set(i,o)}),r}function Pp(n){const e=(n.raw||n.text||"").match(/^(\s*)[-+*]\s+\[([ xX])\]\s+/);return e?{isTask:!0,checked:e[2].toLowerCase()==="x",indentLevel:e[1].length}:{isTask:!1,indentLevel:0}}function ru(n,t){return typeof n!="string"?"json":t}var cj=class{constructor(n){this.baseExtensions=[],this.extensions=[],this.lastParseResult=null;var t,e,r,i,o;this.markedInstance=(t=n?.marked)!=null?t:Nt,this.lexer=new this.markedInstance.Lexer,this.indentStyle=(r=(e=n?.indentation)==null?void 0:e.style)!=null?r:"space",this.indentSize=(o=(i=n?.indentation)==null?void 0:i.size)!=null?o:2,this.baseExtensions=n?.extensions||[],n?.markedOptions&&typeof this.markedInstance.setOptions=="function"&&this.markedInstance.setOptions(n.markedOptions),this.registry=new Map,this.nodeTypeRegistry=new Map,n?.extensions&&(this.baseExtensions=n.extensions,Og(n.extensions).forEach(c=>this.registerExtension(c,!1))),this.lexer=new this.markedInstance.Lexer}get instance(){return this.markedInstance}get indentCharacter(){return this.indentStyle==="space"?" ":"	"}get indentString(){return this.indentCharacter.repeat(this.indentSize)}hasMarked(){return!!this.markedInstance}registerExtension(n,t=!0){var e,r;this.extensions.push(n);const i=n.name,o=gt(n,"markdownTokenName")||i,a=gt(n,"parseMarkdown"),c=gt(n,"renderMarkdown"),f=gt(n,"markdownTokenizer"),h=(e=gt(n,"markdownOptions"))!=null?e:null,p=(r=h?.indentsContent)!=null?r:!1,g={tokenName:o,nodeName:i,parseMarkdown:a,renderMarkdown:c,isIndenting:p,tokenizer:f};if(o&&a){const y=this.registry.get(o)||[];y.push(g),this.registry.set(o,y)}if(c){const y=this.nodeTypeRegistry.get(i)||[];y.push(g),this.nodeTypeRegistry.set(i,y)}f&&this.hasMarked()&&(this.registerTokenizer(f),t&&(this.lexer=new this.markedInstance.Lexer))}registerTokenizer(n){if(!this.hasMarked())return;const{name:t,start:e,level:r="inline",tokenize:i}=n,c={inlineTokens:p=>this.lexer.inlineTokens(p),blockTokens:p=>this.lexer.blockTokens(p)};let f;e?f=typeof e=="function"?e:p=>p.indexOf(e):f=p=>{const g=i(p,[],c);return g&&g.raw?p.indexOf(g.raw):-1};const h={name:t,level:r,start:f,tokenizer:(p,g)=>{const y=i(p,g,c);if(y&&y.type)return{...y,type:y.type||t,raw:y.raw||"",tokens:y.tokens||[]}},childTokens:[]};this.markedInstance.use({extensions:[h]})}getHandlersForToken(n){try{return this.registry.get(n)||[]}catch{return[]}}getHandlerForToken(n){const t=this.getHandlersForToken(n);if(t.length>0)return t[0];const e=this.getHandlersForNodeType(n);return e.length>0?e[0]:void 0}getHandlersForNodeType(n){try{return this.nodeTypeRegistry.get(n)||[]}catch{return[]}}serialize(n){return n?Array.isArray(n)?this.renderNodes(n,n):this.renderNodes(n,n):""}parse(n){if(!this.hasMarked())throw new Error("No marked instance available for parsing");const t=this.markedInstance.lexer(n);return{type:"doc",content:this.parseTokens(t)}}parseTokens(n){return n.map(t=>this.parseToken(t)).filter(t=>t!==null).flatMap(t=>Array.isArray(t)?t:[t])}parseToken(n){if(!n.type)return null;if(n.type==="list")return this.parseListToken(n);const t=this.getHandlersForToken(n.type),e=this.createParseHelpers();if(t.find(i=>{if(!i.parseMarkdown)return!1;const o=i.parseMarkdown(n,e),a=this.normalizeParseResult(o);return a&&(!Array.isArray(a)||a.length>0)?(this.lastParseResult=a,!0):!1})&&this.lastParseResult){const i=this.lastParseResult;return this.lastParseResult=null,i}return this.parseFallbackToken(n)}parseListToken(n){if(!n.items||n.items.length===0)return this.parseTokenWithHandlers(n);const t=n.items.some(c=>Pp(c).isTask),e=n.items.some(c=>!Pp(c).isTask);if(!t||!e||this.getHandlersForToken("taskList").length===0)return this.parseTokenWithHandlers(n);const r=[];let i=[],o=null;for(let c=0;c<n.items.length;c+=1){const f=n.items[c],{isTask:h,checked:p,indentLevel:g}=Pp(f);let y=f;if(h){const x=(f.raw||f.text||"").split(`
`),S=x[0].match(/^\s*[-+*]\s+\[([ xX])\]\s+(.*)$/),T=S?S[2]:"";let D=[];if(x.length>1&&x.slice(1).join(`
`).trim()){const V=x.slice(1),L=V.filter(I=>I.trim());if(L.length>0){const I=Math.min(...L.map(nt=>nt.length-nt.trimStart().length)),Y=V.map(nt=>nt.trim()?nt.slice(I):"").join(`
`).trim();Y&&(D=this.markedInstance.lexer(`${Y}
`))}}y={type:"taskItem",raw:"",mainContent:T,indentLevel:g,checked:p??!1,text:T,tokens:this.lexer.inlineTokens(T),nestedTokens:D}}const b=h?"taskList":"list";o!==b?(i.length>0&&r.push({type:o,items:i}),i=[y],o=b):i.push(y)}i.length>0&&r.push({type:o,items:i});const a=[];for(let c=0;c<r.length;c+=1){const f=r[c],h={...n,type:f.type,items:f.items},p=this.parseToken(h);p&&(Array.isArray(p)?a.push(...p):a.push(p))}return a.length>0?a:null}parseTokenWithHandlers(n){if(!n.type)return null;const t=this.getHandlersForToken(n.type),e=this.createParseHelpers();if(t.find(i=>{if(!i.parseMarkdown)return!1;const o=i.parseMarkdown(n,e),a=this.normalizeParseResult(o);return a&&(!Array.isArray(a)||a.length>0)?(this.lastParseResult=a,!0):!1})&&this.lastParseResult){const i=this.lastParseResult;return this.lastParseResult=null,i}return this.parseFallbackToken(n)}createParseHelpers(){return{parseInline:n=>this.parseInlineTokens(n),parseChildren:n=>this.parseTokens(n),createTextNode:(n,t)=>({type:"text",text:n,marks:t||void 0}),createNode:(n,t,e)=>{const r={type:n,attrs:t||void 0,content:e||void 0};return(!t||Object.keys(t).length===0)&&delete r.attrs,r},applyMark:(n,t,e)=>({mark:n,content:t,attrs:e&&Object.keys(e).length>0?e:void 0})}}escapeRegex(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}parseInlineTokens(n){var t,e,r,i;const o=[];for(let a=0;a<n.length;a+=1){const c=n[a];if(c.type==="text")o.push({type:"text",text:c.text||""});else if(c.type==="html"){const f=((e=(t=c.raw)!=null?t:c.text)!=null?e:"").toString(),h=/^<\/[\s]*[\w-]+/i.test(f),p=f.match(/^<[\s]*([\w-]+)(\s|>|\/|$)/i);if(!h&&p&&!/\/>$/.test(f)){const y=p[1],b=this.escapeRegex(y),k=new RegExp(`^<\\/\\s*${b}\\b`,"i");let x=-1;const S=[f];for(let T=a+1;T<n.length;T+=1){const D=n[T],H=((i=(r=D.raw)!=null?r:D.text)!=null?i:"").toString();if(S.push(H),D.type==="html"&&k.test(H)){x=T;break}}if(x!==-1){const T=S.join(""),D={type:"html",raw:T,text:T,block:!1},H=this.parseHTMLToken(D);if(H){const V=this.normalizeParseResult(H);Array.isArray(V)?o.push(...V):V&&o.push(V)}a=x;continue}}const g=this.parseHTMLToken(c);if(g){const y=this.normalizeParseResult(g);Array.isArray(y)?o.push(...y):y&&o.push(y)}}else if(c.type){const f=this.getHandlerForToken(c.type);if(f&&f.parseMarkdown){const h=this.createParseHelpers(),p=f.parseMarkdown(c,h);if(this.isMarkResult(p)){const g=this.applyMarkToContent(p.mark,p.content,p.attrs);o.push(...g)}else{const g=this.normalizeParseResult(p);Array.isArray(g)?o.push(...g):g&&o.push(g)}}else c.tokens&&o.push(...this.parseInlineTokens(c.tokens))}}return o}applyMarkToContent(n,t,e){return t.map(r=>{if(r.type==="text"){const i=r.marks||[],o=e?{type:n,attrs:e}:{type:n};return{...r,marks:[...i,o]}}return{...r,content:r.content?this.applyMarkToContent(n,r.content,e):void 0}})}isMarkResult(n){return n&&typeof n=="object"&&"mark"in n}normalizeParseResult(n){return n?this.isMarkResult(n)?n.content:n:null}parseFallbackToken(n){switch(n.type){case"paragraph":return{type:"paragraph",content:n.tokens?this.parseInlineTokens(n.tokens):[]};case"heading":return{type:"heading",attrs:{level:n.depth||1},content:n.tokens?this.parseInlineTokens(n.tokens):[]};case"text":return{type:"text",text:n.text||""};case"html":return this.parseHTMLToken(n);case"space":return null;default:return n.tokens?this.parseTokens(n.tokens):null}}parseHTMLToken(n){const t=n.text||n.raw||"";if(!t.trim())return null;if(typeof window>"u")return n.block?{type:"paragraph",content:[{type:"text",text:t}]}:{type:"text",text:t};try{const e=c$(t,this.baseExtensions);return e.type==="doc"&&e.content?n.block?e.content:e.content.length===1&&e.content[0].type==="paragraph"&&e.content[0].content?e.content[0].content:e.content:e}catch(e){throw new Error(`Failed to parse HTML in markdown: ${e}`)}}renderNodeToMarkdown(n,t,e=0,r=0){var i;if(n.type==="text")return n.text||"";if(!n.type)return"";const o=this.getHandlerForToken(n.type);if(!o)return"";const a={renderChildren:(h,p)=>{const g=o.isIndenting?r+1:r;return!Array.isArray(h)&&h.content?this.renderNodes(h.content,n,p||"",e,g):this.renderNodes(h,n,p||"",e,g)},indent:h=>this.indentString+h,wrapInBlock:rj},c={index:e,level:r,parentType:t?.type,meta:{parentAttrs:t?.attrs}};return((i=o.renderMarkdown)==null?void 0:i.call(o,n,a,c))||""}renderNodes(n,t,e="",r=0,i=0){return Array.isArray(n)?this.renderNodesWithMarkBoundaries(n,t,e,i):n.type?this.renderNodeToMarkdown(n,t,r,i):""}renderNodesWithMarkBoundaries(n,t,e="",r=0){const i=[],o=new Map;return n.forEach((a,c)=>{const f=c<n.length-1?n[c+1]:null;if(a.type)if(a.type==="text"){let h=a.text||"";const p=new Map((a.marks||[]).map(T=>[T.type,T])),g=sj(o,p),y=ij(p,f);let b="";if(y.length>0){const T=h.match(/(\s+)$/);T&&(b=T[1],h=h.slice(0,-b.length))}y.forEach(T=>{const D=p.get(T),H=this.getMarkClosing(T,D);H&&(h+=H),o.has(T)&&o.delete(T)});let k="";if(g.length>0){const T=h.match(/^(\s+)/);T&&(k=T[1],h=h.slice(k.length))}g.forEach(({type:T,mark:D})=>{const H=this.getMarkOpening(T,D);H&&(h=H+h),y.includes(T)||o.set(T,D)}),h=k+h;const x=oj(o,p,f,this.markSetsEqual.bind(this));let S="";if(x.length>0){const T=h.match(/(\s+)$/);T&&(S=T[1],h=h.slice(0,-S.length))}x.forEach(T=>{const D=o.get(T),H=this.getMarkClosing(T,D);H&&(h+=H),o.delete(T)}),h+=S,h+=b,i.push(h)}else{const h=new Map(o),p=lj(o,this.getMarkClosing.bind(this)),g=this.renderNodeToMarkdown(a,t,c,r),y=a.type==="hardBreak"?"":aj(h,o,this.getMarkOpening.bind(this));i.push(p+g+y)}}),i.join(e)}getMarkOpening(n,t){const e=this.getHandlersForNodeType(n),r=e.length>0?e[0]:void 0;if(!r||!r.renderMarkdown)return"";const i="__TIPTAP_MARKDOWN_PLACEHOLDER__",o={type:n,attrs:t.attrs||{},content:[{type:"text",text:i}]};try{const a=r.renderMarkdown(o,{renderChildren:()=>i,indent:f=>f,wrapInBlock:(f,h)=>f+h},{index:0,level:0,parentType:"text",meta:{}}),c=a.indexOf(i);return c>=0?a.substring(0,c):""}catch(a){throw new Error(`Failed to get mark opening for ${n}: ${a}`)}}getMarkClosing(n,t){const e=this.getHandlersForNodeType(n),r=e.length>0?e[0]:void 0;if(!r||!r.renderMarkdown)return"";const i="__TIPTAP_MARKDOWN_PLACEHOLDER__",o={type:n,attrs:t.attrs||{},content:[{type:"text",text:i}]};try{const a=r.renderMarkdown(o,{renderChildren:()=>i,indent:h=>h,wrapInBlock:(h,p)=>h+p},{index:0,level:0,parentType:"text",meta:{}}),c=a.indexOf(i),f=c+i.length;return c>=0?a.substring(f):""}catch(a){throw new Error(`Failed to get mark closing for ${n}: ${a}`)}}markSetsEqual(n,t){return n.size!==t.size?!1:Array.from(n.keys()).every(e=>t.has(e))}},ew=cj,uj=_n.create({name:"markdown",addOptions(){return{indentation:{style:"space",size:2},marked:void 0,markedOptions:{}}},addCommands(){return{setContent:(n,t)=>{if(!t?.contentType||ru(n,t?.contentType)!=="markdown"||!this.editor.markdown)return zn.setContent(n,t);const r=this.editor.markdown.parse(n);return zn.setContent(r,t)},insertContent:(n,t)=>{if(!t?.contentType||ru(n,t?.contentType)!=="markdown"||!this.editor.markdown)return zn.insertContent(n,t);const r=this.editor.markdown.parse(n);return zn.insertContent(r,t)},insertContentAt:(n,t,e)=>{if(!e?.contentType||ru(t,e?.contentType)!=="markdown"||!this.editor.markdown)return zn.insertContentAt(n,t,e);const i=this.editor.markdown.parse(t);return zn.insertContentAt(n,i,e)}}},addStorage(){return{manager:new ew({indentation:this.options.indentation,marked:this.options.marked,markedOptions:this.options.markedOptions,extensions:[]})}},onBeforeCreate(){if(this.editor.markdown){console.error("[tiptap][markdown]: There is already a `markdown` property on the editor instance. This might lead to unexpected behavior.");return}if(this.storage.manager=new ew({indentation:this.options.indentation,marked:this.options.marked,markedOptions:this.options.markedOptions,extensions:this.editor.extensionManager.baseExtensions}),this.editor.markdown=this.storage.manager,this.editor.getMarkdown=()=>this.storage.manager.serialize(this.editor.getJSON()),!this.editor.options.contentType||ru(this.editor.options.content,this.editor.options.contentType)!=="markdown")return;if(!this.editor.markdown)throw new Error('[tiptap][markdown]: The `contentType` option is set to "markdown", but the Markdown extension is not added to the editor. Please add the Markdown extension to use this feature.');if(this.editor.options.content===void 0||typeof this.editor.options.content!="string")throw new Error('[tiptap][markdown]: The `contentType` option is set to "markdown", but the initial content is not a string. Please provide the initial content as a markdown string.');const t=this.editor.markdown.parse(this.editor.options.content);this.editor.options.content=t}});class fj{subscriptions={};onMessage(t,e){this.subscriptions[t]?.forEach(r=>r(e))}sendAsyncMessage(t,e){const r=Math.random().toString(36).substring(7);return t.payload=t.payload||{},t.payload.messageId=r,new Promise(i=>{this.subscriptions[r]||(this.subscriptions[r]=[]),this.subscriptions[r].push(i),e(t)})}}const nw=new fj,dj=new Ft({forceName:"markdown",onBridgeMessage:(n,t,e)=>{if(t.type==="get-markdown"){let r="";try{r=n.getMarkdown()}catch(i){console.error("[MarkdownBridge] getMarkdown() failed:",i)}return e({type:"send-markdown-back",payload:{content:r,messageId:t.payload.messageId}}),!0}return t.type==="set-markdown"?(n.commands.setContent(t.payload,{contentType:"markdown"}),!0):!1},onEditorMessage:(n,t)=>n.type==="send-markdown-back"?(nw.onMessage(n.payload.messageId,n.payload.content),!0):!1,extendEditorInstance:n=>({getMarkdown:()=>nw.sendAsyncMessage({type:"get-markdown"},n),setMarkdown:t=>{n({type:"set-markdown",payload:t})}}),extendEditorState:()=>({})}),hj=()=>{const n=LB({bridges:[...G4,dj],tiptapOptions:{extensions:[uj]}});return fe.jsx(qM,{editor:n,className:window.dynamicHeight?"dynamic-height":void 0})};let rw;rw=setInterval(()=>{if(!window.contentInjected)return;const n=document.getElementById("root");BC.createRoot(n).render(fe.jsx(hj,{})),clearInterval(rw)},1);</script>
  </head>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    #root > div:nth-of-type(1) {
      position: absolute;
      height: 100%;
      overflow: auto;
      width: 100%;
      top: 0;
      bottom: 0;
    }
    #root > div.dynamic-height {
      height: unset;
    }
    #root div .ProseMirror {
      min-height: 100%;
      overflow: visible;
      padding: 12px 16px;
      font-size: 16px;
      line-height: 1.6;
    }
    #root div.dynamic-height .ProseMirror {
      height: unset;
    }
    .ProseMirror:focus {
      outline: none;
    }
    .ProseMirror h1, .ProseMirror h2, .ProseMirror h3 {
      margin-top: 0.8em;
      margin-bottom: 0.4em;
    }
    .ProseMirror p {
      margin: 0.4em 0;
    }
    .ProseMirror ul, .ProseMirror ol {
      padding-left: 1.5em;
    }
    .ProseMirror blockquote {
      border-left: 3px solid #ddd;
      padding-left: 1em;
      margin-left: 0;
      color: #666;
    }
    .ProseMirror code {
      background: #f0f0f0;
      border-radius: 3px;
      padding: 0.15em 0.3em;
      font-size: 0.9em;
    }
    .ProseMirror pre {
      background: #f5f5f5;
      border-radius: 6px;
      padding: 12px;
      overflow-x: auto;
    }
    .ProseMirror pre code {
      background: none;
      padding: 0;
    }
  </style>
  <body>
    <div id="root"></div>
  </body>
</html>